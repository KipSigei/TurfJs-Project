!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="/",e(0)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var n=e.slice(1),r=t[e[0]];return function(t,e,o){r.apply(this,[t,e,o].concat(n))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=n(84),i=r(o),s=n(98),a=r(s),u=n(99),l=r(u);n(105),n(102),n(106),n(101),n(100),a.default.render(i.default.createElement(l.default,null),document.getElementById("map"))},function(t,e,n){"use strict";function r(t,e,n,r,o,i,s,a){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,o,i,s,a],c=0;u=new Error(e.replace(/%s/g,function(){return l[c++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}t.exports=r},function(t,e){"use strict";function n(t){for(var e=arguments.length-1,n="Minified React error #"+t+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var o=new Error(n);throw o.name="Invariant Violation",o.framesToPop=1,o}t.exports=n},function(t,e,n){"use strict";var r=n(8),o=r;t.exports=o},function(t,e){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function r(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==r.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(t){o[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(i){return!1}}var o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;t.exports=r()?Object.assign:function(t,e){for(var r,s,a=n(t),u=1;u<arguments.length;u++){r=Object(arguments[u]);for(var l in r)o.call(r,l)&&(a[l]=r[l]);if(Object.getOwnPropertySymbols){s=Object.getOwnPropertySymbols(r);for(var c=0;c<s.length;c++)i.call(r,s[c])&&(a[s[c]]=r[s[c]])}}return a}},function(t,e,n){"use strict";function r(t){for(var e;e=t._renderedComponent;)t=e;return t}function o(t,e){var n=r(t);n._hostNode=e,e[g]=n}function i(t){var e=t._hostNode;e&&(delete e[g],t._hostNode=null)}function s(t,e){if(!(t._flags&f.hasCachedChildNodes)){var n=t._renderedChildren,i=e.firstChild;t:for(var s in n)if(n.hasOwnProperty(s)){var a=n[s],u=r(a)._domID;if(null!=u){for(;null!==i;i=i.nextSibling)if(1===i.nodeType&&i.getAttribute(d)===String(u)||8===i.nodeType&&i.nodeValue===" react-text: "+u+" "||8===i.nodeType&&i.nodeValue===" react-empty: "+u+" "){o(a,i);continue t}c("32",u)}}t._flags|=f.hasCachedChildNodes}}function a(t){if(t[g])return t[g];for(var e=[];!t[g];){if(e.push(t),!t.parentNode)return null;t=t.parentNode}for(var n,r;t&&(r=t[g]);t=e.pop())n=r,e.length&&s(r,t);return n}function u(t){var e=a(t);return null!=e&&e._hostNode===t?e:null}function l(t){if(void 0===t._hostNode?c("33"):void 0,t._hostNode)return t._hostNode;for(var e=[];!t._hostNode;)e.push(t),t._hostParent?void 0:c("34"),t=t._hostParent;for(;e.length;t=e.pop())s(t,t._hostNode);return t._hostNode}var c=n(2),p=n(17),h=n(62),d=(n(1),p.ID_ATTRIBUTE_NAME),f=h,g="__reactInternalInstance$"+Math.random().toString(36).slice(2),m={getClosestInstanceFromNode:a,getInstanceFromNode:u,getNodeFromInstance:l,precacheChildNodes:s,precacheNode:o,uncacheNode:i};t.exports=m},function(t,e){"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement),r={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};t.exports=r},function(t,e,n){"use strict";var r=null;t.exports={debugTool:r}},function(t,e){"use strict";function n(t){return function(){return t}}var r=function(){};r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(t){return t},t.exports=r},function(t,e,n){"use strict";function r(t){return void 0!==t.ref}function o(t){return void 0!==t.key}var i=n(4),s=n(15),a=(n(3),n(76),Object.prototype.hasOwnProperty),u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,l={key:!0,ref:!0,__self:!0,__source:!0},c=function(t,e,n,r,o,i,s){var a={$$typeof:u,type:t,key:e,ref:n,props:s,_owner:i};return a};c.createElement=function(t,e,n){var i,u={},p=null,h=null,d=null,f=null;if(null!=e){r(e)&&(h=e.ref),o(e)&&(p=""+e.key),d=void 0===e.__self?null:e.__self,f=void 0===e.__source?null:e.__source;for(i in e)a.call(e,i)&&!l.hasOwnProperty(i)&&(u[i]=e[i])}var g=arguments.length-2;if(1===g)u.children=n;else if(g>1){for(var m=Array(g),y=0;y<g;y++)m[y]=arguments[y+2];u.children=m}if(t&&t.defaultProps){var v=t.defaultProps;for(i in v)void 0===u[i]&&(u[i]=v[i])}return c(t,p,h,d,f,s.current,u)},c.createFactory=function(t){var e=c.createElement.bind(null,t);return e.type=t,e},c.cloneAndReplaceKey=function(t,e){var n=c(t.type,e,t.ref,t._self,t._source,t._owner,t.props);return n},c.cloneElement=function(t,e,n){var u,p=i({},t.props),h=t.key,d=t.ref,f=t._self,g=t._source,m=t._owner;if(null!=e){r(e)&&(d=e.ref,m=s.current),o(e)&&(h=""+e.key);var y;t.type&&t.type.defaultProps&&(y=t.type.defaultProps);for(u in e)a.call(e,u)&&!l.hasOwnProperty(u)&&(void 0===e[u]&&void 0!==y?p[u]=y[u]:p[u]=e[u])}var v=arguments.length-2;if(1===v)p.children=n;else if(v>1){for(var x=Array(v),b=0;b<v;b++)x[b]=arguments[b+2];p.children=x}return c(t.type,h,d,f,g,m,p)},c.isValidElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===u},c.REACT_ELEMENT_TYPE=u,t.exports=c},function(t,e,n){"use strict";function r(){M.ReactReconcileTransaction&&j?void 0:c("123")}function o(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=h.getPooled(),this.reconcileTransaction=M.ReactReconcileTransaction.getPooled(!0)}function i(t,e,n,o,i,s){r(),j.batchedUpdates(t,e,n,o,i,s)}function s(t,e){return t._mountOrder-e._mountOrder}function a(t){var e=t.dirtyComponentsLength;e!==y.length?c("124",e,y.length):void 0,y.sort(s),v++;for(var n=0;n<e;n++){var r=y[n],o=r._pendingCallbacks;r._pendingCallbacks=null;var i;if(f.logTopLevelRenders){var a=r;r._currentElement.props===r._renderedComponent._currentElement&&(a=r._renderedComponent),i="React update: "+a.getName(),console.time(i)}if(g.performUpdateIfNecessary(r,t.reconcileTransaction,v),i&&console.timeEnd(i),o)for(var u=0;u<o.length;u++)t.callbackQueue.enqueue(o[u],r.getPublicInstance())}}function u(t){return r(),j.isBatchingUpdates?(y.push(t),void(null==t._updateBatchNumber&&(t._updateBatchNumber=v+1))):void j.batchedUpdates(u,t)}function l(t,e){j.isBatchingUpdates?void 0:c("125"),x.enqueue(t,e),b=!0}var c=n(2),p=n(4),h=n(56),d=n(14),f=n(65),g=n(18),m=n(23),y=(n(1),[]),v=0,x=h.getPooled(),b=!1,j=null,_={initialize:function(){this.dirtyComponentsLength=y.length},close:function(){this.dirtyComponentsLength!==y.length?(y.splice(0,this.dirtyComponentsLength),S()):y.length=0}},E={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},w=[_,E];p(o.prototype,m.Mixin,{getTransactionWrappers:function(){return w},destructor:function(){this.dirtyComponentsLength=null,h.release(this.callbackQueue),this.callbackQueue=null,M.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(t,e,n){return m.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,t,e,n)}}),d.addPoolingTo(o);var S=function(){for(;y.length||b;){if(y.length){var t=o.getPooled();t.perform(a,null,t),o.release(t)}if(b){b=!1;var e=x;x=h.getPooled(),e.notifyAll(),h.release(e)}}},I={injectReconcileTransaction:function(t){t?void 0:c("126"),M.ReactReconcileTransaction=t},injectBatchingStrategy:function(t){t?void 0:c("127"),"function"!=typeof t.batchedUpdates?c("128"):void 0,"boolean"!=typeof t.isBatchingUpdates?c("129"):void 0,j=t}},M={ReactReconcileTransaction:null,batchedUpdates:i,enqueueUpdate:u,flushBatchedUpdates:S,injection:I,asap:l};t.exports=M},function(t,e,n){"use strict";var r=n(25),o=r({bubbled:null,captured:null}),i=r({topAbort:null,topAnimationEnd:null,topAnimationIteration:null,topAnimationStart:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topInvalid:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topTransitionEnd:null,topVolumeChange:null,topWaiting:null,topWheel:null}),s={topLevelTypes:i,PropagationPhases:o};t.exports=s},function(t,e,n){"use strict";function r(t,e,n,r){this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n;var o=this.constructor.Interface;for(var i in o)if(o.hasOwnProperty(i)){var a=o[i];a?this[i]=a(n):"target"===i?this.target=r:this[i]=n[i]}var u=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;return u?this.isDefaultPrevented=s.thatReturnsTrue:this.isDefaultPrevented=s.thatReturnsFalse,this.isPropagationStopped=s.thatReturnsFalse,this}var o=n(4),i=n(14),s=n(8),a=(n(3),"function"==typeof Proxy,["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),u={type:null,target:null,currentTarget:s.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};o(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():t.returnValue=!1,this.isDefaultPrevented=s.thatReturnsTrue)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this.isPropagationStopped=s.thatReturnsTrue)},persist:function(){this.isPersistent=s.thatReturnsTrue},isPersistent:s.thatReturnsFalse,destructor:function(){var t=this.constructor.Interface;for(var e in t)this[e]=null;for(var n=0;n<a.length;n++)this[a[n]]=null}}),r.Interface=u,r.augmentClass=function(t,e){var n=this,r=function(){};r.prototype=n.prototype;var s=new r;o(s,t.prototype),t.prototype=s,t.prototype.constructor=t,t.Interface=o({},n.Interface,e),t.augmentClass=n.augmentClass,i.addPoolingTo(t,i.fourArgumentPooler)},i.addPoolingTo(r,i.fourArgumentPooler),t.exports=r},function(t,e){"use strict";var n=function(t){var e;for(e in t)if(t.hasOwnProperty(e))return e;return null};t.exports=n},function(t,e,n){"use strict";var r=n(2),o=(n(1),function(t){var e=this;if(e.instancePool.length){var n=e.instancePool.pop();return e.call(n,t),n}return new e(t)}),i=function(t,e){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,t,e),r}return new n(t,e)},s=function(t,e,n){var r=this;if(r.instancePool.length){var o=r.instancePool.pop();return r.call(o,t,e,n),o}return new r(t,e,n)},a=function(t,e,n,r){var o=this;if(o.instancePool.length){var i=o.instancePool.pop();return o.call(i,t,e,n,r),i}return new o(t,e,n,r)},u=function(t,e,n,r,o){var i=this;if(i.instancePool.length){var s=i.instancePool.pop();return i.call(s,t,e,n,r,o),s}return new i(t,e,n,r,o)},l=function(t){var e=this;t instanceof e?void 0:r("25"),t.destructor(),e.instancePool.length<e.poolSize&&e.instancePool.push(t)},c=10,p=o,h=function(t,e){var n=t;return n.instancePool=[],n.getPooled=e||p,n.poolSize||(n.poolSize=c),n.release=l,n},d={addPoolingTo:h,oneArgumentPooler:o,twoArgumentPooler:i,threeArgumentPooler:s,fourArgumentPooler:a,fiveArgumentPooler:u};t.exports=d},function(t,e){"use strict";var n={current:null};t.exports=n},function(t,e,n){"use strict";function r(t){if(m){var e=t.node,n=t.children;if(n.length)for(var r=0;r<n.length;r++)y(e,n[r],null);else null!=t.html?p(e,t.html):null!=t.text&&d(e,t.text)}}function o(t,e){t.parentNode.replaceChild(e.node,t),r(e)}function i(t,e){m?t.children.push(e):t.node.appendChild(e.node)}function s(t,e){m?t.html=e:p(t.node,e)}function a(t,e){m?t.text=e:d(t.node,e)}function u(){return this.node.nodeName}function l(t){return{node:t,children:[],html:null,text:null,toString:u}}var c=n(32),p=n(30),h=n(42),d=n(83),f=1,g=11,m="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),y=h(function(t,e,n){e.node.nodeType===g||e.node.nodeType===f&&"object"===e.node.nodeName.toLowerCase()&&(null==e.node.namespaceURI||e.node.namespaceURI===c.html)?(r(e),t.insertBefore(e.node,n)):(t.insertBefore(e.node,n),r(e))});l.insertTreeBefore=y,l.replaceChildWithTree=o,l.queueChild=i,l.queueHTML=s,l.queueText=a,t.exports=l},function(t,e,n){"use strict";function r(t,e){return(t&e)===e}var o=n(2),i=(n(1),{MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(t){var e=i,n=t.Properties||{},s=t.DOMAttributeNamespaces||{},u=t.DOMAttributeNames||{},l=t.DOMPropertyNames||{},c=t.DOMMutationMethods||{};t.isCustomAttribute&&a._isCustomAttributeFunctions.push(t.isCustomAttribute);for(var p in n){a.properties.hasOwnProperty(p)?o("48",p):void 0;var h=p.toLowerCase(),d=n[p],f={attributeName:h,attributeNamespace:null,propertyName:p,mutationMethod:null,mustUseProperty:r(d,e.MUST_USE_PROPERTY),hasBooleanValue:r(d,e.HAS_BOOLEAN_VALUE),hasNumericValue:r(d,e.HAS_NUMERIC_VALUE),hasPositiveNumericValue:r(d,e.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:r(d,e.HAS_OVERLOADED_BOOLEAN_VALUE)};if(f.hasBooleanValue+f.hasNumericValue+f.hasOverloadedBooleanValue<=1?void 0:o("50",p),u.hasOwnProperty(p)){var g=u[p];f.attributeName=g}s.hasOwnProperty(p)&&(f.attributeNamespace=s[p]),l.hasOwnProperty(p)&&(f.propertyName=l[p]),c.hasOwnProperty(p)&&(f.mutationMethod=c[p]),a.properties[p]=f}}}),s=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",a={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:s,ATTRIBUTE_NAME_CHAR:s+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(t){for(var e=0;e<a._isCustomAttributeFunctions.length;e++){var n=a._isCustomAttributeFunctions[e];if(n(t))return!0}return!1},injection:i};t.exports=a},function(t,e,n){"use strict";function r(){i.attachRefs(this,this._currentElement)}var o=n(2),i=n(146),s=(n(7),n(1),{mountComponent:function(t,e,n,o,i){var s=t.mountComponent(e,n,o,i);return t._currentElement&&null!=t._currentElement.ref&&e.getReactMountReady().enqueue(r,t),s},getHostNode:function(t){return t.getHostNode()},unmountComponent:function(t,e){i.detachRefs(t,t._currentElement),t.unmountComponent(e)},receiveComponent:function(t,e,n,o){var s=t._currentElement;if(e!==s||o!==t._context){var a=i.shouldUpdateRefs(s,e);a&&i.detachRefs(t,s),t.receiveComponent(e,n,o),a&&t._currentElement&&null!=t._currentElement.ref&&n.getReactMountReady().enqueue(r,t)}},performUpdateIfNecessary:function(t,e,n){return t._updateBatchNumber!==n?void(null!=t._updateBatchNumber&&t._updateBatchNumber!==n+1?o("121",n,t._updateBatchNumber):void 0):void t.performUpdateIfNecessary(e)}});t.exports=s},function(t,e,n){"use strict";var r=n(2),o=n(33),i=n(34),s=n(38),a=n(75),u=n(77),l=(n(1),{}),c=null,p=function(t,e){t&&(i.executeDispatchesInOrder(t,e),t.isPersistent()||t.constructor.release(t))},h=function(t){return p(t,!0)},d=function(t){return p(t,!1)},f={injection:{injectEventPluginOrder:o.injectEventPluginOrder,injectEventPluginsByName:o.injectEventPluginsByName},putListener:function(t,e,n){"function"!=typeof n?r("94",e,typeof n):void 0;var i=l[e]||(l[e]={});i[t._rootNodeID]=n;var s=o.registrationNameModules[e];s&&s.didPutListener&&s.didPutListener(t,e,n)},getListener:function(t,e){var n=l[e];return n&&n[t._rootNodeID]},deleteListener:function(t,e){var n=o.registrationNameModules[e];n&&n.willDeleteListener&&n.willDeleteListener(t,e);var r=l[e];r&&delete r[t._rootNodeID]},deleteAllListeners:function(t){for(var e in l)if(l.hasOwnProperty(e)&&l[e][t._rootNodeID]){var n=o.registrationNameModules[e];n&&n.willDeleteListener&&n.willDeleteListener(t,e),delete l[e][t._rootNodeID]}},extractEvents:function(t,e,n,r){for(var i,s=o.plugins,u=0;u<s.length;u++){var l=s[u];if(l){var c=l.extractEvents(t,e,n,r);c&&(i=a(i,c))}}return i},enqueueEvents:function(t){t&&(c=a(c,t))},processEventQueue:function(t){var e=c;c=null,t?u(e,h):u(e,d),c?r("95"):void 0,s.rethrowCaughtError()},__purge:function(){l={}},__getListenerBank:function(){return l}};t.exports=f},function(t,e,n){"use strict";function r(t,e,n){var r=e.dispatchConfig.phasedRegistrationNames[n];return x(t,r)}function o(t,e,n){var o=e?v.bubbled:v.captured,i=r(t,n,o);i&&(n._dispatchListeners=m(n._dispatchListeners,i),n._dispatchInstances=m(n._dispatchInstances,t))}function i(t){t&&t.dispatchConfig.phasedRegistrationNames&&g.traverseTwoPhase(t._targetInst,o,t)}function s(t){if(t&&t.dispatchConfig.phasedRegistrationNames){var e=t._targetInst,n=e?g.getParentInstance(e):null;g.traverseTwoPhase(n,o,t)}}function a(t,e,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,o=x(t,r);o&&(n._dispatchListeners=m(n._dispatchListeners,o),n._dispatchInstances=m(n._dispatchInstances,t))}}function u(t){t&&t.dispatchConfig.registrationName&&a(t._targetInst,null,t)}function l(t){y(t,i)}function c(t){y(t,s)}function p(t,e,n,r){g.traverseEnterLeave(n,r,a,t,e)}function h(t){y(t,u)}var d=n(11),f=n(19),g=n(34),m=n(75),y=n(77),v=(n(3),d.PropagationPhases),x=f.getListener,b={accumulateTwoPhaseDispatches:l,accumulateTwoPhaseDispatchesSkipTarget:c,accumulateDirectDispatches:h,accumulateEnterLeaveDispatches:p};t.exports=b},function(t,e){"use strict";var n={remove:function(t){t._reactInternalInstance=void 0},get:function(t){return t._reactInternalInstance},has:function(t){return void 0!==t._reactInternalInstance},set:function(t,e){t._reactInternalInstance=e}};t.exports=n},function(t,e,n){"use strict";function r(t,e,n,r){return o.call(this,t,e,n,r)}var o=n(12),i=n(45),s={view:function(t){if(t.view)return t.view;var e=i(t);if(e.window===e)return e;var n=e.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(t){return t.detail||0}};o.augmentClass(r,s),t.exports=r},function(t,e,n){"use strict";var r=n(2),o=(n(1),{reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(t,e,n,o,i,s,a,u){this.isInTransaction()?r("27"):void 0;var l,c;try{this._isInTransaction=!0,l=!0,this.initializeAll(0),c=t.call(e,n,o,i,s,a,u),l=!1}finally{try{if(l)try{this.closeAll(0)}catch(p){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return c},initializeAll:function(t){for(var e=this.transactionWrappers,n=t;n<e.length;n++){var r=e[n];try{this.wrapperInitData[n]=i.OBSERVED_ERROR,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===i.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(o){}}}},closeAll:function(t){this.isInTransaction()?void 0:r("28");for(var e=this.transactionWrappers,n=t;n<e.length;n++){var o,s=e[n],a=this.wrapperInitData[n];try{o=!0,a!==i.OBSERVED_ERROR&&s.close&&s.close.call(this,a),o=!1}finally{if(o)try{this.closeAll(n+1)}catch(u){}}}this.wrapperInitData.length=0}}),i={Mixin:o,OBSERVED_ERROR:{}};t.exports=i},function(t,e,n){"use strict";var r={};t.exports=r},function(t,e,n){"use strict";var r=n(1),o=function(t){var e,n={};t instanceof Object&&!Array.isArray(t)?void 0:r(!1);for(e in t)t.hasOwnProperty(e)&&(n[e]=e);return n};t.exports=o},function(t,e){"use strict";var n={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},r={getHostProps:function(t,e){if(!e.disabled)return e;var r={};for(var o in e)!n[o]&&e.hasOwnProperty(o)&&(r[o]=e[o]);return r}};t.exports=r},function(t,e,n){"use strict";function r(t){return Object.prototype.hasOwnProperty.call(t,m)||(t[m]=f++,h[t[m]]={}),h[t[m]]}var o,i=n(4),s=n(11),a=n(33),u=n(139),l=n(74),c=n(169),p=n(46),h={},d=!1,f=0,g={topAbort:"abort",topAnimationEnd:c("animationend")||"animationend",topAnimationIteration:c("animationiteration")||"animationiteration",topAnimationStart:c("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:c("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},m="_reactListenersID"+String(Math.random()).slice(2),y=i({},u,{ReactEventListener:null,injection:{injectReactEventListener:function(t){t.setHandleTopLevel(y.handleTopLevel),y.ReactEventListener=t}},setEnabled:function(t){y.ReactEventListener&&y.ReactEventListener.setEnabled(t)},isEnabled:function(){return!(!y.ReactEventListener||!y.ReactEventListener.isEnabled())},listenTo:function(t,e){for(var n=e,o=r(n),i=a.registrationNameDependencies[t],u=s.topLevelTypes,l=0;l<i.length;l++){var c=i[l];o.hasOwnProperty(c)&&o[c]||(c===u.topWheel?p("wheel")?y.ReactEventListener.trapBubbledEvent(u.topWheel,"wheel",n):p("mousewheel")?y.ReactEventListener.trapBubbledEvent(u.topWheel,"mousewheel",n):y.ReactEventListener.trapBubbledEvent(u.topWheel,"DOMMouseScroll",n):c===u.topScroll?p("scroll",!0)?y.ReactEventListener.trapCapturedEvent(u.topScroll,"scroll",n):y.ReactEventListener.trapBubbledEvent(u.topScroll,"scroll",y.ReactEventListener.WINDOW_HANDLE):c===u.topFocus||c===u.topBlur?(p("focus",!0)?(y.ReactEventListener.trapCapturedEvent(u.topFocus,"focus",n),y.ReactEventListener.trapCapturedEvent(u.topBlur,"blur",n)):p("focusin")&&(y.ReactEventListener.trapBubbledEvent(u.topFocus,"focusin",n),y.ReactEventListener.trapBubbledEvent(u.topBlur,"focusout",n)),o[u.topBlur]=!0,o[u.topFocus]=!0):g.hasOwnProperty(c)&&y.ReactEventListener.trapBubbledEvent(c,g[c],n),o[c]=!0)}},trapBubbledEvent:function(t,e,n){return y.ReactEventListener.trapBubbledEvent(t,e,n)},trapCapturedEvent:function(t,e,n){return y.ReactEventListener.trapCapturedEvent(t,e,n)},ensureScrollValueMonitoring:function(){if(void 0===o&&(o=document.createEvent&&"pageX"in document.createEvent("MouseEvent")),!o&&!d){var t=l.refreshScrollValues;y.ReactEventListener.monitorScrollValue(t),d=!0}}});t.exports=y},function(t,e,n){"use strict";function r(t,e,n,r){return o.call(this,t,e,n,r)}var o=n(22),i=n(74),s=n(44),a={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:s,button:function(t){var e=t.button;return"which"in t?e:2===e?2:4===e?1:0},buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},pageX:function(t){return"pageX"in t?t.pageX:t.clientX+i.currentScrollLeft},pageY:function(t){return"pageY"in t?t.pageY:t.clientY+i.currentScrollTop}};o.augmentClass(r,a),t.exports=r},function(t,e){"use strict";function n(t){var e=""+t,n=o.exec(e);if(!n)return e;var r,i="",s=0,a=0;for(s=n.index;s<e.length;s++){switch(e.charCodeAt(s)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 39:r="&#x27;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}a!==s&&(i+=e.substring(a,s)),a=s+1,i+=r}return a!==s?i+e.substring(a,s):i}function r(t){return"boolean"==typeof t||"number"==typeof t?""+t:n(t)}var o=/["'&<>]/;t.exports=r},function(t,e,n){"use strict";var r,o=n(6),i=n(32),s=/^[ \r\n\t\f]/,a=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,u=n(42),l=u(function(t,e){if(t.namespaceURI!==i.svg||"innerHTML"in t)t.innerHTML=e;else{r=r||document.createElement("div"),r.innerHTML="<svg>"+e+"</svg>";for(var n=r.firstChild.childNodes,o=0;o<n.length;o++)t.appendChild(n[o])}});if(o.canUseDOM){var c=document.createElement("div");c.innerHTML=" ",""===c.innerHTML&&(l=function(t,e){if(t.parentNode&&t.parentNode.replaceChild(t,t),s.test(e)||"<"===e[0]&&a.test(e)){t.innerHTML=String.fromCharCode(65279)+e;var n=t.firstChild;1===n.data.length?t.removeChild(n):n.deleteData(0,1)}else t.innerHTML=e}),c=null}t.exports=l},function(t,e,n){"use strict";function r(t,e){return Array.isArray(e)&&(e=e[1]),e?e.nextSibling:t.firstChild}function o(t,e,n){c.insertTreeBefore(t,e,n)}function i(t,e,n){Array.isArray(e)?a(t,e[0],e[1],n):m(t,e,n)}function s(t,e){if(Array.isArray(e)){var n=e[1];e=e[0],u(t,e,n),t.removeChild(n)}t.removeChild(e)}function a(t,e,n,r){for(var o=e;;){var i=o.nextSibling;if(m(t,o,r),o===n)break;o=i}}function u(t,e,n){for(;;){var r=e.nextSibling;if(r===n)break;t.removeChild(r)}}function l(t,e,n){var r=t.parentNode,o=t.nextSibling;o===e?n&&m(r,document.createTextNode(n),o):n?(g(o,n),u(r,o,e)):u(r,t,e)}var c=n(16),p=n(114),h=n(69),d=(n(5),n(7),n(42)),f=n(30),g=n(83),m=d(function(t,e,n){t.insertBefore(e,n)}),y=p.dangerouslyReplaceNodeWithMarkup,v={dangerouslyReplaceNodeWithMarkup:y,replaceDelimitedText:l,processUpdates:function(t,e){for(var n=0;n<e.length;n++){var a=e[n];switch(a.type){case h.INSERT_MARKUP:o(t,a.content,r(t,a.afterNode));break;case h.MOVE_EXISTING:i(t,a.fromNode,r(t,a.afterNode));break;case h.SET_MARKUP:f(t,a.content);break;case h.TEXT_CONTENT:g(t,a.content);break;case h.REMOVE_NODE:s(t,a.fromNode)}}}};t.exports=v},function(t,e){"use strict";var n={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};t.exports=n},function(t,e,n){"use strict";function r(){if(a)for(var t in u){var e=u[t],n=a.indexOf(t);if(n>-1?void 0:s("96",t),!l.plugins[n]){e.extractEvents?void 0:s("97",t),l.plugins[n]=e;var r=e.eventTypes;for(var i in r)o(r[i],e,i)?void 0:s("98",i,t)}}}function o(t,e,n){l.eventNameDispatchConfigs.hasOwnProperty(n)?s("99",n):void 0,l.eventNameDispatchConfigs[n]=t;var r=t.phasedRegistrationNames;if(r){for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];i(a,e,n)}return!0}return!!t.registrationName&&(i(t.registrationName,e,n),!0)}function i(t,e,n){l.registrationNameModules[t]?s("100",t):void 0,l.registrationNameModules[t]=e,l.registrationNameDependencies[t]=e.eventTypes[n].dependencies}var s=n(2),a=(n(1),null),u={},l={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(t){a?s("101"):void 0,a=Array.prototype.slice.call(t),r()},injectEventPluginsByName:function(t){var e=!1;for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];u.hasOwnProperty(n)&&u[n]===o||(u[n]?s("102",n):void 0,u[n]=o,e=!0)}e&&r()},getPluginModuleForEvent:function(t){var e=t.dispatchConfig;if(e.registrationName)return l.registrationNameModules[e.registrationName]||null;for(var n in e.phasedRegistrationNames)if(e.phasedRegistrationNames.hasOwnProperty(n)){var r=l.registrationNameModules[e.phasedRegistrationNames[n]];if(r)return r}return null},_resetEventPlugins:function(){a=null;for(var t in u)u.hasOwnProperty(t)&&delete u[t];l.plugins.length=0;var e=l.eventNameDispatchConfigs;for(var n in e)e.hasOwnProperty(n)&&delete e[n];var r=l.registrationNameModules;for(var o in r)r.hasOwnProperty(o)&&delete r[o]}};t.exports=l},function(t,e,n){"use strict";function r(t){return t===v.topMouseUp||t===v.topTouchEnd||t===v.topTouchCancel}function o(t){return t===v.topMouseMove||t===v.topTouchMove}function i(t){return t===v.topMouseDown||t===v.topTouchStart}function s(t,e,n,r){var o=t.type||"unknown-event";t.currentTarget=x.getNodeFromInstance(r),e?m.invokeGuardedCallbackWithCatch(o,n,t):m.invokeGuardedCallback(o,n,t),t.currentTarget=null}function a(t,e){var n=t._dispatchListeners,r=t._dispatchInstances;if(Array.isArray(n))for(var o=0;o<n.length&&!t.isPropagationStopped();o++)s(t,e,n[o],r[o]);else n&&s(t,e,n,r);t._dispatchListeners=null,t._dispatchInstances=null}function u(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e)){for(var r=0;r<e.length&&!t.isPropagationStopped();r++)if(e[r](t,n[r]))return n[r]}else if(e&&e(t,n))return n;return null}function l(t){var e=u(t);return t._dispatchInstances=null,t._dispatchListeners=null,e}function c(t){var e=t._dispatchListeners,n=t._dispatchInstances;Array.isArray(e)?f("103"):void 0,t.currentTarget=e?x.getNodeFromInstance(n):null;var r=e?e(t):null;return t.currentTarget=null,t._dispatchListeners=null,t._dispatchInstances=null,r}function p(t){return!!t._dispatchListeners}var h,d,f=n(2),g=n(11),m=n(38),y=(n(1),n(3),{injectComponentTree:function(t){h=t},injectTreeTraversal:function(t){d=t}}),v=g.topLevelTypes,x={isEndish:r,isMoveish:o,isStartish:i,executeDirectDispatch:c,executeDispatchesInOrder:a,executeDispatchesInOrderStopAtTrue:l,hasDispatches:p,getInstanceFromNode:function(t){return h.getInstanceFromNode(t)},getNodeFromInstance:function(t){return h.getNodeFromInstance(t)},isAncestor:function(t,e){return d.isAncestor(t,e)},getLowestCommonAncestor:function(t,e){return d.getLowestCommonAncestor(t,e)},getParentInstance:function(t){return d.getParentInstance(t)},traverseTwoPhase:function(t,e,n){return d.traverseTwoPhase(t,e,n)},traverseEnterLeave:function(t,e,n,r,o){return d.traverseEnterLeave(t,e,n,r,o)},injection:y};t.exports=x},function(t,e){"use strict";function n(t){var e=/[=:]/g,n={"=":"=0",
":":"=2"},r=(""+t).replace(e,function(t){return n[t]});return"$"+r}function r(t){var e=/(=0|=2)/g,n={"=0":"=","=2":":"},r="."===t[0]&&"$"===t[1]?t.substring(2):t.substring(1);return(""+r).replace(e,function(t){return n[t]})}var o={escape:n,unescape:r};t.exports=o},function(t,e,n){"use strict";function r(t){null!=t.checkedLink&&null!=t.valueLink?a("87"):void 0}function o(t){r(t),null!=t.value||null!=t.onChange?a("88"):void 0}function i(t){r(t),null!=t.checked||null!=t.onChange?a("89"):void 0}function s(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""}var a=n(2),u=n(72),l=n(40),c=(n(1),n(3),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),p={value:function(t,e,n){return!t[e]||c[t.type]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(t,e,n){return!t[e]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:u.func},h={},d={checkPropTypes:function(t,e,n){for(var r in p){if(p.hasOwnProperty(r))var o=p[r](e,r,t,l.prop);if(o instanceof Error&&!(o.message in h)){h[o.message]=!0;s(n)}}},getValue:function(t){return t.valueLink?(o(t),t.valueLink.value):t.value},getChecked:function(t){return t.checkedLink?(i(t),t.checkedLink.value):t.checked},executeOnChange:function(t,e){return t.valueLink?(o(t),t.valueLink.requestChange(e.target.value)):t.checkedLink?(i(t),t.checkedLink.requestChange(e.target.checked)):t.onChange?t.onChange.call(void 0,e):void 0}};t.exports=d},function(t,e,n){"use strict";var r=n(2),o=(n(1),!1),i={unmountIDFromEnvironment:null,replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(t){o?r("104"):void 0,i.unmountIDFromEnvironment=t.unmountIDFromEnvironment,i.replaceNodeWithMarkup=t.replaceNodeWithMarkup,i.processChildrenUpdates=t.processChildrenUpdates,o=!0}}};t.exports=i},function(t,e,n){"use strict";function r(t,e,n,r){try{return e(n,r)}catch(i){return void(null===o&&(o=i))}}var o=null,i={invokeGuardedCallback:r,invokeGuardedCallbackWithCatch:r,rethrowCaughtError:function(){if(o){var t=o;throw o=null,t}}};t.exports=i},function(t,e,n){"use strict";var r={};t.exports=r},function(t,e,n){"use strict";var r=n(25),o=r({prop:null,context:null,childContext:null});t.exports=o},function(t,e,n){"use strict";function r(t){u.enqueueUpdate(t)}function o(t){var e=typeof t;if("object"!==e)return e;var n=t.constructor&&t.constructor.name||e,r=Object.keys(t);return r.length>0&&r.length<20?n+" (keys: "+r.join(", ")+")":n}function i(t,e){var n=a.get(t);return n?n:null}var s=n(2),a=(n(15),n(21)),u=(n(7),n(10)),l=(n(1),n(3),{isMounted:function(t){var e=a.get(t);return!!e&&!!e._renderedComponent},enqueueCallback:function(t,e,n){l.validateCallback(e,n);var o=i(t);return o?(o._pendingCallbacks?o._pendingCallbacks.push(e):o._pendingCallbacks=[e],void r(o)):null},enqueueCallbackInternal:function(t,e){t._pendingCallbacks?t._pendingCallbacks.push(e):t._pendingCallbacks=[e],r(t)},enqueueForceUpdate:function(t){var e=i(t,"forceUpdate");e&&(e._pendingForceUpdate=!0,r(e))},enqueueReplaceState:function(t,e){var n=i(t,"replaceState");n&&(n._pendingStateQueue=[e],n._pendingReplaceState=!0,r(n))},enqueueSetState:function(t,e){var n=i(t,"setState");if(n){var o=n._pendingStateQueue||(n._pendingStateQueue=[]);o.push(e),r(n)}},enqueueElementInternal:function(t,e,n){t._pendingElement=e,t._context=n,r(t)},validateCallback:function(t,e){t&&"function"!=typeof t?s("122",e,o(t)):void 0}});t.exports=l},function(t,e){"use strict";var n=function(t){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t};t.exports=n},function(t,e){"use strict";function n(t){var e,n=t.keyCode;return"charCode"in t?(e=t.charCode,0===e&&13===n&&(e=13)):e=n,e>=32||13===e?e:0}t.exports=n},function(t,e){"use strict";function n(t){var e=this,n=e.nativeEvent;if(n.getModifierState)return n.getModifierState(t);var r=o[t];return!!r&&!!n[r]}function r(t){return n}var o={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=r},function(t,e){"use strict";function n(t){var e=t.target||t.srcElement||window;return e.correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}t.exports=n},function(t,e,n){"use strict";function r(t,e){if(!i.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,r=n in document;if(!r){var s=document.createElement("div");s.setAttribute(n,"return;"),r="function"==typeof s[n]}return!r&&o&&"wheel"===t&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var o,i=n(6);i.canUseDOM&&(o=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=r},function(t,e){"use strict";function n(t,e){var n=null===t||t===!1,r=null===e||e===!1;if(n||r)return n===r;var o=typeof t,i=typeof e;return"string"===o||"number"===o?"string"===i||"number"===i:"object"===i&&t.type===e.type&&t.key===e.key}t.exports=n},function(t,e,n){"use strict";function r(t,e){return t&&"object"==typeof t&&null!=t.key?l.escape(t.key):e.toString(36)}function o(t,e,n,i){var h=typeof t;if("undefined"!==h&&"boolean"!==h||(t=null),null===t||"string"===h||"number"===h||a.isValidElement(t))return n(i,t,""===e?c+r(t,0):e),1;var d,f,g=0,m=""===e?c:e+p;if(Array.isArray(t))for(var y=0;y<t.length;y++)d=t[y],f=m+r(d,y),g+=o(d,f,n,i);else{var v=u(t);if(v){var x,b=v.call(t);if(v!==t.entries)for(var j=0;!(x=b.next()).done;)d=x.value,f=m+r(d,j++),g+=o(d,f,n,i);else for(;!(x=b.next()).done;){var _=x.value;_&&(d=_[1],f=m+l.escape(_[0])+p+r(d,0),g+=o(d,f,n,i))}}else if("object"===h){var E="",w=String(t);s("31","[object Object]"===w?"object with keys {"+Object.keys(t).join(", ")+"}":w,E)}}return g}function i(t,e,n){return null==t?0:o(t,"",e,n)}var s=n(2),a=(n(15),n(9)),u=n(79),l=(n(1),n(35)),c=(n(3),"."),p=":";t.exports=i},function(t,e,n){"use strict";var r=(n(4),n(8)),o=(n(3),r);t.exports=o},function(t,e,n){"use strict";var r=n(8),o={listen:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):t.attachEvent?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}):void 0},capture:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!0),{remove:function(){t.removeEventListener(e,n,!0)}}):{remove:r}},registerDefault:function(){}};t.exports=o},function(t,e){"use strict";function n(t){try{t.focus()}catch(e){}}t.exports=n},function(t,e){"use strict";function n(){if("undefined"==typeof document)return null;try{return document.activeElement||document.body}catch(t){return document.body}}t.exports=n},function(t,e){"use strict";function n(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}function r(t,e){if(n(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(!o.call(e,r[s])||!n(t[r[s]],e[r[s]]))return!1;return!0}var o=Object.prototype.hasOwnProperty;t.exports=r},function(t,e,n){(function(t,r){"use strict";function o(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(n){return!1}}function i(){return t.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function t(e){return this instanceof t?(t.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof e?s(this,e):"string"==typeof e?a(this,e,arguments.length>1?arguments[1]:"utf8"):u(this,e)):arguments.length>1?new t(e,arguments[1]):new t(e)}function s(e,n){if(e=g(e,n<0?0:0|m(n)),!t.TYPED_ARRAY_SUPPORT)for(var r=0;r<n;r++)e[r]=0;return e}function a(t,e,n){"string"==typeof n&&""!==n||(n="utf8");var r=0|v(e,n);return t=g(t,r),t.write(e,n),t}function u(e,n){if(t.isBuffer(n))return l(e,n);if(Q(n))return c(e,n);if(null==n)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(n.buffer instanceof ArrayBuffer)return p(e,n);if(n instanceof ArrayBuffer)return h(e,n)}return n.length?d(e,n):f(e,n)}function l(t,e){var n=0|m(e.length);return t=g(t,n),e.copy(t,0,0,n),t}function c(t,e){var n=0|m(e.length);t=g(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t,e){var n=0|m(e.length);t=g(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function h(e,n){return t.TYPED_ARRAY_SUPPORT?(n.byteLength,e=t._augment(new Uint8Array(n))):e=p(e,new Uint8Array(n)),e}function d(t,e){var n=0|m(e.length);t=g(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function f(t,e){var n,r=0;"Buffer"===e.type&&Q(e.data)&&(n=e.data,r=0|m(n.length)),t=g(t,r);for(var o=0;o<r;o+=1)t[o]=255&n[o];return t}function g(e,n){t.TYPED_ARRAY_SUPPORT?(e=t._augment(new Uint8Array(n)),e.__proto__=t.prototype):(e.length=n,e._isBuffer=!0);var r=0!==n&&n<=t.poolSize>>>1;return r&&(e.parent=K),e}function m(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function y(e,n){if(!(this instanceof y))return new y(e,n);var r=new t(e,n);return delete r.parent,r}function v(t,e){"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(t).length;default:if(r)return U(t).length;e=(""+e).toLowerCase(),r=!0}}function x(t,e,n){var r=!1;if(e=0|e,n=void 0===n||n===1/0?this.length:0|n,t||(t="utf8"),e<0&&(e=0),n>this.length&&(n=this.length),n<=e)return"";for(;;)switch(t){case"hex":return T(this,e,n);case"utf8":case"utf-8":return M(this,e,n);case"ascii":return L(this,e,n);case"binary":return P(this,e,n);case"base64":return I(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function b(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r),r>o&&(r=o)):r=o;var i=e.length;if(i%2!==0)throw new Error("Invalid hex string");r>i/2&&(r=i/2);for(var s=0;s<r;s++){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");t[n+s]=a}return s}function j(t,e,n,r){return X(U(e,t.length-n),t,n,r)}function _(t,e,n,r){return X(V(e),t,n,r)}function E(t,e,n,r){return _(t,e,n,r)}function w(t,e,n,r){return X(H(e),t,n,r)}function S(t,e,n,r){return X(Y(e,t.length-n),t,n,r)}function I(t,e,n){return 0===e&&n===t.length?W.fromByteArray(t):W.fromByteArray(t.slice(e,n))}function M(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i=t[o],s=null,a=i>239?4:i>223?3:i>191?2:1;if(o+a<=n){var u,l,c,p;switch(a){case 1:i<128&&(s=i);break;case 2:u=t[o+1],128===(192&u)&&(p=(31&i)<<6|63&u,p>127&&(s=p));break;case 3:u=t[o+1],l=t[o+2],128===(192&u)&&128===(192&l)&&(p=(15&i)<<12|(63&u)<<6|63&l,p>2047&&(p<55296||p>57343)&&(s=p));break;case 4:u=t[o+1],l=t[o+2],c=t[o+3],128===(192&u)&&128===(192&l)&&128===(192&c)&&(p=(15&i)<<18|(63&u)<<12|(63&l)<<6|63&c,p>65535&&p<1114112&&(s=p))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),o+=a}return C(r)}function C(t){var e=t.length;if(e<=J)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=J));return n}function L(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;o++)r+=String.fromCharCode(127&t[o]);return r}function P(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;o++)r+=String.fromCharCode(t[o]);return r}function T(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;i++)o+=q(t[i]);return o}function N(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function R(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function A(e,n,r,o,i,s){if(!t.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(n>i||n<s)throw new RangeError("value is out of bounds");if(r+o>e.length)throw new RangeError("index out of range")}function D(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);o<i;o++)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function O(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);o<i;o++)t[n+o]=e>>>8*(r?o:3-o)&255}function F(t,e,n,r,o,i){if(e>o||e<i)throw new RangeError("value is out of bounds");if(n+r>t.length)throw new RangeError("index out of range");if(n<0)throw new RangeError("index out of range")}function k(t,e,n,r,o){return o||F(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(t,e,n,r,23,4),n+4}function B(t,e,n,r,o){return o||F(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(t,e,n,r,52,8),n+8}function z(t){if(t=G(t).replace(tt,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function G(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function q(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){e=e||1/0;for(var n,r=t.length,o=null,i=[],s=0;s<r;s++){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function V(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function Y(t,e){for(var n,r,o,i=[],s=0;s<t.length&&!((e-=2)<0);s++)n=t.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function H(t){return W.toByteArray(z(t))}function X(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);o++)e[o+n]=t[o];return o}var W=n(103),Z=n(108),Q=n(109);e.Buffer=t,e.SlowBuffer=y,e.INSPECT_MAX_BYTES=50,t.poolSize=8192;var K={};t.TYPED_ARRAY_SUPPORT=void 0!==r.TYPED_ARRAY_SUPPORT?r.TYPED_ARRAY_SUPPORT:o(),t.TYPED_ARRAY_SUPPORT?(t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array):(t.prototype.length=void 0,t.prototype.parent=void 0),t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.compare=function(e,n){if(!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(e===n)return 0;for(var r=e.length,o=n.length,i=0,s=Math.min(r,o);i<s&&e[i]===n[i];)++i;return i!==s&&(r=e[i],o=n[i]),r<o?-1:o<r?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!Q(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new t(0);var r;if(void 0===n)for(n=0,r=0;r<e.length;r++)n+=e[r].length;var o=new t(n),i=0;for(r=0;r<e.length;r++){var s=e[r];s.copy(o,i),i+=s.length}return o},t.byteLength=v,t.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?M(this,0,t):x.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:t.compare(this,e)},t.prototype.indexOf=function(e,n){function r(t,e,n){for(var r=-1,o=0;n+o<t.length;o++)if(t[n+o]===e[r===-1?0:o-r]){if(r===-1&&(r=o),o-r+1===e.length)return n+r}else r=-1;return-1}if(n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n>>=0,0===this.length)return-1;if(n>=this.length)return-1;if(n<0&&(n=Math.max(this.length+n,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,n);if(t.isBuffer(e))return r(this,e,n);if("number"==typeof e)return t.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,n):r(this,[e],n);throw new TypeError("val must be string, number or Buffer")},t.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},t.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},t.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var o=r;r=e,e=0|n,n=o}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return j(this,t,e,n);case"ascii":return _(this,t,e,n);case"binary":return E(this,t,e,n);case"base64":return w(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;t.prototype.slice=function(e,n){var r=this.length;e=~~e,n=void 0===n?r:~~n,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),n<0?(n+=r,n<0&&(n=0)):n>r&&(n=r),n<e&&(n=e);var o;if(t.TYPED_ARRAY_SUPPORT)o=t._augment(this.subarray(e,n));else{var i=n-e;o=new t(i,(void 0));for(var s=0;s<i;s++)o[s]=this[s+e]}return o.length&&(o.parent=this.parent||this),o},t.prototype.readUIntLE=function(t,e,n){t=0|t,e=0|e,n||R(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},t.prototype.readUIntBE=function(t,e,n){t=0|t,e=0|e,n||R(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},t.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readIntLE=function(t,e,n){t=0|t,e=0|e,n||R(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},t.prototype.readIntBE=function(t,e,n){t=0|t,e=0|e,n||R(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},t.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},t.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),Z.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),Z.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),Z.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),Z.read(this,t,!1,52,8)},t.prototype.writeUIntLE=function(t,e,n,r){t=+t,e=0|e,n=0|n,r||A(this,t,e,n,Math.pow(2,8*n),0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},t.prototype.writeUIntBE=function(t,e,n,r){t=+t,e=0|e,n=0|n,r||A(this,t,e,n,Math.pow(2,8*n),0);var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},t.prototype.writeUInt8=function(e,n,r){return e=+e,n=0|n,r||A(this,e,n,1,255,0),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=255&e,n+1},t.prototype.writeUInt16LE=function(e,n,r){return e=+e,n=0|n,r||A(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):D(this,e,n,!0),n+2},t.prototype.writeUInt16BE=function(e,n,r){return e=+e,n=0|n,r||A(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):D(this,e,n,!1),n+2},t.prototype.writeUInt32LE=function(e,n,r){return e=+e,n=0|n,r||A(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=255&e):O(this,e,n,!0),n+4},t.prototype.writeUInt32BE=function(e,n,r){return e=+e,n=0|n,r||A(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):O(this,e,n,!1),n+4},t.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e=0|e,!r){var o=Math.pow(2,8*n-1);A(this,t,e,n,o-1,-o)}var i=0,s=1,a=t<0?1:0;for(this[e]=255&t;++i<n&&(s*=256);)this[e+i]=(t/s>>0)-a&255;return e+n},t.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e=0|e,!r){var o=Math.pow(2,8*n-1);A(this,t,e,n,o-1,-o)}var i=n-1,s=1,a=t<0?1:0;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=(t/s>>0)-a&255;return e+n},t.prototype.writeInt8=function(e,n,r){return e=+e,n=0|n,r||A(this,e,n,1,127,-128),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[n]=255&e,n+1},t.prototype.writeInt16LE=function(e,n,r){return e=+e,n=0|n,r||A(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):D(this,e,n,!0),n+2},t.prototype.writeInt16BE=function(e,n,r){return e=+e,n=0|n,r||A(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):D(this,e,n,!1),n+2},t.prototype.writeInt32LE=function(e,n,r){return e=+e,n=0|n,r||A(this,e,n,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24):O(this,e,n,!0),n+4},t.prototype.writeInt32BE=function(e,n,r){return e=+e,n=0|n,r||A(this,e,n,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):O(this,e,n,!1),n+4},t.prototype.writeFloatLE=function(t,e,n){return k(this,t,e,!0,n)},t.prototype.writeFloatBE=function(t,e,n){return k(this,t,e,!1,n)},t.prototype.writeDoubleLE=function(t,e,n){return B(this,t,e,!0,n)},t.prototype.writeDoubleBE=function(t,e,n){return B(this,t,e,!1,n)},t.prototype.copy=function(e,n,r,o){if(r||(r=0),o||0===o||(o=this.length),n>=e.length&&(n=e.length),n||(n=0),o>0&&o<r&&(o=r),o===r)return 0;if(0===e.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-n<o-r&&(o=e.length-n+r);var i,s=o-r;if(this===e&&r<n&&n<o)for(i=s-1;i>=0;i--)e[i+n]=this[i+r];else if(s<1e3||!t.TYPED_ARRAY_SUPPORT)for(i=0;i<s;i++)e[i+n]=this[i+r];else e._set(this.subarray(r,r+s),n);return s},t.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),n<e)throw new RangeError("end < start");if(n!==e&&0!==this.length){if(e<0||e>=this.length)throw new RangeError("start out of bounds");if(n<0||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof t)for(r=e;r<n;r++)this[r]=t;else{var o=U(t.toString()),i=o.length;for(r=e;r<n;r++)this[r]=o[r%i]}return this}},t.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(t.TYPED_ARRAY_SUPPORT)return new t(this).buffer;for(var e=new Uint8Array(this.length),n=0,r=e.length;n<r;n+=1)e[n]=this[n];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var $=t.prototype;t._augment=function(e){return e.constructor=t,e._isBuffer=!0,e._set=e.set,e.get=$.get,e.set=$.set,e.write=$.write,e.toString=$.toString,e.toLocaleString=$.toString,e.toJSON=$.toJSON,e.equals=$.equals,e.compare=$.compare,e.indexOf=$.indexOf,e.copy=$.copy,e.slice=$.slice,e.readUIntLE=$.readUIntLE,e.readUIntBE=$.readUIntBE,e.readUInt8=$.readUInt8,e.readUInt16LE=$.readUInt16LE,e.readUInt16BE=$.readUInt16BE,e.readUInt32LE=$.readUInt32LE,e.readUInt32BE=$.readUInt32BE,e.readIntLE=$.readIntLE,e.readIntBE=$.readIntBE,e.readInt8=$.readInt8,e.readInt16LE=$.readInt16LE,e.readInt16BE=$.readInt16BE,e.readInt32LE=$.readInt32LE,e.readInt32BE=$.readInt32BE,e.readFloatLE=$.readFloatLE,e.readFloatBE=$.readFloatBE,e.readDoubleLE=$.readDoubleLE,e.readDoubleBE=$.readDoubleBE,e.writeUInt8=$.writeUInt8,e.writeUIntLE=$.writeUIntLE,e.writeUIntBE=$.writeUIntBE,e.writeUInt16LE=$.writeUInt16LE,e.writeUInt16BE=$.writeUInt16BE,e.writeUInt32LE=$.writeUInt32LE,e.writeUInt32BE=$.writeUInt32BE,e.writeIntLE=$.writeIntLE,e.writeIntBE=$.writeIntBE,e.writeInt8=$.writeInt8,e.writeInt16LE=$.writeInt16LE,e.writeInt16BE=$.writeInt16BE,e.writeInt32LE=$.writeInt32LE,e.writeInt32BE=$.writeInt32BE,e.writeFloatLE=$.writeFloatLE,e.writeFloatBE=$.writeFloatBE,e.writeDoubleLE=$.writeDoubleLE,e.writeDoubleBE=$.writeDoubleBE,e.fill=$.fill,e.inspect=$.inspect,e.toArrayBuffer=$.toArrayBuffer,e};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,n(54).Buffer,function(){return this}())},function(t,e){"use strict";function n(t,e){return t+e.charAt(0).toUpperCase()+e.substring(1)}var r={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o=["Webkit","ms","Moz","O"];Object.keys(r).forEach(function(t){o.forEach(function(e){r[n(e,t)]=r[t]})});var i={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},s={isUnitlessNumber:r,shorthandPropertyExpansions:i};t.exports=s},function(t,e,n){"use strict";function r(){this._callbacks=null,this._contexts=null}var o=n(2),i=n(4),s=n(14);n(1);i(r.prototype,{enqueue:function(t,e){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(t),this._contexts.push(e)},notifyAll:function(){var t=this._callbacks,e=this._contexts;if(t){t.length!==e.length?o("24"):void 0,this._callbacks=null,this._contexts=null;for(var n=0;n<t.length;n++)t[n].call(e[n]);t.length=0,e.length=0}},checkpoint:function(){return this._callbacks?this._callbacks.length:0},rollback:function(t){this._callbacks&&(this._callbacks.length=t,this._contexts.length=t)},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),s.addPoolingTo(r),t.exports=r},function(t,e,n){"use strict";function r(t){return!!l.hasOwnProperty(t)||!u.hasOwnProperty(t)&&(a.test(t)?(l[t]=!0,!0):(u[t]=!0,!1))}function o(t,e){return null==e||t.hasBooleanValue&&!e||t.hasNumericValue&&isNaN(e)||t.hasPositiveNumericValue&&e<1||t.hasOverloadedBooleanValue&&e===!1}var i=n(17),s=(n(5),n(131),n(7),n(171)),a=(n(3),new RegExp("^["+i.ATTRIBUTE_NAME_START_CHAR+"]["+i.ATTRIBUTE_NAME_CHAR+"]*$")),u={},l={},c={createMarkupForID:function(t){return i.ID_ATTRIBUTE_NAME+"="+s(t)},setAttributeForID:function(t,e){t.setAttribute(i.ID_ATTRIBUTE_NAME,e)},createMarkupForRoot:function(){return i.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(t){t.setAttribute(i.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(t,e){var n=i.properties.hasOwnProperty(t)?i.properties[t]:null;if(n){if(o(n,e))return"";var r=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&e===!0?r+'=""':r+"="+s(e)}return i.isCustomAttribute(t)?null==e?"":t+"="+s(e):null},createMarkupForCustomAttribute:function(t,e){return r(t)&&null!=e?t+"="+s(e):""},setValueForProperty:function(t,e,n){var r=i.properties.hasOwnProperty(e)?i.properties[e]:null;if(r){var s=r.mutationMethod;if(s)s(t,n);else{if(o(r,n))return void this.deleteValueForProperty(t,e);if(r.mustUseProperty)t[r.propertyName]=n;else{var a=r.attributeName,u=r.attributeNamespace;u?t.setAttributeNS(u,a,""+n):r.hasBooleanValue||r.hasOverloadedBooleanValue&&n===!0?t.setAttribute(a,""):t.setAttribute(a,""+n)}}}else if(i.isCustomAttribute(e))return void c.setValueForAttribute(t,e,n)},setValueForAttribute:function(t,e,n){if(r(e)){null==n?t.removeAttribute(e):t.setAttribute(e,""+n)}},deleteValueForAttribute:function(t,e){t.removeAttribute(e)},deleteValueForProperty:function(t,e){var n=i.properties.hasOwnProperty(e)?i.properties[e]:null;if(n){var r=n.mutationMethod;if(r)r(t,void 0);else if(n.mustUseProperty){var o=n.propertyName;n.hasBooleanValue?t[o]=!1:t[o]=""}else t.removeAttribute(n.attributeName)}else i.isCustomAttribute(e)&&t.removeAttribute(e)}};t.exports=c},function(t,e,n){"use strict";function r(t){return(""+t).replace(b,"$&/")}function o(t,e){this.func=t,this.context=e,this.count=0}function i(t,e,n){var r=t.func,o=t.context;r.call(o,e,t.count++)}function s(t,e,n){if(null==t)return t;var r=o.getPooled(e,n);y(t,i,r),o.release(r)}function a(t,e,n,r){this.result=t,this.keyPrefix=e,this.func=n,this.context=r,this.count=0}function u(t,e,n){var o=t.result,i=t.keyPrefix,s=t.func,a=t.context,u=s.call(a,e,t.count++);Array.isArray(u)?l(u,o,n,m.thatReturnsArgument):null!=u&&(g.isValidElement(u)&&(u=g.cloneAndReplaceKey(u,i+(!u.key||e&&e.key===u.key?"":r(u.key)+"/")+n)),o.push(u))}function l(t,e,n,o,i){var s="";null!=n&&(s=r(n)+"/");var l=a.getPooled(e,s,o,i);y(t,u,l),a.release(l)}function c(t,e,n){if(null==t)return t;var r=[];return l(t,r,null,e,n),r}function p(t,e,n){return null}function h(t,e){return y(t,p,null)}function d(t){var e=[];return l(t,e,null,m.thatReturnsArgument),e}var f=n(14),g=n(9),m=n(8),y=n(48),v=f.twoArgumentPooler,x=f.fourArgumentPooler,b=/\/+/g;o.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},f.addPoolingTo(o,v),a.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},f.addPoolingTo(a,x);var j={forEach:s,map:c,mapIntoWithKeyPrefixInternal:l,count:h,toArray:d};t.exports=j},function(t,e,n){"use strict";function r(t,e){var n=_.hasOwnProperty(e)?_[e]:null;w.hasOwnProperty(e)&&(n!==b.OVERRIDE_BASE?p("73",e):void 0),t&&(n!==b.DEFINE_MANY&&n!==b.DEFINE_MANY_MERGED?p("74",e):void 0)}function o(t,e){if(e){"function"==typeof e?p("75"):void 0,f.isValidElement(e)?p("76"):void 0;var n=t.prototype,o=n.__reactAutoBindPairs;
e.hasOwnProperty(x)&&E.mixins(t,e.mixins);for(var i in e)if(e.hasOwnProperty(i)&&i!==x){var s=e[i],l=n.hasOwnProperty(i);if(r(l,i),E.hasOwnProperty(i))E[i](t,s);else{var c=_.hasOwnProperty(i),h="function"==typeof s,d=h&&!c&&!l&&e.autobind!==!1;if(d)o.push(i,s),n[i]=s;else if(l){var g=_[i];!c||g!==b.DEFINE_MANY_MERGED&&g!==b.DEFINE_MANY?p("77",g,i):void 0,g===b.DEFINE_MANY_MERGED?n[i]=a(n[i],s):g===b.DEFINE_MANY&&(n[i]=u(n[i],s))}else n[i]=s}}}}function i(t,e){if(e)for(var n in e){var r=e[n];if(e.hasOwnProperty(n)){var o=n in E;o?p("78",n):void 0;var i=n in t;i?p("79",n):void 0,t[n]=r}}}function s(t,e){t&&e&&"object"==typeof t&&"object"==typeof e?void 0:p("80");for(var n in e)e.hasOwnProperty(n)&&(void 0!==t[n]?p("81",n):void 0,t[n]=e[n]);return t}function a(t,e){return function(){var n=t.apply(this,arguments),r=e.apply(this,arguments);if(null==n)return r;if(null==r)return n;var o={};return s(o,n),s(o,r),o}}function u(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function l(t,e){var n=e.bind(t);return n}function c(t){for(var e=t.__reactAutoBindPairs,n=0;n<e.length;n+=2){var r=e[n],o=e[n+1];t[r]=l(t,o)}}var p=n(2),h=n(4),d=n(60),f=n(9),g=(n(40),n(39),n(71)),m=n(24),y=(n(1),n(25)),v=n(13),x=(n(3),v({mixins:null})),b=y({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),j=[],_={mixins:b.DEFINE_MANY,statics:b.DEFINE_MANY,propTypes:b.DEFINE_MANY,contextTypes:b.DEFINE_MANY,childContextTypes:b.DEFINE_MANY,getDefaultProps:b.DEFINE_MANY_MERGED,getInitialState:b.DEFINE_MANY_MERGED,getChildContext:b.DEFINE_MANY_MERGED,render:b.DEFINE_ONCE,componentWillMount:b.DEFINE_MANY,componentDidMount:b.DEFINE_MANY,componentWillReceiveProps:b.DEFINE_MANY,shouldComponentUpdate:b.DEFINE_ONCE,componentWillUpdate:b.DEFINE_MANY,componentDidUpdate:b.DEFINE_MANY,componentWillUnmount:b.DEFINE_MANY,updateComponent:b.OVERRIDE_BASE},E={displayName:function(t,e){t.displayName=e},mixins:function(t,e){if(e)for(var n=0;n<e.length;n++)o(t,e[n])},childContextTypes:function(t,e){t.childContextTypes=h({},t.childContextTypes,e)},contextTypes:function(t,e){t.contextTypes=h({},t.contextTypes,e)},getDefaultProps:function(t,e){t.getDefaultProps?t.getDefaultProps=a(t.getDefaultProps,e):t.getDefaultProps=e},propTypes:function(t,e){t.propTypes=h({},t.propTypes,e)},statics:function(t,e){i(t,e)},autobind:function(){}},w={replaceState:function(t,e){this.updater.enqueueReplaceState(this,t),e&&this.updater.enqueueCallback(this,e,"replaceState")},isMounted:function(){return this.updater.isMounted(this)}},S=function(){};h(S.prototype,d.prototype,w);var I={createClass:function(t){var e=function(t,n,r){this.__reactAutoBindPairs.length&&c(this),this.props=t,this.context=n,this.refs=m,this.updater=r||g,this.state=null;var o=this.getInitialState?this.getInitialState():null;"object"!=typeof o||Array.isArray(o)?p("82",e.displayName||"ReactCompositeComponent"):void 0,this.state=o};e.prototype=new S,e.prototype.constructor=e,e.prototype.__reactAutoBindPairs=[],j.forEach(o.bind(null,e)),o(e,t),e.getDefaultProps&&(e.defaultProps=e.getDefaultProps()),e.prototype.render?void 0:p("83");for(var n in _)e.prototype[n]||(e.prototype[n]=null);return e},injection:{injectMixin:function(t){j.push(t)}}};t.exports=I},function(t,e,n){"use strict";function r(t,e,n){this.props=t,this.context=e,this.refs=s,this.updater=n||i}var o=n(2),i=n(71),s=(n(76),n(24));n(1),n(3);r.prototype.isReactComponent={},r.prototype.setState=function(t,e){"object"!=typeof t&&"function"!=typeof t&&null!=t?o("85"):void 0,this.updater.enqueueSetState(this,t),e&&this.updater.enqueueCallback(this,e,"setState")},r.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this),t&&this.updater.enqueueCallback(this,t,"forceUpdate")};t.exports=r},function(t,e,n){"use strict";var r=n(31),o=n(129),i={processChildrenUpdates:o.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:r.dangerouslyReplaceNodeWithMarkup,unmountIDFromEnvironment:function(t){}};t.exports=i},function(t,e){"use strict";var n={hasCachedChildNodes:1};t.exports=n},function(t,e,n){"use strict";function r(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var t=this._currentElement.props,e=u.getValue(t);null!=e&&o(this,Boolean(t.multiple),e)}}function o(t,e,n){var r,o,i=l.getNodeFromInstance(t).options;if(e){for(r={},o=0;o<n.length;o++)r[""+n[o]]=!0;for(o=0;o<i.length;o++){var s=r.hasOwnProperty(i[o].value);i[o].selected!==s&&(i[o].selected=s)}}else{for(r=""+n,o=0;o<i.length;o++)if(i[o].value===r)return void(i[o].selected=!0);i.length&&(i[0].selected=!0)}}function i(t){var e=this._currentElement.props,n=u.executeOnChange(e,t);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),c.asap(r,this),n}var s=n(4),a=n(26),u=n(36),l=n(5),c=n(10),p=(n(3),!1),h={getHostProps:function(t,e){return s({},a.getHostProps(t,e),{onChange:t._wrapperState.onChange,value:void 0})},mountWrapper:function(t,e){var n=u.getValue(e);t._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:e.defaultValue,listeners:null,onChange:i.bind(t),wasMultiple:Boolean(e.multiple)},void 0===e.value||void 0===e.defaultValue||p||(p=!0)},getSelectValueContext:function(t){return t._wrapperState.initialValue},postUpdateWrapper:function(t){var e=t._currentElement.props;t._wrapperState.initialValue=void 0;var n=t._wrapperState.wasMultiple;t._wrapperState.wasMultiple=Boolean(e.multiple);var r=u.getValue(e);null!=r?(t._wrapperState.pendingUpdate=!1,o(t,Boolean(e.multiple),r)):n!==Boolean(e.multiple)&&(null!=e.defaultValue?o(t,Boolean(e.multiple),e.defaultValue):o(t,Boolean(e.multiple),e.multiple?[]:""))}};t.exports=h},function(t,e){"use strict";var n,r={injectEmptyComponentFactory:function(t){n=t}},o={create:function(t){return n(t)}};o.injection=r,t.exports=o},function(t,e){"use strict";var n={logTopLevelRenders:!1};t.exports=n},function(t,e,n){"use strict";function r(t){return u?void 0:s("111",t.type),new u(t)}function o(t){return new c(t)}function i(t){return t instanceof c}var s=n(2),a=n(4),u=(n(1),null),l={},c=null,p={injectGenericComponentClass:function(t){u=t},injectTextComponentClass:function(t){c=t},injectComponentClasses:function(t){a(l,t)}},h={createInternalComponent:r,createInstanceForText:o,isTextComponent:i,injection:p};t.exports=h},function(t,e,n){"use strict";function r(t){return i(document.documentElement,t)}var o=n(133),i=n(87),s=n(51),a=n(52),u={hasSelectionCapabilities:function(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&"text"===t.type||"textarea"===e||"true"===t.contentEditable)},getSelectionInformation:function(){var t=a();return{focusedElem:t,selectionRange:u.hasSelectionCapabilities(t)?u.getSelection(t):null}},restoreSelection:function(t){var e=a(),n=t.focusedElem,o=t.selectionRange;e!==n&&r(n)&&(u.hasSelectionCapabilities(n)&&u.setSelection(n,o),s(n))},getSelection:function(t){var e;if("selectionStart"in t)e={start:t.selectionStart,end:t.selectionEnd};else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===t&&(e={start:-n.moveStart("character",-t.value.length),end:-n.moveEnd("character",-t.value.length)})}else e=o.getOffsets(t);return e||{start:0,end:0}},setSelection:function(t,e){var n=e.start,r=e.end;if(void 0===r&&(r=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(r,t.value.length);else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var i=t.createTextRange();i.collapse(!0),i.moveStart("character",n),i.moveEnd("character",r-n),i.select()}else o.setOffsets(t,e)}};t.exports=u},function(t,e,n){"use strict";function r(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++)if(t.charAt(r)!==e.charAt(r))return r;return t.length===e.length?-1:n}function o(t){return t?t.nodeType===R?t.documentElement:t.firstChild:null}function i(t){return t.getAttribute&&t.getAttribute(P)||""}function s(t,e,n,r,o){var i;if(b.logTopLevelRenders){var s=t._currentElement.props,a=s.type;i="React mount: "+("string"==typeof a?a:a.displayName||a.name),console.time(i)}var u=E.mountComponent(t,n,null,y(t,e),o);i&&console.timeEnd(i),t._renderedComponent._topLevelWrapper=t,k._mountImageIntoNode(u,e,t,r,n)}function a(t,e,n,r){var o=S.ReactReconcileTransaction.getPooled(!n&&v.useCreateElement);o.perform(s,null,t,e,o,n,r),S.ReactReconcileTransaction.release(o)}function u(t,e,n){for(E.unmountComponent(t,n),e.nodeType===R&&(e=e.documentElement);e.lastChild;)e.removeChild(e.lastChild)}function l(t){var e=o(t);if(e){var n=m.getInstanceFromNode(e);return!(!n||!n._hostParent)}}function c(t){var e=o(t),n=e&&m.getInstanceFromNode(e);return n&&!n._hostParent?n:null}function p(t){var e=c(t);return e?e._hostContainerInfo._topLevelWrapper:null}var h=n(2),d=n(16),f=n(17),g=n(27),m=(n(15),n(5)),y=n(125),v=n(128),x=n(9),b=n(65),j=n(21),_=(n(7),n(142)),E=n(18),w=n(41),S=n(10),I=n(24),M=n(81),C=(n(1),n(30)),L=n(47),P=(n(3),f.ID_ATTRIBUTE_NAME),T=f.ROOT_ATTRIBUTE_NAME,N=1,R=9,A=11,D={},O=1,F=function(){this.rootID=O++};F.prototype.isReactComponent={},F.prototype.render=function(){return this.props};var k={TopLevelWrapper:F,_instancesByReactRootID:D,scrollMonitor:function(t,e){e()},_updateRootComponent:function(t,e,n,r,o){return k.scrollMonitor(r,function(){w.enqueueElementInternal(t,e,n),o&&w.enqueueCallbackInternal(t,o)}),t},_renderNewRootComponent:function(t,e,n,r){!e||e.nodeType!==N&&e.nodeType!==R&&e.nodeType!==A?h("37"):void 0,g.ensureScrollValueMonitoring();var o=M(t,!1);S.batchedUpdates(a,o,e,n,r);var i=o._instance.rootID;return D[i]=o,o},renderSubtreeIntoContainer:function(t,e,n,r){return null!=t&&j.has(t)?void 0:h("38"),k._renderSubtreeIntoContainer(t,e,n,r)},_renderSubtreeIntoContainer:function(t,e,n,r){w.validateCallback(r,"ReactDOM.render"),x.isValidElement(e)?void 0:h("39","string"==typeof e?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof e?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=e&&void 0!==e.props?" This may be caused by unintentionally loading two independent copies of React.":"");var s,a=x(F,null,null,null,null,null,e);if(t){var u=j.get(t);s=u._processChildContext(u._context)}else s=I;var c=p(n);if(c){var d=c._currentElement,f=d.props;if(L(f,e)){var g=c._renderedComponent.getPublicInstance(),m=r&&function(){r.call(g)};return k._updateRootComponent(c,a,s,n,m),g}k.unmountComponentAtNode(n)}var y=o(n),v=y&&!!i(y),b=l(n),_=v&&!c&&!b,E=k._renderNewRootComponent(a,n,_,s)._renderedComponent.getPublicInstance();return r&&r.call(E),E},render:function(t,e,n){return k._renderSubtreeIntoContainer(null,t,e,n)},unmountComponentAtNode:function(t){!t||t.nodeType!==N&&t.nodeType!==R&&t.nodeType!==A?h("40"):void 0;var e=p(t);if(!e){l(t),1===t.nodeType&&t.hasAttribute(T);return!1}return delete D[e._instance.rootID],S.batchedUpdates(u,e,t,!1),!0},_mountImageIntoNode:function(t,e,n,i,s){if(!e||e.nodeType!==N&&e.nodeType!==R&&e.nodeType!==A?h("41"):void 0,i){var a=o(e);if(_.canReuseMarkup(t,a))return void m.precacheNode(n,a);var u=a.getAttribute(_.CHECKSUM_ATTR_NAME);a.removeAttribute(_.CHECKSUM_ATTR_NAME);var l=a.outerHTML;a.setAttribute(_.CHECKSUM_ATTR_NAME,u);var c=t,p=r(c,l),f=" (client) "+c.substring(p-20,p+20)+"\n (server) "+l.substring(p-20,p+20);e.nodeType===R?h("42",f):void 0}if(e.nodeType===R?h("43"):void 0,s.useCreateElement){for(;e.lastChild;)e.removeChild(e.lastChild);d.insertTreeBefore(e,t,null)}else C(e,t),m.precacheNode(n,e.firstChild)}};t.exports=k},function(t,e,n){"use strict";var r=n(25),o=r({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});t.exports=o},function(t,e,n){"use strict";var r=n(2),o=n(9),i=(n(1),{HOST:0,COMPOSITE:1,EMPTY:2,getType:function(t){return null===t||t===!1?i.EMPTY:o.isValidElement(t)?"function"==typeof t.type?i.COMPOSITE:i.HOST:void r("26",t)}});t.exports=i},function(t,e,n){"use strict";function r(t,e){}var o=(n(3),{isMounted:function(t){return!1},enqueueCallback:function(t,e){},enqueueForceUpdate:function(t){r(t,"forceUpdate")},enqueueReplaceState:function(t,e){r(t,"replaceState")},enqueueSetState:function(t,e){r(t,"setState")}});t.exports=o},function(t,e,n){"use strict";function r(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}function o(t){function e(e,n,r,o,i,s){if(o=o||w,s=s||r,null==n[r]){var a=j[i];return e?new Error("Required "+a+" `"+s+"` was not specified in "+("`"+o+"`.")):null}return t(n,r,o,i,s)}var n=e.bind(null,!1);return n.isRequired=e.bind(null,!0),n}function i(t){function e(e,n,r,o,i){var s=e[n],a=y(s);if(a!==t){var u=j[o],l=v(s);return new Error("Invalid "+u+" `"+i+"` of type "+("`"+l+"` supplied to `"+r+"`, expected ")+("`"+t+"`."))}return null}return o(e)}function s(){return o(_.thatReturns(null))}function a(t){function e(e,n,r,o,i){if("function"!=typeof t)return new Error("Property `"+i+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=e[n];if(!Array.isArray(s)){var a=j[o],u=y(s);return new Error("Invalid "+a+" `"+i+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an array."))}for(var l=0;l<s.length;l++){var c=t(s,l,r,o,i+"["+l+"]");if(c instanceof Error)return c}return null}return o(e)}function u(){function t(t,e,n,r,o){if(!b.isValidElement(t[e])){var i=j[r];return new Error("Invalid "+i+" `"+o+"` supplied to "+("`"+n+"`, expected a single ReactElement."))}return null}return o(t)}function l(t){function e(e,n,r,o,i){if(!(e[n]instanceof t)){var s=j[o],a=t.name||w,u=x(e[n]);return new Error("Invalid "+s+" `"+i+"` of type "+("`"+u+"` supplied to `"+r+"`, expected ")+("instance of `"+a+"`."))}return null}return o(e)}function c(t){function e(e,n,o,i,s){for(var a=e[n],u=0;u<t.length;u++)if(r(a,t[u]))return null;var l=j[i],c=JSON.stringify(t);return new Error("Invalid "+l+" `"+s+"` of value `"+a+"` "+("supplied to `"+o+"`, expected one of "+c+"."))}return o(Array.isArray(t)?e:function(){return new Error("Invalid argument supplied to oneOf, expected an instance of array.")})}function p(t){function e(e,n,r,o,i){if("function"!=typeof t)return new Error("Property `"+i+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=e[n],a=y(s);if("object"!==a){var u=j[o];return new Error("Invalid "+u+" `"+i+"` of type "+("`"+a+"` supplied to `"+r+"`, expected an object."))}for(var l in s)if(s.hasOwnProperty(l)){var c=t(s,l,r,o,i+"."+l);if(c instanceof Error)return c}return null}return o(e)}function h(t){function e(e,n,r,o,i){for(var s=0;s<t.length;s++){var a=t[s];if(null==a(e,n,r,o,i))return null}var u=j[o];return new Error("Invalid "+u+" `"+i+"` supplied to "+("`"+r+"`."))}return o(Array.isArray(t)?e:function(){return new Error("Invalid argument supplied to oneOfType, expected an instance of array.")})}function d(){function t(t,e,n,r,o){if(!g(t[e])){var i=j[r];return new Error("Invalid "+i+" `"+o+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return o(t)}function f(t){function e(e,n,r,o,i){var s=e[n],a=y(s);if("object"!==a){var u=j[o];return new Error("Invalid "+u+" `"+i+"` of type `"+a+"` "+("supplied to `"+r+"`, expected `object`."))}for(var l in t){var c=t[l];if(c){var p=c(s,l,r,o,i+"."+l);if(p)return p}}return null}return o(e)}function g(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(g);if(null===t||b.isValidElement(t))return!0;var e=E(t);if(!e)return!1;var n,r=e.call(t);if(e!==t.entries){for(;!(n=r.next()).done;)if(!g(n.value))return!1}else for(;!(n=r.next()).done;){var o=n.value;if(o&&!g(o[1]))return!1}return!0;default:return!1}}function m(t,e){return"symbol"===t||("Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol)}function y(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":m(e,t)?"symbol":e}function v(t){var e=y(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}function x(t){return t.constructor&&t.constructor.name?t.constructor.name:w}var b=n(9),j=n(39),_=n(8),E=n(79),w="<<anonymous>>",S={array:i("array"),bool:i("boolean"),func:i("function"),number:i("number"),object:i("object"),string:i("string"),symbol:i("symbol"),any:s(),arrayOf:a,element:u(),instanceOf:l,node:d(),objectOf:p,oneOf:c,oneOfType:h,shape:f};t.exports=S},function(t,e){"use strict";t.exports="15.2.1"},function(t,e){"use strict";var n={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(t){n.currentScrollLeft=t.x,n.currentScrollTop=t.y}};t.exports=n},function(t,e,n){"use strict";function r(t,e){return null==e?o("30"):void 0,null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}var o=n(2);n(1);t.exports=r},function(t,e,n){"use strict";var r=!1;t.exports=r},function(t,e){"use strict";function n(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}t.exports=n},function(t,e,n){"use strict";function r(t){for(var e;(e=t._renderedNodeType)===o.COMPOSITE;)t=t._renderedComponent;return e===o.HOST?t._renderedComponent:e===o.EMPTY?null:void 0}var o=n(70);t.exports=r},function(t,e){"use strict";function n(t){var e=t&&(r&&t[r]||t[o]);if("function"==typeof e)return e}var r="function"==typeof Symbol&&Symbol.iterator,o="@@iterator";t.exports=n},function(t,e,n){"use strict";function r(){return!i&&o.canUseDOM&&(i="textContent"in document.documentElement?"textContent":"innerText"),i}var o=n(6),i=null;t.exports=r},function(t,e,n){"use strict";function r(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""}function o(t){return"function"==typeof t&&"undefined"!=typeof t.prototype&&"function"==typeof t.prototype.mountComponent&&"function"==typeof t.prototype.receiveComponent}function i(t,e){var n;if(null===t||t===!1)n=l.create(i);else if("object"==typeof t){var a=t;!a||"function"!=typeof a.type&&"string"!=typeof a.type?s("130",null==a.type?a.type:typeof a.type,r(a._owner)):void 0,"string"==typeof a.type?n=c.createInternalComponent(a):o(a.type)?(n=new a.type(a),n.getHostNode||(n.getHostNode=n.getNativeNode)):n=new p(a)}else"string"==typeof t||"number"==typeof t?n=c.createInstanceForText(t):s("131",typeof t);n._mountIndex=0,n._mountImage=null;return n}var s=n(2),a=n(4),u=n(121),l=n(64),c=n(66),p=(n(7),n(1),n(3),function(t){this.construct(t)});a(p.prototype,u.Mixin,{_instantiateReactComponent:i});t.exports=i},function(t,e){"use strict";function n(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!r[t.type]:"textarea"===e}var r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=n},function(t,e,n){"use strict";var r=n(6),o=n(29),i=n(30),s=function(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e};r.canUseDOM&&("textContent"in document.documentElement||(s=function(t,e){i(t,o(e))})),t.exports=s},function(t,e,n){"use strict";t.exports=n(119)},function(t,e){"use strict";function n(t){return t.replace(r,function(t,e){return e.toUpperCase()})}var r=/-(.)/g;t.exports=n},function(t,e,n){"use strict";function r(t){return o(t.replace(i,"ms-"))}var o=n(85),i=/^-ms-/;t.exports=r},function(t,e,n){"use strict";function r(t,e){return!(!t||!e)&&(t===e||!o(t)&&(o(e)?r(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}var o=n(95);t.exports=r},function(t,e,n){"use strict";function r(t){var e=t.length;if(Array.isArray(t)||"object"!=typeof t&&"function"!=typeof t?s(!1):void 0,"number"!=typeof e?s(!1):void 0,0===e||e-1 in t?void 0:s(!1),"function"==typeof t.callee?s(!1):void 0,t.hasOwnProperty)try{return Array.prototype.slice.call(t)}catch(n){}for(var r=Array(e),o=0;o<e;o++)r[o]=t[o];return r}function o(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"length"in t&&!("setInterval"in t)&&"number"!=typeof t.nodeType&&(Array.isArray(t)||"callee"in t||"item"in t)}function i(t){return o(t)?Array.isArray(t)?t.slice():r(t):[t]}var s=n(1);t.exports=i},function(t,e,n){"use strict";function r(t){var e=t.match(c);return e&&e[1].toLowerCase()}function o(t,e){var n=l;l?void 0:u(!1);var o=r(t),i=o&&a(o);if(i){n.innerHTML=i[1]+t+i[2];for(var c=i[0];c--;)n=n.lastChild}else n.innerHTML=t;var p=n.getElementsByTagName("script");p.length&&(e?void 0:u(!1),s(p).forEach(e));for(var h=Array.from(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return h}var i=n(6),s=n(88),a=n(90),u=n(1),l=i.canUseDOM?document.createElement("div"):null,c=/^\s*<(\w+)/;t.exports=o},function(t,e,n){"use strict";function r(t){return s?void 0:i(!1),h.hasOwnProperty(t)||(t="*"),a.hasOwnProperty(t)||("*"===t?s.innerHTML="<link />":s.innerHTML="<"+t+"></"+t+">",a[t]=!s.firstChild),a[t]?h[t]:null}var o=n(6),i=n(1),s=o.canUseDOM?document.createElement("div"):null,a={},u=[1,'<select multiple="true">',"</select>"],l=[1,"<table>","</table>"],c=[3,"<table><tbody><tr>","</tr></tbody></table>"],p=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],h={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:u,option:u,caption:l,colgroup:l,tbody:l,tfoot:l,thead:l,td:c,th:c},d=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];d.forEach(function(t){h[t]=p,a[t]=!0}),t.exports=r},function(t,e){"use strict";function n(t){return t===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:t.scrollLeft,y:t.scrollTop}}t.exports=n},function(t,e){"use strict";function n(t){return t.replace(r,"-$1").toLowerCase()}var r=/([A-Z])/g;t.exports=n},function(t,e,n){"use strict";function r(t){return o(t).replace(i,"-ms-")}var o=n(92),i=/^ms-/;t.exports=r},function(t,e){"use strict";function n(t){return!(!t||!("function"==typeof Node?t instanceof Node:"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName))}t.exports=n},function(t,e,n){"use strict";function r(t){return o(t)&&3==t.nodeType}var o=n(94);t.exports=r},function(t,e){"use strict";function n(t,e,n){if(!t)return null;var o={};for(var i in t)r.call(t,i)&&(o[i]=e.call(n,t[i],i,t));return o}var r=Object.prototype.hasOwnProperty;t.exports=n},function(t,e){"use strict";function n(t){var e={};return function(n){return e.hasOwnProperty(n)||(e[n]=t.call(this,n)),e[n]}}t.exports=n},function(t,e,n){"use strict";t.exports=n(122)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(84),l=r(u),c=n(107),p=r(c);n(104);var h=l.default.createElement("div",{className:"App"},l.default.createElement("div",{className:"App-header"},l.default.createElement("img",{src:p.default,className:"App-logo",alt:"logo"}),l.default.createElement("h2",null,"Welcome to React")),l.default.createElement("p",{className:"App-intro"},"To get started, edit ",l.default.createElement("code",null,"src/App.js")," and save to reload.")),d=function(t){function e(){return o(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return s(e,t),a(e,[{key:"render",value:function(){return h}}]),e}(u.Component);e.default=d},function(t,e,n){var r,o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(){function s(t){return t&&(t.ownerDocument||t.document||t).documentElement}function a(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function u(t,e){return e>t?-1:t>e?1:t>=e?0:NaN}function l(t){return null===t?NaN:+t}function c(t){return!isNaN(t)}function p(t){return{left:function(e,n,r,o){for(arguments.length<3&&(r=0),arguments.length<4&&(o=e.length);o>r;){var i=r+o>>>1;t(e[i],n)<0?r=i+1:o=i}return r},right:function(e,n,r,o){for(arguments.length<3&&(r=0),arguments.length<4&&(o=e.length);o>r;){var i=r+o>>>1;t(e[i],n)>0?o=i:r=i+1}return r}}}function h(t){return t.length}function d(t){for(var e=1;t*e%1;)e*=10;return e}function f(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function g(){this._=Object.create(null)}function m(t){return(t+="")===Ms||t[0]===Cs?Cs+t:t}function y(t){return(t+="")[0]===Cs?t.slice(1):t}function v(t){return m(t)in this._}function x(t){return(t=m(t))in this._&&delete this._[t]}function b(){var t=[];for(var e in this._)t.push(y(e));return t}function j(){var t=0;for(var e in this._)++t;return t}function _(){for(var t in this._)return!1;return!0}function E(){this._=Object.create(null)}function w(t){return t}function S(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function I(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=Ls.length;r>n;++n){var o=Ls[n]+e;if(o in t)return o}}function M(){}function C(){}function L(t){function e(){for(var e,r=n,o=-1,i=r.length;++o<i;)(e=r[o].on)&&e.apply(this,arguments);return t}var n=[],r=new g;return e.on=function(e,o){var i,s=r.get(e);return arguments.length<2?s&&s.on:(s&&(s.on=null,n=n.slice(0,i=n.indexOf(s)).concat(n.slice(i+1)),r.remove(e)),o&&n.push(r.set(e,{on:o})),t)},e}function P(){fs.event.preventDefault()}function T(){for(var t,e=fs.event;t=e.sourceEvent;)e=t;return e}function N(t){for(var e=new C,n=0,r=arguments.length;++n<r;)e[arguments[n]]=L(e);return e.of=function(n,r){return function(o){try{var i=o.sourceEvent=fs.event;o.target=t,fs.event=o,e[o.type].apply(n,r)}finally{fs.event=i}}},e}function R(t){return Ts(t,Ds),t}function A(t){return"function"==typeof t?t:function(){return Ns(t,this)}}function D(t){return"function"==typeof t?t:function(){return Rs(t,this)}}function O(t,e){function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function o(){this.setAttribute(t,e)}function i(){this.setAttributeNS(t.space,t.local,e)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=fs.ns.qualify(t),null==e?t.local?r:n:"function"==typeof e?t.local?a:s:t.local?i:o}function F(t){return t.trim().replace(/\s+/g," ")}function k(t){return new RegExp("(?:^|\\s+)"+fs.requote(t)+"(?:\\s+|$)","g")}function B(t){return(t+"").trim().split(/^|\s+/)}function z(t,e){function n(){for(var n=-1;++n<o;)t[n](this,e)}function r(){for(var n=-1,r=e.apply(this,arguments);++n<o;)t[n](this,r)}t=B(t).map(G);var o=t.length;return"function"==typeof e?r:n}function G(t){var e=k(t);return function(n,r){if(o=n.classList)return r?o.add(t):o.remove(t);var o=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(o)||n.setAttribute("class",F(o+" "+t))):n.setAttribute("class",F(o.replace(e," ")))}}function q(t,e,n){function r(){this.style.removeProperty(t)}function o(){this.style.setProperty(t,e,n)}function i(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}return null==e?r:"function"==typeof e?i:o}function U(t,e){function n(){delete this[t]}function r(){this[t]=e}function o(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?o:r}function V(t){function e(){var e=this.ownerDocument,n=this.namespaceURI;return n===Os&&e.documentElement.namespaceURI===Os?e.createElement(t):e.createElementNS(n,t)}function n(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=fs.ns.qualify(t)).local?n:e}function Y(){var t=this.parentNode;t&&t.removeChild(this)}function H(t){return{__data__:t}}function X(t){return function(){return As(this,t)}}function W(t){return arguments.length||(t=u),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function Z(t,e){for(var n=0,r=t.length;r>n;n++)for(var o,i=t[n],s=0,a=i.length;a>s;s++)(o=i[s])&&e(o,s,n);return t}function Q(t){return Ts(t,ks),t}function K(t){var e,n;return function(r,o,i){var s,a=t[i].update,u=a.length;for(i!=n&&(n=i,e=0),o>=e&&(e=o+1);!(s=a[e])&&++e<u;);return s}}function J(t,e,n){function r(){var e=this[s];e&&(this.removeEventListener(t,e,e.$),delete this[s])}function o(){var o=u(e,ms(arguments));r.call(this),this.addEventListener(t,this[s]=o,o.$=n),o._=e}function i(){var e,n=new RegExp("^__on([^.]+)"+fs.requote(t)+"$");for(var r in this)if(e=r.match(n)){var o=this[r];this.removeEventListener(e[1],o,o.$),delete this[r]}}var s="__on"+t,a=t.indexOf("."),u=$;a>0&&(t=t.slice(0,a));var l=Bs.get(t);return l&&(t=l,u=tt),a?e?o:r:e?M:i}function $(t,e){return function(n){var r=fs.event;fs.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{fs.event=r}}}function tt(t,e){var n=$(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}function et(t){var e=".dragsuppress-"+ ++Gs,n="click"+e,r=fs.select(a(t)).on("touchmove"+e,P).on("dragstart"+e,P).on("selectstart"+e,P);if(null==zs&&(zs=!("onselectstart"in t)&&I(t.style,"userSelect")),zs){var o=s(t).style,i=o[zs];o[zs]="none"}return function(t){if(r.on(e,null),zs&&(o[zs]=i),t){var s=function(){r.on(n,null)};r.on(n,function(){P(),s()},!0),setTimeout(s,0)}}}function nt(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();if(0>qs){var o=a(t);if(o.scrollX||o.scrollY){n=fs.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var i=n[0][0].getScreenCTM();qs=!(i.f||i.e),n.remove()}}return qs?(r.x=e.pageX,r.y=e.pageY):(r.x=e.clientX,r.y=e.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}function rt(){return fs.event.changedTouches[0].identifier}function ot(t){return t>0?1:0>t?-1:0}function it(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function st(t){return t>1?0:-1>t?Ys:Math.acos(t)}function at(t){return t>1?Ws:-1>t?-Ws:Math.asin(t)}function ut(t){return((t=Math.exp(t))-1/t)/2}function lt(t){return((t=Math.exp(t))+1/t)/2}function ct(t){return((t=Math.exp(2*t))-1)/(t+1)}function pt(t){return(t=Math.sin(t/2))*t}function ht(){}function dt(t,e,n){return this instanceof dt?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof dt?new dt(t.h,t.s,t.l):Mt(""+t,Ct,dt):new dt(t,e,n)}function ft(t,e,n){function r(t){return t>360?t-=360:0>t&&(t+=360),60>t?i+(s-i)*t/60:180>t?s:240>t?i+(s-i)*(240-t)/60:i}function o(t){return Math.round(255*r(t))}var i,s;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,s=.5>=n?n*(1+e):n+e-n*e,i=2*n-s,new Et(o(t+120),o(t),o(t-120))}function gt(t,e,n){return this instanceof gt?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof gt?new gt(t.h,t.c,t.l):t instanceof yt?xt(t.l,t.a,t.b):xt((t=Lt((t=fs.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new gt(t,e,n);
}function mt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new yt(n,Math.cos(t*=Zs)*e,Math.sin(t)*e)}function yt(t,e,n){return this instanceof yt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof yt?new yt(t.l,t.a,t.b):t instanceof gt?mt(t.h,t.c,t.l):Lt((t=Et(t)).r,t.g,t.b):new yt(t,e,n)}function vt(t,e,n){var r=(t+16)/116,o=r+e/500,i=r-n/200;return o=bt(o)*sa,r=bt(r)*aa,i=bt(i)*ua,new Et(_t(3.2404542*o-1.5371385*r-.4985314*i),_t(-.969266*o+1.8760108*r+.041556*i),_t(.0556434*o-.2040259*r+1.0572252*i))}function xt(t,e,n){return t>0?new gt(Math.atan2(n,e)*Qs,Math.sqrt(e*e+n*n),t):new gt(NaN,NaN,t)}function bt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function jt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function _t(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function Et(t,e,n){return this instanceof Et?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof Et?new Et(t.r,t.g,t.b):Mt(""+t,Et,ft):new Et(t,e,n)}function wt(t){return new Et(t>>16,t>>8&255,255&t)}function St(t){return wt(t)+""}function It(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function Mt(t,e,n){var r,o,i,s=0,a=0,u=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(o=r[2].split(","),r[1]){case"hsl":return n(parseFloat(o[0]),parseFloat(o[1])/100,parseFloat(o[2])/100);case"rgb":return e(Tt(o[0]),Tt(o[1]),Tt(o[2]))}return(i=pa.get(t))?e(i.r,i.g,i.b):(null==t||"#"!==t.charAt(0)||isNaN(i=parseInt(t.slice(1),16))||(4===t.length?(s=(3840&i)>>4,s=s>>4|s,a=240&i,a=a>>4|a,u=15&i,u=u<<4|u):7===t.length&&(s=(16711680&i)>>16,a=(65280&i)>>8,u=255&i)),e(s,a,u))}function Ct(t,e,n){var r,o,i=Math.min(t/=255,e/=255,n/=255),s=Math.max(t,e,n),a=s-i,u=(s+i)/2;return a?(o=.5>u?a/(s+i):a/(2-s-i),r=t==s?(e-n)/a+(n>e?6:0):e==s?(n-t)/a+2:(t-e)/a+4,r*=60):(r=NaN,o=u>0&&1>u?0:r),new dt(r,o,u)}function Lt(t,e,n){t=Pt(t),e=Pt(e),n=Pt(n);var r=jt((.4124564*t+.3575761*e+.1804375*n)/sa),o=jt((.2126729*t+.7151522*e+.072175*n)/aa),i=jt((.0193339*t+.119192*e+.9503041*n)/ua);return yt(116*o-16,500*(r-o),200*(o-i))}function Pt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Tt(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function Nt(t){return"function"==typeof t?t:function(){return t}}function Rt(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),At(e,n,t,r)}}function At(t,e,n,r){function o(){var t,e=u.status;if(!e&&Ot(u)||e>=200&&300>e||304===e){try{t=n.call(i,u)}catch(r){return void s.error.call(i,r)}s.load.call(i,t)}else s.error.call(i,u)}var i={},s=fs.dispatch("beforesend","progress","load","error"),a={},u=new XMLHttpRequest,l=null;return!this.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(t)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=o:u.onreadystatechange=function(){u.readyState>3&&o()},u.onprogress=function(t){var e=fs.event;fs.event=t;try{s.progress.call(i,u)}finally{fs.event=e}},i.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?a[t]:(null==e?delete a[t]:a[t]=e+"",i)},i.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",i):e},i.responseType=function(t){return arguments.length?(l=t,i):l},i.response=function(t){return n=t,i},["get","post"].forEach(function(t){i[t]=function(){return i.send.apply(i,[t].concat(ms(arguments)))}}),i.send=function(n,r,o){if(2===arguments.length&&"function"==typeof r&&(o=r,r=null),u.open(n,t,!0),null==e||"accept"in a||(a.accept=e+",*/*"),u.setRequestHeader)for(var c in a)u.setRequestHeader(c,a[c]);return null!=e&&u.overrideMimeType&&u.overrideMimeType(e),null!=l&&(u.responseType=l),null!=o&&i.on("error",o).on("load",function(t){o(null,t)}),s.beforesend.call(i,u),u.send(null==r?null:r),i},i.abort=function(){return u.abort(),i},fs.rebind(i,s,"on"),null==r?i:i.get(Dt(r))}function Dt(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function Ot(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function Ft(t,e,n){var r=arguments.length;2>r&&(e=0),3>r&&(n=Date.now());var o=n+e,i={c:t,t:o,n:null};return da?da.n=i:ha=i,da=i,fa||(ga=clearTimeout(ga),fa=1,ma(kt)),i}function kt(){var t=Bt(),e=zt()-t;e>24?(isFinite(e)&&(clearTimeout(ga),ga=setTimeout(kt,e)),fa=0):(fa=1,ma(kt))}function Bt(){for(var t=Date.now(),e=ha;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function zt(){for(var t,e=ha,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:ha=e.n;return da=t,n}function Gt(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function qt(t,e){var n=Math.pow(10,3*Is(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function Ut(t){var e=t.decimal,n=t.thousands,r=t.grouping,o=t.currency,i=r&&n?function(t,e){for(var o=t.length,i=[],s=0,a=r[0],u=0;o>0&&a>0&&(u+a+1>e&&(a=Math.max(1,e-u)),i.push(t.substring(o-=a,o+a)),!((u+=a+1)>e));)a=r[s=(s+1)%r.length];return i.reverse().join(n)}:w;return function(t){var n=va.exec(t),r=n[1]||" ",s=n[2]||">",a=n[3]||"-",u=n[4]||"",l=n[5],c=+n[6],p=n[7],h=n[8],d=n[9],f=1,g="",m="",y=!1,v=!0;switch(h&&(h=+h.substring(1)),(l||"0"===r&&"="===s)&&(l=r="0",s="="),d){case"n":p=!0,d="g";break;case"%":f=100,m="%",d="f";break;case"p":f=100,m="%",d="r";break;case"b":case"o":case"x":case"X":"#"===u&&(g="0"+d.toLowerCase());case"c":v=!1;case"d":y=!0,h=0;break;case"s":f=-1,d="r"}"$"===u&&(g=o[0],m=o[1]),"r"!=d||h||(d="g"),null!=h&&("g"==d?h=Math.max(1,Math.min(21,h)):"e"!=d&&"f"!=d||(h=Math.max(0,Math.min(20,h)))),d=xa.get(d)||Vt;var x=l&&p;return function(t){var n=m;if(y&&t%1)return"";var o=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===a?"":a;if(0>f){var u=fs.formatPrefix(t,h);t=u.scale(t),n=u.symbol+m}else t*=f;t=d(t,h);var b,j,_=t.lastIndexOf(".");if(0>_){var E=v?t.lastIndexOf("e"):-1;0>E?(b=t,j=""):(b=t.substring(0,E),j=t.substring(E))}else b=t.substring(0,_),j=e+t.substring(_+1);!l&&p&&(b=i(b,1/0));var w=g.length+b.length+j.length+(x?0:o.length),S=c>w?new Array(w=c-w+1).join(r):"";return x&&(b=i(S+b,S.length?c-j.length:1/0)),o+=g,t=b+j,("<"===s?o+t+S:">"===s?S+o+t:"^"===s?S.substring(0,w>>=1)+o+t+S.substring(w):o+(x?t:S+t))+n}}}function Vt(t){return t+""}function Yt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ht(t,e,n){function r(e){var n=t(e),r=i(n,1);return r-e>e-n?n:r}function o(n){return e(n=t(new ja(n-1)),1),n}function i(t,n){return e(t=new ja((+t)),n),t}function s(t,r,i){var s=o(t),a=[];if(i>1)for(;r>s;)n(s)%i||a.push(new Date((+s))),e(s,1);else for(;r>s;)a.push(new Date((+s))),e(s,1);return a}function a(t,e,n){try{ja=Yt;var r=new Yt;return r._=t,s(r,e,n)}finally{ja=Date}}t.floor=t,t.round=r,t.ceil=o,t.offset=i,t.range=s;var u=t.utc=Xt(t);return u.floor=u,u.round=Xt(r),u.ceil=Xt(o),u.offset=Xt(i),u.range=a,t}function Xt(t){return function(e,n){try{ja=Yt;var r=new Yt;return r._=e,t(r,n)._}finally{ja=Date}}}function Wt(t){function e(t){function e(e){for(var n,o,i,s=[],a=-1,u=0;++a<r;)37===t.charCodeAt(a)&&(s.push(t.slice(u,a)),null!=(o=Ea[n=t.charAt(++a)])&&(n=t.charAt(++a)),(i=C[n])&&(n=i(e,null==o?"e"===n?" ":"0":o)),s.push(n),u=a+1);return s.push(t.slice(u,a)),s.join("")}var r=t.length;return e.parse=function(e){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},o=n(r,t,e,0);if(o!=e.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&ja!==Yt,s=new(i?Yt:ja);return"j"in r?s.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),s.setFullYear(r.y,0,1),s.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(s.getDay()+5)%7:r.w+7*r.U-(s.getDay()+6)%7)):s.setFullYear(r.y,r.m,r.d),s.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),i?s._:s},e.toString=function(){return t},e}function n(t,e,n,r){for(var o,i,s,a=0,u=e.length,l=n.length;u>a;){if(r>=l)return-1;if(o=e.charCodeAt(a++),37===o){if(s=e.charAt(a++),i=L[s in Ea?e.charAt(a++):s],!i||(r=i(t,n,r))<0)return-1}else if(o!=n.charCodeAt(r++))return-1}return r}function r(t,e,n){_.lastIndex=0;var r=_.exec(e.slice(n));return r?(t.w=E.get(r[0].toLowerCase()),n+r[0].length):-1}function o(t,e,n){b.lastIndex=0;var r=b.exec(e.slice(n));return r?(t.w=j.get(r[0].toLowerCase()),n+r[0].length):-1}function i(t,e,n){I.lastIndex=0;var r=I.exec(e.slice(n));return r?(t.m=M.get(r[0].toLowerCase()),n+r[0].length):-1}function s(t,e,n){w.lastIndex=0;var r=w.exec(e.slice(n));return r?(t.m=S.get(r[0].toLowerCase()),n+r[0].length):-1}function a(t,e,r){return n(t,C.c.toString(),e,r)}function u(t,e,r){return n(t,C.x.toString(),e,r)}function l(t,e,r){return n(t,C.X.toString(),e,r)}function c(t,e,n){var r=x.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)}var p=t.dateTime,h=t.date,d=t.time,f=t.periods,g=t.days,m=t.shortDays,y=t.months,v=t.shortMonths;e.utc=function(t){function n(t){try{ja=Yt;var e=new ja;return e._=t,r(e)}finally{ja=Date}}var r=e(t);return n.parse=function(t){try{ja=Yt;var e=r.parse(t);return e&&e._}finally{ja=Date}},n.toString=r.toString,n},e.multi=e.utc.multi=fe;var x=fs.map(),b=Qt(g),j=Kt(g),_=Qt(m),E=Kt(m),w=Qt(y),S=Kt(y),I=Qt(v),M=Kt(v);f.forEach(function(t,e){x.set(t.toLowerCase(),e)});var C={a:function(t){return m[t.getDay()]},A:function(t){return g[t.getDay()]},b:function(t){return v[t.getMonth()]},B:function(t){return y[t.getMonth()]},c:e(p),d:function(t,e){return Zt(t.getDate(),e,2)},e:function(t,e){return Zt(t.getDate(),e,2)},H:function(t,e){return Zt(t.getHours(),e,2)},I:function(t,e){return Zt(t.getHours()%12||12,e,2)},j:function(t,e){return Zt(1+ba.dayOfYear(t),e,3)},L:function(t,e){return Zt(t.getMilliseconds(),e,3)},m:function(t,e){return Zt(t.getMonth()+1,e,2)},M:function(t,e){return Zt(t.getMinutes(),e,2)},p:function(t){return f[+(t.getHours()>=12)]},S:function(t,e){return Zt(t.getSeconds(),e,2)},U:function(t,e){return Zt(ba.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Zt(ba.mondayOfYear(t),e,2)},x:e(h),X:e(d),y:function(t,e){return Zt(t.getFullYear()%100,e,2)},Y:function(t,e){return Zt(t.getFullYear()%1e4,e,4)},Z:he,"%":function(){return"%"}},L={a:r,A:o,b:i,B:s,c:a,d:se,e:se,H:ue,I:ue,j:ae,L:pe,m:ie,M:le,p:c,S:ce,U:$t,w:Jt,W:te,x:u,X:l,y:ne,Y:ee,Z:re,"%":de};return e}function Zt(t,e,n){var r=0>t?"-":"",o=(r?-t:t)+"",i=o.length;return r+(n>i?new Array(n-i+1).join(e)+o:o)}function Qt(t){return new RegExp("^(?:"+t.map(fs.requote).join("|")+")","i")}function Kt(t){for(var e=new g,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Jt(t,e,n){wa.lastIndex=0;var r=wa.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function $t(t,e,n){wa.lastIndex=0;var r=wa.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function te(t,e,n){wa.lastIndex=0;var r=wa.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function ee(t,e,n){wa.lastIndex=0;var r=wa.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function ne(t,e,n){wa.lastIndex=0;var r=wa.exec(e.slice(n,n+2));return r?(t.y=oe(+r[0]),n+r[0].length):-1}function re(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function oe(t){return t+(t>68?1900:2e3)}function ie(t,e,n){wa.lastIndex=0;var r=wa.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function se(t,e,n){wa.lastIndex=0;var r=wa.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ae(t,e,n){wa.lastIndex=0;var r=wa.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function ue(t,e,n){wa.lastIndex=0;var r=wa.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function le(t,e,n){wa.lastIndex=0;var r=wa.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function ce(t,e,n){wa.lastIndex=0;var r=wa.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function pe(t,e,n){wa.lastIndex=0;var r=wa.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function he(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=Is(e)/60|0,o=Is(e)%60;return n+Zt(r,"0",2)+Zt(o,"0",2)}function de(t,e,n){Sa.lastIndex=0;var r=Sa.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function fe(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}function ge(){}function me(t,e,n){var r=n.s=t+e,o=r-t,i=r-o;n.t=t-i+(e-o)}function ye(t,e){t&&La.hasOwnProperty(t.type)&&La[t.type](t,e)}function ve(t,e,n){var r,o=-1,i=t.length-n;for(e.lineStart();++o<i;)r=t[o],e.point(r[0],r[1],r[2]);e.lineEnd()}function xe(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)ve(t[n],e,1);e.polygonEnd()}function be(){function t(t,e){t*=Zs,e=e*Zs/2+Ys/4;var n=t-r,s=n>=0?1:-1,a=s*n,u=Math.cos(e),l=Math.sin(e),c=i*l,p=o*u+c*Math.cos(a),h=c*s*Math.sin(a);Ta.add(Math.atan2(h,p)),r=t,o=u,i=l}var e,n,r,o,i;Na.point=function(s,a){Na.point=t,r=(e=s)*Zs,o=Math.cos(a=(n=a)*Zs/2+Ys/4),i=Math.sin(a)},Na.lineEnd=function(){t(e,n)}}function je(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function _e(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ee(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function we(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Se(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Ie(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Me(t){return[Math.atan2(t[1],t[0]),at(t[2])]}function Ce(t,e){return Is(t[0]-e[0])<Us&&Is(t[1]-e[1])<Us}function Le(t,e){t*=Zs;var n=Math.cos(e*=Zs);Pe(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Pe(t,e,n){++Ra,Da+=(t-Da)/Ra,Oa+=(e-Oa)/Ra,Fa+=(n-Fa)/Ra}function Te(){function t(t,o){t*=Zs;var i=Math.cos(o*=Zs),s=i*Math.cos(t),a=i*Math.sin(t),u=Math.sin(o),l=Math.atan2(Math.sqrt((l=n*u-r*a)*l+(l=r*s-e*u)*l+(l=e*a-n*s)*l),e*s+n*a+r*u);Aa+=l,ka+=l*(e+(e=s)),Ba+=l*(n+(n=a)),za+=l*(r+(r=u)),Pe(e,n,r)}var e,n,r;Va.point=function(o,i){o*=Zs;var s=Math.cos(i*=Zs);e=s*Math.cos(o),n=s*Math.sin(o),r=Math.sin(i),Va.point=t,Pe(e,n,r)}}function Ne(){Va.point=Le}function Re(){function t(t,e){t*=Zs;var n=Math.cos(e*=Zs),s=n*Math.cos(t),a=n*Math.sin(t),u=Math.sin(e),l=o*u-i*a,c=i*s-r*u,p=r*a-o*s,h=Math.sqrt(l*l+c*c+p*p),d=r*s+o*a+i*u,f=h&&-st(d)/h,g=Math.atan2(h,d);Ga+=f*l,qa+=f*c,Ua+=f*p,Aa+=g,ka+=g*(r+(r=s)),Ba+=g*(o+(o=a)),za+=g*(i+(i=u)),Pe(r,o,i)}var e,n,r,o,i;Va.point=function(s,a){e=s,n=a,Va.point=t,s*=Zs;var u=Math.cos(a*=Zs);r=u*Math.cos(s),o=u*Math.sin(s),i=Math.sin(a),Pe(r,o,i)},Va.lineEnd=function(){t(e,n),Va.lineEnd=Ne,Va.point=Le}}function Ae(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n}function De(){return!0}function Oe(t,e,n,r,o){var i=[],s=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(Ce(n,r)){o.lineStart();for(var a=0;e>a;++a)o.point((n=t[a])[0],n[1]);return void o.lineEnd()}var u=new ke(n,t,null,(!0)),l=new ke(n,null,u,(!1));u.o=l,i.push(u),s.push(l),u=new ke(r,t,null,(!1)),l=new ke(r,null,u,(!0)),u.o=l,i.push(u),s.push(l)}}),s.sort(e),Fe(i),Fe(s),i.length){for(var a=0,u=n,l=s.length;l>a;++a)s[a].e=u=!u;for(var c,p,h=i[0];;){for(var d=h,f=!0;d.v;)if((d=d.n)===h)return;c=d.z,o.lineStart();do{if(d.v=d.o.v=!0,d.e){if(f)for(var a=0,l=c.length;l>a;++a)o.point((p=c[a])[0],p[1]);else r(d.x,d.n.x,1,o);d=d.n}else{if(f){c=d.p.z;for(var a=c.length-1;a>=0;--a)o.point((p=c[a])[0],p[1])}else r(d.x,d.p.x,-1,o);d=d.p}d=d.o,c=d.z,f=!f}while(!d.v);o.lineEnd()}}}function Fe(t){if(e=t.length){for(var e,n,r=0,o=t[0];++r<e;)o.n=n=t[r],n.p=o,o=n;o.n=n=t[0],n.p=o}}function ke(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Be(t,e,n,r){return function(o,i){function s(e,n){var r=o(e,n);t(e=r[0],n=r[1])&&i.point(e,n)}function a(t,e){var n=o(t,e);m.point(n[0],n[1])}function u(){v.point=a,m.lineStart()}function l(){v.point=s,m.lineEnd()}function c(t,e){g.push([t,e]);var n=o(t,e);b.point(n[0],n[1])}function p(){b.lineStart(),g=[]}function h(){c(g[0][0],g[0][1]),b.lineEnd();var t,e=b.clean(),n=x.buffer(),r=n.length;if(g.pop(),f.push(g),g=null,r)if(1&e){t=n[0];var o,r=t.length-1,s=-1;if(r>0){for(j||(i.polygonStart(),j=!0),i.lineStart();++s<r;)i.point((o=t[s])[0],o[1]);i.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),d.push(n.filter(ze))}var d,f,g,m=e(i),y=o.invert(r[0],r[1]),v={point:s,lineStart:u,lineEnd:l,polygonStart:function(){v.point=c,v.lineStart=p,v.lineEnd=h,d=[],f=[]},polygonEnd:function(){v.point=s,v.lineStart=u,v.lineEnd=l,d=fs.merge(d);var t=He(y,f);d.length?(j||(i.polygonStart(),j=!0),Oe(d,qe,t,n,i)):t&&(j||(i.polygonStart(),j=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),j&&(i.polygonEnd(),j=!1),d=f=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}},x=Ge(),b=e(x),j=!1;return v}}function ze(t){return t.length>1}function Ge(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:M,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function qe(t,e){return((t=t.x)[0]<0?t[1]-Ws-Us:Ws-t[1])-((e=e.x)[0]<0?e[1]-Ws-Us:Ws-e[1])}function Ue(t){var e,n=NaN,r=NaN,o=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(i,s){var a=i>0?Ys:-Ys,u=Is(i-n);Is(u-Ys)<Us?(t.point(n,r=(r+s)/2>0?Ws:-Ws),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(i,r),e=0):o!==a&&u>=Ys&&(Is(n-o)<Us&&(n-=o*Us),Is(i-a)<Us&&(i-=a*Us),r=Ve(n,r,i,s),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(a,r),e=0),t.point(n=i,r=s),o=a},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function Ve(t,e,n,r){var o,i,s=Math.sin(t-n);return Is(s)>Us?Math.atan((Math.sin(e)*(i=Math.cos(r))*Math.sin(n)-Math.sin(r)*(o=Math.cos(e))*Math.sin(t))/(o*i*s)):(e+r)/2}function Ye(t,e,n,r){var o;if(null==t)o=n*Ws,r.point(-Ys,o),r.point(0,o),r.point(Ys,o),r.point(Ys,0),r.point(Ys,-o),r.point(0,-o),r.point(-Ys,-o),r.point(-Ys,0),r.point(-Ys,o);else if(Is(t[0]-e[0])>Us){var i=t[0]<e[0]?Ys:-Ys;o=n*i/2,r.point(-i,o),r.point(0,o),r.point(i,o)}else r.point(e[0],e[1])}function He(t,e){var n=t[0],r=t[1],o=[Math.sin(n),-Math.cos(n),0],i=0,s=0;Ta.reset();for(var a=0,u=e.length;u>a;++a){var l=e[a],c=l.length;if(c)for(var p=l[0],h=p[0],d=p[1]/2+Ys/4,f=Math.sin(d),g=Math.cos(d),m=1;;){m===c&&(m=0),t=l[m];var y=t[0],v=t[1]/2+Ys/4,x=Math.sin(v),b=Math.cos(v),j=y-h,_=j>=0?1:-1,E=_*j,w=E>Ys,S=f*x;if(Ta.add(Math.atan2(S*_*Math.sin(E),g*b+S*Math.cos(E))),i+=w?j+_*Hs:j,w^h>=n^y>=n){var I=Ee(je(p),je(t));Ie(I);var M=Ee(o,I);Ie(M);var C=(w^j>=0?-1:1)*at(M[2]);(r>C||r===C&&(I[0]||I[1]))&&(s+=w^j>=0?1:-1)}if(!m++)break;h=y,f=x,g=b,p=t}}return(-Us>i||Us>i&&-Us>Ta)^1&s}function Xe(t){function e(t,e){return Math.cos(t)*Math.cos(e)>i}function n(t){var n,i,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(p,h){var d,f=[p,h],g=e(p,h),m=s?g?0:o(p,h):g?o(p+(0>p?Ys:-Ys),h):0;if(!n&&(l=u=g)&&t.lineStart(),g!==u&&(d=r(n,f),(Ce(n,d)||Ce(f,d))&&(f[0]+=Us,f[1]+=Us,g=e(f[0],f[1]))),g!==u)c=0,g?(t.lineStart(),d=r(f,n),t.point(d[0],d[1])):(d=r(n,f),t.point(d[0],d[1]),t.lineEnd()),n=d;else if(a&&n&&s^g){var y;m&i||!(y=r(f,n,!0))||(c=0,s?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!g||n&&Ce(n,f)||t.point(f[0],f[1]),n=f,u=g,i=m},lineEnd:function(){u&&t.lineEnd(),n=null},clean:function(){return c|(l&&u)<<1}}}function r(t,e,n){var r=je(t),o=je(e),s=[1,0,0],a=Ee(r,o),u=_e(a,a),l=a[0],c=u-l*l;if(!c)return!n&&t;var p=i*u/c,h=-i*l/c,d=Ee(s,a),f=Se(s,p),g=Se(a,h);we(f,g);var m=d,y=_e(f,m),v=_e(m,m),x=y*y-v*(_e(f,f)-1);if(!(0>x)){var b=Math.sqrt(x),j=Se(m,(-y-b)/v);if(we(j,f),j=Me(j),!n)return j;var _,E=t[0],w=e[0],S=t[1],I=e[1];E>w&&(_=E,E=w,w=_);var M=w-E,C=Is(M-Ys)<Us,L=C||Us>M;if(!C&&S>I&&(_=S,S=I,I=_),L?C?S+I>0^j[1]<(Is(j[0]-E)<Us?S:I):S<=j[1]&&j[1]<=I:M>Ys^(E<=j[0]&&j[0]<=w)){var P=Se(m,(-y+b)/v);return we(P,f),[j,Me(P)]}}}function o(e,n){var r=s?t:Ys-t,o=0;return-r>e?o|=1:e>r&&(o|=2),-r>n?o|=4:n>r&&(o|=8),o}var i=Math.cos(t),s=i>0,a=Is(i)>Us,u=jn(t,6*Zs);return Be(e,n,u,s?[0,-t]:[-Ys,t-Ys])}function We(t,e,n,r){return function(o){var i,s=o.a,a=o.b,u=s.x,l=s.y,c=a.x,p=a.y,h=0,d=1,f=c-u,g=p-l;if(i=t-u,f||!(i>0)){if(i/=f,0>f){if(h>i)return;d>i&&(d=i)}else if(f>0){if(i>d)return;i>h&&(h=i)}if(i=n-u,f||!(0>i)){if(i/=f,0>f){if(i>d)return;i>h&&(h=i)}else if(f>0){if(h>i)return;d>i&&(d=i)}if(i=e-l,g||!(i>0)){if(i/=g,0>g){if(h>i)return;d>i&&(d=i)}else if(g>0){if(i>d)return;i>h&&(h=i)}if(i=r-l,g||!(0>i)){if(i/=g,0>g){if(i>d)return;i>h&&(h=i)}else if(g>0){if(h>i)return;d>i&&(d=i)}return h>0&&(o.a={x:u+h*f,y:l+h*g}),1>d&&(o.b={x:u+d*f,y:l+d*g}),o}}}}}}function Ze(t,e,n,r){function o(r,o){return Is(r[0]-t)<Us?o>0?0:3:Is(r[0]-n)<Us?o>0?2:1:Is(r[1]-e)<Us?o>0?1:0:o>0?3:2}function i(t,e){return s(t.x,e.x)}function s(t,e){var n=o(t,1),r=o(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){function u(t){for(var e=0,n=m.length,r=t[1],o=0;n>o;++o)for(var i,s=1,a=m[o],u=a.length,l=a[0];u>s;++s)i=a[s],l[1]<=r?i[1]>r&&it(l,i,t)>0&&++e:i[1]<=r&&it(l,i,t)<0&&--e,l=i;return 0!==e}function l(i,a,u,l){var c=0,p=0;if(null==i||(c=o(i,u))!==(p=o(a,u))||s(i,a)<0^u>0)do l.point(0===c||3===c?t:n,c>1?r:e);while((c=(c+u+4)%4)!==p);else l.point(a[0],a[1])}function c(o,i){return o>=t&&n>=o&&i>=e&&r>=i}function p(t,e){c(t,e)&&a.point(t,e)}function h(){L.point=f,m&&m.push(y=[]),w=!0,E=!1,j=_=NaN}function d(){g&&(f(v,x),b&&E&&M.rejoin(),g.push(M.buffer())),L.point=p,E&&a.lineEnd()}function f(t,e){t=Math.max(-Ha,Math.min(Ha,t)),e=Math.max(-Ha,Math.min(Ha,e));var n=c(t,e);if(m&&y.push([t,e]),w)v=t,x=e,b=n,w=!1,n&&(a.lineStart(),a.point(t,e));else if(n&&E)a.point(t,e);else{var r={a:{x:j,y:_},b:{x:t,y:e}};C(r)?(E||(a.lineStart(),a.point(r.a.x,r.a.y)),a.point(r.b.x,r.b.y),n||a.lineEnd(),S=!1):n&&(a.lineStart(),a.point(t,e),S=!1)}j=t,_=e,E=n}var g,m,y,v,x,b,j,_,E,w,S,I=a,M=Ge(),C=We(t,e,n,r),L={point:p,lineStart:h,lineEnd:d,polygonStart:function(){a=M,g=[],m=[],S=!0},polygonEnd:function(){a=I,g=fs.merge(g);var e=u([t,r]),n=S&&e,o=g.length;(n||o)&&(a.polygonStart(),n&&(a.lineStart(),l(null,null,1,a),a.lineEnd()),o&&Oe(g,i,e,l,a),a.polygonEnd()),g=m=y=null}};return L}}function Qe(t){var e=0,n=Ys/3,r=dn(t),o=r(e,n);return o.parallels=function(t){return arguments.length?r(e=t[0]*Ys/180,n=t[1]*Ys/180):[e/Ys*180,n/Ys*180]},o}function Ke(t,e){function n(t,e){var n=Math.sqrt(i-2*o*Math.sin(e))/o;return[n*Math.sin(t*=o),s-n*Math.cos(t)]}var r=Math.sin(t),o=(r+Math.sin(e))/2,i=1+r*(2*o-r),s=Math.sqrt(i)/o;return n.invert=function(t,e){var n=s-e;return[Math.atan2(t,n)/o,at((i-(t*t+n*n)*o*o)/(2*o))]},n}function Je(){function t(t,e){Wa+=o*t-r*e,r=t,o=e}var e,n,r,o;$a.point=function(i,s){$a.point=t,e=r=i,n=o=s},$a.lineEnd=function(){t(e,n)}}function $e(t,e){Za>t&&(Za=t),t>Ka&&(Ka=t),Qa>e&&(Qa=e),e>Ja&&(Ja=e)}function tn(){function t(t,e){s.push("M",t,",",e,i)}function e(t,e){s.push("M",t,",",e),a.point=n}function n(t,e){s.push("L",t,",",e)}function r(){a.point=t}function o(){s.push("Z")}var i=en(4.5),s=[],a={point:t,lineStart:function(){a.point=e},lineEnd:r,polygonStart:function(){a.lineEnd=o},polygonEnd:function(){a.lineEnd=r,a.point=t},pointRadius:function(t){return i=en(t),a},result:function(){if(s.length){var t=s.join("");return s=[],t}}};return a}function en(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function nn(t,e){Da+=t,Oa+=e,++Fa}function rn(){function t(t,r){var o=t-e,i=r-n,s=Math.sqrt(o*o+i*i);ka+=s*(e+t)/2,Ba+=s*(n+r)/2,za+=s,nn(e=t,n=r)}var e,n;eu.point=function(r,o){eu.point=t,nn(e=r,n=o)}}function on(){eu.point=nn}function sn(){function t(t,e){var n=t-r,i=e-o,s=Math.sqrt(n*n+i*i);ka+=s*(r+t)/2,Ba+=s*(o+e)/2,za+=s,s=o*t-r*e,Ga+=s*(r+t),qa+=s*(o+e),Ua+=3*s,nn(r=t,o=e)}var e,n,r,o;eu.point=function(i,s){eu.point=t,nn(e=r=i,n=o=s)},eu.lineEnd=function(){t(e,n)}}function an(t){function e(e,n){t.moveTo(e+s,n),t.arc(e,n,s,0,Hs)}function n(e,n){t.moveTo(e,n),a.point=r}function r(e,n){t.lineTo(e,n)}function o(){a.point=e}function i(){t.closePath()}var s=4.5,a={point:e,lineStart:function(){a.point=n},lineEnd:o,polygonStart:function(){a.lineEnd=i},polygonEnd:function(){a.lineEnd=o,a.point=e},pointRadius:function(t){return s=t,a},result:M};return a}function un(t){function e(t){return(a?r:n)(t)}function n(e){return pn(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})}function r(e){function n(n,r){n=t(n,r),e.point(n[0],n[1])}function r(){x=NaN,w.point=i,e.lineStart()}function i(n,r){var i=je([n,r]),s=t(n,r);o(x,b,v,j,_,E,x=s[0],b=s[1],v=n,j=i[0],_=i[1],E=i[2],a,e),e.point(x,b)}function s(){w.point=n,e.lineEnd()}function u(){r(),w.point=l,w.lineEnd=c}function l(t,e){i(p=t,h=e),d=x,f=b,g=j,m=_,y=E,w.point=i}function c(){o(x,b,v,j,_,E,d,f,p,g,m,y,a,e),w.lineEnd=s,s()}var p,h,d,f,g,m,y,v,x,b,j,_,E,w={point:n,lineStart:r,lineEnd:s,polygonStart:function(){e.polygonStart(),w.lineStart=u},polygonEnd:function(){e.polygonEnd(),w.lineStart=r}};return w}function o(e,n,r,a,u,l,c,p,h,d,f,g,m,y){var v=c-e,x=p-n,b=v*v+x*x;if(b>4*i&&m--){var j=a+d,_=u+f,E=l+g,w=Math.sqrt(j*j+_*_+E*E),S=Math.asin(E/=w),I=Is(Is(E)-1)<Us||Is(r-h)<Us?(r+h)/2:Math.atan2(_,j),M=t(I,S),C=M[0],L=M[1],P=C-e,T=L-n,N=x*P-v*T;(N*N/b>i||Is((v*P+x*T)/b-.5)>.3||s>a*d+u*f+l*g)&&(o(e,n,r,a,u,l,C,L,I,j/=w,_/=w,E,m,y),y.point(C,L),o(C,L,I,j,_,E,c,p,h,d,f,g,m,y))}}var i=.5,s=Math.cos(30*Zs),a=16;return e.precision=function(t){return arguments.length?(a=(i=t*t)>0&&16,e):Math.sqrt(i)},e}function ln(t){var e=un(function(e,n){return t([e*Qs,n*Qs])});return function(t){return fn(e(t))}}function cn(t){this.stream=t}function pn(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function hn(t){return dn(function(){return t})()}function dn(t){function e(t){return t=a(t[0]*Zs,t[1]*Zs),[t[0]*h+u,l-t[1]*h]}function n(t){return t=a.invert((t[0]-u)/h,(l-t[1])/h),t&&[t[0]*Qs,t[1]*Qs]}function r(){a=Ae(s=yn(y,v,x),i);var t=i(g,m);return u=d-t[0]*h,l=f+t[1]*h,o()}function o(){return c&&(c.valid=!1,c=null),e}var i,s,a,u,l,c,p=un(function(t,e){return t=i(t,e),[t[0]*h+u,l-t[1]*h]}),h=150,d=480,f=250,g=0,m=0,y=0,v=0,x=0,b=Ya,j=w,_=null,E=null;return e.stream=function(t){return c&&(c.valid=!1),c=fn(b(s,p(j(t)))),c.valid=!0,c},e.clipAngle=function(t){return arguments.length?(b=null==t?(_=t,Ya):Xe((_=+t)*Zs),o()):_},e.clipExtent=function(t){return arguments.length?(E=t,j=t?Ze(t[0][0],t[0][1],t[1][0],t[1][1]):w,o()):E},e.scale=function(t){return arguments.length?(h=+t,r()):h},e.translate=function(t){return arguments.length?(d=+t[0],f=+t[1],r()):[d,f]},e.center=function(t){return arguments.length?(g=t[0]%360*Zs,m=t[1]%360*Zs,r()):[g*Qs,m*Qs]},e.rotate=function(t){return arguments.length?(y=t[0]%360*Zs,v=t[1]%360*Zs,x=t.length>2?t[2]%360*Zs:0,r()):[y*Qs,v*Qs,x*Qs]},fs.rebind(e,p,"precision"),function(){return i=t.apply(this,arguments),e.invert=i.invert&&n,r()}}function fn(t){return pn(t,function(e,n){t.point(e*Zs,n*Zs)})}function gn(t,e){return[t,e]}function mn(t,e){return[t>Ys?t-Hs:-Ys>t?t+Hs:t,e]}function yn(t,e,n){return t?e||n?Ae(xn(t),bn(e,n)):xn(t):e||n?bn(e,n):mn}function vn(t){return function(e,n){return e+=t,[e>Ys?e-Hs:-Ys>e?e+Hs:e,n]}}function xn(t){var e=vn(t);return e.invert=vn(-t),e}function bn(t,e){function n(t,e){var n=Math.cos(e),a=Math.cos(t)*n,u=Math.sin(t)*n,l=Math.sin(e),c=l*r+a*o;return[Math.atan2(u*i-c*s,a*r-l*o),at(c*i+u*s)]}var r=Math.cos(t),o=Math.sin(t),i=Math.cos(e),s=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),a=Math.cos(t)*n,u=Math.sin(t)*n,l=Math.sin(e),c=l*i-u*s;return[Math.atan2(u*i+l*s,a*r+c*o),at(c*r-a*o)]},n}function jn(t,e){var n=Math.cos(t),r=Math.sin(t);return function(o,i,s,a){var u=s*e;null!=o?(o=_n(n,o),i=_n(n,i),(s>0?i>o:o>i)&&(o+=s*Hs)):(o=t+s*Hs,i=t-.5*u);for(var l,c=o;s>0?c>i:i>c;c-=u)a.point((l=Me([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}function _n(t,e){var n=je(e);n[0]-=t,Ie(n);var r=st(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Us)%(2*Math.PI)}function En(t,e,n){var r=fs.range(t,e-Us,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function wn(t,e,n){var r=fs.range(t,e-Us,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function Sn(t){return t.source}function In(t){return t.target}function Mn(t,e,n,r){var o=Math.cos(e),i=Math.sin(e),s=Math.cos(r),a=Math.sin(r),u=o*Math.cos(t),l=o*Math.sin(t),c=s*Math.cos(n),p=s*Math.sin(n),h=2*Math.asin(Math.sqrt(pt(r-e)+o*s*pt(n-t))),d=1/Math.sin(h),f=h?function(t){var e=Math.sin(t*=h)*d,n=Math.sin(h-t)*d,r=n*u+e*c,o=n*l+e*p,s=n*i+e*a;return[Math.atan2(o,r)*Qs,Math.atan2(s,Math.sqrt(r*r+o*o))*Qs]}:function(){return[t*Qs,e*Qs]};return f.distance=h,f}function Cn(){function t(t,o){var i=Math.sin(o*=Zs),s=Math.cos(o),a=Is((t*=Zs)-e),u=Math.cos(a);nu+=Math.atan2(Math.sqrt((a=s*Math.sin(a))*a+(a=r*i-n*s*u)*a),n*i+r*s*u),e=t,n=i,r=s}var e,n,r;ru.point=function(o,i){e=o*Zs,n=Math.sin(i*=Zs),r=Math.cos(i),ru.point=t},ru.lineEnd=function(){ru.point=ru.lineEnd=M}}function Ln(t,e){function n(e,n){var r=Math.cos(e),o=Math.cos(n),i=t(r*o);return[i*o*Math.sin(e),i*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),o=e(r),i=Math.sin(o),s=Math.cos(o);return[Math.atan2(t*i,r*s),Math.asin(r&&n*i/r)]},n}function Pn(t,e){function n(t,e){s>0?-Ws+Us>e&&(e=-Ws+Us):e>Ws-Us&&(e=Ws-Us);var n=s/Math.pow(o(e),i);return[n*Math.sin(i*t),s-n*Math.cos(i*t)]}var r=Math.cos(t),o=function(t){return Math.tan(Ys/4+t/2)},i=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(o(e)/o(t)),s=r*Math.pow(o(t),i)/i;return i?(n.invert=function(t,e){var n=s-e,r=ot(i)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/i,2*Math.atan(Math.pow(s/r,1/i))-Ws]},n):Nn}function Tn(t,e){function n(t,e){var n=i-e;return[n*Math.sin(o*t),i-n*Math.cos(o*t)]}var r=Math.cos(t),o=t===e?Math.sin(t):(r-Math.cos(e))/(e-t),i=r/o+t;return Is(o)<Us?gn:(n.invert=function(t,e){var n=i-e;return[Math.atan2(t,n)/o,i-ot(o)*Math.sqrt(t*t+n*n)]},n)}function Nn(t,e){return[t,Math.log(Math.tan(Ys/4+e/2))]}function Rn(t){var e,n=hn(t),r=n.scale,o=n.translate,i=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=o.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var s=i.apply(n,arguments);if(s===n){if(e=null==t){var a=Ys*r(),u=o();i([[u[0]-a,u[1]-a],[u[0]+a,u[1]+a]])}}else e&&(s=null);return s},n.clipExtent(null)}function An(t,e){return[Math.log(Math.tan(Ys/4+e/2)),-t]}function Dn(t){return t[0]}function On(t){return t[1]}function Fn(t){for(var e=t.length,n=[0,1],r=2,o=2;e>o;o++){for(;r>1&&it(t[n[r-2]],t[n[r-1]],t[o])<=0;)--r;n[r++]=o}return n.slice(0,r)}function kn(t,e){return t[0]-e[0]||t[1]-e[1]}function Bn(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function zn(t,e,n,r){var o=t[0],i=n[0],s=e[0]-o,a=r[0]-i,u=t[1],l=n[1],c=e[1]-u,p=r[1]-l,h=(a*(u-l)-p*(o-i))/(p*s-a*c);return[o+h*s,u+h*c]}function Gn(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function qn(){lr(this),this.edge=this.site=this.circle=null}function Un(t){var e=gu.pop()||new qn;return e.site=t,e}function Vn(t){tr(t),hu.remove(t),gu.push(t),lr(t)}function Yn(t){var e=t.circle,n=e.x,r=e.cy,o={x:n,y:r},i=t.P,s=t.N,a=[t];Vn(t);for(var u=i;u.circle&&Is(n-u.circle.x)<Us&&Is(r-u.circle.cy)<Us;)i=u.P,a.unshift(u),Vn(u),u=i;a.unshift(u),tr(u);for(var l=s;l.circle&&Is(n-l.circle.x)<Us&&Is(r-l.circle.cy)<Us;)s=l.N,a.push(l),Vn(l),l=s;a.push(l),tr(l);var c,p=a.length;for(c=1;p>c;++c)l=a[c],u=a[c-1],sr(l.edge,u.site,l.site,o);u=a[0],l=a[p-1],l.edge=or(u.site,l.site,null,o),$n(u),$n(l)}function Hn(t){for(var e,n,r,o,i=t.x,s=t.y,a=hu._;a;)if(r=Xn(a,s)-i,r>Us)a=a.L;else{if(o=i-Wn(a,s),!(o>Us)){r>-Us?(e=a.P,n=a):o>-Us?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}var u=Un(t);if(hu.insert(e,u),e||n){if(e===n)return tr(e),n=Un(e.site),hu.insert(u,n),u.edge=n.edge=or(e.site,u.site),$n(e),void $n(n);if(!n)return void(u.edge=or(e.site,u.site));tr(e),tr(n);var l=e.site,c=l.x,p=l.y,h=t.x-c,d=t.y-p,f=n.site,g=f.x-c,m=f.y-p,y=2*(h*m-d*g),v=h*h+d*d,x=g*g+m*m,b={x:(m*v-d*x)/y+c,
y:(h*x-g*v)/y+p};sr(n.edge,l,f,b),u.edge=or(l,t,null,b),n.edge=or(t,f,null,b),$n(e),$n(n)}}function Xn(t,e){var n=t.site,r=n.x,o=n.y,i=o-e;if(!i)return r;var s=t.P;if(!s)return-(1/0);n=s.site;var a=n.x,u=n.y,l=u-e;if(!l)return a;var c=a-r,p=1/i-1/l,h=c/l;return p?(-h+Math.sqrt(h*h-2*p*(c*c/(-2*l)-u+l/2+o-i/2)))/p+r:(r+a)/2}function Wn(t,e){var n=t.N;if(n)return Xn(n,e);var r=t.site;return r.y===e?r.x:1/0}function Zn(t){this.site=t,this.edges=[]}function Qn(t){for(var e,n,r,o,i,s,a,u,l,c,p=t[0][0],h=t[1][0],d=t[0][1],f=t[1][1],g=pu,m=g.length;m--;)if(i=g[m],i&&i.prepare())for(a=i.edges,u=a.length,s=0;u>s;)c=a[s].end(),r=c.x,o=c.y,l=a[++s%u].start(),e=l.x,n=l.y,(Is(r-e)>Us||Is(o-n)>Us)&&(a.splice(s,0,new ar(ir(i.site,c,Is(r-p)<Us&&f-o>Us?{x:p,y:Is(e-p)<Us?n:f}:Is(o-f)<Us&&h-r>Us?{x:Is(n-f)<Us?e:h,y:f}:Is(r-h)<Us&&o-d>Us?{x:h,y:Is(e-h)<Us?n:d}:Is(o-d)<Us&&r-p>Us?{x:Is(n-d)<Us?e:p,y:d}:null),i.site,null)),++u)}function Kn(t,e){return e.angle-t.angle}function Jn(){lr(this),this.x=this.y=this.arc=this.site=this.cy=null}function $n(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,o=t.site,i=n.site;if(r!==i){var s=o.x,a=o.y,u=r.x-s,l=r.y-a,c=i.x-s,p=i.y-a,h=2*(u*p-l*c);if(!(h>=-Vs)){var d=u*u+l*l,f=c*c+p*p,g=(p*d-l*f)/h,m=(u*f-c*d)/h,p=m+a,y=mu.pop()||new Jn;y.arc=t,y.site=o,y.x=g+s,y.y=p+Math.sqrt(g*g+m*m),y.cy=p,t.circle=y;for(var v=null,x=fu._;x;)if(y.y<x.y||y.y===x.y&&y.x<=x.x){if(!x.L){v=x.P;break}x=x.L}else{if(!x.R){v=x;break}x=x.R}fu.insert(v,y),v||(du=y)}}}}function tr(t){var e=t.circle;e&&(e.P||(du=e.N),fu.remove(e),mu.push(e),lr(e),t.circle=null)}function er(t){for(var e,n=cu,r=We(t[0][0],t[0][1],t[1][0],t[1][1]),o=n.length;o--;)e=n[o],(!nr(e,t)||!r(e)||Is(e.a.x-e.b.x)<Us&&Is(e.a.y-e.b.y)<Us)&&(e.a=e.b=null,n.splice(o,1))}function nr(t,e){var n=t.b;if(n)return!0;var r,o,i=t.a,s=e[0][0],a=e[1][0],u=e[0][1],l=e[1][1],c=t.l,p=t.r,h=c.x,d=c.y,f=p.x,g=p.y,m=(h+f)/2,y=(d+g)/2;if(g===d){if(s>m||m>=a)return;if(h>f){if(i){if(i.y>=l)return}else i={x:m,y:u};n={x:m,y:l}}else{if(i){if(i.y<u)return}else i={x:m,y:l};n={x:m,y:u}}}else if(r=(h-f)/(g-d),o=y-r*m,-1>r||r>1)if(h>f){if(i){if(i.y>=l)return}else i={x:(u-o)/r,y:u};n={x:(l-o)/r,y:l}}else{if(i){if(i.y<u)return}else i={x:(l-o)/r,y:l};n={x:(u-o)/r,y:u}}else if(g>d){if(i){if(i.x>=a)return}else i={x:s,y:r*s+o};n={x:a,y:r*a+o}}else{if(i){if(i.x<s)return}else i={x:a,y:r*a+o};n={x:s,y:r*s+o}}return t.a=i,t.b=n,!0}function rr(t,e){this.l=t,this.r=e,this.a=this.b=null}function or(t,e,n,r){var o=new rr(t,e);return cu.push(o),n&&sr(o,t,e,n),r&&sr(o,e,t,r),pu[t.i].edges.push(new ar(o,t,e)),pu[e.i].edges.push(new ar(o,e,t)),o}function ir(t,e,n){var r=new rr(t,null);return r.a=e,r.b=n,cu.push(r),r}function sr(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function ar(t,e,n){var r=t.a,o=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(o.x-r.x,r.y-o.y):Math.atan2(r.x-o.x,o.y-r.y)}function ur(){this._=null}function lr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function cr(t,e){var n=e,r=e.R,o=n.U;o?o.L===n?o.L=r:o.R=r:t._=r,r.U=o,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function pr(t,e){var n=e,r=e.L,o=n.U;o?o.L===n?o.L=r:o.R=r:t._=r,r.U=o,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function hr(t){for(;t.L;)t=t.L;return t}function dr(t,e){var n,r,o,i=t.sort(fr).pop();for(cu=[],pu=new Array(t.length),hu=new ur,fu=new ur;;)if(o=du,i&&(!o||i.y<o.y||i.y===o.y&&i.x<o.x))i.x===n&&i.y===r||(pu[i.i]=new Zn(i),Hn(i),n=i.x,r=i.y),i=t.pop();else{if(!o)break;Yn(o.arc)}e&&(er(e),Qn(e));var s={cells:pu,edges:cu};return hu=fu=cu=pu=null,s}function fr(t,e){return e.y-t.y||e.x-t.x}function gr(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function mr(t){return t.x}function yr(t){return t.y}function vr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function xr(t,e,n,r,o,i){if(!t(e,n,r,o,i)){var s=.5*(n+o),a=.5*(r+i),u=e.nodes;u[0]&&xr(t,u[0],n,r,s,a),u[1]&&xr(t,u[1],s,r,o,a),u[2]&&xr(t,u[2],n,a,s,i),u[3]&&xr(t,u[3],s,a,o,i)}}function br(t,e,n,r,o,i,s){var a,u=1/0;return function t(l,c,p,h,d){if(!(c>i||p>s||r>h||o>d)){if(f=l.point){var f,g=e-l.x,m=n-l.y,y=g*g+m*m;if(u>y){var v=Math.sqrt(u=y);r=e-v,o=n-v,i=e+v,s=n+v,a=f}}for(var x=l.nodes,b=.5*(c+h),j=.5*(p+d),_=e>=b,E=n>=j,w=E<<1|_,S=w+4;S>w;++w)if(l=x[3&w])switch(3&w){case 0:t(l,c,p,b,j);break;case 1:t(l,b,p,h,j);break;case 2:t(l,c,j,b,d);break;case 3:t(l,b,j,h,d)}}}(t,r,o,i,s),a}function jr(t,e){t=fs.rgb(t),e=fs.rgb(e);var n=t.r,r=t.g,o=t.b,i=e.r-n,s=e.g-r,a=e.b-o;return function(t){return"#"+It(Math.round(n+i*t))+It(Math.round(r+s*t))+It(Math.round(o+a*t))}}function _r(t,e){var n,r={},o={};for(n in t)n in e?r[n]=Sr(t[n],e[n]):o[n]=t[n];for(n in e)n in t||(o[n]=e[n]);return function(t){for(n in r)o[n]=r[n](t);return o}}function Er(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function wr(t,e){var n,r,o,i=vu.lastIndex=xu.lastIndex=0,s=-1,a=[],u=[];for(t+="",e+="";(n=vu.exec(t))&&(r=xu.exec(e));)(o=r.index)>i&&(o=e.slice(i,o),a[s]?a[s]+=o:a[++s]=o),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,u.push({i:s,x:Er(n,r)})),i=xu.lastIndex;return i<e.length&&(o=e.slice(i),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?(e=u[0].x,function(t){return e(t)+""}):function(){return e}:(e=u.length,function(t){for(var n,r=0;e>r;++r)a[(n=u[r]).i]=n.x(t);return a.join("")})}function Sr(t,e){for(var n,r=fs.interpolators.length;--r>=0&&!(n=fs.interpolators[r](t,e)););return n}function Ir(t,e){var n,r=[],o=[],i=t.length,s=e.length,a=Math.min(t.length,e.length);for(n=0;a>n;++n)r.push(Sr(t[n],e[n]));for(;i>n;++n)o[n]=t[n];for(;s>n;++n)o[n]=e[n];return function(t){for(n=0;a>n;++n)o[n]=r[n](t);return o}}function Mr(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function Cr(t){return function(e){return 1-t(1-e)}}function Lr(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function Pr(t){return t*t}function Tr(t){return t*t*t}function Nr(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function Rr(t){return function(e){return Math.pow(e,t)}}function Ar(t){return 1-Math.cos(t*Ws)}function Dr(t){return Math.pow(2,10*(t-1))}function Or(t){return 1-Math.sqrt(1-t*t)}function Fr(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Hs*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Hs/e)}}function kr(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Br(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function zr(t,e){t=fs.hcl(t),e=fs.hcl(e);var n=t.h,r=t.c,o=t.l,i=e.h-n,s=e.c-r,a=e.l-o;return isNaN(s)&&(s=0,r=isNaN(r)?e.c:r),isNaN(i)?(i=0,n=isNaN(n)?e.h:n):i>180?i-=360:-180>i&&(i+=360),function(t){return mt(n+i*t,r+s*t,o+a*t)+""}}function Gr(t,e){t=fs.hsl(t),e=fs.hsl(e);var n=t.h,r=t.s,o=t.l,i=e.h-n,s=e.s-r,a=e.l-o;return isNaN(s)&&(s=0,r=isNaN(r)?e.s:r),isNaN(i)?(i=0,n=isNaN(n)?e.h:n):i>180?i-=360:-180>i&&(i+=360),function(t){return ft(n+i*t,r+s*t,o+a*t)+""}}function qr(t,e){t=fs.lab(t),e=fs.lab(e);var n=t.l,r=t.a,o=t.b,i=e.l-n,s=e.a-r,a=e.b-o;return function(t){return vt(n+i*t,r+s*t,o+a*t)+""}}function Ur(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Vr(t){var e=[t.a,t.b],n=[t.c,t.d],r=Hr(e),o=Yr(e,n),i=Hr(Xr(n,e,-o))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,o*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Qs,this.translate=[t.e,t.f],this.scale=[r,i],this.skew=i?Math.atan2(o,i)*Qs:0}function Yr(t,e){return t[0]*e[0]+t[1]*e[1]}function Hr(t){var e=Math.sqrt(Yr(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Xr(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Wr(t){return t.length?t.pop()+",":""}function Zr(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var o=n.push("translate(",null,",",null,")");r.push({i:o-4,x:Er(t[0],e[0])},{i:o-2,x:Er(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}function Qr(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(Wr(n)+"rotate(",null,")")-2,x:Er(t,e)})):e&&n.push(Wr(n)+"rotate("+e+")")}function Kr(t,e,n,r){t!==e?r.push({i:n.push(Wr(n)+"skewX(",null,")")-2,x:Er(t,e)}):e&&n.push(Wr(n)+"skewX("+e+")")}function Jr(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var o=n.push(Wr(n)+"scale(",null,",",null,")");r.push({i:o-4,x:Er(t[0],e[0])},{i:o-2,x:Er(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(Wr(n)+"scale("+e+")")}function $r(t,e){var n=[],r=[];return t=fs.transform(t),e=fs.transform(e),Zr(t.translate,e.translate,n,r),Qr(t.rotate,e.rotate,n,r),Kr(t.skew,e.skew,n,r),Jr(t.scale,e.scale,n,r),t=e=null,function(t){for(var e,o=-1,i=r.length;++o<i;)n[(e=r[o]).i]=e.x(t);return n.join("")}}function to(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function eo(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function no(t){for(var e=t.source,n=t.target,r=oo(e,n),o=[e];e!==r;)e=e.parent,o.push(e);for(var i=o.length;n!==r;)o.splice(i,0,n),n=n.parent;return o}function ro(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function oo(t,e){if(t===e)return t;for(var n=ro(t),r=ro(e),o=n.pop(),i=r.pop(),s=null;o===i;)s=o,o=n.pop(),i=r.pop();return s}function io(t){t.fixed|=2}function so(t){t.fixed&=-7}function ao(t){t.fixed|=4,t.px=t.x,t.py=t.y}function uo(t){t.fixed&=-5}function lo(t,e,n){var r=0,o=0;if(t.charge=0,!t.leaf)for(var i,s=t.nodes,a=s.length,u=-1;++u<a;)i=s[u],null!=i&&(lo(i,e,n),t.charge+=i.charge,r+=i.charge*i.cx,o+=i.charge*i.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var l=e*n[t.point.index];t.charge+=t.pointCharge=l,r+=l*t.point.x,o+=l*t.point.y}t.cx=r/t.charge,t.cy=o/t.charge}function co(t,e){return fs.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=yo,t}function po(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(o=t.children)&&(r=o.length))for(var r,o;--r>=0;)n.push(o[r])}function ho(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(i=t.children)&&(o=i.length))for(var o,i,s=-1;++s<o;)n.push(i[s]);for(;null!=(t=r.pop());)e(t)}function fo(t){return t.children}function go(t){return t.value}function mo(t,e){return e.value-t.value}function yo(t){return fs.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function vo(t){return t.x}function xo(t){return t.y}function bo(t,e,n){t.y0=e,t.y=n}function jo(t){return fs.range(t.length)}function _o(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function Eo(t){for(var e,n=1,r=0,o=t[0][1],i=t.length;i>n;++n)(e=t[n][1])>o&&(r=n,o=e);return r}function wo(t){return t.reduce(So,0)}function So(t,e){return t+e[1]}function Io(t,e){return Mo(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Mo(t,e){for(var n=-1,r=+t[0],o=(t[1]-r)/e,i=[];++n<=e;)i[n]=o*n+r;return i}function Co(t){return[fs.min(t),fs.max(t)]}function Lo(t,e){return t.value-e.value}function Po(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function To(t,e){t._pack_next=e,e._pack_prev=t}function No(t,e){var n=e.x-t.x,r=e.y-t.y,o=t.r+e.r;return.999*o*o>n*n+r*r}function Ro(t){function e(t){c=Math.min(t.x-t.r,c),p=Math.max(t.x+t.r,p),h=Math.min(t.y-t.r,h),d=Math.max(t.y+t.r,d)}if((n=t.children)&&(l=n.length)){var n,r,o,i,s,a,u,l,c=1/0,p=-(1/0),h=1/0,d=-(1/0);if(n.forEach(Ao),r=n[0],r.x=-r.r,r.y=0,e(r),l>1&&(o=n[1],o.x=o.r,o.y=0,e(o),l>2))for(i=n[2],Fo(r,o,i),e(i),Po(r,i),r._pack_prev=i,Po(i,o),o=r._pack_next,s=3;l>s;s++){Fo(r,o,i=n[s]);var f=0,g=1,m=1;for(a=o._pack_next;a!==o;a=a._pack_next,g++)if(No(a,i)){f=1;break}if(1==f)for(u=r._pack_prev;u!==a._pack_prev&&!No(u,i);u=u._pack_prev,m++);f?(m>g||g==m&&o.r<r.r?To(r,o=a):To(r=u,o),s--):(Po(r,i),o=i,e(i))}var y=(c+p)/2,v=(h+d)/2,x=0;for(s=0;l>s;s++)i=n[s],i.x-=y,i.y-=v,x=Math.max(x,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=x,n.forEach(Do)}}function Ao(t){t._pack_next=t._pack_prev=t}function Do(t){delete t._pack_next,delete t._pack_prev}function Oo(t,e,n,r){var o=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,o)for(var i=-1,s=o.length;++i<s;)Oo(o[i],e,n,r)}function Fo(t,e,n){var r=t.r+n.r,o=e.x-t.x,i=e.y-t.y;if(r&&(o||i)){var s=e.r+n.r,a=o*o+i*i;s*=s,r*=r;var u=.5+(r-s)/(2*a),l=Math.sqrt(Math.max(0,2*s*(r+a)-(r-=a)*r-s*s))/(2*a);n.x=t.x+u*o+l*i,n.y=t.y+u*i-l*o}else n.x=t.x+r,n.y=t.y}function ko(t,e){return t.parent==e.parent?1:2}function Bo(t){var e=t.children;return e.length?e[0]:t.t}function zo(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function Go(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function qo(t){for(var e,n=0,r=0,o=t.children,i=o.length;--i>=0;)e=o[i],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function Uo(t,e,n){return t.a.parent===e.parent?t.a:n}function Vo(t){return 1+fs.max(t,function(t){return t.y})}function Yo(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Ho(t){var e=t.children;return e&&e.length?Ho(e[0]):t}function Xo(t){var e,n=t.children;return n&&(e=n.length)?Xo(n[e-1]):t}function Wo(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Zo(t,e){var n=t.x+e[3],r=t.y+e[0],o=t.dx-e[1]-e[3],i=t.dy-e[0]-e[2];return 0>o&&(n+=o/2,o=0),0>i&&(r+=i/2,i=0),{x:n,y:r,dx:o,dy:i}}function Qo(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Ko(t){return t.rangeExtent?t.rangeExtent():Qo(t.range())}function Jo(t,e,n,r){var o=n(t[0],t[1]),i=r(e[0],e[1]);return function(t){return i(o(t))}}function $o(t,e){var n,r=0,o=t.length-1,i=t[r],s=t[o];return i>s&&(n=r,r=o,o=n,n=i,i=s,s=n),t[r]=e.floor(i),t[o]=e.ceil(s),t}function ti(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Pu}function ei(t,e,n,r){var o=[],i=[],s=0,a=Math.min(t.length,e.length)-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<=a;)o.push(n(t[s-1],t[s])),i.push(r(e[s-1],e[s]));return function(e){var n=fs.bisect(t,e,1,a)-1;return i[n](o[n](e))}}function ni(t,e,n,r){function o(){var o=Math.min(t.length,e.length)>2?ei:Jo,u=r?eo:to;return s=o(t,e,u,n),a=o(e,t,u,Sr),i}function i(t){return s(t)}var s,a;return i.invert=function(t){return a(t)},i.domain=function(e){return arguments.length?(t=e.map(Number),o()):t},i.range=function(t){return arguments.length?(e=t,o()):e},i.rangeRound=function(t){return i.range(t).interpolate(Ur)},i.clamp=function(t){return arguments.length?(r=t,o()):r},i.interpolate=function(t){return arguments.length?(n=t,o()):n},i.ticks=function(e){return si(t,e)},i.tickFormat=function(e,n){return ai(t,e,n)},i.nice=function(e){return oi(t,e),o()},i.copy=function(){return ni(t,e,n,r)},o()}function ri(t,e){return fs.rebind(t,e,"range","rangeRound","interpolate","clamp")}function oi(t,e){return $o(t,ti(ii(t,e)[2])),$o(t,ti(ii(t,e)[2])),t}function ii(t,e){null==e&&(e=10);var n=Qo(t),r=n[1]-n[0],o=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),i=e/r*o;return.15>=i?o*=10:.35>=i?o*=5:.75>=i&&(o*=2),n[0]=Math.ceil(n[0]/o)*o,n[1]=Math.floor(n[1]/o)*o+.5*o,n[2]=o,n}function si(t,e){return fs.range.apply(fs,ii(t,e))}function ai(t,e,n){var r=ii(t,e);if(n){var o=va.exec(n);if(o.shift(),"s"===o[8]){var i=fs.formatPrefix(Math.max(Is(r[0]),Is(r[1])));return o[7]||(o[7]="."+ui(i.scale(r[2]))),o[8]="f",n=fs.format(o.join("")),function(t){return n(i.scale(t))+i.symbol}}o[7]||(o[7]="."+li(o[8],r)),n=o.join("")}else n=",."+ui(r[2])+"f";return fs.format(n)}function ui(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function li(t,e){var n=ui(e[2]);return t in Tu?Math.abs(n-ui(Math.max(Is(e[0]),Is(e[1]))))+ +("e"!==t):n-2*("%"===t)}function ci(t,e,n,r){function o(t){return(n?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function i(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function s(e){return t(o(e))}return s.invert=function(e){return i(t.invert(e))},s.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((r=e.map(Number)).map(o)),s):r},s.base=function(n){return arguments.length?(e=+n,t.domain(r.map(o)),s):e},s.nice=function(){var e=$o(r.map(o),n?Math:Ru);return t.domain(e),r=e.map(i),s},s.ticks=function(){var t=Qo(r),s=[],a=t[0],u=t[1],l=Math.floor(o(a)),c=Math.ceil(o(u)),p=e%1?2:e;if(isFinite(c-l)){if(n){for(;c>l;l++)for(var h=1;p>h;h++)s.push(i(l)*h);s.push(i(l))}else for(s.push(i(l));l++<c;)for(var h=p-1;h>0;h--)s.push(i(l)*h);for(l=0;s[l]<a;l++);for(c=s.length;s[c-1]>u;c--);s=s.slice(l,c)}return s},s.tickFormat=function(t,n){if(!arguments.length)return Nu;arguments.length<2?n=Nu:"function"!=typeof n&&(n=fs.format(n));var r=Math.max(1,e*t/s.ticks().length);return function(t){var s=t/i(Math.round(o(t)));return e-.5>s*e&&(s*=e),r>=s?n(t):""}},s.copy=function(){return ci(t.copy(),e,n,r)},ri(s,t)}function pi(t,e,n){function r(e){return t(o(e))}var o=hi(e),i=hi(1/e);return r.invert=function(e){return i(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(o)),r):n},r.ticks=function(t){return si(n,t)},r.tickFormat=function(t,e){return ai(n,t,e)},r.nice=function(t){return r.domain(oi(n,t))},r.exponent=function(s){return arguments.length?(o=hi(e=s),i=hi(1/e),t.domain(n.map(o)),r):e},r.copy=function(){return pi(t.copy(),e,n)},ri(r,t)}function hi(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function di(t,e){function n(n){return i[((o.get(n)||("range"===e.t?o.set(n,t.push(n)):NaN))-1)%i.length]}function r(e,n){return fs.range(t.length).map(function(t){return e+n*t})}var o,i,s;return n.domain=function(r){if(!arguments.length)return t;t=[],o=new g;for(var i,s=-1,a=r.length;++s<a;)o.has(i=r[s])||o.set(i,t.push(i));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(i=t,s=0,e={t:"range",a:arguments},n):i},n.rangePoints=function(o,a){arguments.length<2&&(a=0);var u=o[0],l=o[1],c=t.length<2?(u=(u+l)/2,0):(l-u)/(t.length-1+a);return i=r(u+c*a/2,c),s=0,e={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(o,a){arguments.length<2&&(a=0);var u=o[0],l=o[1],c=t.length<2?(u=l=Math.round((u+l)/2),0):(l-u)/(t.length-1+a)|0;return i=r(u+Math.round(c*a/2+(l-u-(t.length-1+a)*c)/2),c),s=0,e={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(o,a,u){arguments.length<2&&(a=0),arguments.length<3&&(u=a);var l=o[1]<o[0],c=o[l-0],p=o[1-l],h=(p-c)/(t.length-a+2*u);return i=r(c+h*u,h),l&&i.reverse(),s=h*(1-a),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(o,a,u){arguments.length<2&&(a=0),arguments.length<3&&(u=a);var l=o[1]<o[0],c=o[l-0],p=o[1-l],h=Math.floor((p-c)/(t.length-a+2*u));return i=r(c+Math.round((p-c-(t.length-a)*h)/2),h),l&&i.reverse(),s=Math.round(h*(1-a)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return s},n.rangeExtent=function(){return Qo(e.a[0])},n.copy=function(){return di(t,e)},n.domain(t)}function fi(t,e){function n(){var n=0,i=e.length;for(o=[];++n<i;)o[n-1]=fs.quantile(t,n/i);return r}function r(t){return isNaN(t=+t)?void 0:e[fs.bisect(o,t)]}var o;return r.domain=function(e){return arguments.length?(t=e.map(l).filter(c).sort(u),n()):t},r.range=function(t){return arguments.length?(e=t,n()):e},r.quantiles=function(){return o},r.invertExtent=function(n){return n=e.indexOf(n),0>n?[NaN,NaN]:[n>0?o[n-1]:t[0],n<o.length?o[n]:t[t.length-1]]},r.copy=function(){return fi(t,e)},n()}function gi(t,e,n){function r(e){return n[Math.max(0,Math.min(s,Math.floor(i*(e-t))))]}function o(){return i=n.length/(e-t),s=n.length-1,r}var i,s;return r.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],o()):[t,e]},r.range=function(t){return arguments.length?(n=t,o()):n},r.invertExtent=function(e){return e=n.indexOf(e),e=0>e?NaN:e/i+t,[e,e+1/i]},r.copy=function(){return gi(t,e,n)},o()}function mi(t,e){function n(n){return n>=n?e[fs.bisect(t,n)]:void 0}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return mi(t,e)},n}function yi(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return si(t,e)},e.tickFormat=function(e,n){return ai(t,e,n)},e.copy=function(){return yi(t)},e}function vi(){return 0}function xi(t){return t.innerRadius}function bi(t){return t.outerRadius}function ji(t){return t.startAngle}function _i(t){return t.endAngle}function Ei(t){return t&&t.padAngle}function wi(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function Si(t,e,n,r,o){var i=t[0]-e[0],s=t[1]-e[1],a=(o?r:-r)/Math.sqrt(i*i+s*s),u=a*s,l=-a*i,c=t[0]+u,p=t[1]+l,h=e[0]+u,d=e[1]+l,f=(c+h)/2,g=(p+d)/2,m=h-c,y=d-p,v=m*m+y*y,x=n-r,b=c*d-h*p,j=(0>y?-1:1)*Math.sqrt(Math.max(0,x*x*v-b*b)),_=(b*y-m*j)/v,E=(-b*m-y*j)/v,w=(b*y+m*j)/v,S=(-b*m+y*j)/v,I=_-f,M=E-g,C=w-f,L=S-g;return I*I+M*M>C*C+L*L&&(_=w,E=S),[[_-u,E-l],[_*n/x,E*n/x]]}function Ii(t){function e(e){function s(){l.push("M",i(t(c),a))}for(var u,l=[],c=[],p=-1,h=e.length,d=Nt(n),f=Nt(r);++p<h;)o.call(this,u=e[p],p)?c.push([+d.call(this,u,p),+f.call(this,u,p)]):c.length&&(s(),c=[]);return c.length&&s(),l.length?l.join(""):null}var n=Dn,r=On,o=De,i=Mi,s=i.key,a=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e.defined=function(t){return arguments.length?(o=t,e):o},e.interpolate=function(t){return arguments.length?(s="function"==typeof t?i=t:(i=Bu.get(t)||Mi).key,e):s},e.tension=function(t){return arguments.length?(a=t,e):a},e}function Mi(t){return t.length>1?t.join("L"):t+"Z"}function Ci(t){return t.join("L")+"Z"}function Li(t){for(var e=0,n=t.length,r=t[0],o=[r[0],",",r[1]];++e<n;)o.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&o.push("H",r[0]),o.join("")}function Pi(t){for(var e=0,n=t.length,r=t[0],o=[r[0],",",r[1]];++e<n;)o.push("V",(r=t[e])[1],"H",r[0]);return o.join("")}function Ti(t){for(var e=0,n=t.length,r=t[0],o=[r[0],",",r[1]];++e<n;)o.push("H",(r=t[e])[0],"V",r[1]);return o.join("")}function Ni(t,e){return t.length<4?Mi(t):t[1]+Di(t.slice(1,-1),Oi(t,e))}function Ri(t,e){return t.length<3?Ci(t):t[0]+Di((t.push(t[0]),t),Oi([t[t.length-2]].concat(t,[t[1]]),e))}function Ai(t,e){return t.length<3?Mi(t):t[0]+Di(t,Oi(t,e))}function Di(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Mi(t);var n=t.length!=e.length,r="",o=t[0],i=t[1],s=e[0],a=s,u=1;if(n&&(r+="Q"+(i[0]-2*s[0]/3)+","+(i[1]-2*s[1]/3)+","+i[0]+","+i[1],o=t[1],u=2),e.length>1){a=e[1],i=t[u],u++,r+="C"+(o[0]+s[0])+","+(o[1]+s[1])+","+(i[0]-a[0])+","+(i[1]-a[1])+","+i[0]+","+i[1];for(var l=2;l<e.length;l++,u++)i=t[u],a=e[l],r+="S"+(i[0]-a[0])+","+(i[1]-a[1])+","+i[0]+","+i[1]}if(n){var c=t[u];r+="Q"+(i[0]+2*a[0]/3)+","+(i[1]+2*a[1]/3)+","+c[0]+","+c[1]}return r}function Oi(t,e){for(var n,r=[],o=(1-e)/2,i=t[0],s=t[1],a=1,u=t.length;++a<u;)n=i,i=s,s=t[a],r.push([o*(s[0]-n[0]),o*(s[1]-n[1])]);return r}function Fi(t){if(t.length<3)return Mi(t);var e=1,n=t.length,r=t[0],o=r[0],i=r[1],s=[o,o,o,(r=t[1])[0]],a=[i,i,i,r[1]],u=[o,",",i,"L",Gi(qu,s),",",Gi(qu,a)];for(t.push(t[n-1]);++e<=n;)r=t[e],s.shift(),s.push(r[0]),a.shift(),a.push(r[1]),qi(u,s,a);return t.pop(),u.push("L",r),u.join("")}function ki(t){if(t.length<4)return Mi(t);for(var e,n=[],r=-1,o=t.length,i=[0],s=[0];++r<3;)e=t[r],i.push(e[0]),s.push(e[1]);for(n.push(Gi(qu,i)+","+Gi(qu,s)),--r;++r<o;)e=t[r],i.shift(),i.push(e[0]),s.shift(),s.push(e[1]),qi(n,i,s);return n.join("")}function Bi(t){for(var e,n,r=-1,o=t.length,i=o+4,s=[],a=[];++r<4;)n=t[r%o],s.push(n[0]),a.push(n[1]);for(e=[Gi(qu,s),",",Gi(qu,a)],--r;++r<i;)n=t[r%o],s.shift(),s.push(n[0]),a.shift(),a.push(n[1]),qi(e,s,a);return e.join("")}function zi(t,e){var n=t.length-1;if(n)for(var r,o,i=t[0][0],s=t[0][1],a=t[n][0]-i,u=t[n][1]-s,l=-1;++l<=n;)r=t[l],o=l/n,r[0]=e*r[0]+(1-e)*(i+o*a),r[1]=e*r[1]+(1-e)*(s+o*u);return Fi(t)}function Gi(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function qi(t,e,n){t.push("C",Gi(zu,e),",",Gi(zu,n),",",Gi(Gu,e),",",Gi(Gu,n),",",Gi(qu,e),",",Gi(qu,n))}function Ui(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Vi(t){for(var e=0,n=t.length-1,r=[],o=t[0],i=t[1],s=r[0]=Ui(o,i);++e<n;)r[e]=(s+(s=Ui(o=i,i=t[e+1])))/2;return r[e]=s,r}function Yi(t){for(var e,n,r,o,i=[],s=Vi(t),a=-1,u=t.length-1;++a<u;)e=Ui(t[a],t[a+1]),Is(e)<Us?s[a]=s[a+1]=0:(n=s[a]/e,r=s[a+1]/e,o=n*n+r*r,o>9&&(o=3*e/Math.sqrt(o),s[a]=o*n,s[a+1]=o*r));for(a=-1;++a<=u;)o=(t[Math.min(u,a+1)][0]-t[Math.max(0,a-1)][0])/(6*(1+s[a]*s[a])),i.push([o||0,s[a]*o||0]);return i}function Hi(t){return t.length<3?Mi(t):t[0]+Di(t,Yi(t))}function Xi(t){for(var e,n,r,o=-1,i=t.length;++o<i;)e=t[o],n=e[0],r=e[1]-Ws,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function Wi(t){function e(e){function u(){g.push("M",a(t(y),p),c,l(t(m.reverse()),p),"Z")}for(var h,d,f,g=[],m=[],y=[],v=-1,x=e.length,b=Nt(n),j=Nt(o),_=n===r?function(){return d}:Nt(r),E=o===i?function(){return f}:Nt(i);++v<x;)s.call(this,h=e[v],v)?(m.push([d=+b.call(this,h,v),f=+j.call(this,h,v)]),y.push([+_.call(this,h,v),+E.call(this,h,v)])):m.length&&(u(),m=[],y=[]);return m.length&&u(),g.length?g.join(""):null}var n=Dn,r=Dn,o=0,i=On,s=De,a=Mi,u=a.key,l=a,c="L",p=.7;return e.x=function(t){return arguments.length?(n=r=t,e):r},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(o=i=t,e):i},e.y0=function(t){return arguments.length?(o=t,e):o},e.y1=function(t){return arguments.length?(i=t,e):i},e.defined=function(t){return arguments.length?(s=t,e):s},e.interpolate=function(t){return arguments.length?(u="function"==typeof t?a=t:(a=Bu.get(t)||Mi).key,l=a.reverse||a,c=a.closed?"M":"L",e):u},e.tension=function(t){return arguments.length?(p=t,e):p},e}function Zi(t){return t.radius}function Qi(t){return[t.x,t.y]}function Ki(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-Ws;return[n*Math.cos(r),n*Math.sin(r)]}}function Ji(){return 64}function $i(){return"circle"}function ts(t){var e=Math.sqrt(t/Ys);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function es(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function ns(t,e,n){return Ts(t,Zu),t.namespace=e,t.id=n,t}function rs(t,e,n,r){var o=t.id,i=t.namespace;return Z(t,"function"==typeof n?function(t,s,a){t[i][o].tween.set(e,r(n.call(t,t.__data__,s,a)))}:(n=r(n),function(t){t[i][o].tween.set(e,n)}))}function os(t){return null==t&&(t=""),function(){this.textContent=t}}function is(t){return null==t?"__transition__":"__transition_"+t+"__"}function ss(t,e,n,r,o){function i(t){var e=f.delay;return l.t=e+u,t>=e?s(t-e):void(l.c=s)}function s(n){var o=d.active,i=d[o];i&&(i.timer.c=null,i.timer.t=NaN,--d.count,delete d[o],i.event&&i.event.interrupt.call(t,t.__data__,i.index));for(var s in d)if(r>+s){var g=d[s];g.timer.c=null,g.timer.t=NaN,--d.count,delete d[s]}l.c=a,Ft(function(){return l.c&&a(n||1)&&(l.c=null,l.t=NaN),1},0,u),d.active=r,f.event&&f.event.start.call(t,t.__data__,e),h=[],f.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&h.push(r)}),p=f.ease,c=f.duration}function a(o){for(var i=o/c,s=p(i),a=h.length;a>0;)h[--a].call(t,s);return i>=1?(f.event&&f.event.end.call(t,t.__data__,e),--d.count?delete d[r]:delete t[n],1):void 0}var u,l,c,p,h,d=t[n]||(t[n]={active:0,count:0}),f=d[r];f||(u=o.time,l=Ft(i,0,u),f=d[r]={tween:new g,time:u,timer:l,delay:o.delay,duration:o.duration,ease:o.ease,index:e},o=null,++d.count)}function as(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function us(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}function ls(t){return t.toISOString()}function cs(t,e,n){function r(e){return t(e)}function o(t,n){var r=t[1]-t[0],o=r/n,i=fs.bisect(ol,o);return i==ol.length?[e.year,ii(t.map(function(t){return t/31536e6}),n)[2]]:i?e[o/ol[i-1]<ol[i]/o?i-1:i]:[al,ii(t,n)[2]]}return r.invert=function(e){return ps(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(ps)},r.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,ps(+n+1),e).length}var i=r.domain(),s=Qo(i),a=null==t?o(s,10):"number"==typeof t&&o(s,t);return a&&(t=a[0],e=a[1]),r.domain($o(i,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=ps(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=ps(+e+1);return e}}:t))},r.ticks=function(t,e){var n=Qo(r.domain()),i=null==t?o(n,10):"number"==typeof t?o(n,t):!t.range&&[{range:t},e];return i&&(t=i[0],e=i[1]),t.range(n[0],ps(+n[1]+1),1>e?1:e)},r.tickFormat=function(){return n},r.copy=function(){return cs(t.copy(),e,n)},ri(r,t)}function ps(t){return new Date(t)}function hs(t){return JSON.parse(t.responseText)}function ds(t){var e=ys.createRange();return e.selectNode(ys.body),e.createContextualFragment(t.responseText)}var fs={version:"3.5.17"},gs=[].slice,ms=function(t){return gs.call(t)},ys=this.document;if(ys)try{ms(ys.documentElement.childNodes)[0].nodeType}catch(vs){ms=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),ys)try{ys.createElement("DIV").style.setProperty("opacity",0,"")}catch(xs){var bs=this.Element.prototype,js=bs.setAttribute,_s=bs.setAttributeNS,Es=this.CSSStyleDeclaration.prototype,ws=Es.setProperty;bs.setAttribute=function(t,e){js.call(this,t,e+"")},bs.setAttributeNS=function(t,e,n){_s.call(this,t,e,n+"")},Es.setProperty=function(t,e,n){ws.call(this,t,e+"",n)}}fs.ascending=u,fs.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:NaN},fs.min=function(t,e){var n,r,o=-1,i=t.length;if(1===arguments.length){for(;++o<i;)if(null!=(r=t[o])&&r>=r){n=r;break}for(;++o<i;)null!=(r=t[o])&&n>r&&(n=r)}else{for(;++o<i;)if(null!=(r=e.call(t,t[o],o))&&r>=r){n=r;break}for(;++o<i;)null!=(r=e.call(t,t[o],o))&&n>r&&(n=r)}return n},fs.max=function(t,e){var n,r,o=-1,i=t.length;if(1===arguments.length){for(;++o<i;)if(null!=(r=t[o])&&r>=r){n=r;break}for(;++o<i;)null!=(r=t[o])&&r>n&&(n=r)}else{for(;++o<i;)if(null!=(r=e.call(t,t[o],o))&&r>=r){n=r;break}for(;++o<i;)null!=(r=e.call(t,t[o],o))&&r>n&&(n=r)}return n},fs.extent=function(t,e){var n,r,o,i=-1,s=t.length;if(1===arguments.length){for(;++i<s;)if(null!=(r=t[i])&&r>=r){n=o=r;break}for(;++i<s;)null!=(r=t[i])&&(n>r&&(n=r),r>o&&(o=r))}else{for(;++i<s;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=o=r;break}for(;++i<s;)null!=(r=e.call(t,t[i],i))&&(n>r&&(n=r),r>o&&(o=r))}return[n,o]},fs.sum=function(t,e){var n,r=0,o=t.length,i=-1;if(1===arguments.length)for(;++i<o;)c(n=+t[i])&&(r+=n);else for(;++i<o;)c(n=+e.call(t,t[i],i))&&(r+=n);return r},fs.mean=function(t,e){var n,r=0,o=t.length,i=-1,s=o;if(1===arguments.length)for(;++i<o;)c(n=l(t[i]))?r+=n:--s;else for(;++i<o;)c(n=l(e.call(t,t[i],i)))?r+=n:--s;return s?r/s:void 0},fs.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),o=+t[r-1],i=n-r;return i?o+i*(t[r]-o):o},fs.median=function(t,e){var n,r=[],o=t.length,i=-1;if(1===arguments.length)for(;++i<o;)c(n=l(t[i]))&&r.push(n);else for(;++i<o;)c(n=l(e.call(t,t[i],i)))&&r.push(n);return r.length?fs.quantile(r.sort(u),.5):void 0},fs.variance=function(t,e){var n,r,o=t.length,i=0,s=0,a=-1,u=0;if(1===arguments.length)for(;++a<o;)c(n=l(t[a]))&&(r=n-i,i+=r/++u,s+=r*(n-i));else for(;++a<o;)c(n=l(e.call(t,t[a],a)))&&(r=n-i,i+=r/++u,s+=r*(n-i));return u>1?s/(u-1):void 0},fs.deviation=function(){var t=fs.variance.apply(this,arguments);return t?Math.sqrt(t):t};var Ss=p(u);fs.bisectLeft=Ss.left,fs.bisect=fs.bisectRight=Ss.right,fs.bisector=function(t){return p(1===t.length?function(e,n){return u(t(e),n)}:t)},fs.shuffle=function(t,e,n){(i=arguments.length)<3&&(n=t.length,2>i&&(e=0));for(var r,o,i=n-e;i;)o=Math.random()*i--|0,r=t[i+e],t[i+e]=t[o+e],t[o+e]=r;return t},fs.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},fs.pairs=function(t){for(var e,n=0,r=t.length-1,o=t[0],i=new Array(0>r?0:r);r>n;)i[n]=[e=o,o=t[++n]];return i},fs.transpose=function(t){if(!(o=t.length))return[];for(var e=-1,n=fs.min(t,h),r=new Array(n);++e<n;)for(var o,i=-1,s=r[e]=new Array(o);++i<o;)s[i]=t[i][e];return r},fs.zip=function(){return fs.transpose(arguments)},fs.keys=function(t){var e=[];for(var n in t)e.push(n);
return e},fs.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},fs.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},fs.merge=function(t){for(var e,n,r,o=t.length,i=-1,s=0;++i<o;)s+=t[i].length;for(n=new Array(s);--o>=0;)for(r=t[o],e=r.length;--e>=0;)n[--s]=r[e];return n};var Is=Math.abs;fs.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var r,o=[],i=d(Is(n)),s=-1;if(t*=i,e*=i,n*=i,0>n)for(;(r=t+n*++s)>e;)o.push(r/i);else for(;(r=t+n*++s)<e;)o.push(r/i);return o},fs.map=function(t,e){var n=new g;if(t instanceof g)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,o=-1,i=t.length;if(1===arguments.length)for(;++o<i;)n.set(o,t[o]);else for(;++o<i;)n.set(e.call(t,r=t[o],o),r)}else for(var s in t)n.set(s,t[s]);return n};var Ms="__proto__",Cs="\0";f(g,{has:v,get:function(t){return this._[m(t)]},set:function(t,e){return this._[m(t)]=e},remove:x,keys:b,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:y(e),value:this._[e]});return t},size:j,empty:_,forEach:function(t){for(var e in this._)t.call(this,y(e),this._[e])}}),fs.nest=function(){function t(e,s,a){if(a>=i.length)return r?r.call(o,s):n?s.sort(n):s;for(var u,l,c,p,h=-1,d=s.length,f=i[a++],m=new g;++h<d;)(p=m.get(u=f(l=s[h])))?p.push(l):m.set(u,[l]);return e?(l=e(),c=function(n,r){l.set(n,t(e,r,a))}):(l={},c=function(n,r){l[n]=t(e,r,a)}),m.forEach(c),l}function e(t,n){if(n>=i.length)return t;var r=[],o=s[n++];return t.forEach(function(t,o){r.push({key:t,values:e(o,n)})}),o?r.sort(function(t,e){return o(t.key,e.key)}):r}var n,r,o={},i=[],s=[];return o.map=function(e,n){return t(n,e,0)},o.entries=function(n){return e(t(fs.map,n,0),0)},o.key=function(t){return i.push(t),o},o.sortKeys=function(t){return s[i.length-1]=t,o},o.sortValues=function(t){return n=t,o},o.rollup=function(t){return r=t,o},o},fs.set=function(t){var e=new E;if(t)for(var n=0,r=t.length;r>n;++n)e.add(t[n]);return e},f(E,{has:v,add:function(t){return this._[m(t+="")]=!0,t},remove:x,values:b,size:j,empty:_,forEach:function(t){for(var e in this._)t.call(this,y(e))}}),fs.behavior={},fs.rebind=function(t,e){for(var n,r=1,o=arguments.length;++r<o;)t[n=arguments[r]]=S(t,e,e[n]);return t};var Ls=["webkit","ms","moz","Moz","o","O"];fs.dispatch=function(){for(var t=new C,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=L(t);return t},C.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},fs.event=null,fs.requote=function(t){return t.replace(Ps,"\\$&")};var Ps=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Ts={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},Ns=function(t,e){return e.querySelector(t)},Rs=function(t,e){return e.querySelectorAll(t)},As=function(t,e){var n=t.matches||t[I(t,"matchesSelector")];return(As=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(Ns=function(t,e){return Sizzle(t,e)[0]||null},Rs=Sizzle,As=Sizzle.matchesSelector),fs.selection=function(){return fs.select(ys.documentElement)};var Ds=fs.selection.prototype=[];Ds.select=function(t){var e,n,r,o,i=[];t=A(t);for(var s=-1,a=this.length;++s<a;){i.push(e=[]),e.parentNode=(r=this[s]).parentNode;for(var u=-1,l=r.length;++u<l;)(o=r[u])?(e.push(n=t.call(o,o.__data__,u,s)),n&&"__data__"in o&&(n.__data__=o.__data__)):e.push(null)}return R(i)},Ds.selectAll=function(t){var e,n,r=[];t=D(t);for(var o=-1,i=this.length;++o<i;)for(var s=this[o],a=-1,u=s.length;++a<u;)(n=s[a])&&(r.push(e=ms(t.call(n,n.__data__,a,o))),e.parentNode=n);return R(r)};var Os="http://www.w3.org/1999/xhtml",Fs={svg:"http://www.w3.org/2000/svg",xhtml:Os,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};fs.ns={prefix:Fs,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Fs.hasOwnProperty(n)?{space:Fs[n],local:t}:t}},Ds.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=fs.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(O(e,t[e]));return this}return this.each(O(t,e))},Ds.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=B(t)).length,o=-1;if(e=n.classList){for(;++o<r;)if(!e.contains(t[o]))return!1}else for(e=n.getAttribute("class");++o<r;)if(!k(t[o]).test(e))return!1;return!0}for(e in t)this.each(z(e,t[e]));return this}return this.each(z(t,e))},Ds.style=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e="");for(n in t)this.each(q(n,t[n],e));return this}if(2>r){var o=this.node();return a(o).getComputedStyle(o,null).getPropertyValue(t)}n=""}return this.each(q(t,e,n))},Ds.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(U(e,t[e]));return this}return this.each(U(t,e))},Ds.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Ds.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Ds.append=function(t){return t=V(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Ds.insert=function(t,e){return t=V(t),e=A(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},Ds.remove=function(){return this.each(Y)},Ds.data=function(t,e){function n(t,n){var r,o,i,s=t.length,c=n.length,p=Math.min(s,c),h=new Array(c),d=new Array(c),f=new Array(s);if(e){var m,y=new g,v=new Array(s);for(r=-1;++r<s;)(o=t[r])&&(y.has(m=e.call(o,o.__data__,r))?f[r]=o:y.set(m,o),v[r]=m);for(r=-1;++r<c;)(o=y.get(m=e.call(n,i=n[r],r)))?o!==!0&&(h[r]=o,o.__data__=i):d[r]=H(i),y.set(m,!0);for(r=-1;++r<s;)r in v&&y.get(v[r])!==!0&&(f[r]=t[r])}else{for(r=-1;++r<p;)o=t[r],i=n[r],o?(o.__data__=i,h[r]=o):d[r]=H(i);for(;c>r;++r)d[r]=H(n[r]);for(;s>r;++r)f[r]=t[r]}d.update=h,d.parentNode=h.parentNode=f.parentNode=t.parentNode,a.push(d),u.push(h),l.push(f)}var r,o,i=-1,s=this.length;if(!arguments.length){for(t=new Array(s=(r=this[0]).length);++i<s;)(o=r[i])&&(t[i]=o.__data__);return t}var a=Q([]),u=R([]),l=R([]);if("function"==typeof t)for(;++i<s;)n(r=this[i],t.call(r,r.parentNode.__data__,i));else for(;++i<s;)n(r=this[i],t);return u.enter=function(){return a},u.exit=function(){return l},u},Ds.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Ds.filter=function(t){var e,n,r,o=[];"function"!=typeof t&&(t=X(t));for(var i=0,s=this.length;s>i;i++){o.push(e=[]),e.parentNode=(n=this[i]).parentNode;for(var a=0,u=n.length;u>a;a++)(r=n[a])&&t.call(r,r.__data__,a,i)&&e.push(r)}return R(o)},Ds.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],o=r.length-1,i=r[o];--o>=0;)(n=r[o])&&(i&&i!==n.nextSibling&&i.parentNode.insertBefore(n,i),i=n);return this},Ds.sort=function(t){t=W.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Ds.each=function(t){return Z(this,function(e,n,r){t.call(e,e.__data__,n,r)})},Ds.call=function(t){var e=ms(arguments);return t.apply(e[0]=this,e),this},Ds.empty=function(){return!this.node()},Ds.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],r=0,o=n.length;o>r;r++){var i=n[r];if(i)return i}return null},Ds.size=function(){var t=0;return Z(this,function(){++t}),t};var ks=[];fs.selection.enter=Q,fs.selection.enter.prototype=ks,ks.append=Ds.append,ks.empty=Ds.empty,ks.node=Ds.node,ks.call=Ds.call,ks.size=Ds.size,ks.select=function(t){for(var e,n,r,o,i,s=[],a=-1,u=this.length;++a<u;){r=(o=this[a]).update,s.push(e=[]),e.parentNode=o.parentNode;for(var l=-1,c=o.length;++l<c;)(i=o[l])?(e.push(r[l]=n=t.call(o.parentNode,i.__data__,l,a)),n.__data__=i.__data__):e.push(null)}return R(s)},ks.insert=function(t,e){return arguments.length<2&&(e=K(this)),Ds.insert.call(this,t,e)},fs.select=function(t){var e;return"string"==typeof t?(e=[Ns(t,ys)],e.parentNode=ys.documentElement):(e=[t],e.parentNode=s(t)),R([e])},fs.selectAll=function(t){var e;return"string"==typeof t?(e=ms(Rs(t,ys)),e.parentNode=ys.documentElement):(e=ms(t),e.parentNode=null),R([e])},Ds.on=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e=!1);for(n in t)this.each(J(n,t[n],e));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(J(t,e,n))};var Bs=fs.map({mouseenter:"mouseover",mouseleave:"mouseout"});ys&&Bs.forEach(function(t){"on"+t in ys&&Bs.remove(t)});var zs,Gs=0;fs.mouse=function(t){return nt(t,T())};var qs=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;fs.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=T().changedTouches),e)for(var r,o=0,i=e.length;i>o;++o)if((r=e[o]).identifier===n)return nt(t,r)},fs.behavior.drag=function(){function t(){this.on("mousedown.drag",o).on("touchstart.drag",i)}function e(t,e,o,i,s){return function(){function a(){var t,n,r=e(h,g);r&&(t=r[0]-x[0],n=r[1]-x[1],f|=t|n,x=r,d({type:"drag",x:r[0]+l[0],y:r[1]+l[1],dx:t,dy:n}))}function u(){e(h,g)&&(y.on(i+m,null).on(s+m,null),v(f),d({type:"dragend"}))}var l,c=this,p=fs.event.target.correspondingElement||fs.event.target,h=c.parentNode,d=n.of(c,arguments),f=0,g=t(),m=".drag"+(null==g?"":"-"+g),y=fs.select(o(p)).on(i+m,a).on(s+m,u),v=et(p),x=e(h,g);r?(l=r.apply(c,arguments),l=[l.x-x[0],l.y-x[1]]):l=[0,0],d({type:"dragstart"})}}var n=N(t,"drag","dragstart","dragend"),r=null,o=e(M,fs.mouse,a,"mousemove","mouseup"),i=e(rt,fs.touch,w,"touchmove","touchend");return t.origin=function(e){return arguments.length?(r=e,t):r},fs.rebind(t,n,"on")},fs.touches=function(t,e){return arguments.length<2&&(e=T().touches),e?ms(e).map(function(e){var n=nt(t,e);return n.identifier=e.identifier,n}):[]};var Us=1e-6,Vs=Us*Us,Ys=Math.PI,Hs=2*Ys,Xs=Hs-Us,Ws=Ys/2,Zs=Ys/180,Qs=180/Ys,Ks=Math.SQRT2,Js=2,$s=4;fs.interpolateZoom=function(t,e){var n,r,o=t[0],i=t[1],s=t[2],a=e[0],u=e[1],l=e[2],c=a-o,p=u-i,h=c*c+p*p;if(Vs>h)r=Math.log(l/s)/Ks,n=function(t){return[o+t*c,i+t*p,s*Math.exp(Ks*t*r)]};else{var d=Math.sqrt(h),f=(l*l-s*s+$s*h)/(2*s*Js*d),g=(l*l-s*s-$s*h)/(2*l*Js*d),m=Math.log(Math.sqrt(f*f+1)-f),y=Math.log(Math.sqrt(g*g+1)-g);r=(y-m)/Ks,n=function t(e){var n=e*r,t=lt(m),a=s/(Js*d)*(t*ct(Ks*n+m)-ut(m));return[o+a*c,i+a*p,s*t/lt(Ks*n+m)]}}return n.duration=1e3*r,n},fs.behavior.zoom=function(){function t(t){t.on(L,p).on(ea+".zoom",d).on("dblclick.zoom",f).on(A,h)}function e(t){return[(t[0]-w.x)/w.k,(t[1]-w.y)/w.k]}function n(t){return[t[0]*w.k+w.x,t[1]*w.k+w.y]}function r(t){w.k=Math.max(I[0],Math.min(I[1],t))}function o(t,e){e=n(e),w.x+=t[0]-e[0],w.y+=t[1]-e[1]}function i(e,n,i,s){e.__chart__={x:w.x,y:w.y,k:w.k},r(Math.pow(2,s)),o(m=n,i),e=fs.select(e),M>0&&(e=e.transition().duration(M)),e.call(t.event)}function s(){j&&j.domain(b.range().map(function(t){return(t-w.x)/w.k}).map(b.invert)),E&&E.domain(_.range().map(function(t){return(t-w.y)/w.k}).map(_.invert))}function u(t){C++||t({type:"zoomstart"})}function l(t){s(),t({type:"zoom",scale:w.k,translate:[w.x,w.y]})}function c(t){--C||(t({type:"zoomend"}),m=null)}function p(){function t(){s=1,o(fs.mouse(r),h),l(i)}function n(){p.on(T,null).on(R,null),d(s),c(i)}var r=this,i=D.of(r,arguments),s=0,p=fs.select(a(r)).on(T,t).on(R,n),h=e(fs.mouse(r)),d=et(r);Wu.call(r),u(i)}function h(){function t(){var t=fs.touches(f);return d=w.k,t.forEach(function(t){t.identifier in m&&(m[t.identifier]=e(t))}),t}function n(){var e=fs.event.target;fs.select(e).on(b,s).on(j,a),_.push(e);for(var n=fs.event.changedTouches,r=0,o=n.length;o>r;++r)m[n[r].identifier]=null;var u=t(),l=Date.now();if(1===u.length){if(500>l-x){var c=u[0];i(f,c,m[c.identifier],Math.floor(Math.log(w.k)/Math.LN2)+1),P()}x=l}else if(u.length>1){var c=u[0],p=u[1],h=c[0]-p[0],d=c[1]-p[1];y=h*h+d*d}}function s(){var t,e,n,i,s=fs.touches(f);Wu.call(f);for(var a=0,u=s.length;u>a;++a,i=null)if(n=s[a],i=m[n.identifier]){if(e)break;t=n,e=i}if(i){var c=(c=n[0]-t[0])*c+(c=n[1]-t[1])*c,p=y&&Math.sqrt(c/y);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+i[0])/2,(e[1]+i[1])/2],r(p*d)}x=null,o(t,e),l(g)}function a(){if(fs.event.touches.length){for(var e=fs.event.changedTouches,n=0,r=e.length;r>n;++n)delete m[e[n].identifier];for(var o in m)return void t()}fs.selectAll(_).on(v,null),E.on(L,p).on(A,h),S(),c(g)}var d,f=this,g=D.of(f,arguments),m={},y=0,v=".zoom-"+fs.event.changedTouches[0].identifier,b="touchmove"+v,j="touchend"+v,_=[],E=fs.select(f),S=et(f);n(),u(g),E.on(L,null).on(A,n)}function d(){var t=D.of(this,arguments);v?clearTimeout(v):(Wu.call(this),g=e(m=y||fs.mouse(this)),u(t)),v=setTimeout(function(){v=null,c(t)},50),P(),r(Math.pow(2,.002*ta())*w.k),o(m,g),l(t)}function f(){var t=fs.mouse(this),n=Math.log(w.k)/Math.LN2;i(this,t,e(t),fs.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}var g,m,y,v,x,b,j,_,E,w={x:0,y:0,k:1},S=[960,500],I=na,M=250,C=0,L="mousedown.zoom",T="mousemove.zoom",R="mouseup.zoom",A="touchstart.zoom",D=N(t,"zoomstart","zoom","zoomend");return ea||(ea="onwheel"in ys?(ta=function(){return-fs.event.deltaY*(fs.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ys?(ta=function(){return fs.event.wheelDelta},"mousewheel"):(ta=function(){return-fs.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=D.of(this,arguments),e=w;Hu?fs.select(this).transition().each("start.zoom",function(){w=this.__chart__||{x:0,y:0,k:1},u(t)}).tween("zoom:zoom",function(){var n=S[0],r=S[1],o=m?m[0]:n/2,i=m?m[1]:r/2,s=fs.interpolateZoom([(o-w.x)/w.k,(i-w.y)/w.k,n/w.k],[(o-e.x)/e.k,(i-e.y)/e.k,n/e.k]);return function(e){var r=s(e),a=n/r[2];this.__chart__=w={x:o-r[0]*a,y:i-r[1]*a,k:a},l(t)}}).each("interrupt.zoom",function(){c(t)}).each("end.zoom",function(){c(t)}):(this.__chart__=w,u(t),l(t),c(t))})},t.translate=function(e){return arguments.length?(w={x:+e[0],y:+e[1],k:w.k},s(),t):[w.x,w.y]},t.scale=function(e){return arguments.length?(w={x:w.x,y:w.y,k:null},r(+e),s(),t):w.k},t.scaleExtent=function(e){return arguments.length?(I=null==e?na:[+e[0],+e[1]],t):I},t.center=function(e){return arguments.length?(y=e&&[+e[0],+e[1]],t):y},t.size=function(e){return arguments.length?(S=e&&[+e[0],+e[1]],t):S},t.duration=function(e){return arguments.length?(M=+e,t):M},t.x=function(e){return arguments.length?(j=e,b=e.copy(),w={x:0,y:0,k:1},t):j},t.y=function(e){return arguments.length?(E=e,_=e.copy(),w={x:0,y:0,k:1},t):E},fs.rebind(t,D,"on")};var ta,ea,na=[0,1/0];fs.color=ht,ht.prototype.toString=function(){return this.rgb()+""},fs.hsl=dt;var ra=dt.prototype=new ht;ra.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new dt(this.h,this.s,this.l/t)},ra.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new dt(this.h,this.s,t*this.l)},ra.rgb=function(){return ft(this.h,this.s,this.l)},fs.hcl=gt;var oa=gt.prototype=new ht;oa.brighter=function(t){return new gt(this.h,this.c,Math.min(100,this.l+ia*(arguments.length?t:1)))},oa.darker=function(t){return new gt(this.h,this.c,Math.max(0,this.l-ia*(arguments.length?t:1)))},oa.rgb=function(){return mt(this.h,this.c,this.l).rgb()},fs.lab=yt;var ia=18,sa=.95047,aa=1,ua=1.08883,la=yt.prototype=new ht;la.brighter=function(t){return new yt(Math.min(100,this.l+ia*(arguments.length?t:1)),this.a,this.b)},la.darker=function(t){return new yt(Math.max(0,this.l-ia*(arguments.length?t:1)),this.a,this.b)},la.rgb=function(){return vt(this.l,this.a,this.b)},fs.rgb=Et;var ca=Et.prototype=new ht;ca.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,o=30;return e||n||r?(e&&o>e&&(e=o),n&&o>n&&(n=o),r&&o>r&&(r=o),new Et(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new Et(o,o,o)},ca.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Et(t*this.r,t*this.g,t*this.b)},ca.hsl=function(){return Ct(this.r,this.g,this.b)},ca.toString=function(){return"#"+It(this.r)+It(this.g)+It(this.b)};var pa=fs.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});pa.forEach(function(t,e){pa.set(t,wt(e))}),fs.functor=Nt,fs.xhr=Rt(w),fs.dsv=function(t,e){function n(t,n,i){arguments.length<3&&(i=n,n=null);var s=At(t,e,null==n?r:o(n),i);return s.row=function(t){return arguments.length?s.response(null==(n=t)?r:o(t)):n},s}function r(t){return n.parse(t.responseText)}function o(t){return function(e){return n.parse(e.responseText,t)}}function i(e){return e.map(s).join(t)}function s(t){return a.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var a=new RegExp('["'+t+"\n]"),u=t.charCodeAt(0);return n.parse=function(t,e){var r;return n.parseRows(t,function(t,n){if(r)return r(t,n-1);var o=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=e?function(t,n){return e(o(t),n)}:o})},n.parseRows=function(t,e){function n(){if(c>=l)return s;if(o)return o=!1,i;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<l;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}c=n+2;var r=t.charCodeAt(n+1);return 13===r?(o=!0,10===t.charCodeAt(n+2)&&++c):10===r&&(o=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;l>c;){var r=t.charCodeAt(c++),a=1;if(10===r)o=!0;else if(13===r)o=!0,10===t.charCodeAt(c)&&(++c,++a);else if(r!==u)continue;return t.slice(e,c-a)}return t.slice(e)}for(var r,o,i={},s={},a=[],l=t.length,c=0,p=0;(r=n())!==s;){for(var h=[];r!==i&&r!==s;)h.push(r),r=n();e&&null==(h=e(h,p++))||a.push(h)}return a},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var r=new E,o=[];return e.forEach(function(t){for(var e in t)r.has(e)||o.push(r.add(e))}),[o.map(s).join(t)].concat(e.map(function(e){return o.map(function(t){return s(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(i).join("\n")},n},fs.csv=fs.dsv(",","text/csv"),fs.tsv=fs.dsv("\t","text/tab-separated-values");var ha,da,fa,ga,ma=this[I(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};fs.timer=function(){Ft.apply(this,arguments)},fs.timer.flush=function(){Bt(),zt()},fs.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var ya=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(qt);fs.formatPrefix=function(t,e){var n=0;return(t=+t)&&(0>t&&(t*=-1),e&&(t=fs.round(t,Gt(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),ya[8+n/3]};var va=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,xa=fs.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=fs.round(t,Gt(t,e))).toFixed(Math.max(0,Math.min(20,Gt(t*(1+1e-15),e))))}}),ba=fs.time={},ja=Date;Yt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){_a.setUTCDate.apply(this._,arguments)},setDay:function(){_a.setUTCDay.apply(this._,arguments)},setFullYear:function(){_a.setUTCFullYear.apply(this._,arguments)},setHours:function(){_a.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){_a.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){_a.setUTCMinutes.apply(this._,arguments)},setMonth:function(){_a.setUTCMonth.apply(this._,arguments)},setSeconds:function(){_a.setUTCSeconds.apply(this._,arguments)},setTime:function(){_a.setTime.apply(this._,arguments)}};var _a=Date.prototype;ba.year=Ht(function(t){return t=ba.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),ba.years=ba.year.range,ba.years.utc=ba.year.utc.range,ba.day=Ht(function(t){var e=new ja(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),ba.days=ba.day.range,ba.days.utc=ba.day.utc.range,ba.dayOfYear=function(t){var e=ba.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=ba[t]=Ht(function(t){return(t=ba.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=ba.year(t).getDay();return Math.floor((ba.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});ba[t+"s"]=n.range,ba[t+"s"].utc=n.utc.range,ba[t+"OfYear"]=function(t){var n=ba.year(t).getDay();return Math.floor((ba.dayOfYear(t)+(n+e)%7)/7)}}),ba.week=ba.sunday,ba.weeks=ba.sunday.range,ba.weeks.utc=ba.sunday.utc.range,ba.weekOfYear=ba.sundayOfYear;var Ea={"-":"",_:" ",0:"0"},wa=/^\s*\d+/,Sa=/^%/;fs.locale=function(t){return{numberFormat:Ut(t),timeFormat:Wt(t)}};var Ia=fs.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});fs.format=Ia.numberFormat,fs.geo={},ge.prototype={s:0,t:0,add:function(t){me(t,this.t,Ma),me(Ma.s,this.s,this),this.s?this.t+=Ma.t:this.s=Ma.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Ma=new ge;fs.geo.stream=function(t,e){t&&Ca.hasOwnProperty(t.type)?Ca[t.type](t,e):ye(t,e)};var Ca={Feature:function(t,e){ye(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,o=n.length;++r<o;)ye(n[r].geometry,e)}},La={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){ve(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)ve(n[r],e,0)},Polygon:function(t,e){xe(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)xe(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,o=n.length;++r<o;)ye(n[r],e)}};fs.geo.area=function(t){return Pa=0,fs.geo.stream(t,Na),Pa};var Pa,Ta=new ge,Na={sphere:function(){Pa+=4*Ys},point:M,lineStart:M,lineEnd:M,polygonStart:function(){Ta.reset(),Na.lineStart=be},polygonEnd:function(){var t=2*Ta;Pa+=0>t?4*Ys+t:t,Na.lineStart=Na.lineEnd=Na.point=M}};fs.geo.bounds=function(){function t(t,e){x.push(b=[c=t,h=t]),p>e&&(p=e),e>d&&(d=e)}function e(e,n){var r=je([e*Zs,n*Zs]);if(y){var o=Ee(y,r),i=[o[1],-o[0],0],s=Ee(i,o);Ie(s),s=Me(s);var u=e-f,l=u>0?1:-1,g=s[0]*Qs*l,m=Is(u)>180;if(m^(g>l*f&&l*e>g)){var v=s[1]*Qs;v>d&&(d=v)}else if(g=(g+360)%360-180,m^(g>l*f&&l*e>g)){var v=-s[1]*Qs;p>v&&(p=v)}else p>n&&(p=n),n>d&&(d=n);m?f>e?a(c,e)>a(c,h)&&(h=e):a(e,h)>a(c,h)&&(c=e):h>=c?(c>e&&(c=e),e>h&&(h=e)):e>f?a(c,e)>a(c,h)&&(h=e):a(e,h)>a(c,h)&&(c=e)}else t(e,n);y=r,f=e}function n(){j.point=e}function r(){b[0]=c,b[1]=h,j.point=t,y=null}function o(t,n){if(y){var r=t-f;v+=Is(r)>180?r+(r>0?360:-360):r}else g=t,m=n;Na.point(t,n),e(t,n)}function i(){Na.lineStart()}function s(){o(g,m),Na.lineEnd(),Is(v)>Us&&(c=-(h=180)),b[0]=c,b[1]=h,y=null}function a(t,e){return(e-=t)<0?e+360:e}function u(t,e){return t[0]-e[0]}function l(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var c,p,h,d,f,g,m,y,v,x,b,j={point:t,lineStart:n,lineEnd:r,polygonStart:function(){j.point=o,j.lineStart=i,j.lineEnd=s,v=0,Na.polygonStart()},polygonEnd:function(){Na.polygonEnd(),j.point=t,j.lineStart=n,j.lineEnd=r,0>Ta?(c=-(h=180),p=-(d=90)):v>Us?d=90:-Us>v&&(p=-90),b[0]=c,b[1]=h}};return function(t){d=h=-(c=p=1/0),x=[],fs.geo.stream(t,j);var e=x.length;if(e){x.sort(u);for(var n,r=1,o=x[0],i=[o];e>r;++r)n=x[r],l(n[0],o)||l(n[1],o)?(a(o[0],n[1])>a(o[0],o[1])&&(o[1]=n[1]),a(n[0],o[1])>a(o[0],o[1])&&(o[0]=n[0])):i.push(o=n);for(var s,n,f=-(1/0),e=i.length-1,r=0,o=i[e];e>=r;o=n,++r)n=i[r],(s=a(o[1],n[0]))>f&&(f=s,c=n[0],h=o[1])}return x=b=null,c===1/0||p===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,p],[h,d]]}}(),fs.geo.centroid=function(t){Ra=Aa=Da=Oa=Fa=ka=Ba=za=Ga=qa=Ua=0,fs.geo.stream(t,Va);var e=Ga,n=qa,r=Ua,o=e*e+n*n+r*r;return Vs>o&&(e=ka,n=Ba,r=za,Us>Aa&&(e=Da,n=Oa,r=Fa),o=e*e+n*n+r*r,Vs>o)?[NaN,NaN]:[Math.atan2(n,e)*Qs,at(r/Math.sqrt(o))*Qs]};var Ra,Aa,Da,Oa,Fa,ka,Ba,za,Ga,qa,Ua,Va={sphere:M,point:Le,lineStart:Te,lineEnd:Ne,polygonStart:function(){Va.lineStart=Re},polygonEnd:function(){Va.lineStart=Te}},Ya=Be(De,Ue,Ye,[-Ys,-Ys/2]),Ha=1e9;fs.geo.clipExtent=function(){var t,e,n,r,o,i,s={stream:function(t){return o&&(o.valid=!1),o=i(t),o.valid=!0,o},extent:function(a){return arguments.length?(i=Ze(t=+a[0][0],e=+a[0][1],n=+a[1][0],r=+a[1][1]),o&&(o.valid=!1,o=null),s):[[t,e],[n,r]]}};return s.extent([[0,0],[960,500]])},(fs.geo.conicEqualArea=function(){return Qe(Ke)}).raw=Ke,fs.geo.albers=function(){return fs.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},fs.geo.albersUsa=function(){function t(t){var i=t[0],s=t[1];return e=null,n(i,s),e||(r(i,s),e)||o(i,s),e}var e,n,r,o,i=fs.geo.albers(),s=fs.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=fs.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=i.scale(),n=i.translate(),r=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(o>=.12&&.234>o&&r>=-.425&&-.214>r?s:o>=.166&&.234>o&&r>=-.214&&-.115>r?a:i).invert(t)},t.stream=function(t){var e=i.stream(t),n=s.stream(t),r=a.stream(t);return{point:function(t,o){e.point(t,o),n.point(t,o),r.point(t,o)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},t.precision=function(e){return arguments.length?(i.precision(e),s.precision(e),a.precision(e),t):i.precision()},t.scale=function(e){return arguments.length?(i.scale(e),s.scale(.35*e),a.scale(e),t.translate(i.translate())):i.scale()},t.translate=function(e){if(!arguments.length)return i.translate();var l=i.scale(),c=+e[0],p=+e[1];return n=i.translate(e).clipExtent([[c-.455*l,p-.238*l],[c+.455*l,p+.238*l]]).stream(u).point,r=s.translate([c-.307*l,p+.201*l]).clipExtent([[c-.425*l+Us,p+.12*l+Us],[c-.214*l-Us,p+.234*l-Us]]).stream(u).point,o=a.translate([c-.205*l,p+.212*l]).clipExtent([[c-.214*l+Us,p+.166*l+Us],[c-.115*l-Us,p+.234*l-Us]]).stream(u).point,t},t.scale(1070)};var Xa,Wa,Za,Qa,Ka,Ja,$a={point:M,lineStart:M,lineEnd:M,polygonStart:function(){Wa=0,$a.lineStart=Je},polygonEnd:function(){$a.lineStart=$a.lineEnd=$a.point=M,Xa+=Is(Wa/2)}},tu={point:$e,lineStart:M,lineEnd:M,polygonStart:M,polygonEnd:M},eu={point:nn,lineStart:rn,lineEnd:on,polygonStart:function(){eu.lineStart=sn},polygonEnd:function(){eu.point=nn,eu.lineStart=rn,eu.lineEnd=on}};fs.geo.path=function(){function t(t){return t&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),s&&s.valid||(s=o(i)),fs.geo.stream(t,s)),i.result()}function e(){return s=null,t}var n,r,o,i,s,a=4.5;return t.area=function(t){return Xa=0,fs.geo.stream(t,o($a)),Xa},t.centroid=function(t){return Da=Oa=Fa=ka=Ba=za=Ga=qa=Ua=0,fs.geo.stream(t,o(eu)),Ua?[Ga/Ua,qa/Ua]:za?[ka/za,Ba/za]:Fa?[Da/Fa,Oa/Fa]:[NaN,NaN]},t.bounds=function(t){return Ka=Ja=-(Za=Qa=1/0),fs.geo.stream(t,o(tu)),[[Za,Qa],[Ka,Ja]]},t.projection=function(t){return arguments.length?(o=(n=t)?t.stream||ln(t):w,e()):n},t.context=function(t){return arguments.length?(i=null==(r=t)?new tn:new an(t),"function"!=typeof a&&i.pointRadius(a),e()):r},t.pointRadius=function(e){return arguments.length?(a="function"==typeof e?e:(i.pointRadius(+e),+e),t):a},t.projection(fs.geo.albersUsa()).context(null)},fs.geo.transform=function(t){return{stream:function(e){var n=new cn(e);for(var r in t)n[r]=t[r];return n}}},cn.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},fs.geo.projection=hn,
fs.geo.projectionMutator=dn,(fs.geo.equirectangular=function(){return hn(gn)}).raw=gn.invert=gn,fs.geo.rotation=function(t){function e(e){return e=t(e[0]*Zs,e[1]*Zs),e[0]*=Qs,e[1]*=Qs,e}return t=yn(t[0]%360*Zs,t[1]*Zs,t.length>2?t[2]*Zs:0),e.invert=function(e){return e=t.invert(e[0]*Zs,e[1]*Zs),e[0]*=Qs,e[1]*=Qs,e},e},mn.invert=gn,fs.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,e=yn(-t[0]*Zs,-t[1]*Zs,0).invert,o=[];return n(null,null,1,{point:function(t,n){o.push(t=e(t,n)),t[0]*=Qs,t[1]*=Qs}}),{type:"Polygon",coordinates:[o]}}var e,n,r=[0,0],o=6;return t.origin=function(e){return arguments.length?(r=e,t):r},t.angle=function(r){return arguments.length?(n=jn((e=+r)*Zs,o*Zs),t):e},t.precision=function(r){return arguments.length?(n=jn(e*Zs,(o=+r)*Zs),t):o},t.angle(90)},fs.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Zs,o=t[1]*Zs,i=e[1]*Zs,s=Math.sin(r),a=Math.cos(r),u=Math.sin(o),l=Math.cos(o),c=Math.sin(i),p=Math.cos(i);return Math.atan2(Math.sqrt((n=p*s)*n+(n=l*c-u*p*a)*n),u*c+l*p*a)},fs.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return fs.range(Math.ceil(i/m)*m,o,m).map(h).concat(fs.range(Math.ceil(l/y)*y,u,y).map(d)).concat(fs.range(Math.ceil(r/f)*f,n,f).filter(function(t){return Is(t%m)>Us}).map(c)).concat(fs.range(Math.ceil(a/g)*g,s,g).filter(function(t){return Is(t%y)>Us}).map(p))}var n,r,o,i,s,a,u,l,c,p,h,d,f=10,g=f,m=90,y=360,v=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[h(i).concat(d(u).slice(1),h(o).reverse().slice(1),d(l).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(i=+e[0][0],o=+e[1][0],l=+e[0][1],u=+e[1][1],i>o&&(e=i,i=o,o=e),l>u&&(e=l,l=u,u=e),t.precision(v)):[[i,l],[o,u]]},t.minorExtent=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],a=+e[0][1],s=+e[1][1],r>n&&(e=r,r=n,n=e),a>s&&(e=a,a=s,s=e),t.precision(v)):[[r,a],[n,s]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(m=+e[0],y=+e[1],t):[m,y]},t.minorStep=function(e){return arguments.length?(f=+e[0],g=+e[1],t):[f,g]},t.precision=function(e){return arguments.length?(v=+e,c=En(a,s,90),p=wn(r,n,v),h=En(l,u,90),d=wn(i,o,v),t):v},t.majorExtent([[-180,-90+Us],[180,90-Us]]).minorExtent([[-180,-80-Us],[180,80+Us]])},fs.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||o.apply(this,arguments)]}}var e,n,r=Sn,o=In;return t.distance=function(){return fs.geo.distance(e||r.apply(this,arguments),n||o.apply(this,arguments))},t.source=function(n){return arguments.length?(r=n,e="function"==typeof n?null:n,t):r},t.target=function(e){return arguments.length?(o=e,n="function"==typeof e?null:e,t):o},t.precision=function(){return arguments.length?t:0},t},fs.geo.interpolate=function(t,e){return Mn(t[0]*Zs,t[1]*Zs,e[0]*Zs,e[1]*Zs)},fs.geo.length=function(t){return nu=0,fs.geo.stream(t,ru),nu};var nu,ru={sphere:M,point:M,lineStart:Cn,lineEnd:M,polygonStart:M,polygonEnd:M},ou=Ln(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(fs.geo.azimuthalEqualArea=function(){return hn(ou)}).raw=ou;var iu=Ln(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},w);(fs.geo.azimuthalEquidistant=function(){return hn(iu)}).raw=iu,(fs.geo.conicConformal=function(){return Qe(Pn)}).raw=Pn,(fs.geo.conicEquidistant=function(){return Qe(Tn)}).raw=Tn;var su=Ln(function(t){return 1/t},Math.atan);(fs.geo.gnomonic=function(){return hn(su)}).raw=su,Nn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Ws]},(fs.geo.mercator=function(){return Rn(Nn)}).raw=Nn;var au=Ln(function(){return 1},Math.asin);(fs.geo.orthographic=function(){return hn(au)}).raw=au;var uu=Ln(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(fs.geo.stereographic=function(){return hn(uu)}).raw=uu,An.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Ws]},(fs.geo.transverseMercator=function(){var t=Rn(An),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90])}).raw=An,fs.geom={},fs.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,o=Nt(n),i=Nt(r),s=t.length,a=[],u=[];for(e=0;s>e;e++)a.push([+o.call(this,t[e],e),+i.call(this,t[e],e),e]);for(a.sort(kn),e=0;s>e;e++)u.push([a[e][0],-a[e][1]]);var l=Fn(a),c=Fn(u),p=c[0]===l[0],h=c[c.length-1]===l[l.length-1],d=[];for(e=l.length-1;e>=0;--e)d.push(t[a[l[e]][2]]);for(e=+p;e<c.length-h;++e)d.push(t[a[c[e]][2]]);return d}var n=Dn,r=On;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e)},fs.geom.polygon=function(t){return Ts(t,lu),t};var lu=fs.geom.polygon.prototype=[];lu.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],o=0;++e<n;)t=r,r=this[e],o+=t[1]*r[0]-t[0]*r[1];return.5*o},lu.centroid=function(t){var e,n,r=-1,o=this.length,i=0,s=0,a=this[o-1];for(arguments.length||(t=-1/(6*this.area()));++r<o;)e=a,a=this[r],n=e[0]*a[1]-a[0]*e[1],i+=(e[0]+a[0])*n,s+=(e[1]+a[1])*n;return[i*t,s*t]},lu.clip=function(t){for(var e,n,r,o,i,s,a=Gn(t),u=-1,l=this.length-Gn(this),c=this[l-1];++u<l;){for(e=t.slice(),t.length=0,o=this[u],i=e[(r=e.length-a)-1],n=-1;++n<r;)s=e[n],Bn(s,c,o)?(Bn(i,c,o)||t.push(zn(i,s,c,o)),t.push(s)):Bn(i,c,o)&&t.push(zn(i,s,c,o)),i=s;a&&t.push(t[0]),c=o}return t};var cu,pu,hu,du,fu,gu=[],mu=[];Zn.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort(Kn),e.length},ar.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ur.prototype={insert:function(t,e){var n,r,o;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=hr(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(o=r.R,o&&o.C?(n.C=o.C=!1,r.C=!0,t=r):(t===n.R&&(cr(this,n),t=n,n=t.U),n.C=!1,r.C=!0,pr(this,r))):(o=r.L,o&&o.C?(n.C=o.C=!1,r.C=!0,t=r):(t===n.L&&(pr(this,n),t=n,n=t.U),n.C=!1,r.C=!0,cr(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,o=t.U,i=t.L,s=t.R;if(n=i?s?hr(s):i:s,o?o.L===t?o.L=n:o.R=n:this._=n,i&&s?(r=n.C,n.C=t.C,n.L=i,i.U=n,n!==s?(o=n.U,n.U=t.U,t=n.R,o.L=t,n.R=s,s.U=n):(n.U=o,o=n,t=n.R)):(r=t.C,t=n),t&&(t.U=o),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===o.L){if(e=o.R,e.C&&(e.C=!1,o.C=!0,cr(this,o),e=o.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,pr(this,e),e=o.R),e.C=o.C,o.C=e.R.C=!1,cr(this,o),t=this._;break}}else if(e=o.L,e.C&&(e.C=!1,o.C=!0,pr(this,o),e=o.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,cr(this,e),e=o.L),e.C=o.C,o.C=e.L.C=!1,pr(this,o),t=this._;break}e.C=!0,t=o,o=o.U}while(!t.C);t&&(t.C=!1)}}},fs.geom.voronoi=function(t){function e(t){var e=new Array(t.length),r=a[0][0],o=a[0][1],i=a[1][0],s=a[1][1];return dr(n(t),a).cells.forEach(function(n,a){var u=n.edges,l=n.site,c=e[a]=u.length?u.map(function(t){var e=t.start();return[e.x,e.y]}):l.x>=r&&l.x<=i&&l.y>=o&&l.y<=s?[[r,s],[i,s],[i,o],[r,o]]:[];c.point=t[a]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(i(t,e)/Us)*Us,y:Math.round(s(t,e)/Us)*Us,i:e}})}var r=Dn,o=On,i=r,s=o,a=yu;return t?e(t):(e.links=function(t){return dr(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return dr(n(t)).cells.forEach(function(n,r){for(var o,i,s=n.site,a=n.edges.sort(Kn),u=-1,l=a.length,c=a[l-1].edge,p=c.l===s?c.r:c.l;++u<l;)o=c,i=p,c=a[u].edge,p=c.l===s?c.r:c.l,r<i.i&&r<p.i&&gr(s,i,p)<0&&e.push([t[r],t[i.i],t[p.i]])}),e},e.x=function(t){return arguments.length?(i=Nt(r=t),e):r},e.y=function(t){return arguments.length?(s=Nt(o=t),e):o},e.clipExtent=function(t){return arguments.length?(a=null==t?yu:t,e):a===yu?null:a},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):a===yu?null:a&&a[1]},e)};var yu=[[-1e6,-1e6],[1e6,1e6]];fs.geom.delaunay=function(t){return fs.geom.voronoi().triangles(t)},fs.geom.quadtree=function(t,e,n,r,o){function i(t){function i(t,e,n,r,o,i,s,a){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var u=t.x,c=t.y;if(null!=u)if(Is(u-n)+Is(c-r)<.01)l(t,e,n,r,o,i,s,a);else{var p=t.point;t.x=t.y=t.point=null,l(t,p,u,c,o,i,s,a),l(t,e,n,r,o,i,s,a)}else t.x=n,t.y=r,t.point=e}else l(t,e,n,r,o,i,s,a)}function l(t,e,n,r,o,s,a,u){var l=.5*(o+a),c=.5*(s+u),p=n>=l,h=r>=c,d=h<<1|p;t.leaf=!1,t=t.nodes[d]||(t.nodes[d]=vr()),p?o=l:a=l,h?s=c:u=c,i(t,e,n,r,o,s,a,u)}var c,p,h,d,f,g,m,y,v,x=Nt(a),b=Nt(u);if(null!=e)g=e,m=n,y=r,v=o;else if(y=v=-(g=m=1/0),p=[],h=[],f=t.length,s)for(d=0;f>d;++d)c=t[d],c.x<g&&(g=c.x),c.y<m&&(m=c.y),c.x>y&&(y=c.x),c.y>v&&(v=c.y),p.push(c.x),h.push(c.y);else for(d=0;f>d;++d){var j=+x(c=t[d],d),_=+b(c,d);g>j&&(g=j),m>_&&(m=_),j>y&&(y=j),_>v&&(v=_),p.push(j),h.push(_)}var E=y-g,w=v-m;E>w?v=m+E:y=g+w;var S=vr();if(S.add=function(t){i(S,t,+x(t,++d),+b(t,d),g,m,y,v)},S.visit=function(t){xr(t,S,g,m,y,v)},S.find=function(t){return br(S,t[0],t[1],g,m,y,v)},d=-1,null==e){for(;++d<f;)i(S,t[d],p[d],h[d],g,m,y,v);--d}else t.forEach(S.add);return p=h=t=c=null,S}var s,a=Dn,u=On;return(s=arguments.length)?(a=mr,u=yr,3===s&&(o=n,r=e,n=e=0),i(t)):(i.x=function(t){return arguments.length?(a=t,i):a},i.y=function(t){return arguments.length?(u=t,i):u},i.extent=function(t){return arguments.length?(null==t?e=n=r=o=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],o=+t[1][1]),i):null==e?null:[[e,n],[r,o]]},i.size=function(t){return arguments.length?(null==t?e=n=r=o=null:(e=n=0,r=+t[0],o=+t[1]),i):null==e?null:[r-e,o-n]},i)},fs.interpolateRgb=jr,fs.interpolateObject=_r,fs.interpolateNumber=Er,fs.interpolateString=wr;var vu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xu=new RegExp(vu.source,"g");fs.interpolate=Sr,fs.interpolators=[function(t,e){var n="undefined"==typeof e?"undefined":i(e);return("string"===n?pa.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?jr:wr:e instanceof ht?jr:Array.isArray(e)?Ir:"object"===n&&isNaN(e)?_r:Er)(t,e)}],fs.interpolateArray=Ir;var bu=function(){return w},ju=fs.map({linear:bu,poly:Rr,quad:function(){return Pr},cubic:function(){return Tr},sin:function(){return Ar},exp:function(){return Dr},circle:function(){return Or},elastic:Fr,back:kr,bounce:function(){return Br}}),_u=fs.map({in:w,out:Cr,"in-out":Lr,"out-in":function(t){return Lr(Cr(t))}});fs.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,r=e>=0?t.slice(e+1):"in";return n=ju.get(n)||bu,r=_u.get(r)||w,Mr(r(n.apply(null,gs.call(arguments,1))))},fs.interpolateHcl=zr,fs.interpolateHsl=Gr,fs.interpolateLab=qr,fs.interpolateRound=Ur,fs.transform=function(t){var e=ys.createElementNS(fs.ns.prefix.svg,"g");return(fs.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Vr(n?n.matrix:Eu)})(t)},Vr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Eu={a:1,b:0,c:0,d:1,e:0,f:0};fs.interpolateTransform=$r,fs.layout={},fs.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(no(t[n]));return e}},fs.layout.chord=function(){function t(){var t,l,p,h,d,f={},g=[],m=fs.range(i),y=[];for(n=[],r=[],t=0,h=-1;++h<i;){for(l=0,d=-1;++d<i;)l+=o[h][d];g.push(l),y.push(fs.range(i)),t+=l}for(s&&m.sort(function(t,e){return s(g[t],g[e])}),a&&y.forEach(function(t,e){t.sort(function(t,n){return a(o[e][t],o[e][n])})}),t=(Hs-c*i)/t,l=0,h=-1;++h<i;){for(p=l,d=-1;++d<i;){var v=m[h],x=y[v][d],b=o[v][x],j=l,_=l+=b*t;f[v+"-"+x]={index:v,subindex:x,startAngle:j,endAngle:_,value:b}}r[v]={index:v,startAngle:p,endAngle:l,value:g[v]},l+=c}for(h=-1;++h<i;)for(d=h-1;++d<i;){var E=f[h+"-"+d],w=f[d+"-"+h];(E.value||w.value)&&n.push(E.value<w.value?{source:w,target:E}:{source:E,target:w})}u&&e()}function e(){n.sort(function(t,e){return u((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,r,o,i,s,a,u,l={},c=0;return l.matrix=function(t){return arguments.length?(i=(o=t)&&o.length,n=r=null,l):o},l.padding=function(t){return arguments.length?(c=t,n=r=null,l):c},l.sortGroups=function(t){return arguments.length?(s=t,n=r=null,l):s},l.sortSubgroups=function(t){return arguments.length?(a=t,n=null,l):a},l.sortChords=function(t){return arguments.length?(u=t,n&&e(),l):u},l.chords=function(){return n||t(),n},l.groups=function(){return r||t(),r},l},fs.layout.force=function(){function t(t){return function(e,n,r,o){if(e.point!==t){var i=e.cx-t.x,s=e.cy-t.y,a=o-n,u=i*i+s*s;if(u>a*a/y){if(g>u){var l=e.charge/u;t.px-=i*l,t.py-=s*l}return!0}if(e.point&&u&&g>u){var l=e.pointCharge/u;t.px-=i*l,t.py-=s*l}}return!e.charge}}function e(t){t.px=fs.event.x,t.py=fs.event.y,u.resume()}var n,r,o,i,s,a,u={},l=fs.dispatch("start","tick","end"),c=[1,1],p=.9,h=wu,d=Su,f=-30,g=Iu,m=.1,y=.64,v=[],x=[];return u.tick=function(){if((o*=.99)<.005)return n=null,l.end({type:"end",alpha:o=0}),!0;var e,r,u,h,d,g,y,b,j,_=v.length,E=x.length;for(r=0;E>r;++r)u=x[r],h=u.source,d=u.target,b=d.x-h.x,j=d.y-h.y,(g=b*b+j*j)&&(g=o*s[r]*((g=Math.sqrt(g))-i[r])/g,b*=g,j*=g,d.x-=b*(y=h.weight+d.weight?h.weight/(h.weight+d.weight):.5),d.y-=j*y,h.x+=b*(y=1-y),h.y+=j*y);if((y=o*m)&&(b=c[0]/2,j=c[1]/2,r=-1,y))for(;++r<_;)u=v[r],u.x+=(b-u.x)*y,u.y+=(j-u.y)*y;if(f)for(lo(e=fs.geom.quadtree(v),o,a),r=-1;++r<_;)(u=v[r]).fixed||e.visit(t(u));for(r=-1;++r<_;)u=v[r],u.fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*p,u.y-=(u.py-(u.py=u.y))*p);l.tick({type:"tick",alpha:o})},u.nodes=function(t){return arguments.length?(v=t,u):v},u.links=function(t){return arguments.length?(x=t,u):x},u.size=function(t){return arguments.length?(c=t,u):c},u.linkDistance=function(t){return arguments.length?(h="function"==typeof t?t:+t,u):h},u.distance=u.linkDistance,u.linkStrength=function(t){return arguments.length?(d="function"==typeof t?t:+t,u):d},u.friction=function(t){return arguments.length?(p=+t,u):p},u.charge=function(t){return arguments.length?(f="function"==typeof t?t:+t,u):f},u.chargeDistance=function(t){return arguments.length?(g=t*t,u):Math.sqrt(g)},u.gravity=function(t){return arguments.length?(m=+t,u):m},u.theta=function(t){return arguments.length?(y=t*t,u):Math.sqrt(y)},u.alpha=function(t){return arguments.length?(t=+t,o?t>0?o=t:(n.c=null,n.t=NaN,n=null,l.end({type:"end",alpha:o=0})):t>0&&(l.start({type:"start",alpha:o=t}),n=Ft(u.tick)),u):o},u.start=function(){function t(t,r){if(!n){for(n=new Array(o),u=0;o>u;++u)n[u]=[];for(u=0;l>u;++u){var i=x[u];n[i.source.index].push(i.target),n[i.target.index].push(i.source)}}for(var s,a=n[e],u=-1,c=a.length;++u<c;)if(!isNaN(s=a[u][t]))return s;return Math.random()*r}var e,n,r,o=v.length,l=x.length,p=c[0],g=c[1];for(e=0;o>e;++e)(r=v[e]).index=e,r.weight=0;for(e=0;l>e;++e)r=x[e],"number"==typeof r.source&&(r.source=v[r.source]),"number"==typeof r.target&&(r.target=v[r.target]),++r.source.weight,++r.target.weight;for(e=0;o>e;++e)r=v[e],isNaN(r.x)&&(r.x=t("x",p)),isNaN(r.y)&&(r.y=t("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof h)for(e=0;l>e;++e)i[e]=+h.call(this,x[e],e);else for(e=0;l>e;++e)i[e]=h;if(s=[],"function"==typeof d)for(e=0;l>e;++e)s[e]=+d.call(this,x[e],e);else for(e=0;l>e;++e)s[e]=d;if(a=[],"function"==typeof f)for(e=0;o>e;++e)a[e]=+f.call(this,v[e],e);else for(e=0;o>e;++e)a[e]=f;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){return r||(r=fs.behavior.drag().origin(w).on("dragstart.force",io).on("drag.force",e).on("dragend.force",so)),arguments.length?void this.on("mouseover.force",ao).on("mouseout.force",uo).call(r):r},fs.rebind(u,l,"on")};var wu=20,Su=1,Iu=1/0;fs.layout.hierarchy=function(){function t(o){var i,s=[o],a=[];for(o.depth=0;null!=(i=s.pop());)if(a.push(i),(l=n.call(t,i,i.depth))&&(u=l.length)){for(var u,l,c;--u>=0;)s.push(c=l[u]),c.parent=i,c.depth=i.depth+1;r&&(i.value=0),i.children=l}else r&&(i.value=+r.call(t,i,i.depth)||0),delete i.children;return ho(o,function(t){var n,o;e&&(n=t.children)&&n.sort(e),r&&(o=t.parent)&&(o.value+=t.value)}),a}var e=mo,n=fo,r=go;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(r=e,t):r},t.revalue=function(e){return r&&(po(e,function(t){t.children&&(t.value=0)}),ho(e,function(e){var n;e.children||(e.value=+r.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},fs.layout.partition=function(){function t(e,n,r,o){var i=e.children;if(e.x=n,e.y=e.depth*o,e.dx=r,e.dy=o,i&&(s=i.length)){var s,a,u,l=-1;for(r=e.value?r/e.value:0;++l<s;)t(a=i[l],n,u=a.value*r,o),n+=u}}function e(t){var n=t.children,r=0;if(n&&(o=n.length))for(var o,i=-1;++i<o;)r=Math.max(r,e(n[i]));return 1+r}function n(n,i){var s=r.call(this,n,i);return t(s[0],0,o[0],o[1]/e(s[0])),s}var r=fs.layout.hierarchy(),o=[1,1];return n.size=function(t){return arguments.length?(o=t,n):o},co(n,r)},fs.layout.pie=function(){function t(s){var a,u=s.length,l=s.map(function(n,r){return+e.call(t,n,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),p=("function"==typeof o?o.apply(this,arguments):o)-c,h=Math.min(Math.abs(p)/u,+("function"==typeof i?i.apply(this,arguments):i)),d=h*(0>p?-1:1),f=fs.sum(l),g=f?(p-u*d)/f:0,m=fs.range(u),y=[];return null!=n&&m.sort(n===Mu?function(t,e){return l[e]-l[t]}:function(t,e){return n(s[t],s[e])}),m.forEach(function(t){y[t]={data:s[t],value:a=l[t],startAngle:c,endAngle:c+=a*g+d,padAngle:h}}),y}var e=Number,n=Mu,r=0,o=Hs,i=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(r=e,t):r},t.endAngle=function(e){return arguments.length?(o=e,t):o},t.padAngle=function(e){return arguments.length?(i=e,t):i},t};var Mu={};fs.layout.stack=function(){function t(a,u){if(!(h=a.length))return a;var l=a.map(function(n,r){return e.call(t,n,r)}),c=l.map(function(e){return e.map(function(e,n){return[i.call(t,e,n),s.call(t,e,n)]})}),p=n.call(t,c,u);l=fs.permute(l,p),c=fs.permute(c,p);var h,d,f,g,m=r.call(t,c,u),y=l[0].length;for(f=0;y>f;++f)for(o.call(t,l[0][f],g=m[f],c[0][f][1]),d=1;h>d;++d)o.call(t,l[d][f],g+=c[d-1][f][1],c[d][f][1]);return a}var e=w,n=jo,r=_o,o=bo,i=vo,s=xo;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:Cu.get(e)||jo,t):n},t.offset=function(e){return arguments.length?(r="function"==typeof e?e:Lu.get(e)||_o,t):r},t.x=function(e){return arguments.length?(i=e,t):i},t.y=function(e){return arguments.length?(s=e,t):s},t.out=function(e){return arguments.length?(o=e,t):o},t};var Cu=fs.map({"inside-out":function(t){var e,n,r=t.length,o=t.map(Eo),i=t.map(wo),s=fs.range(r).sort(function(t,e){return o[t]-o[e]}),a=0,u=0,l=[],c=[];for(e=0;r>e;++e)n=s[e],u>a?(a+=i[n],l.push(n)):(u+=i[n],c.push(n));return c.reverse().concat(l)},reverse:function(t){return fs.range(t.length).reverse()},default:jo}),Lu=fs.map({silhouette:function(t){var e,n,r,o=t.length,i=t[0].length,s=[],a=0,u=[];for(n=0;i>n;++n){for(e=0,r=0;o>e;e++)r+=t[e][n][1];r>a&&(a=r),s.push(r)}for(n=0;i>n;++n)u[n]=(a-s[n])/2;return u},wiggle:function(t){var e,n,r,o,i,s,a,u,l,c=t.length,p=t[0],h=p.length,d=[];for(d[0]=u=l=0,n=1;h>n;++n){for(e=0,o=0;c>e;++e)o+=t[e][n][1];for(e=0,i=0,a=p[n][0]-p[n-1][0];c>e;++e){for(r=0,s=(t[e][n][1]-t[e][n-1][1])/(2*a);e>r;++r)s+=(t[r][n][1]-t[r][n-1][1])/a;i+=s*t[e][n][1]}d[n]=u-=o?i/o*a:0,l>u&&(l=u)}for(n=0;h>n;++n)d[n]-=l;return d},expand:function(t){var e,n,r,o=t.length,i=t[0].length,s=1/o,a=[];for(n=0;i>n;++n){for(e=0,r=0;o>e;e++)r+=t[e][n][1];if(r)for(e=0;o>e;e++)t[e][n][1]/=r;else for(e=0;o>e;e++)t[e][n][1]=s}for(n=0;i>n;++n)a[n]=0;return a},zero:_o});fs.layout.histogram=function(){function t(t,i){for(var s,a,u=[],l=t.map(n,this),c=r.call(this,l,i),p=o.call(this,c,l,i),i=-1,h=l.length,d=p.length-1,f=e?1:1/h;++i<d;)s=u[i]=[],s.dx=p[i+1]-(s.x=p[i]),s.y=0;if(d>0)for(i=-1;++i<h;)a=l[i],a>=c[0]&&a<=c[1]&&(s=u[fs.bisect(p,a,1,d)-1],s.y+=f,s.push(t[i]));return u}var e=!0,n=Number,r=Co,o=Io;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(r=Nt(e),t):r},t.bins=function(e){return arguments.length?(o="number"==typeof e?function(t){return Mo(t,e)}:Nt(e),t):o},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},fs.layout.pack=function(){function t(t,i){var s=n.call(this,t,i),a=s[0],u=o[0],l=o[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(a.x=a.y=0,ho(a,function(t){t.r=+c(t.value)}),ho(a,Ro),r){var p=r*(e?1:Math.max(2*a.r/u,2*a.r/l))/2;ho(a,function(t){t.r+=p}),ho(a,Ro),ho(a,function(t){t.r-=p})}return Oo(a,u/2,l/2,e?1:1/Math.max(2*a.r/u,2*a.r/l)),s}var e,n=fs.layout.hierarchy().sort(Lo),r=0,o=[1,1];return t.size=function(e){return arguments.length?(o=e,t):o},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(r=+e,t):r},co(t,n)},fs.layout.tree=function(){function t(t,o){var c=s.call(this,t,o),p=c[0],h=e(p);if(ho(h,n),h.parent.m=-h.z,po(h,r),l)po(p,i);else{var d=p,f=p,g=p;po(p,function(t){t.x<d.x&&(d=t),t.x>f.x&&(f=t),t.depth>g.depth&&(g=t)});var m=a(d,f)/2-d.x,y=u[0]/(f.x+a(f,d)/2+m),v=u[1]/(g.depth||1);po(p,function(t){t.x=(t.x+m)*y,t.y=t.depth*v})}return c}function e(t){for(var e,n={A:null,children:[t]},r=[n];null!=(e=r.pop());)for(var o,i=e.children,s=0,a=i.length;a>s;++s)r.push((i[s]=o={_:i[s],parent:e,children:(o=i[s].children)&&o.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:s}).a=o);return n.children[0]}function n(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;if(e.length){qo(t);var i=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+a(t._,r._),t.m=t.z-i):t.z=i}else r&&(t.z=r.z+a(t._,r._));t.parent.A=o(t,r,t.parent.A||n[0])}function r(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function o(t,e,n){if(e){for(var r,o=t,i=t,s=e,u=o.parent.children[0],l=o.m,c=i.m,p=s.m,h=u.m;s=zo(s),o=Bo(o),s&&o;)u=Bo(u),i=zo(i),i.a=t,r=s.z+p-o.z-l+a(s._,o._),r>0&&(Go(Uo(s,t,n),t,r),l+=r,c+=r),p+=s.m,l+=o.m,h+=u.m,c+=i.m;s&&!zo(i)&&(i.t=s,i.m+=p-c),o&&!Bo(u)&&(u.t=o,u.m+=l-h,n=t)}return n}function i(t){t.x*=u[0],t.y=t.depth*u[1]}var s=fs.layout.hierarchy().sort(null).value(null),a=ko,u=[1,1],l=null;return t.separation=function(e){return arguments.length?(a=e,t):a},t.size=function(e){return arguments.length?(l=null==(u=e)?i:null,t):l?null:u},t.nodeSize=function(e){return arguments.length?(l=null==(u=e)?null:i,t):l?u:null},co(t,s)},fs.layout.cluster=function(){function t(t,i){var s,a=e.call(this,t,i),u=a[0],l=0;ho(u,function(t){var e=t.children;e&&e.length?(t.x=Yo(e),t.y=Vo(e)):(t.x=s?l+=n(t,s):0,t.y=0,s=t)});var c=Ho(u),p=Xo(u),h=c.x-n(c,p)/2,d=p.x+n(p,c)/2;return ho(u,o?function(t){t.x=(t.x-u.x)*r[0],t.y=(u.y-t.y)*r[1]}:function(t){t.x=(t.x-h)/(d-h)*r[0],t.y=(1-(u.y?t.y/u.y:1))*r[1]}),a}var e=fs.layout.hierarchy().sort(null).value(null),n=ko,r=[1,1],o=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(o=null==(r=e),t):o?null:r},t.nodeSize=function(e){return arguments.length?(o=null!=(r=e),t):o?r:null},co(t,e)},fs.layout.treemap=function(){function t(t,e){for(var n,r,o=-1,i=t.length;++o<i;)r=(n=t[o]).value*(0>e?0:e),n.area=isNaN(r)||0>=r?0:r}function e(n){var i=n.children;if(i&&i.length){var s,a,u,l=h(n),c=[],p=i.slice(),d=1/0,g="slice"===f?l.dx:"dice"===f?l.dy:"slice-dice"===f?1&n.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(t(p,l.dx*l.dy/n.value),c.area=0;(u=p.length)>0;)c.push(s=p[u-1]),c.area+=s.area,"squarify"!==f||(a=r(c,g))<=d?(p.pop(),d=a):(c.area-=c.pop().area,o(c,g,l,!1),g=Math.min(l.dx,l.dy),c.length=c.area=0,d=1/0);c.length&&(o(c,g,l,!0),c.length=c.area=0),i.forEach(e)}}function n(e){var r=e.children;if(r&&r.length){var i,s=h(e),a=r.slice(),u=[];for(t(a,s.dx*s.dy/e.value),u.area=0;i=a.pop();)u.push(i),u.area+=i.area,null!=i.z&&(o(u,i.z?s.dx:s.dy,s,!a.length),u.length=u.area=0);r.forEach(n)}}function r(t,e){for(var n,r=t.area,o=0,i=1/0,s=-1,a=t.length;++s<a;)(n=t[s].area)&&(i>n&&(i=n),n>o&&(o=n));return r*=r,e*=e,r?Math.max(e*o*g/r,r/(e*i*g)):1/0}function o(t,e,n,r){var o,i=-1,s=t.length,a=n.x,u=n.y,c=e?l(t.area/e):0;if(e==n.dx){for((r||c>n.dy)&&(c=n.dy);++i<s;)o=t[i],o.x=a,o.y=u,o.dy=c,a+=o.dx=Math.min(n.x+n.dx-a,c?l(o.area/c):0);o.z=!0,o.dx+=n.x+n.dx-a,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++i<s;)o=t[i],o.x=a,o.y=u,o.dx=c,u+=o.dy=Math.min(n.y+n.dy-u,c?l(o.area/c):0);o.z=!1,o.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function s(r){var o=a||u(r),i=o[0];return i.x=i.y=0,i.value?(i.dx=c[0],i.dy=c[1]):i.dx=i.dy=0,a&&u.revalue(i),t([i],i.dx*i.dy/i.value),(a?n:e)(i),d&&(a=o),o}var a,u=fs.layout.hierarchy(),l=Math.round,c=[1,1],p=null,h=Wo,d=!1,f="squarify",g=.5*(1+Math.sqrt(5));return s.size=function(t){return arguments.length?(c=t,s):c},s.padding=function(t){function e(e){var n=t.call(s,e,e.depth);return null==n?Wo(e):Zo(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Zo(e,t)}if(!arguments.length)return p;var r;return h=null==(p=t)?Wo:"function"==(r="undefined"==typeof t?"undefined":i(t))?e:"number"===r?(t=[t,t,t,t],n):n,s},s.round=function(t){return arguments.length?(l=t?Math.round:Number,s):l!=Number},s.sticky=function(t){return arguments.length?(d=t,a=null,s):d},s.ratio=function(t){return arguments.length?(g=t,s):g},s.mode=function(t){return arguments.length?(f=t+"",s):f},co(s,u)},fs.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,r,o;do n=2*Math.random()-1,r=2*Math.random()-1,o=n*n+r*r;while(!o||o>1);return t+e*n*Math.sqrt(-2*Math.log(o)/o)}},logNormal:function(){var t=fs.random.normal.apply(fs,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=fs.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e}}},fs.scale={};var Pu={floor:w,ceil:w};fs.scale.linear=function(){return ni([0,1],[0,1],Sr,!1)};var Tu={s:1,g:1,p:1,r:1,e:1};fs.scale.log=function(){return ci(fs.scale.linear().domain([0,1]),10,!0,[1,10])};var Nu=fs.format(".0e"),Ru={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};fs.scale.pow=function(){return pi(fs.scale.linear(),1,[0,1])},fs.scale.sqrt=function(){return fs.scale.pow().exponent(.5)},fs.scale.ordinal=function(){return di([],{t:"range",a:[[]]})},fs.scale.category10=function(){return fs.scale.ordinal().range(Au)},fs.scale.category20=function(){return fs.scale.ordinal().range(Du)},fs.scale.category20b=function(){return fs.scale.ordinal().range(Ou)},fs.scale.category20c=function(){return fs.scale.ordinal().range(Fu)};var Au=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(St),Du=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(St),Ou=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(St),Fu=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(St);fs.scale.quantile=function(){return fi([],[])},fs.scale.quantize=function(){return gi(0,1,[0,1])},fs.scale.threshold=function(){return mi([.5],[0,1])},fs.scale.identity=function(){return yi([0,1])},fs.svg={},fs.svg.arc=function(){function t(){var t=Math.max(0,+n.apply(this,arguments)),l=Math.max(0,+r.apply(this,arguments)),c=s.apply(this,arguments)-Ws,p=a.apply(this,arguments)-Ws,h=Math.abs(p-c),d=c>p?0:1;if(t>l&&(f=l,l=t,t=f),h>=Xs)return e(l,d)+(t?e(t,1-d):"")+"Z";var f,g,m,y,v,x,b,j,_,E,w,S,I=0,M=0,C=[];if((y=(+u.apply(this,arguments)||0)/2)&&(m=i===ku?Math.sqrt(t*t+l*l):+i.apply(this,arguments),d||(M*=-1),l&&(M=at(m/l*Math.sin(y))),t&&(I=at(m/t*Math.sin(y)))),l){v=l*Math.cos(c+M),x=l*Math.sin(c+M),b=l*Math.cos(p-M),j=l*Math.sin(p-M);var L=Math.abs(p-c-2*M)<=Ys?0:1;if(M&&wi(v,x,b,j)===d^L){var P=(c+p)/2;v=l*Math.cos(P),x=l*Math.sin(P),b=j=null}}else v=x=0;if(t){_=t*Math.cos(p-I),E=t*Math.sin(p-I),w=t*Math.cos(c+I),S=t*Math.sin(c+I);var T=Math.abs(c-p+2*I)<=Ys?0:1;if(I&&wi(_,E,w,S)===1-d^T){var N=(c+p)/2;_=t*Math.cos(N),E=t*Math.sin(N),w=S=null}}else _=E=0;if(h>Us&&(f=Math.min(Math.abs(l-t)/2,+o.apply(this,arguments)))>.001){g=l>t^d?0:1;var R=f,A=f;if(Ys>h){var D=null==w?[_,E]:null==b?[v,x]:zn([v,x],[w,S],[b,j],[_,E]),O=v-D[0],F=x-D[1],k=b-D[0],B=j-D[1],z=1/Math.sin(Math.acos((O*k+F*B)/(Math.sqrt(O*O+F*F)*Math.sqrt(k*k+B*B)))/2),G=Math.sqrt(D[0]*D[0]+D[1]*D[1]);A=Math.min(f,(t-G)/(z-1)),R=Math.min(f,(l-G)/(z+1))}if(null!=b){var q=Si(null==w?[_,E]:[w,S],[v,x],l,R,d),U=Si([b,j],[_,E],l,R,d);f===R?C.push("M",q[0],"A",R,",",R," 0 0,",g," ",q[1],"A",l,",",l," 0 ",1-d^wi(q[1][0],q[1][1],U[1][0],U[1][1]),",",d," ",U[1],"A",R,",",R," 0 0,",g," ",U[0]):C.push("M",q[0],"A",R,",",R," 0 1,",g," ",U[0])}else C.push("M",v,",",x);if(null!=w){var V=Si([v,x],[w,S],t,-A,d),Y=Si([_,E],null==b?[v,x]:[b,j],t,-A,d);f===A?C.push("L",Y[0],"A",A,",",A," 0 0,",g," ",Y[1],"A",t,",",t," 0 ",d^wi(Y[1][0],Y[1][1],V[1][0],V[1][1]),",",1-d," ",V[1],"A",A,",",A," 0 0,",g," ",V[0]):C.push("L",Y[0],"A",A,",",A," 0 0,",g," ",V[0])}else C.push("L",_,",",E)}else C.push("M",v,",",x),null!=b&&C.push("A",l,",",l," 0 ",L,",",d," ",b,",",j),C.push("L",_,",",E),null!=w&&C.push("A",t,",",t," 0 ",T,",",1-d," ",w,",",S);return C.push("Z"),C.join("")}function e(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var n=xi,r=bi,o=vi,i=ku,s=ji,a=_i,u=Ei;return t.innerRadius=function(e){return arguments.length?(n=Nt(e),t):n},t.outerRadius=function(e){return arguments.length?(r=Nt(e),t):r},t.cornerRadius=function(e){return arguments.length?(o=Nt(e),t):o},t.padRadius=function(e){return arguments.length?(i=e==ku?ku:Nt(e),t):i},t.startAngle=function(e){return arguments.length?(s=Nt(e),t):s},t.endAngle=function(e){return arguments.length?(a=Nt(e),t):a},t.padAngle=function(e){return arguments.length?(u=Nt(e),t):u},t.centroid=function(){var t=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,e=(+s.apply(this,arguments)+ +a.apply(this,arguments))/2-Ws;return[Math.cos(e)*t,Math.sin(e)*t]},t};var ku="auto";fs.svg.line=function(){return Ii(w)};var Bu=fs.map({linear:Mi,"linear-closed":Ci,step:Li,"step-before":Pi,"step-after":Ti,basis:Fi,"basis-open":ki,"basis-closed":Bi,bundle:zi,cardinal:Ai,"cardinal-open":Ni,"cardinal-closed":Ri,monotone:Hi});Bu.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var zu=[0,2/3,1/3,0],Gu=[0,1/3,2/3,0],qu=[0,1/6,2/3,1/6];fs.svg.line.radial=function(){var t=Ii(Xi);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Pi.reverse=Ti,Ti.reverse=Pi,fs.svg.area=function(){return Wi(w)},fs.svg.area.radial=function(){var t=Wi(Xi);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},fs.svg.chord=function(){function t(t,a){var u=e(this,i,t,a),l=e(this,s,t,a);return"M"+u.p0+r(u.r,u.p1,u.a1-u.a0)+(n(u,l)?o(u.r,u.p1,u.r,u.p0):o(u.r,u.p1,l.r,l.p0)+r(l.r,l.p1,l.a1-l.a0)+o(l.r,l.p1,u.r,u.p0))+"Z"}function e(t,e,n,r){var o=e.call(t,n,r),i=a.call(t,o,r),s=u.call(t,o,r)-Ws,c=l.call(t,o,r)-Ws;return{r:i,a0:s,a1:c,p0:[i*Math.cos(s),i*Math.sin(s)],p1:[i*Math.cos(c),i*Math.sin(c)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function r(t,e,n){
return"A"+t+","+t+" 0 "+ +(n>Ys)+",1 "+e}function o(t,e,n,r){return"Q 0,0 "+r}var i=Sn,s=In,a=Zi,u=ji,l=_i;return t.radius=function(e){return arguments.length?(a=Nt(e),t):a},t.source=function(e){return arguments.length?(i=Nt(e),t):i},t.target=function(e){return arguments.length?(s=Nt(e),t):s},t.startAngle=function(e){return arguments.length?(u=Nt(e),t):u},t.endAngle=function(e){return arguments.length?(l=Nt(e),t):l},t},fs.svg.diagonal=function(){function t(t,o){var i=e.call(this,t,o),s=n.call(this,t,o),a=(i.y+s.y)/2,u=[i,{x:i.x,y:a},{x:s.x,y:a},s];return u=u.map(r),"M"+u[0]+"C"+u[1]+" "+u[2]+" "+u[3]}var e=Sn,n=In,r=Qi;return t.source=function(n){return arguments.length?(e=Nt(n),t):e},t.target=function(e){return arguments.length?(n=Nt(e),t):n},t.projection=function(e){return arguments.length?(r=e,t):r},t},fs.svg.diagonal.radial=function(){var t=fs.svg.diagonal(),e=Qi,n=t.projection;return t.projection=function(t){return arguments.length?n(Ki(e=t)):e},t},fs.svg.symbol=function(){function t(t,r){return(Uu.get(e.call(this,t,r))||ts)(n.call(this,t,r))}var e=$i,n=Ji;return t.type=function(n){return arguments.length?(e=Nt(n),t):e},t.size=function(e){return arguments.length?(n=Nt(e),t):n},t};var Uu=fs.map({circle:ts,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Yu)),n=e*Yu;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Vu),n=e*Vu/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Vu),n=e*Vu/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});fs.svg.symbolTypes=Uu.keys();var Vu=Math.sqrt(3),Yu=Math.tan(30*Zs);Ds.transition=function(t){for(var e,n,r=Hu||++Qu,o=is(t),i=[],s=Xu||{time:Date.now(),ease:Nr,delay:0,duration:250},a=-1,u=this.length;++a<u;){i.push(e=[]);for(var l=this[a],c=-1,p=l.length;++c<p;)(n=l[c])&&ss(n,c,o,r,s),e.push(n)}return ns(i,o,r)},Ds.interrupt=function(t){return this.each(null==t?Wu:es(is(t)))};var Hu,Xu,Wu=es(is()),Zu=[],Qu=0;Zu.call=Ds.call,Zu.empty=Ds.empty,Zu.node=Ds.node,Zu.size=Ds.size,fs.transition=function(t,e){return t&&t.transition?Hu?t.transition(e):t:fs.selection().transition(t)},fs.transition.prototype=Zu,Zu.select=function(t){var e,n,r,o=this.id,i=this.namespace,s=[];t=A(t);for(var a=-1,u=this.length;++a<u;){s.push(e=[]);for(var l=this[a],c=-1,p=l.length;++c<p;)(r=l[c])&&(n=t.call(r,r.__data__,c,a))?("__data__"in r&&(n.__data__=r.__data__),ss(n,c,i,o,r[i][o]),e.push(n)):e.push(null)}return ns(s,i,o)},Zu.selectAll=function(t){var e,n,r,o,i,s=this.id,a=this.namespace,u=[];t=D(t);for(var l=-1,c=this.length;++l<c;)for(var p=this[l],h=-1,d=p.length;++h<d;)if(r=p[h]){i=r[a][s],n=t.call(r,r.__data__,h,l),u.push(e=[]);for(var f=-1,g=n.length;++f<g;)(o=n[f])&&ss(o,f,a,s,i),e.push(o)}return ns(u,a,s)},Zu.filter=function(t){var e,n,r,o=[];"function"!=typeof t&&(t=X(t));for(var i=0,s=this.length;s>i;i++){o.push(e=[]);for(var n=this[i],a=0,u=n.length;u>a;a++)(r=n[a])&&t.call(r,r.__data__,a,i)&&e.push(r)}return ns(o,this.namespace,this.id)},Zu.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):Z(this,null==e?function(e){e[r][n].tween.remove(t)}:function(o){o[r][n].tween.set(t,e)})},Zu.attr=function(t,e){function n(){this.removeAttribute(a)}function r(){this.removeAttributeNS(a.space,a.local)}function o(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(a);return n!==t&&(e=s(n,t),function(t){this.setAttribute(a,e(t))})})}function i(t){return null==t?r:(t+="",function(){var e,n=this.getAttributeNS(a.space,a.local);return n!==t&&(e=s(n,t),function(t){this.setAttributeNS(a.space,a.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var s="transform"==t?$r:Sr,a=fs.ns.qualify(t);return rs(this,"attr."+t,e,a.local?i:o)},Zu.attrTween=function(t,e){function n(t,n){var r=e.call(this,t,n,this.getAttribute(o));return r&&function(t){this.setAttribute(o,r(t))}}function r(t,n){var r=e.call(this,t,n,this.getAttributeNS(o.space,o.local));return r&&function(t){this.setAttributeNS(o.space,o.local,r(t))}}var o=fs.ns.qualify(t);return this.tween("attr."+t,o.local?r:n)},Zu.style=function(t,e,n){function r(){this.style.removeProperty(t)}function o(e){return null==e?r:(e+="",function(){var r,o=a(this).getComputedStyle(this,null).getPropertyValue(t);return o!==e&&(r=Sr(o,e),function(e){this.style.setProperty(t,r(e),n)})})}var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e="");for(n in t)this.style(n,t[n],e);return this}n=""}return rs(this,"style."+t,e,o)},Zu.styleTween=function(t,e,n){function r(r,o){var i=e.call(this,r,o,a(this).getComputedStyle(this,null).getPropertyValue(t));return i&&function(e){this.style.setProperty(t,i(e),n)}}return arguments.length<3&&(n=""),this.tween("style."+t,r)},Zu.text=function(t){return rs(this,"text",t,os)},Zu.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Zu.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=fs.ease.apply(fs,arguments)),Z(this,function(r){r[n][e].ease=t}))},Zu.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:Z(this,"function"==typeof t?function(r,o,i){r[n][e].delay=+t.call(r,r.__data__,o,i)}:(t=+t,function(r){r[n][e].delay=t}))},Zu.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:Z(this,"function"==typeof t?function(r,o,i){r[n][e].duration=Math.max(1,t.call(r,r.__data__,o,i))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},Zu.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var o=Xu,i=Hu;try{Hu=n,Z(this,function(e,o,i){Xu=e[r][n],t.call(e,e.__data__,o,i)})}finally{Xu=o,Hu=i}}else Z(this,function(o){var i=o[r][n];(i.event||(i.event=fs.dispatch("start","end","interrupt"))).on(t,e)});return this},Zu.transition=function(){for(var t,e,n,r,o=this.id,i=++Qu,s=this.namespace,a=[],u=0,l=this.length;l>u;u++){a.push(t=[]);for(var e=this[u],c=0,p=e.length;p>c;c++)(n=e[c])&&(r=n[s][o],ss(n,c,s,i,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),t.push(n)}return ns(a,s,i)},fs.svg.axis=function(){function t(t){t.each(function(){var t,l=fs.select(this),c=this.__chart__||n,p=this.__chart__=n.copy(),h=null==u?p.ticks?p.ticks.apply(p,a):p.domain():u,d=null==e?p.tickFormat?p.tickFormat.apply(p,a):w:e,f=l.selectAll(".tick").data(h,p),g=f.enter().insert("g",".domain").attr("class","tick").style("opacity",Us),m=fs.transition(f.exit()).style("opacity",Us).remove(),y=fs.transition(f.order()).style("opacity",1),v=Math.max(o,0)+s,x=Ko(p),b=l.selectAll(".domain").data([0]),j=(b.enter().append("path").attr("class","domain"),fs.transition(b));g.append("line"),g.append("text");var _,E,S,I,M=g.select("line"),C=y.select("line"),L=f.select("text").text(d),P=g.select("text"),T=y.select("text"),N="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(t=as,_="x",S="y",E="x2",I="y2",L.attr("dy",0>N?"0em":".71em").style("text-anchor","middle"),j.attr("d","M"+x[0]+","+N*i+"V0H"+x[1]+"V"+N*i)):(t=us,_="y",S="x",E="y2",I="x2",L.attr("dy",".32em").style("text-anchor",0>N?"end":"start"),j.attr("d","M"+N*i+","+x[0]+"H0V"+x[1]+"H"+N*i)),M.attr(I,N*o),P.attr(S,N*v),C.attr(E,0).attr(I,N*o),T.attr(_,0).attr(S,N*v),p.rangeBand){var R=p,A=R.rangeBand()/2;c=p=function(t){return R(t)+A}}else c.rangeBand?c=p:m.call(t,p,c);g.call(t,c,p),y.call(t,p,p)})}var e,n=fs.scale.linear(),r=Ku,o=6,i=6,s=3,a=[10],u=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(r=e in Ju?e+"":Ku,t):r},t.ticks=function(){return arguments.length?(a=ms(arguments),t):a},t.tickValues=function(e){return arguments.length?(u=e,t):u},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(o=+e,i=+arguments[n-1],t):o},t.innerTickSize=function(e){return arguments.length?(o=+e,t):o},t.outerTickSize=function(e){return arguments.length?(i=+e,t):i},t.tickPadding=function(e){return arguments.length?(s=+e,t):s},t.tickSubdivide=function(){return arguments.length&&t},t};var Ku="bottom",Ju={top:1,right:1,bottom:1,left:1};fs.svg.brush=function(){function t(i){i.each(function(){var i=fs.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),s=i.selectAll(".background").data([0]);s.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),i.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var a=i.selectAll(".resize").data(g,w);a.exit().remove(),a.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return $u[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),a.style("display",t.empty()?"none":null);var u,p=fs.transition(i),h=fs.transition(s);l&&(u=Ko(l),h.attr("x",u[0]).attr("width",u[1]-u[0]),n(p)),c&&(u=Ko(c),h.attr("y",u[0]).attr("height",u[1]-u[0]),r(p)),e(p)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+p[+/e$/.test(t)]+","+h[+/^s/.test(t)]+")"})}function n(t){t.select(".extent").attr("x",p[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",p[1]-p[0])}function r(t){t.select(".extent").attr("y",h[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function o(){function o(){32==fs.event.keyCode&&(C||(x=null,T[0]-=p[1],T[1]-=h[1],C=2),P())}function g(){32==fs.event.keyCode&&2==C&&(T[0]+=p[1],T[1]+=h[1],C=0,P())}function m(){var t=fs.mouse(j),o=!1;b&&(t[0]+=b[0],t[1]+=b[1]),C||(fs.event.altKey?(x||(x=[(p[0]+p[1])/2,(h[0]+h[1])/2]),T[0]=p[+(t[0]<x[0])],T[1]=h[+(t[1]<x[1])]):x=null),I&&y(t,l,0)&&(n(w),o=!0),M&&y(t,c,1)&&(r(w),o=!0),o&&(e(w),E({type:"brush",mode:C?"move":"resize"}))}function y(t,e,n){var r,o,a=Ko(e),u=a[0],l=a[1],c=T[n],g=n?h:p,m=g[1]-g[0];return C&&(u-=c,l-=m+c),r=(n?f:d)?Math.max(u,Math.min(l,t[n])):t[n],C?o=(r+=c)+m:(x&&(c=Math.max(u,Math.min(l,2*x[n]-r))),r>c?(o=r,r=c):o=c),g[0]!=r||g[1]!=o?(n?s=null:i=null,g[0]=r,g[1]=o,!0):void 0}function v(){m(),w.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),fs.select("body").style("cursor",null),N.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),L(),E({type:"brushend"})}var x,b,j=this,_=fs.select(fs.event.target),E=u.of(j,arguments),w=fs.select(j),S=_.datum(),I=!/^(n|s)$/.test(S)&&l,M=!/^(e|w)$/.test(S)&&c,C=_.classed("extent"),L=et(j),T=fs.mouse(j),N=fs.select(a(j)).on("keydown.brush",o).on("keyup.brush",g);if(fs.event.changedTouches?N.on("touchmove.brush",m).on("touchend.brush",v):N.on("mousemove.brush",m).on("mouseup.brush",v),w.interrupt().selectAll("*").interrupt(),C)T[0]=p[0]-T[0],T[1]=h[0]-T[1];else if(S){var R=+/w$/.test(S),A=+/^n/.test(S);b=[p[1-R]-T[0],h[1-A]-T[1]],T[0]=p[R],T[1]=h[A]}else fs.event.altKey&&(x=T.slice());w.style("pointer-events","none").selectAll(".resize").style("display",null),fs.select("body").style("cursor",_.style("cursor")),E({type:"brushstart"}),m()}var i,s,u=N(t,"brushstart","brush","brushend"),l=null,c=null,p=[0,0],h=[0,0],d=!0,f=!0,g=tl[0];return t.event=function(t){t.each(function(){var t=u.of(this,arguments),e={x:p,y:h,i:i,j:s},n=this.__chart__||e;this.__chart__=e,Hu?fs.select(this).transition().each("start.brush",function(){i=n.i,s=n.j,p=n.x,h=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=Ir(p,e.x),r=Ir(h,e.y);return i=s=null,function(o){p=e.x=n(o),h=e.y=r(o),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){i=e.i,s=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(l=e,g=tl[!l<<1|!c],t):l},t.y=function(e){return arguments.length?(c=e,g=tl[!l<<1|!c],t):c},t.clamp=function(e){return arguments.length?(l&&c?(d=!!e[0],f=!!e[1]):l?d=!!e:c&&(f=!!e),t):l&&c?[d,f]:l?d:c?f:null},t.extent=function(e){var n,r,o,a,u;return arguments.length?(l&&(n=e[0],r=e[1],c&&(n=n[0],r=r[0]),i=[n,r],l.invert&&(n=l(n),r=l(r)),n>r&&(u=n,n=r,r=u),n==p[0]&&r==p[1]||(p=[n,r])),c&&(o=e[0],a=e[1],l&&(o=o[1],a=a[1]),s=[o,a],c.invert&&(o=c(o),a=c(a)),o>a&&(u=o,o=a,a=u),o==h[0]&&a==h[1]||(h=[o,a])),t):(l&&(i?(n=i[0],r=i[1]):(n=p[0],r=p[1],l.invert&&(n=l.invert(n),r=l.invert(r)),n>r&&(u=n,n=r,r=u))),c&&(s?(o=s[0],a=s[1]):(o=h[0],a=h[1],c.invert&&(o=c.invert(o),a=c.invert(a)),o>a&&(u=o,o=a,a=u))),l&&c?[[n,o],[r,a]]:l?[n,r]:c&&[o,a])},t.clear=function(){return t.empty()||(p=[0,0],h=[0,0],i=s=null),t},t.empty=function(){return!!l&&p[0]==p[1]||!!c&&h[0]==h[1]},fs.rebind(t,u,"on")};var $u={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},tl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],el=ba.format=Ia.timeFormat,nl=el.utc,rl=nl("%Y-%m-%dT%H:%M:%S.%LZ");el.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ls:rl,ls.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},ls.toString=rl.toString,ba.second=Ht(function(t){return new ja(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),ba.seconds=ba.second.range,ba.seconds.utc=ba.second.utc.range,ba.minute=Ht(function(t){return new ja(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),ba.minutes=ba.minute.range,ba.minutes.utc=ba.minute.utc.range,ba.hour=Ht(function(t){var e=t.getTimezoneOffset()/60;return new ja(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),ba.hours=ba.hour.range,ba.hours.utc=ba.hour.utc.range,ba.month=Ht(function(t){return t=ba.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),ba.months=ba.month.range,ba.months.utc=ba.month.utc.range;var ol=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],il=[[ba.second,1],[ba.second,5],[ba.second,15],[ba.second,30],[ba.minute,1],[ba.minute,5],[ba.minute,15],[ba.minute,30],[ba.hour,1],[ba.hour,3],[ba.hour,6],[ba.hour,12],[ba.day,1],[ba.day,2],[ba.week,1],[ba.month,1],[ba.month,3],[ba.year,1]],sl=el.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",De]]),al={range:function(t,e,n){return fs.range(Math.ceil(t/n)*n,+e,n).map(ps)},floor:w,ceil:w};il.year=ba.year,ba.scale=function(){return cs(fs.scale.linear(),il,sl)};var ul=il.map(function(t){return[t[0].utc,t[1]]}),ll=nl.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",De]]);ul.year=ba.year.utc,ba.scale.utc=function(){return cs(fs.scale.linear(),ul,ll)},fs.text=Rt(function(t){return t.responseText}),fs.json=function(t,e){return At(t,"application/json",hs,e)},fs.html=function(t,e){return At(t,"text/html",ds,e)},fs.xml=Rt(function(t){return t.responseXML}),this.d3=fs,r=fs,o="function"==typeof r?r.call(e,n,e,t):r,!(void 0!==o&&(t.exports=o))}()},function(t,e,n){var r,o,i,s,s;(function(n,a){"use strict";var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(n){if("object"===u(e)&&"undefined"!=typeof t)t.exports=n();else{o=[],r=n,i="function"==typeof r?r.apply(e,o):r,!(void 0!==i&&(t.exports=i))}}(function(){var t;return function t(e,n,r){function o(a,u){if(!n[a]){if(!e[a]){var l="function"==typeof s&&s;if(!u&&l)return s(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var p=n[a]={exports:{}};e[a][0].call(p.exports,function(t){var n=e[a][1][t];return o(n?n:t)},p,p.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof s&&s,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){function r(t){if(this.zoom=t.zoom,this.overscaling=t.overscaling,this.layer=t.layer,this.childLayers=t.childLayers,this.type=this.layer.type,this.features=[],this.id=this.layer.id,this.index=t.index,this.sourceLayer=this.layer.sourceLayer,this.sourceLayerIndex=t.sourceLayerIndex,this.minZoom=this.layer.minzoom,this.maxZoom=this.layer.maxzoom,this.paintAttributes=i(this),t.arrays){var e=this.childLayers;this.bufferGroups=c.mapObject(t.arrays,function(n,r){return n.map(function(n){var o=c.mapObject(n,function(e,n){return c.mapObject(e,function(e,o){var i=t.arrayTypes[r][n][o],s=i.members.length&&"vertices"===i.members[0].name?l.BufferType.ELEMENT:l.BufferType.VERTEX;return new l(e,i,s)})});o.vaos={},o.layout.element2&&(o.secondVaos={});for(var i=0;i<e.length;i++){var s=e[i].id;o.vaos[s]=new h,o.layout.element2&&(o.secondVaos[s]=new h)}return o})})}}function o(t){return new p({members:[{type:l.ELEMENT_ATTRIBUTE_TYPE,name:"vertices",components:t||3}]})}function i(t){var e={};for(var n in t.programInterfaces){for(var r=e[n]={},o=0;o<t.childLayers.length;o++){var i=t.childLayers[o];r[i.id]={attributes:[],uniforms:[],defines:[],vertexPragmas:{define:{},initialize:{}},fragmentPragmas:{define:{},initialize:{}}}}var u=t.programInterfaces[n];if(u.paintAttributes)for(var l=0;l<u.paintAttributes.length;l++){var p=u.paintAttributes[l];p.multiplier=p.multiplier||1;for(var h=0;h<t.childLayers.length;h++){var d,f=t.childLayers[h],g=r[f.id],m=1===p.components?"float":"vec"+p.components,y=p.name,v=p.name.slice(2);g.fragmentPragmas.initialize[v]="";var x="{precision}";if(f.isPaintValueFeatureConstant(p.paintProperty))g.uniforms.push(p),g.fragmentPragmas.define[v]=g.vertexPragmas.define[v]=["uniform",x,m,y].join(" ")+";",g.fragmentPragmas.initialize[v]=g.vertexPragmas.initialize[v]=[x,m,v,"=",y].join(" ")+";\n";else if(f.isPaintValueZoomConstant(p.paintProperty)){g.attributes.push(c.extend({},p,{name:y})),d=["varying",x,m,v].join(" ")+";\n";var b=[g.fragmentPragmas.define[v],"attribute",x,m,y].join(" ")+";\n";g.fragmentPragmas.define[v]=d,g.vertexPragmas.define[v]=d+b,g.vertexPragmas.initialize[v]=[v,"=",y,"/",p.multiplier.toFixed(1)].join(" ")+";\n"}else{for(var j="u_"+y.slice(2)+"_t",_=f.getPaintValueStopZoomLevels(p.paintProperty),E=0;E<_.length&&_[E]<t.zoom;)E++;for(var w=Math.max(0,Math.min(_.length-4,E-2)),S=[],I=0;4>I;I++)S.push(_[Math.min(w+I,_.length-1)]);d=["varying",x,m,v].join(" ")+";\n",g.vertexPragmas.define[v]=d+["uniform","lowp","float",j].join(" ")+";\n",g.fragmentPragmas.define[v]=d,g.uniforms.push(c.extend({},p,{name:j,getValue:a(p,w),components:1}));var M=p.components;if(1===M)g.attributes.push(c.extend({},p,{getValue:s(p,S),isFunction:!0,components:4*M})),g.vertexPragmas.define[v]+=["attribute",x,"vec4",y].join(" ")+";\n",g.vertexPragmas.initialize[v]=[v,"=","evaluate_zoom_function_1("+y+", "+j+")","/",p.multiplier.toFixed(1)].join(" ")+";\n";else{for(var C=[],L=0;4>L;L++)C.push(y+L),g.attributes.push(c.extend({},p,{getValue:s(p,[S[L]]),isFunction:!0,name:y+L})),g.vertexPragmas.define[v]+=["attribute",x,m,y+L].join(" ")+";\n";g.vertexPragmas.initialize[v]=[v," = ","evaluate_zoom_function_4("+C.join(", ")+", "+j+")","/",p.multiplier.toFixed(1)].join(" ")+";\n"}}}}}return e}function s(t,e){return function(n,r,o){if(1===e.length)return t.getValue(n,c.extend({},r,{zoom:e[0]}),o);for(var i=[],s=0;s<e.length;s++){var a=e[s];i.push(t.getValue(n,c.extend({},r,{zoom:a}),o)[0])}return i}}function a(t,e){return function(n,r){var o=n.getPaintInterpolationT(t.paintProperty,r.zoom);return[Math.max(0,Math.min(4,o-e))]}}var u=t("feature-filter"),l=t("./buffer"),c=t("../util/util"),p=t("../util/struct_array"),h=t("../render/vertex_array_object");e.exports=r,r.create=function(e){var n={fill:t("./bucket/fill_bucket"),line:t("./bucket/line_bucket"),circle:t("./bucket/circle_bucket"),symbol:t("./bucket/symbol_bucket")};return new n[e.layer.type](e)},r.EXTENT=8192,r.prototype.populateBuffers=function(){this.createArrays(),this.recalculateStyleLayers();for(var t=0;t<this.features.length;t++)this.addFeature(this.features[t]);this.trimArrays()},r.prototype.makeRoomFor=function(t,e){var n=this.arrayGroups[t],r=n.length&&n[n.length-1];if(!r||r.layout.vertex.length+e>65535){var o=this.arrayTypes[t],i=o.layout.vertex,s=o.layout.element,a=o.layout.element2;r={index:n.length,layout:{},paint:{}},r.layout.vertex=new i,s&&(r.layout.element=new s),a&&(r.layout.element2=new a);for(var u=0;u<this.childLayers.length;u++){var l=this.childLayers[u].id,c=o.paint[l];r.paint[l]=new c}n.push(r)}return r},r.prototype.createArrays=function(){this.arrayGroups={},this.arrayTypes={};for(var t in this.programInterfaces){var e=this.programInterfaces[t],n=this.arrayTypes[t]={layout:{},paint:{}};if(this.arrayGroups[t]=[],e.vertexBuffer){var r=new p({members:this.programInterfaces[t].layoutAttributes,alignment:l.VERTEX_ATTRIBUTE_ALIGNMENT});n.layout.vertex=r;var i=this.paintAttributes[t];for(var s in i){var a=new p({members:i[s].attributes,alignment:l.VERTEX_ATTRIBUTE_ALIGNMENT});n.paint[s]=a}}if(e.elementBuffer){var u=o(e.elementBufferComponents);n.layout.element=u}if(e.elementBuffer2){var c=o(e.elementBuffer2Components);n.layout.element2=c}}},r.prototype.destroy=function(t){for(var e in this.bufferGroups)for(var n=this.bufferGroups[e],r=0;r<n.length;r++){var o=n[r];for(var i in o.paint)o.paint[i].destroy(t);for(var s in o.layout)o.layout[s].destroy(t);for(var a in o.vaos)o.vaos[a].destroy(t);for(var u in o.secondVaos)o.secondVaos[u].destroy(t)}},r.prototype.trimArrays=function(){for(var t in this.arrayGroups){var e=this.arrayGroups[t];for(var n in e.paint)e.paint[n].trim();for(var r in e.layout)e.layout[r].trim()}},r.prototype.setUniforms=function(t,e,n,r,o){for(var i=this.paintAttributes[e][r.id].uniforms,s=0;s<i.length;s++){var a=i[s],u=n[a.name];t["uniform"+a.components+"fv"](u,a.getValue(r,o))}},r.prototype.serialize=function(){return{layerId:this.layer.id,zoom:this.zoom,arrays:c.mapObject(this.arrayGroups,function(t){return t.map(function(t){return c.mapObject(t,function(t){return c.mapObject(t,function(t){return t.serialize()})})})}),arrayTypes:c.mapObject(this.arrayTypes,function(t){return c.mapObject(t,function(t){return c.mapObject(t,function(t){return t.serialize()})})}),childLayerIds:this.childLayers.map(function(t){return t.id})}},r.prototype.createFilter=function(){this.filter||(this.filter=u(this.layer.filter))};var d={lastIntegerZoom:1/0,lastIntegerZoomTime:0,lastZoom:0};r.prototype.recalculateStyleLayers=function(){for(var t=0;t<this.childLayers.length;t++)this.childLayers[t].recalculate(this.zoom,d)},r.prototype.populatePaintArrays=function(t,e,n,r,o){for(var i=0;i<this.childLayers.length;i++)for(var s=this.childLayers[i],a=this.arrayGroups[t],u=r.index;u<a.length;u++){var l=a[u],c=l.layout.vertex.length,p=l.paint[s.id];p.resize(c);for(var h=this.paintAttributes[t][s.id].attributes,d=0;d<h.length;d++)for(var f=h[d],g=f.getValue(s,e,n),m=f.multiplier||1,y=f.components||1,v=o;c>v;v++)for(var x=p.get(v),b=0;y>b;b++){var j=y>1?f.name+b:f.name;x[j]=g[b]*m}}}},{"../render/vertex_array_object":28,"../util/struct_array":105,"../util/util":107,"./bucket/circle_bucket":2,"./bucket/fill_bucket":3,"./bucket/line_bucket":4,"./bucket/symbol_bucket":5,"./buffer":6,"feature-filter":116}],2:[function(t,e,n){function r(){o.apply(this,arguments)}var o=t("../bucket"),i=t("../../util/util"),s=t("../load_geometry"),a=o.EXTENT;e.exports=r,r.prototype=i.inherit(o,{}),r.prototype.addCircleVertex=function(t,e,n,r,o){return t.emplaceBack(2*e+(r+1)/2,2*n+(o+1)/2)},r.prototype.programInterfaces={circle:{vertexBuffer:!0,elementBuffer:!0,layoutAttributes:[{name:"a_pos",components:2,type:"Int16"}],paintAttributes:[{name:"a_color",components:4,type:"Uint8",getValue:function(t,e,n){return t.getPaintValue("circle-color",e,n)},multiplier:255,paintProperty:"circle-color"},{name:"a_radius",components:1,type:"Uint16",isLayerConstant:!1,getValue:function(t,e,n){return[t.getPaintValue("circle-radius",e,n)]},multiplier:10,paintProperty:"circle-radius"},{name:"a_blur",components:1,type:"Uint16",isLayerConstant:!1,getValue:function(t,e,n){return[t.getPaintValue("circle-blur",e,n)]},multiplier:10,paintProperty:"circle-blur"},{name:"a_opacity",components:1,type:"Uint16",isLayerConstant:!1,getValue:function(t,e,n){return[t.getPaintValue("circle-opacity",e,n)]},multiplier:255,paintProperty:"circle-opacity"}]}},r.prototype.addFeature=function(t){for(var e={zoom:this.zoom},n=s(t),r=this.makeRoomFor("circle",0),o=r.layout.vertex.length,i=0;i<n.length;i++)for(var u=0;u<n[i].length;u++){var l=n[i][u].x,c=n[i][u].y;if(!(0>l||l>=a||0>c||c>=a)){var p=this.makeRoomFor("circle",4),h=p.layout.vertex,d=this.addCircleVertex(h,l,c,-1,-1);this.addCircleVertex(h,l,c,1,-1),this.addCircleVertex(h,l,c,1,1),this.addCircleVertex(h,l,c,-1,1),p.layout.element.emplaceBack(d,d+1,d+2),p.layout.element.emplaceBack(d,d+3,d+2)}}this.populatePaintArrays("circle",e,t.properties,r,o)}},{"../../util/util":107,"../bucket":1,"../load_geometry":8}],3:[function(t,e,n){function r(){o.apply(this,arguments)}var o=t("../bucket"),i=t("../../util/util"),s=t("../load_geometry"),a=t("earcut"),u=t("../../util/classify_rings"),l=500;e.exports=r,r.prototype=i.inherit(o,{}),r.prototype.programInterfaces={fill:{vertexBuffer:!0,elementBuffer:!0,elementBufferComponents:1,elementBuffer2:!0,elementBuffer2Components:2,layoutAttributes:[{name:"a_pos",components:2,type:"Int16"}],paintAttributes:[{name:"a_color",components:4,type:"Uint8",getValue:function(t,e,n){return t.getPaintValue("fill-color",e,n)},multiplier:255,paintProperty:"fill-color"},{name:"a_outline_color",components:4,type:"Uint8",getValue:function(t,e,n){return t.getPaintValue("fill-outline-color",e,n)},multiplier:255,paintProperty:"fill-outline-color"}]}},r.prototype.addFeature=function(t){for(var e=s(t),n=u(e,l),r=this.makeRoomFor("fill",0),o=r.layout.vertex.length,i=0;i<n.length;i++)this.addPolygon(n[i]);this.populatePaintArrays("fill",{zoom:this.zoom},t.properties,r,o)},r.prototype.addPolygon=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n].length;for(var r=this.makeRoomFor("fill",e),o=[],i=[],s=r.layout.vertex.length,u=0;u<t.length;u++){var l=t[u];u>0&&i.push(o.length/2);for(var c=0;c<l.length;c++){var p=l[c],h=r.layout.vertex.emplaceBack(p.x,p.y);c>=1&&r.layout.element2.emplaceBack(h-1,h),o.push(p.x),o.push(p.y)}}for(var d=a(o,i),f=0;f<d.length;f++)r.layout.element.emplaceBack(d[f]+s)}},{"../../util/classify_rings":96,"../../util/util":107,"../bucket":1,"../load_geometry":8,earcut:115}],4:[function(t,e,n){function r(){o.apply(this,arguments)}var o=t("../bucket"),i=t("../../util/util"),s=t("../load_geometry"),a=o.EXTENT,u=63,l=Math.cos(37.5*(Math.PI/180)),c=15,p=14,h=.5,d=Math.pow(2,p)/h;e.exports=r,r.prototype=i.inherit(o,{}),r.prototype.addLineVertex=function(t,e,n,r,o,i,s){return t.emplaceBack(e.x<<1|r,e.y<<1|o,Math.round(u*n.x)+128,Math.round(u*n.y)+128,(0===i?0:0>i?-1:1)+1|(s*h&63)<<2,s*h>>6)},r.prototype.programInterfaces={line:{vertexBuffer:!0,elementBuffer:!0,layoutAttributes:[{name:"a_pos",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}]}},r.prototype.addFeature=function(t){for(var e=s(t),n=0;n<e.length;n++)this.addLine(e[n],this.layer.layout["line-join"],this.layer.layout["line-cap"],this.layer.layout["line-miter-limit"],this.layer.layout["line-round-limit"])},r.prototype.addLine=function(t,e,n,r,o){for(var i=t.length;i>2&&t[i-1].equals(t[i-2]);)i--;if(!(t.length<2)){"bevel"===e&&(r=1.05);var s=c*(a/(512*this.overscaling)),u=t[0],p=t[i-1],h=u.equals(p);if(this.makeRoomFor("line",10*i),2!==i||!h){this.distance=0;var d,f,g,m,y,v,x,b=n,j=h?"butt":n,_=!0;this.e1=this.e2=this.e3=-1,h&&(d=t[i-2],y=u.sub(d)._unit()._perp());for(var E=0;i>E;E++)if(g=h&&E===i-1?t[1]:t[E+1],!g||!t[E].equals(g)){y&&(m=y),d&&(f=d),d=t[E],y=g?g.sub(d)._unit()._perp():m,m=m||y;var w=m.add(y)._unit(),S=w.x*y.x+w.y*y.y,I=1/S,M=l>S&&f&&g;if(M&&E>0){var C=d.dist(f);if(C>2*s){var L=d.sub(d.sub(f)._mult(s/C)._round());this.distance+=L.dist(f),this.addCurrentVertex(L,this.distance,m.mult(1),0,0,!1),f=L}}var P=f&&g,T=P?e:g?b:j;if(P&&"round"===T&&(o>I?T="miter":2>=I&&(T="fakeround")),"miter"===T&&I>r&&(T="bevel"),"bevel"===T&&(I>2&&(T="flipbevel"),r>I&&(T="miter")),f&&(this.distance+=d.dist(f)),"miter"===T)w._mult(I),this.addCurrentVertex(d,this.distance,w,0,0,!1);else if("flipbevel"===T){if(I>100)w=y.clone();else{var N=m.x*y.y-m.y*y.x>0?-1:1,R=I*m.add(y).mag()/m.sub(y).mag();w._perp()._mult(R*N)}this.addCurrentVertex(d,this.distance,w,0,0,!1),this.addCurrentVertex(d,this.distance,w.mult(-1),0,0,!1)}else if("bevel"===T||"fakeround"===T){var A=m.x*y.y-m.y*y.x>0,D=-Math.sqrt(I*I-1);if(A?(x=0,v=D):(v=0,x=D),_||this.addCurrentVertex(d,this.distance,m,v,x,!1),"fakeround"===T){for(var O,F=Math.floor(8*(.5-(S-.5))),k=0;F>k;k++)O=y.mult((k+1)/(F+1))._add(m)._unit(),this.addPieSliceVertex(d,this.distance,O,A);this.addPieSliceVertex(d,this.distance,w,A);for(var B=F-1;B>=0;B--)O=m.mult((B+1)/(F+1))._add(y)._unit(),this.addPieSliceVertex(d,this.distance,O,A)}g&&this.addCurrentVertex(d,this.distance,y,-v,-x,!1)}else"butt"===T?(_||this.addCurrentVertex(d,this.distance,m,0,0,!1),g&&this.addCurrentVertex(d,this.distance,y,0,0,!1)):"square"===T?(_||(this.addCurrentVertex(d,this.distance,m,1,1,!1),this.e1=this.e2=-1),g&&this.addCurrentVertex(d,this.distance,y,-1,-1,!1)):"round"===T&&(_||(this.addCurrentVertex(d,this.distance,m,0,0,!1),this.addCurrentVertex(d,this.distance,m,1,1,!0),this.e1=this.e2=-1),g&&(this.addCurrentVertex(d,this.distance,y,-1,-1,!0),this.addCurrentVertex(d,this.distance,y,0,0,!1)));if(M&&i-1>E){var z=d.dist(g);if(z>2*s){var G=d.add(g.sub(d)._mult(s/z)._round());this.distance+=G.dist(d),this.addCurrentVertex(G,this.distance,y.mult(1),0,0,!1),d=G}}_=!1}}}},r.prototype.addCurrentVertex=function(t,e,n,r,o,i){var s,a=i?1:0,u=this.arrayGroups.line[this.arrayGroups.line.length-1].layout,l=u.vertex,c=u.element;s=n.clone(),r&&s._sub(n.perp()._mult(r)),this.e3=this.addLineVertex(l,t,s,a,0,r,e),this.e1>=0&&this.e2>=0&&c.emplaceBack(this.e1,this.e2,this.e3),this.e1=this.e2,this.e2=this.e3,s=n.mult(-1),o&&s._sub(n.perp()._mult(o)),this.e3=this.addLineVertex(l,t,s,a,1,-o,e),this.e1>=0&&this.e2>=0&&c.emplaceBack(this.e1,this.e2,this.e3),this.e1=this.e2,this.e2=this.e3,e>d/2&&(this.distance=0,this.addCurrentVertex(t,this.distance,n,r,o,i))},r.prototype.addPieSliceVertex=function(t,e,n,r){var o=r?1:0;n=n.mult(r?-1:1);var i=this.arrayGroups.line[this.arrayGroups.line.length-1].layout,s=i.vertex,a=i.element;this.e3=this.addLineVertex(s,t,n,0,o,0,e),this.e1>=0&&this.e2>=0&&a.emplaceBack(this.e1,this.e2,this.e3),r?this.e2=this.e3:this.e1=this.e3}},{"../../util/util":107,"../bucket":1,"../load_geometry":8}],5:[function(t,e,n){function r(t){s.apply(this,arguments),this.showCollisionBoxes=t.showCollisionBoxes,this.overscaling=t.overscaling,this.collisionBoxArray=t.collisionBoxArray,this.symbolQuadsArray=t.symbolQuadsArray,this.symbolInstancesArray=t.symbolInstancesArray,
this.sdfIcons=t.sdfIcons,this.iconsNeedLinear=t.iconsNeedLinear,this.adjustedTextSize=t.adjustedTextSize,this.adjustedIconSize=t.adjustedIconSize,this.fontstack=t.fontstack}function o(t,e,n,r,o,i,s,a,u,l){return t.emplaceBack(e,n,Math.round(64*r),Math.round(64*o),i/4,s/4,10*(l||0),0,10*(a||0),10*Math.min(u||25,25))}var i=t("point-geometry"),s=t("../bucket"),a=t("../../symbol/anchor"),u=t("../../symbol/get_anchors"),l=t("../../util/token"),c=t("../../symbol/quads"),p=t("../../symbol/shaping"),h=t("../../symbol/resolve_text"),d=t("../../symbol/mergelines"),f=t("../../symbol/clip_line"),g=t("../../util/util"),m=t("../load_geometry"),y=t("../../symbol/collision_feature"),v=p.shapeText,x=p.shapeIcon,b=c.getGlyphQuads,j=c.getIconQuads,_=s.EXTENT;e.exports=r,r.prototype=g.inherit(s,{}),r.prototype.serialize=function(){var t=s.prototype.serialize.apply(this);return t.sdfIcons=this.sdfIcons,t.iconsNeedLinear=this.iconsNeedLinear,t.adjustedTextSize=this.adjustedTextSize,t.adjustedIconSize=this.adjustedIconSize,t.fontstack=this.fontstack,t};var E=[{name:"a_pos",components:2,type:"Int16"},{name:"a_offset",components:2,type:"Int16"},{name:"a_data1",components:4,type:"Uint8"},{name:"a_data2",components:2,type:"Uint8"}];r.prototype.addCollisionBoxVertex=function(t,e,n,r,o){return t.emplaceBack(e.x,e.y,Math.round(n.x),Math.round(n.y),10*r,10*o)},r.prototype.programInterfaces={glyph:{vertexBuffer:!0,elementBuffer:!0,layoutAttributes:E},icon:{vertexBuffer:!0,elementBuffer:!0,layoutAttributes:E},collisionBox:{vertexBuffer:!0,layoutAttributes:[{name:"a_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"},{name:"a_data",components:2,type:"Uint8"}]}},r.prototype.populateBuffers=function(t,e,n){var r={lastIntegerZoom:1/0,lastIntegerZoomTime:0,lastZoom:0};this.adjustedTextMaxSize=this.layer.getLayoutValue("text-size",{zoom:18,zoomHistory:r}),this.adjustedTextSize=this.layer.getLayoutValue("text-size",{zoom:this.zoom+1,zoomHistory:r}),this.adjustedIconMaxSize=this.layer.getLayoutValue("icon-size",{zoom:18,zoomHistory:r}),this.adjustedIconSize=this.layer.getLayoutValue("icon-size",{zoom:this.zoom+1,zoomHistory:r});var o=512*this.overscaling;this.tilePixelRatio=_/o,this.compareText={},this.iconsNeedLinear=!1,this.symbolInstancesStartIndex=this.symbolInstancesArray.length;var i=this.layer.layout,s=this.features,a=this.textFeatures,u=.5,c=.5;switch(i["text-anchor"]){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(i["text-anchor"]){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}for(var p="right"===i["text-justify"]?1:"left"===i["text-justify"]?0:.5,h=24,f=i["text-line-height"]*h,y="line"!==i["symbol-placement"]?i["text-max-width"]*h:0,b=i["text-letter-spacing"]*h,j=[i["text-offset"][0]*h,i["text-offset"][1]*h],E=this.fontstack=i["text-font"].join(","),w=[],S=0;S<s.length;S++)w.push(m(s[S]));if("line"===i["symbol-placement"]){var I=d(s,a,w);w=I.geometries,s=I.features,a=I.textFeatures}for(var M,C,L=0;L<s.length;L++)if(w[L]){if(M=a[L]?v(a[L],e[E],y,f,u,c,p,b,j):null,i["icon-image"]){var P=l(s[L].properties,i["icon-image"]),T=n[P];C=x(T,i),T&&(void 0===this.sdfIcons?this.sdfIcons=T.sdf:this.sdfIcons!==T.sdf&&g.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),1!==T.pixelRatio&&(this.iconsNeedLinear=!0))}else C=null;(M||C)&&this.addFeature(w[L],M,C,s[L].index)}this.symbolInstancesEndIndex=this.symbolInstancesArray.length,this.placeFeatures(t,this.showCollisionBoxes),this.trimArrays()},r.prototype.addFeature=function(t,e,n,r){var o=this.layer.layout,i=24,s=this.adjustedTextSize/i,l=void 0!==this.adjustedTextMaxSize?this.adjustedTextMaxSize:this.adjustedTextSize,c=this.tilePixelRatio*s,p=this.tilePixelRatio*l/i,h=this.tilePixelRatio*this.adjustedIconSize,d=this.tilePixelRatio*o["symbol-spacing"],g=o["symbol-avoid-edges"],m=o["text-padding"]*this.tilePixelRatio,y=o["icon-padding"]*this.tilePixelRatio,v=o["text-max-angle"]/180*Math.PI,x="map"===o["text-rotation-alignment"]&&"line"===o["symbol-placement"],b="map"===o["icon-rotation-alignment"]&&"line"===o["symbol-placement"],j=o["text-allow-overlap"]||o["icon-allow-overlap"]||o["text-ignore-placement"]||o["icon-ignore-placement"],E="line"===o["symbol-placement"],w=d/2;E&&(t=f(t,0,0,_,_));for(var S=0;S<t.length;S++){var I,M=t[S];I=E?u(M,d,v,e,n,i,p,this.overscaling,_):[new a(M[0].x,M[0].y,0)];for(var C=0,L=I.length;L>C;C++){var P=I[C];if(!(e&&E&&this.anchorIsTooClose(e.text,w,P))){var T=!(P.x<0||P.x>_||P.y<0||P.y>_);if(!g||T){var N=T||j;this.addSymbolInstance(P,M,e,n,o,N,this.symbolInstancesArray.length,this.collisionBoxArray,r,this.sourceLayerIndex,this.index,c,m,x,h,y,b)}}}}},r.prototype.anchorIsTooClose=function(t,e,n){var r=this.compareText;if(t in r){for(var o=r[t],i=o.length-1;i>=0;i--)if(n.dist(o[i])<e)return!0}else r[t]=[];return r[t].push(n),!1},r.prototype.placeFeatures=function(t,e){this.recalculateStyleLayers(),this.createArrays();var n=this.layer.layout,r=t.maxScale,o="map"===n["text-rotation-alignment"]&&"line"===n["symbol-placement"],i="map"===n["icon-rotation-alignment"]&&"line"===n["symbol-placement"],s=n["text-allow-overlap"]||n["icon-allow-overlap"]||n["text-ignore-placement"]||n["icon-ignore-placement"];if(s){var a=this.symbolInstancesArray.toArray(this.symbolInstancesStartIndex,this.symbolInstancesEndIndex),u=t.angle,l=Math.sin(u),c=Math.cos(u);this.sortedSymbolInstances=a.sort(function(t,e){var n=l*t.anchorPointX+c*t.anchorPointY|0,r=l*e.anchorPointX+c*e.anchorPointY|0;return n-r||e.index-t.index})}for(var p=this.symbolInstancesStartIndex;p<this.symbolInstancesEndIndex;p++){var h=this.sortedSymbolInstances?this.sortedSymbolInstances[p-this.symbolInstancesStartIndex]:this.symbolInstancesArray.get(p),d={boxStartIndex:h.textBoxStartIndex,boxEndIndex:h.textBoxEndIndex},f={boxStartIndex:h.iconBoxStartIndex,boxEndIndex:h.iconBoxEndIndex},g=!(h.textBoxStartIndex===h.textBoxEndIndex),m=!(h.iconBoxStartIndex===h.iconBoxEndIndex),y=n["text-optional"]||!g,v=n["icon-optional"]||!m,x=g?t.placeCollisionFeature(d,n["text-allow-overlap"],n["symbol-avoid-edges"]):t.minScale,b=m?t.placeCollisionFeature(f,n["icon-allow-overlap"],n["symbol-avoid-edges"]):t.minScale;y||v?!v&&x?x=Math.max(b,x):!y&&b&&(b=Math.max(b,x)):b=x=Math.max(b,x),g&&(t.insertCollisionFeature(d,x,n["text-ignore-placement"]),r>=x&&this.addSymbols("glyph",h.glyphQuadStartIndex,h.glyphQuadEndIndex,x,n["text-keep-upright"],o,t.angle)),m&&(t.insertCollisionFeature(f,b,n["icon-ignore-placement"]),r>=b&&this.addSymbols("icon",h.iconQuadStartIndex,h.iconQuadEndIndex,b,n["icon-keep-upright"],i,t.angle))}e&&this.addToDebugBuffers(t)},r.prototype.addSymbols=function(t,e,n,r,i,s,a){for(var u=this.makeRoomFor(t,4*(n-e)),l=u.layout.element,c=u.layout.vertex,p=this.zoom,h=Math.max(Math.log(r)/Math.LN2+p,0),d=e;n>d;d++){var f=this.symbolQuadsArray.get(d).SymbolQuad,g=f.angle,m=(g+a+Math.PI)%(2*Math.PI);if(!(i&&s&&(m<=Math.PI/2||m>3*Math.PI/2))){var y=f.tl,v=f.tr,x=f.bl,b=f.br,j=f.tex,_=f.anchorPoint,E=Math.max(p+Math.log(f.minScale)/Math.LN2,h),w=Math.min(p+Math.log(f.maxScale)/Math.LN2,25);if(!(E>=w)){E===h&&(E=0);var S=o(c,_.x,_.y,y.x,y.y,j.x,j.y,E,w,h);o(c,_.x,_.y,v.x,v.y,j.x+j.w,j.y,E,w,h),o(c,_.x,_.y,x.x,x.y,j.x,j.y+j.h,E,w,h),o(c,_.x,_.y,b.x,b.y,j.x+j.w,j.y+j.h,E,w,h),l.emplaceBack(S,S+1,S+2),l.emplaceBack(S+1,S+2,S+3)}}}},r.prototype.updateIcons=function(t){this.recalculateStyleLayers();var e=this.layer.layout["icon-image"];if(e)for(var n=0;n<this.features.length;n++){var r=l(this.features[n].properties,e);r&&(t[r]=!0)}},r.prototype.updateFont=function(t){this.recalculateStyleLayers();var e=this.layer.layout["text-font"],n=t[e]=t[e]||{};this.textFeatures=h(this.features,this.layer.layout,n)},r.prototype.addToDebugBuffers=function(t){for(var e=this.makeRoomFor("collisionBox",0),n=e.layout.vertex,r=-t.angle,o=t.yStretch,s=this.symbolInstancesStartIndex;s<this.symbolInstancesEndIndex;s++){var a=this.symbolInstancesArray.get(s);a.textCollisionFeature={boxStartIndex:a.textBoxStartIndex,boxEndIndex:a.textBoxEndIndex},a.iconCollisionFeature={boxStartIndex:a.iconBoxStartIndex,boxEndIndex:a.iconBoxEndIndex};for(var u=0;2>u;u++){var l=a[0===u?"textCollisionFeature":"iconCollisionFeature"];if(l)for(var c=l.boxStartIndex;c<l.boxEndIndex;c++){var p=this.collisionBoxArray.get(c),h=p.anchorPoint,d=new i(p.x1,p.y1*o)._rotate(r),f=new i(p.x2,p.y1*o)._rotate(r),g=new i(p.x1,p.y2*o)._rotate(r),m=new i(p.x2,p.y2*o)._rotate(r),y=Math.max(0,Math.min(25,this.zoom+Math.log(p.maxScale)/Math.LN2)),v=Math.max(0,Math.min(25,this.zoom+Math.log(p.placementScale)/Math.LN2));this.addCollisionBoxVertex(n,h,d,y,v),this.addCollisionBoxVertex(n,h,f,y,v),this.addCollisionBoxVertex(n,h,f,y,v),this.addCollisionBoxVertex(n,h,m,y,v),this.addCollisionBoxVertex(n,h,m,y,v),this.addCollisionBoxVertex(n,h,g,y,v),this.addCollisionBoxVertex(n,h,g,y,v),this.addCollisionBoxVertex(n,h,d,y,v)}}}},r.prototype.addSymbolInstance=function(t,e,n,r,o,i,s,a,u,l,c,p,h,d,f,g,m){var v,x,_,E,w,S,I,M;if(n&&(I=i?b(t,n,p,e,o,d):[],w=new y(a,e,t,u,l,c,n,p,h,d,(!1))),v=this.symbolQuadsArray.length,I&&I.length)for(var C=0;C<I.length;C++)this.addSymbolQuad(I[C]);x=this.symbolQuadsArray.length;var L=w?w.boxStartIndex:this.collisionBoxArray.length,P=w?w.boxEndIndex:this.collisionBoxArray.length;r&&(M=i?j(t,r,f,e,o,m):[],S=new y(a,e,t,u,l,c,r,f,g,m,(!0))),_=this.symbolQuadsArray.length,M&&1===M.length&&this.addSymbolQuad(M[0]),E=this.symbolQuadsArray.length;var T=S?S.boxStartIndex:this.collisionBoxArray.length,N=S?S.boxEndIndex:this.collisionBoxArray.length;return this.symbolInstancesArray.emplaceBack(L,P,T,N,v,x,_,E,t.x,t.y,s)},r.prototype.addSymbolQuad=function(t){return this.symbolQuadsArray.emplaceBack(t.anchorPoint.x,t.anchorPoint.y,t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y,t.tex.h,t.tex.w,t.tex.x,t.tex.y,t.angle,t.maxScale,t.minScale)}},{"../../symbol/anchor":58,"../../symbol/clip_line":60,"../../symbol/collision_feature":62,"../../symbol/get_anchors":64,"../../symbol/mergelines":67,"../../symbol/quads":68,"../../symbol/resolve_text":69,"../../symbol/shaping":70,"../../util/token":106,"../../util/util":107,"../bucket":1,"../load_geometry":8,"point-geometry":169}],6:[function(t,e,n){function r(t,e,n){this.arrayBuffer=t.arrayBuffer,this.length=t.length,this.attributes=e.members,this.itemSize=e.bytesPerElement,this.type=n,this.arrayType=e}e.exports=r,r.prototype.bind=function(t){var e=t[this.type];this.buffer?t.bindBuffer(e,this.buffer):(this.buffer=t.createBuffer(),t.bindBuffer(e,this.buffer),t.bufferData(e,this.arrayBuffer,t.STATIC_DRAW),this.arrayBuffer=null)};var o={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT"};r.prototype.setVertexAttribPointers=function(t,e){for(var n=0;n<this.attributes.length;n++){var r=this.attributes[n],i=e[r.name];void 0!==i&&t.vertexAttribPointer(i,r.components,t[o[r.type]],!1,this.arrayType.bytesPerElement,r.offset)}},r.prototype.destroy=function(t){this.buffer&&t.deleteBuffer(this.buffer)},r.BufferType={VERTEX:"ARRAY_BUFFER",ELEMENT:"ELEMENT_ARRAY_BUFFER"},r.ELEMENT_ATTRIBUTE_TYPE="Uint16",r.VERTEX_ATTRIBUTE_ALIGNMENT=4},{}],7:[function(t,e,n){function r(t,e,n){if(t.grid){var r=t,o=e;t=r.coord,e=r.overscaling,this.grid=new f(r.grid),this.featureIndexArray=new w(r.featureIndexArray),this.rawTileData=o,this.bucketLayerIDs=r.bucketLayerIDs}else this.grid=new f(p,16,0),this.featureIndexArray=new w;this.coord=t,this.overscaling=e,this.x=t.x,this.y=t.y,this.z=t.z-Math.log(e)/Math.LN2,this.setCollisionTile(n)}function o(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function i(t,e){return e-t}function s(t){return t["line-gap-width"]>0?t["line-gap-width"]+2*t["line-width"]:t["line-width"]}function a(t,e,n,r,o){if(!e[0]&&!e[1])return t;e=l.convert(e),"viewport"===n&&e._rotate(-r);for(var i=[],s=0;s<t.length;s++){for(var a=t[s],u=[],c=0;c<a.length;c++)u.push(a[c].sub(e._mult(o)));i.push(u)}return i}function u(t,e){for(var n=[],r=new l(0,0),o=0;o<t.length;o++){for(var i=t[o],s=[],a=0;a<i.length;a++){var u=i[a-1],c=i[a],p=i[a+1],h=0===a?r:c.sub(u)._unit()._perp(),d=a===i.length-1?r:p.sub(c)._unit()._perp(),f=h._add(d)._unit(),g=f.x*d.x+f.y*d.y;f._mult(1/g),s.push(f._mult(e)._add(c))}n.push(s)}return n}var l=t("point-geometry"),c=t("./load_geometry"),p=t("./bucket").EXTENT,h=t("feature-filter"),d=t("../util/struct_array"),f=t("grid-index"),g=t("../util/dictionary_coder"),m=t("vector-tile"),y=t("pbf"),v=t("../util/vectortile_to_geojson"),x=t("../util/util").arraysIntersect,b=t("../util/intersection_tests"),j=b.multiPolygonIntersectsBufferedMultiPoint,_=b.multiPolygonIntersectsMultiPolygon,E=b.multiPolygonIntersectsBufferedMultiLine,w=new d({members:[{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]});e.exports=r,r.prototype.insert=function(t,e,n,r){var o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(e,n,r);for(var i=c(t),s=0;s<i.length;s++){for(var a=i[s],u=[1/0,1/0,-(1/0),-(1/0)],l=0;l<a.length;l++){var p=a[l];u[0]=Math.min(u[0],p.x),u[1]=Math.min(u[1],p.y),u[2]=Math.max(u[2],p.x),u[3]=Math.max(u[3],p.y)}this.grid.insert(o,u[0],u[1],u[2],u[3])}},r.prototype.setCollisionTile=function(t){this.collisionTile=t},r.prototype.serialize=function(){var t={coord:this.coord,overscaling:this.overscaling,grid:this.grid.toArrayBuffer(),featureIndexArray:this.featureIndexArray.serialize(),bucketLayerIDs:this.bucketLayerIDs};return{data:t,transferables:[t.grid,t.featureIndexArray.arrayBuffer]}},r.prototype.query=function(t,e){this.vtLayers||(this.vtLayers=new m.VectorTile(new y(new Uint8Array(this.rawTileData))).layers,this.sourceLayerCoder=new g(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]));var n={},r=t.params||{},a=p/t.tileSize/t.scale,u=h(r.filter),c=0;for(var d in e){var f=e[d],v=f.paint,x=0;"line"===f.type?x=s(v)/2+Math.abs(v["line-offset"])+o(v["line-translate"]):"fill"===f.type?x=o(v["fill-translate"]):"circle"===f.type&&(x=v["circle-radius"]+o(v["circle-translate"])),c=Math.max(c,x*a)}for(var b=t.queryGeometry.map(function(t){return t.map(function(t){return new l(t.x,t.y)})}),j=1/0,_=1/0,E=-(1/0),w=-(1/0),S=0;S<b.length;S++)for(var I=b[S],M=0;M<I.length;M++){var C=I[M];j=Math.min(j,C.x),_=Math.min(_,C.y),E=Math.max(E,C.x),w=Math.max(w,C.y)}var L=this.grid.query(j-c,_-c,E+c,w+c);L.sort(i),this.filterMatching(n,L,this.featureIndexArray,b,u,r.layers,e,t.bearing,a);var P=this.collisionTile.queryRenderedSymbols(j,_,E,w,t.scale);return P.sort(),this.filterMatching(n,P,this.collisionTile.collisionBoxArray,b,u,r.layers,e,t.bearing,a),n},r.prototype.filterMatching=function(t,e,n,r,o,i,l,p,h){for(var d,f=0;f<e.length;f++){var g=e[f];if(g!==d){d=g;var m=n.get(g),y=this.bucketLayerIDs[m.bucketIndex];if(!i||x(i,y)){var b=this.sourceLayerCoder.decode(m.sourceLayerIndex),w=this.vtLayers[b],S=w.feature(m.featureIndex);if(o(S))for(var I=null,M=0;M<y.length;M++){var C=y[M];if(!(i&&i.indexOf(C)<0)){var L=l[C];if(L){var P;if("symbol"!==L.type){I||(I=c(S));var T=L.paint;if("line"===L.type){P=a(r,T["line-translate"],T["line-translate-anchor"],p,h);var N=s(T)/2*h;if(T["line-offset"]&&(I=u(I,T["line-offset"]*h)),!E(P,I,N))continue}else if("fill"===L.type){if(P=a(r,T["fill-translate"],T["fill-translate-anchor"],p,h),!_(P,I))continue}else if("circle"===L.type){P=a(r,T["circle-translate"],T["circle-translate-anchor"],p,h);var R=T["circle-radius"]*h;if(!j(P,I,R))continue}}var A=new v(S,this.z,this.x,this.y);A.layer=L.serialize({includeRefProperties:!0});var D=t[C];void 0===D&&(D=t[C]=[]),D.push(A)}}}}}}}},{"../util/dictionary_coder":98,"../util/intersection_tests":102,"../util/struct_array":105,"../util/util":107,"../util/vectortile_to_geojson":108,"./bucket":1,"./load_geometry":8,"feature-filter":116,"grid-index":137,pbf:167,"point-geometry":169,"vector-tile":179}],8:[function(t,e,n){var r=t("../util/util"),o=t("./bucket").EXTENT,i=-2*o,s=2*o-1;e.exports=function(t){for(var e=o/t.extent,n=t.loadGeometry(),a=0;a<n.length;a++)for(var u=n[a],l=0;l<u.length;l++){var c=u[l];c.x=Math.round(c.x*e),c.y=Math.round(c.y*e),(c.x<i||c.x>s||c.y<i||c.y>s)&&r.warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}},{"../util/util":107,"./bucket":1}],9:[function(t,e,n){function r(t,e,n){this.column=t,this.row=e,this.zoom=n}e.exports=r,r.prototype={clone:function(){return new r(this.column,this.row,this.zoom)},zoomTo:function(t){return this.clone()._zoomTo(t)},sub:function(t){return this.clone()._sub(t)},_zoomTo:function(t){var e=Math.pow(2,t-this.zoom);return this.column*=e,this.row*=e,this.zoom=t,this},_sub:function(t){return t=t.zoomTo(this.zoom),this.column-=t.column,this.row-=t.row,this}}},{}],10:[function(t,e,n){function r(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}e.exports=r;var o=t("../util/util").wrap;r.prototype.wrap=function(){return new r(o(this.lng,-180,180),this.lat)},r.prototype.toArray=function(){return[this.lng,this.lat]},r.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},r.convert=function(t){return t instanceof r?t:Array.isArray(t)?new r(t[0],t[1]):t}},{"../util/util":107}],11:[function(t,e,n){function r(t,e){t&&(e?this.extend(t).extend(e):4===t.length?this.extend([t[0],t[1]]).extend([t[2],t[3]]):this.extend(t[0]).extend(t[1]))}e.exports=r;var o=t("./lng_lat");r.prototype={extend:function(t){var e,n,i=this._sw,s=this._ne;if(t instanceof o)e=t,n=t;else{if(!(t instanceof r))return t?this.extend(o.convert(t)||r.convert(t)):this;if(e=t._sw,n=t._ne,!e||!n)return this}return i||s?(i.lng=Math.min(e.lng,i.lng),i.lat=Math.min(e.lat,i.lat),s.lng=Math.max(n.lng,s.lng),s.lat=Math.max(n.lat,s.lat)):(this._sw=new o(e.lng,e.lat),this._ne=new o(n.lng,n.lat)),this},getCenter:function(){return new o((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},getSouthWest:function(){return this._sw},getNorthEast:function(){return this._ne},getNorthWest:function(){return new o(this.getWest(),this.getNorth())},getSouthEast:function(){return new o(this.getEast(),this.getSouth())},getWest:function(){return this._sw.lng},getSouth:function(){return this._sw.lat},getEast:function(){return this._ne.lng},getNorth:function(){return this._ne.lat},toArray:function(){return[this._sw.toArray(),this._ne.toArray()]},toString:function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"}},r.convert=function(t){return!t||t instanceof r?t:new r(t)}},{"./lng_lat":10}],12:[function(t,e,n){function r(t,e){this.tileSize=512,this._minZoom=t||0,this._maxZoom=e||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new o(0,0),this.zoom=0,this.angle=0,this._altitude=1.5,this._pitch=0,this._unmodified=!0}var o=t("./lng_lat"),i=t("point-geometry"),s=t("./coordinate"),a=t("../util/util").wrap,u=t("../util/interpolate"),l=t("../source/tile_coord"),c=t("../data/bucket").EXTENT,p=t("gl-matrix"),h=p.vec4,d=p.mat4,f=p.mat2;e.exports=r,r.prototype={get minZoom(){return this._minZoom},set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},get maxZoom(){return this._maxZoom},set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},get worldSize(){return this.tileSize*this.scale},get centerPoint(){return this.size._div(2)},get size(){return new i(this.width,this.height)},get bearing(){return-this.angle/Math.PI*180},set bearing(t){var e=-a(t,-180,180)*Math.PI/180;this.angle!==e&&(this._unmodified=!1,this.angle=e,this._calcMatrices(),this.rotationMatrix=f.create(),f.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},get pitch(){return this._pitch/Math.PI*180},set pitch(t){var e=Math.min(60,t)/180*Math.PI;this._pitch!==e&&(this._unmodified=!1,this._pitch=e,this._calcMatrices())},get altitude(){return this._altitude},set altitude(t){var e=Math.max(.75,t);this._altitude!==e&&(this._unmodified=!1,this._altitude=e,this._calcMatrices())},get zoom(){return this._zoom},set zoom(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._calcMatrices(),this._constrain())},get center(){return this._center},set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._calcMatrices(),this._constrain())},resize:function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._calcMatrices(),this._constrain()},get unmodified(){return this._unmodified},zoomScale:function(t){return Math.pow(2,t)},scaleZoom:function(t){return Math.log(t)/Math.LN2},project:function(t,e){return new i(this.lngX(t.lng,e),this.latY(t.lat,e))},unproject:function(t,e){return new o(this.xLng(t.x,e),this.yLat(t.y,e))},get x(){return this.lngX(this.center.lng)},get y(){return this.latY(this.center.lat)},get point(){return new i(this.x,this.y)},lngX:function(t,e){return(180+t)*(e||this.worldSize)/360},latY:function(t,e){var n=180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360));return(180-n)*(e||this.worldSize)/360},xLng:function(t,e){return 360*t/(e||this.worldSize)-180},yLat:function(t,e){var n=180-360*t/(e||this.worldSize);return 360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90},panBy:function(t){var e=this.centerPoint._add(t);this.center=this.pointLocation(e)},setLocationAtPoint:function(t,e){var n=this.locationCoordinate(t),r=this.pointCoordinate(e),o=this.pointCoordinate(this.centerPoint),i=r._sub(n);this._unmodified=!1,this.center=this.coordinateLocation(o._sub(i))},locationPoint:function(t){return this.coordinatePoint(this.locationCoordinate(t))},pointLocation:function(t){return this.coordinateLocation(this.pointCoordinate(t))},locationCoordinate:function(t){var e=this.zoomScale(this.tileZoom)/this.worldSize,n=o.convert(t);return new s(this.lngX(n.lng)*e,this.latY(n.lat)*e,this.tileZoom)},coordinateLocation:function(t){var e=this.zoomScale(t.zoom);return new o(this.xLng(t.column,e),this.yLat(t.row,e))},pointCoordinate:function(t){var e=0,n=[t.x,t.y,0,1],r=[t.x,t.y,1,1];h.transformMat4(n,n,this.pixelMatrixInverse),h.transformMat4(r,r,this.pixelMatrixInverse);var o=n[3],i=r[3],a=n[0]/o,l=r[0]/i,c=n[1]/o,p=r[1]/i,d=n[2]/o,f=r[2]/i,g=d===f?0:(e-d)/(f-d),m=this.worldSize/this.zoomScale(this.tileZoom);return new s(u(a,l,g)/m,u(c,p,g)/m,this.tileZoom)},coordinatePoint:function(t){var e=this.worldSize/this.zoomScale(t.zoom),n=[t.column*e,t.row*e,0,1];return h.transformMat4(n,n,this.pixelMatrix),new i(n[0]/n[3],n[1]/n[3])},calculatePosMatrix:function(t,e){void 0===e&&(e=1/0),t instanceof l&&(t=t.toCoordinate(e));var n=Math.min(t.zoom,e),r=this.worldSize/Math.pow(2,n),o=new Float64Array(16);return d.identity(o),d.translate(o,o,[t.column*r,t.row*r,0]),d.scale(o,o,[r/c,r/c,1]),d.multiply(o,this.projMatrix,o),new Float32Array(o)},_constrain:function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,e,n,r,o,s,a,u,l=this.size,c=this._unmodified;this.latRange&&(t=this.latY(this.latRange[1]),e=this.latY(this.latRange[0]),o=e-t<l.y?l.y/(e-t):0),this.lngRange&&(n=this.lngX(this.lngRange[0]),r=this.lngX(this.lngRange[1]),s=r-n<l.x?l.x/(r-n):0);var p=Math.max(s||0,o||0);if(p)return this.center=this.unproject(new i(s?(r+n)/2:this.x,o?(e+t)/2:this.y)),this.zoom+=this.scaleZoom(p),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var h=this.y,d=l.y/2;t>h-d&&(u=t+d),h+d>e&&(u=e-d)}if(this.lngRange){var f=this.x,g=l.x/2;n>f-g&&(a=n+g),f+g>r&&(a=r-g)}void 0===a&&void 0===u||(this.center=this.unproject(new i(void 0!==a?a:this.x,void 0!==u?u:this.y))),this._unmodified=c,this._constraining=!1}},_calcMatrices:function(){if(this.height){var t=Math.atan(.5/this.altitude),e=Math.sin(t)*this.altitude/Math.sin(Math.PI/2-this._pitch-t),n=Math.cos(Math.PI/2-this._pitch)*e+this.altitude,r=new Float64Array(16);if(d.perspective(r,2*Math.atan(this.height/2/this.altitude),this.width/this.height,.1,n),d.translate(r,r,[0,0,-this.altitude]),d.scale(r,r,[1,-1,1/this.height]),d.rotateX(r,r,this._pitch),d.rotateZ(r,r,this.angle),d.translate(r,r,[-this.x,-this.y,0]),this.projMatrix=r,r=d.create(),d.scale(r,r,[this.width/2,-this.height/2,1]),d.translate(r,r,[1,-1,0]),this.pixelMatrix=d.multiply(new Float64Array(16),r,this.projMatrix),r=d.invert(new Float64Array(16),this.pixelMatrix),!r)throw new Error("failed to invert matrix");this.pixelMatrixInverse=r}}}},{"../data/bucket":1,"../source/tile_coord":36,"../util/interpolate":101,"../util/util":107,"./coordinate":9,"./lng_lat":10,"gl-matrix":127,"point-geometry":169}],13:[function(t,e,n){var r={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]};e.exports=function(t,e,n,o){o=o||1;var i,s,a,u,l,c,p,h,d=[];for(i=0,s=t.length;s>i;i++)if(l=r[t[i]]){for(h=null,a=0,u=l[1].length;u>a;a+=2)-1===l[1][a]&&-1===l[1][a+1]?h=null:(c=e+l[1][a]*o,p=n-l[1][a+1]*o,h&&d.push(h.x,h.y,c,p),
h={x:c,y:p});e+=l[0]*o}return d}},{}],14:[function(t,e,n){var r=e.exports={};r.version=t("../package.json").version,r.Map=t("./ui/map"),r.Control=t("./ui/control/control"),r.Navigation=t("./ui/control/navigation"),r.Geolocate=t("./ui/control/geolocate"),r.Attribution=t("./ui/control/attribution"),r.Popup=t("./ui/popup"),r.GeoJSONSource=t("./source/geojson_source"),r.VideoSource=t("./source/video_source"),r.ImageSource=t("./source/image_source"),r.Style=t("./style/style"),r.LngLat=t("./geo/lng_lat"),r.LngLatBounds=t("./geo/lng_lat_bounds"),r.Point=t("point-geometry"),r.Evented=t("./util/evented"),r.util=t("./util/util"),r.supported=t("./util/browser").supported;var o=t("./util/ajax");r.util.getJSON=o.getJSON,r.util.getArrayBuffer=o.getArrayBuffer;var i=t("./util/config");r.config=i,Object.defineProperty(r,"accessToken",{get:function(){return i.ACCESS_TOKEN},set:function(t){i.ACCESS_TOKEN=t}})},{"../package.json":188,"./geo/lng_lat":10,"./geo/lng_lat_bounds":11,"./source/geojson_source":29,"./source/image_source":31,"./source/video_source":39,"./style/style":45,"./ui/control/attribution":76,"./ui/control/control":77,"./ui/control/geolocate":78,"./ui/control/navigation":79,"./ui/map":88,"./ui/popup":89,"./util/ajax":91,"./util/browser":92,"./util/config":97,"./util/evented":99,"./util/util":107,"point-geometry":169}],15:[function(t,e,n){e.exports=function(t){for(var e={define:{},initialize:{}},n=0;n<t.length;n++){var r=t[n],o="{precision} "+(1===r.components?"float":"vec"+r.components);e.define[r.name.slice(2)]="uniform "+o+" "+r.name+";\n",e.initialize[r.name.slice(2)]=o+" "+r.name.slice(2)+" = "+r.name+";\n"}return e}},{}],16:[function(t,e,n){function r(t,e,n){var r,o=t.gl,u=t.transform,l=n.paint["background-color"],c=n.paint["background-pattern"],p=n.paint["background-opacity"],h=c?t.spriteAtlas.getPosition(c.from,!0):null,d=c?t.spriteAtlas.getPosition(c.to,!0):null;if(t.setDepthSublayer(0),h&&d){if(t.isOpaquePass)return;r=t.useProgram("pattern"),o.uniform1i(r.u_image,0),o.uniform2fv(r.u_pattern_tl_a,h.tl),o.uniform2fv(r.u_pattern_br_a,h.br),o.uniform2fv(r.u_pattern_tl_b,d.tl),o.uniform2fv(r.u_pattern_br_b,d.br),o.uniform1f(r.u_opacity,p),o.uniform1f(r.u_mix,c.t),o.uniform2fv(r.u_pattern_size_a,h.size),o.uniform2fv(r.u_pattern_size_b,d.size),o.uniform1f(r.u_scale_a,c.fromScale),o.uniform1f(r.u_scale_b,c.toScale),o.activeTexture(o.TEXTURE0),t.spriteAtlas.bind(o,!0),t.tileExtentPatternVAO.bind(o,r,t.tileExtentBuffer)}else{if(t.isOpaquePass!==(1===l[3]))return;var f=a([{name:"u_color",components:4}]);r=t.useProgram("fill",[],f,f),o.uniform4fv(r.u_color,l),o.uniform1f(r.u_opacity,p),t.tileExtentVAO.bind(o,r,t.tileExtentBuffer)}o.disable(o.STENCIL_TEST);for(var g=i.coveringTiles(u),m=0;m<g.length;m++){var y=g[m],v=512;if(h&&d){var x={coord:y,tileSize:v};o.uniform1f(r.u_tile_units_to_pixels,1/s(x,1,t.transform.tileZoom));var b=x.tileSize*Math.pow(2,t.transform.tileZoom-x.coord.z),j=b*(x.coord.x+y.w*Math.pow(2,x.coord.z)),_=b*x.coord.y;o.uniform2f(r.u_pixel_coord_upper,j>>16,_>>16),o.uniform2f(r.u_pixel_coord_lower,65535&j,65535&_)}o.uniformMatrix4fv(r.u_matrix,!1,t.transform.calculatePosMatrix(y)),o.drawArrays(o.TRIANGLE_STRIP,0,t.tileExtentBuffer.length)}o.stencilMask(0),o.stencilFunc(o.EQUAL,128,128)}var o=t("../source/tile_pyramid"),i=new o({tileSize:512}),s=t("../source/pixels_to_tile_units"),a=t("./create_uniform_pragmas");e.exports=r},{"../source/pixels_to_tile_units":32,"../source/tile_pyramid":37,"./create_uniform_pragmas":15}],17:[function(t,e,n){function r(t,e,n,r){if(!t.isOpaquePass){var i=t.gl;t.setDepthSublayer(0),t.depthMask(!1),i.disable(i.STENCIL_TEST);for(var s=0;s<r.length;s++){var a=r[s],u=e.getTile(a),l=u.getBucket(n);if(l){var c=l.bufferGroups.circle;if(c){var p=l.paintAttributes.circle[n.id],h=t.useProgram("circle",p.defines,p.vertexPragmas,p.fragmentPragmas);i.uniform2f(h.u_extrude_scale,t.transform.pixelsToGLUnits[0]*t.transform.altitude,t.transform.pixelsToGLUnits[1]*t.transform.altitude),i.uniform1f(h.u_devicepixelratio,o.devicePixelRatio),i.uniformMatrix4fv(h.u_matrix,!1,t.translatePosMatrix(a.posMatrix,u,n.paint["circle-translate"],n.paint["circle-translate-anchor"])),l.setUniforms(i,"circle",h,n,{zoom:t.transform.zoom});for(var d=0;d<c.length;d++){var f=c[d];f.vaos[n.id].bind(i,h,f.layout.vertex,f.layout.element,f.paint[n.id]),i.drawElements(i.TRIANGLES,3*f.layout.element.length,i.UNSIGNED_SHORT,0)}}}}}}var o=t("../util/browser");e.exports=r},{"../util/browser":92}],18:[function(t,e,n){function r(t,e,n,r){var o=t.gl;o.enable(o.STENCIL_TEST);for(var i=t.useProgram("collisionbox"),s=0;s<r.length;s++){var a=r[s],u=e.getTile(a),l=u.getBucket(n);if(l){var c=l.bufferGroups.collisionBox;if(c&&c.length){var p=c[0];0!==p.layout.vertex.length&&(o.uniformMatrix4fv(i.u_matrix,!1,a.posMatrix),t.enableTileClippingMask(a),t.lineWidth(1),o.uniform1f(i.u_scale,Math.pow(2,t.transform.zoom-u.coord.z)),o.uniform1f(i.u_zoom,10*t.transform.zoom),o.uniform1f(i.u_maxzoom,10*(u.coord.z+1)),p.vaos[n.id].bind(o,i,p.layout.vertex),o.drawArrays(o.LINES,0,p.layout.vertex.length))}}}}e.exports=r},{}],19:[function(t,e,n){function r(t,e,n){if(!t.isOpaquePass&&t.options.debug)for(var r=0;r<n.length;r++)o(t,e,n[r])}function o(t,e,n){var r=t.gl;r.disable(r.STENCIL_TEST),t.lineWidth(1*s.devicePixelRatio);var o=n.posMatrix,p=t.useProgram("debug");r.uniformMatrix4fv(p.u_matrix,!1,o),r.uniform4f(p.u_color,1,0,0,1),t.debugVAO.bind(r,p,t.debugBuffer),r.drawArrays(r.LINE_STRIP,0,t.debugBuffer.length);for(var h=i(n.toString(),50,200,5),d=new t.PosArray,f=0;f<h.length;f+=2)d.emplaceBack(h[f],h[f+1]);var g=new l(d.serialize(),t.PosArray.serialize(),l.BufferType.VERTEX),m=new c;m.bind(r,p,g),r.uniform4f(p.u_color,1,1,1,1);for(var y=e.getTile(n).tileSize,v=u/(Math.pow(2,t.transform.zoom-n.z)*y),x=[[-1,-1],[-1,1],[1,-1],[1,1]],b=0;b<x.length;b++){var j=x[b];r.uniformMatrix4fv(p.u_matrix,!1,a.translate([],o,[v*j[0],v*j[1],0])),r.drawArrays(r.LINES,0,g.length)}r.uniform4f(p.u_color,0,0,0,1),r.uniformMatrix4fv(p.u_matrix,!1,o),r.drawArrays(r.LINES,0,g.length)}var i=t("../lib/debugtext"),s=t("../util/browser"),a=t("gl-matrix").mat4,u=t("../data/bucket").EXTENT,l=t("../data/buffer"),c=t("./vertex_array_object");e.exports=r},{"../data/bucket":1,"../data/buffer":6,"../lib/debugtext":13,"../util/browser":92,"./vertex_array_object":28,"gl-matrix":127}],20:[function(t,e,n){function r(t,e,n,r){var s=t.gl;s.enable(s.STENCIL_TEST);var a=n.paint["fill-color"],u=n.paint["fill-pattern"],l=n.paint["fill-opacity"],c=n.getPaintProperty("fill-outline-color");if(u?!t.isOpaquePass:t.isOpaquePass===(1===a[3]&&1===l)){t.setDepthSublayer(1);for(var p=0;p<r.length;p++)o(t,e,n,r[p])}if(!t.isOpaquePass&&n.paint["fill-antialias"])if(c||!n.paint["fill-pattern"]){t.lineWidth(2),t.depthMask(!1),c?t.setDepthSublayer(2):t.setDepthSublayer(0);for(var h=0;h<r.length;h++)i(t,e,n,r[h])}else{t.lineWidth(2),t.depthMask(!1),t.setDepthSublayer(0);for(var d=0;d<r.length;d++)i(t,e,n,r[d])}}function o(t,e,n,r){var o=e.getTile(r),i=o.getBucket(n);if(i){var a=i.bufferGroups.fill;if(a){var u,l=t.gl,c=n.paint["fill-pattern"],p=n.paint["fill-opacity"];if(c)u=t.useProgram("pattern"),s(c,p,o,r,t,u),l.activeTexture(l.TEXTURE0),t.spriteAtlas.bind(l,!0);else{var h=i.paintAttributes.fill[n.id];u=t.useProgram("fill",h.defines,h.vertexPragmas,h.fragmentPragmas),i.setUniforms(l,"fill",u,n,{zoom:t.transform.zoom}),l.uniform1f(u.u_opacity,p)}l.uniformMatrix4fv(u.u_matrix,!1,t.translatePosMatrix(r.posMatrix,o,n.paint["fill-translate"],n.paint["fill-translate-anchor"])),t.enableTileClippingMask(r);for(var d=0;d<a.length;d++){var f=a[d];f.vaos[n.id].bind(l,u,f.layout.vertex,f.layout.element,f.paint[n.id]),l.drawElements(l.TRIANGLES,f.layout.element.length,l.UNSIGNED_SHORT,0)}}}}function i(t,e,n,r){var o=e.getTile(r),i=o.getBucket(n);if(i){var a,u=t.gl,l=i.bufferGroups.fill,c=n.paint["fill-pattern"],p=n.paint["fill-opacity"],h=n.getPaintProperty("fill-outline-color");if(c&&!h)a=t.useProgram("outlinepattern"),u.uniform2f(a.u_world,u.drawingBufferWidth,u.drawingBufferHeight);else{var d=i.paintAttributes.fill[n.id];a=t.useProgram("outline",d.defines,d.vertexPragmas,d.fragmentPragmas),u.uniform2f(a.u_world,u.drawingBufferWidth,u.drawingBufferHeight),u.uniform1f(a.u_opacity,p),i.setUniforms(u,"fill",a,n,{zoom:t.transform.zoom})}u.uniformMatrix4fv(a.u_matrix,!1,t.translatePosMatrix(r.posMatrix,o,n.paint["fill-translate"],n.paint["fill-translate-anchor"])),c&&s(c,p,o,r,t,a),t.enableTileClippingMask(r);for(var f=0;f<l.length;f++){var g=l[f];g.secondVaos[n.id].bind(u,a,g.layout.vertex,g.layout.element2,g.paint[n.id]),u.drawElements(u.LINES,2*g.layout.element2.length,u.UNSIGNED_SHORT,0)}}}function s(t,e,n,r,o,i){var s=o.gl,u=o.spriteAtlas.getPosition(t.from,!0),l=o.spriteAtlas.getPosition(t.to,!0);if(u&&l){s.uniform1i(i.u_image,0),s.uniform2fv(i.u_pattern_tl_a,u.tl),s.uniform2fv(i.u_pattern_br_a,u.br),s.uniform2fv(i.u_pattern_tl_b,l.tl),s.uniform2fv(i.u_pattern_br_b,l.br),s.uniform1f(i.u_opacity,e),s.uniform1f(i.u_mix,t.t),s.uniform1f(i.u_tile_units_to_pixels,1/a(n,1,o.transform.tileZoom)),s.uniform2fv(i.u_pattern_size_a,u.size),s.uniform2fv(i.u_pattern_size_b,l.size),s.uniform1f(i.u_scale_a,t.fromScale),s.uniform1f(i.u_scale_b,t.toScale);var c=n.tileSize*Math.pow(2,o.transform.tileZoom-n.coord.z),p=c*(n.coord.x+r.w*Math.pow(2,n.coord.z)),h=c*n.coord.y;s.uniform2f(i.u_pixel_coord_upper,p>>16,h>>16),s.uniform2f(i.u_pixel_coord_lower,65535&p,65535&h),s.activeTexture(s.TEXTURE0),o.spriteAtlas.bind(s,!0)}}var a=t("../source/pixels_to_tile_units");e.exports=r},{"../source/pixels_to_tile_units":32}],21:[function(t,e,n){var r=t("../util/browser"),o=t("gl-matrix").mat2,i=t("../source/pixels_to_tile_units");e.exports=function(t,e,n,s){if(!t.isOpaquePass){t.setDepthSublayer(0),t.depthMask(!1);var a=t.gl;if(a.enable(a.STENCIL_TEST),!(n.paint["line-width"]<=0)){var u=1/r.devicePixelRatio,l=n.paint["line-blur"]+u,c=n.paint["line-color"],p=t.transform,h=o.create();o.scale(h,h,[1,Math.cos(p._pitch)]),o.rotate(h,h,t.transform.angle);var d,f,g,m,y,v=Math.sqrt(p.height*p.height/4*(1+p.altitude*p.altitude)),x=p.height/2*Math.tan(p._pitch),b=(v+x)/v-1,j=n.paint["line-dasharray"],_=n.paint["line-pattern"];if(j)d=t.useProgram("linesdfpattern"),a.uniform1f(d.u_linewidth,n.paint["line-width"]/2),a.uniform1f(d.u_gapwidth,n.paint["line-gap-width"]/2),a.uniform1f(d.u_antialiasing,u/2),a.uniform1f(d.u_blur,l),a.uniform4fv(d.u_color,c),a.uniform1f(d.u_opacity,n.paint["line-opacity"]),f=t.lineAtlas.getDash(j.from,"round"===n.layout["line-cap"]),g=t.lineAtlas.getDash(j.to,"round"===n.layout["line-cap"]),a.uniform1i(d.u_image,0),a.activeTexture(a.TEXTURE0),t.lineAtlas.bind(a),a.uniform1f(d.u_tex_y_a,f.y),a.uniform1f(d.u_tex_y_b,g.y),a.uniform1f(d.u_mix,j.t),a.uniform1f(d.u_extra,b),a.uniform1f(d.u_offset,-n.paint["line-offset"]),a.uniformMatrix2fv(d.u_antialiasingmatrix,!1,h);else if(_){if(m=t.spriteAtlas.getPosition(_.from,!0),y=t.spriteAtlas.getPosition(_.to,!0),!m||!y)return;d=t.useProgram("linepattern"),a.uniform1i(d.u_image,0),a.activeTexture(a.TEXTURE0),t.spriteAtlas.bind(a,!0),a.uniform1f(d.u_linewidth,n.paint["line-width"]/2),a.uniform1f(d.u_gapwidth,n.paint["line-gap-width"]/2),a.uniform1f(d.u_antialiasing,u/2),a.uniform1f(d.u_blur,l),a.uniform2fv(d.u_pattern_tl_a,m.tl),a.uniform2fv(d.u_pattern_br_a,m.br),a.uniform2fv(d.u_pattern_tl_b,y.tl),a.uniform2fv(d.u_pattern_br_b,y.br),a.uniform1f(d.u_fade,_.t),a.uniform1f(d.u_opacity,n.paint["line-opacity"]),a.uniform1f(d.u_extra,b),a.uniform1f(d.u_offset,-n.paint["line-offset"]),a.uniformMatrix2fv(d.u_antialiasingmatrix,!1,h)}else d=t.useProgram("line"),a.uniform1f(d.u_linewidth,n.paint["line-width"]/2),a.uniform1f(d.u_gapwidth,n.paint["line-gap-width"]/2),a.uniform1f(d.u_antialiasing,u/2),a.uniform1f(d.u_blur,l),a.uniform1f(d.u_extra,b),a.uniform1f(d.u_offset,-n.paint["line-offset"]),a.uniformMatrix2fv(d.u_antialiasingmatrix,!1,h),a.uniform4fv(d.u_color,c),a.uniform1f(d.u_opacity,n.paint["line-opacity"]);for(var E=0;E<s.length;E++){var w=s[E],S=e.getTile(w),I=S.getBucket(n);if(I){var M=I.bufferGroups.line;if(M){t.enableTileClippingMask(w);var C=t.translatePosMatrix(w.posMatrix,S,n.paint["line-translate"],n.paint["line-translate-anchor"]);a.uniformMatrix4fv(d.u_matrix,!1,C);var L=1/i(S,1,t.transform.zoom);if(j){var P=f.width*j.fromScale,T=g.width*j.toScale,N=[1/i(S,P,t.transform.tileZoom),-f.height/2],R=[1/i(S,T,t.transform.tileZoom),-g.height/2],A=t.lineAtlas.width/(256*Math.min(P,T)*r.devicePixelRatio)/2;a.uniform1f(d.u_ratio,L),a.uniform2fv(d.u_patternscale_a,N),a.uniform2fv(d.u_patternscale_b,R),a.uniform1f(d.u_sdfgamma,A)}else _?(a.uniform1f(d.u_ratio,L),a.uniform2fv(d.u_pattern_size_a,[i(S,m.size[0]*_.fromScale,t.transform.tileZoom),y.size[1]]),a.uniform2fv(d.u_pattern_size_b,[i(S,y.size[0]*_.toScale,t.transform.tileZoom),y.size[1]])):a.uniform1f(d.u_ratio,L);for(var D=0;D<M.length;D++){var O=M[D];O.vaos[n.id].bind(a,d,O.layout.vertex,O.layout.element),a.drawElements(a.TRIANGLES,3*O.layout.element.length,a.UNSIGNED_SHORT,0)}}}}}}}},{"../source/pixels_to_tile_units":32,"../util/browser":92,"gl-matrix":127}],22:[function(t,e,n){function r(t,e,n,r){if(!t.isOpaquePass){var i=t.gl;i.enable(i.DEPTH_TEST),t.depthMask(!0),i.depthFunc(i.LESS);for(var s=r.length&&r[0].z,a=0;a<r.length;a++){var u=r[a];t.setDepthSublayer(u.z-s),o(t,e,n,u)}i.depthFunc(i.LEQUAL)}}function o(t,e,n,r){var o=t.gl;o.disable(o.STENCIL_TEST);var l=e.getTile(r),c=t.transform.calculatePosMatrix(r,e.maxzoom),p=t.useProgram("raster");o.uniformMatrix4fv(p.u_matrix,!1,c),o.uniform1f(p.u_brightness_low,n.paint["raster-brightness-min"]),o.uniform1f(p.u_brightness_high,n.paint["raster-brightness-max"]),o.uniform1f(p.u_saturation_factor,a(n.paint["raster-saturation"])),o.uniform1f(p.u_contrast_factor,s(n.paint["raster-contrast"])),o.uniform3fv(p.u_spin_weights,i(n.paint["raster-hue-rotate"]));var h,d,f=l.source&&l.source._pyramid.findLoadedParent(r,0,{}),g=u(l,f,n,t.transform);o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,l.texture),o.activeTexture(o.TEXTURE1),f?(o.bindTexture(o.TEXTURE_2D,f.texture),h=Math.pow(2,f.coord.z-l.coord.z),d=[l.coord.x*h%1,l.coord.y*h%1]):(o.bindTexture(o.TEXTURE_2D,l.texture),g[1]=0),o.uniform2fv(p.u_tl_parent,d||[0,0]),o.uniform1f(p.u_scale_parent,h||1),o.uniform1f(p.u_buffer_scale,1),o.uniform1f(p.u_opacity0,g[0]),o.uniform1f(p.u_opacity1,g[1]),o.uniform1i(p.u_image0,0),o.uniform1i(p.u_image1,1);var m=l.boundsBuffer||t.rasterBoundsBuffer,y=l.boundsVAO||t.rasterBoundsVAO;y.bind(o,p,m),o.drawArrays(o.TRIANGLE_STRIP,0,m.length)}function i(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}function s(t){return t>0?1/(1-t):1+t}function a(t){return t>0?1-1/(1.001-t):-t}function u(t,e,n,r){var o=[1,0],i=n.paint["raster-fade-duration"];if(t.source&&i>0){var s=(new Date).getTime(),a=(s-t.timeAdded)/i,u=e?(s-e.timeAdded)/i:-1,c=t.source._pyramid.coveringZoomLevel(r),p=!!e&&Math.abs(e.coord.z-c)>Math.abs(t.coord.z-c);!e||p?(o[0]=l.clamp(a,0,1),o[1]=1-o[0]):(o[0]=l.clamp(1-u,0,1),o[1]=1-o[0])}var h=n.paint["raster-opacity"];return o[0]*=h,o[1]*=h,o}var l=t("../util/util"),c=t("../util/struct_array");e.exports=r,r.RasterBoundsArray=new c({members:[{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]})},{"../util/struct_array":105,"../util/util":107}],23:[function(t,e,n){function r(t,e,n,r){if(!t.isOpaquePass){var i=!(n.layout["text-allow-overlap"]||n.layout["icon-allow-overlap"]||n.layout["text-ignore-placement"]||n.layout["icon-ignore-placement"]),s=t.gl;i?s.disable(s.STENCIL_TEST):s.enable(s.STENCIL_TEST),t.setDepthSublayer(0),t.depthMask(!1),s.disable(s.DEPTH_TEST),o(t,e,n,r,!1,n.paint["icon-translate"],n.paint["icon-translate-anchor"],n.layout["icon-rotation-alignment"],n.layout["icon-size"],n.paint["icon-halo-width"],n.paint["icon-halo-color"],n.paint["icon-halo-blur"],n.paint["icon-opacity"],n.paint["icon-color"]),o(t,e,n,r,!0,n.paint["text-translate"],n.paint["text-translate-anchor"],n.layout["text-rotation-alignment"],n.layout["text-size"],n.paint["text-halo-width"],n.paint["text-halo-color"],n.paint["text-halo-blur"],n.paint["text-opacity"],n.paint["text-color"]),s.enable(s.DEPTH_TEST),a(t,e,n,r)}}function o(t,e,n,r,o,s,a,u,l,c,p,h,d,f){for(var g=0;g<r.length;g++){var m=e.getTile(r[g]),y=m.getBucket(n);if(y){var v=y.bufferGroups,x=o?v.glyph:v.icon;x.length&&(t.enableTileClippingMask(r[g]),i(t,n,r[g].posMatrix,m,y,x,o,o||y.sdfIcons,!o&&y.iconsNeedLinear,o?y.adjustedTextSize:y.adjustedIconSize,y.fontstack,s,a,u,l,c,p,h,d,f))}}}function i(t,e,n,r,o,i,a,l,c,p,h,d,f,g,m,y,v,x,b,j){var _,E,w,S=t.gl,I=t.transform,M="map"===g,C=a?24:1,L=m/C;if(M?(E=u(r,1,t.transform.zoom)*L,w=1/Math.cos(I._pitch),_=[E,E]):(E=t.transform.altitude*L,w=1,_=[I.pixelsToGLUnits[0]*E,I.pixelsToGLUnits[1]*E]),a||t.style.sprite.loaded()){var P=t.useProgram(l?"sdf":"icon");if(S.uniformMatrix4fv(P.u_matrix,!1,t.translatePosMatrix(n,r,d,f)),S.uniform1i(P.u_skewed,M),S.uniform2fv(P.u_extrude_scale,_),S.activeTexture(S.TEXTURE0),S.uniform1i(P.u_texture,0),a){var T=h&&t.glyphSource.getGlyphAtlas(h);if(!T)return;T.updateTexture(S),S.uniform2f(P.u_texsize,T.width/4,T.height/4)}else{var N=t.options.rotating||t.options.zooming,R=1!==L||s.devicePixelRatio!==t.spriteAtlas.pixelRatio||c,A=M||t.transform.pitch;t.spriteAtlas.bind(S,l||N||R||A),S.uniform2f(P.u_texsize,t.spriteAtlas.width/4,t.spriteAtlas.height/4)}var D=Math.log(m/p)/Math.LN2||0;S.uniform1f(P.u_zoom,10*(t.transform.zoom-D)),S.activeTexture(S.TEXTURE1),t.frameHistory.bind(S),S.uniform1i(P.u_fadetexture,1);var O;if(l){var F=8,k=1.19,B=6,z=.105*C/m/s.devicePixelRatio;if(y){S.uniform1f(P.u_gamma,(x*k/L/F+z)*w),S.uniform4fv(P.u_color,v),S.uniform1f(P.u_opacity,b),S.uniform1f(P.u_buffer,(B-y/L)/F);for(var G=0;G<i.length;G++)O=i[G],O.vaos[e.id].bind(S,P,O.layout.vertex,O.layout.element),S.drawElements(S.TRIANGLES,3*O.layout.element.length,S.UNSIGNED_SHORT,0)}S.uniform1f(P.u_gamma,z*w),S.uniform4fv(P.u_color,j),S.uniform1f(P.u_opacity,b),S.uniform1f(P.u_buffer,.75);for(var q=0;q<i.length;q++)O=i[q],O.vaos[e.id].bind(S,P,O.layout.vertex,O.layout.element),S.drawElements(S.TRIANGLES,3*O.layout.element.length,S.UNSIGNED_SHORT,0)}else{S.uniform1f(P.u_opacity,b);for(var U=0;U<i.length;U++)O=i[U],O.vaos[e.id].bind(S,P,O.layout.vertex,O.layout.element),S.drawElements(S.TRIANGLES,3*O.layout.element.length,S.UNSIGNED_SHORT,0)}}}var s=t("../util/browser"),a=t("./draw_collision_debug"),u=t("../source/pixels_to_tile_units");e.exports=r},{"../source/pixels_to_tile_units":32,"../util/browser":92,"./draw_collision_debug":18}],24:[function(t,e,n){function r(){this.changeTimes=new Float64Array(256),this.changeOpacities=new Uint8Array(256),this.opacities=new Uint8ClampedArray(256),this.array=new Uint8Array(this.opacities.buffer),this.fadeDuration=300,this.previousZoom=0,this.firstFrame=!0}e.exports=r,r.prototype.record=function(t){var e=Date.now();this.firstFrame&&(e=0,this.firstFrame=!1),t=Math.floor(10*t);var n;if(t<this.previousZoom)for(n=t+1;n<=this.previousZoom;n++)this.changeTimes[n]=e,this.changeOpacities[n]=this.opacities[n];else for(n=t;n>this.previousZoom;n--)this.changeTimes[n]=e,this.changeOpacities[n]=this.opacities[n];for(n=0;256>n;n++){var r=e-this.changeTimes[n],o=r/this.fadeDuration*255;t>=n?this.opacities[n]=this.changeOpacities[n]+o:this.opacities[n]=this.changeOpacities[n]-o}this.changed=!0,this.previousZoom=t},r.prototype.bind=function(t){this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.changed&&(t.texSubImage2D(t.TEXTURE_2D,0,0,0,256,1,t.ALPHA,t.UNSIGNED_BYTE,this.array),this.changed=!1)):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,256,1,0,t.ALPHA,t.UNSIGNED_BYTE,this.array))}},{}],25:[function(t,e,n){function r(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}}var o=t("../util/util");e.exports=r,r.prototype.setSprite=function(t){this.sprite=t},r.prototype.getDash=function(t,e){var n=t.join(",")+e;return this.positions[n]||(this.positions[n]=this.addDash(t,e)),this.positions[n]},r.prototype.addDash=function(t,e){var n=e?7:0,r=2*n+1,i=128;if(this.nextRow+r>this.height)return o.warnOnce("LineAtlas out of space"),null;for(var s=0,a=0;a<t.length;a++)s+=t[a];for(var u=this.width/s,l=u/2,c=t.length%2===1,p=-n;n>=p;p++)for(var h=this.nextRow+n+p,d=this.width*h,f=c?-t[t.length-1]:0,g=t[0],m=1,y=0;y<this.width;y++){for(;y/u>g;)f=g,g+=t[m],c&&m===t.length-1&&(g+=t[0]),m++;var v,x=Math.abs(y-f*u),b=Math.abs(y-g*u),j=Math.min(x,b),_=m%2===1;if(e){var E=n?p/n*(l+1):0;if(_){var w=l-Math.abs(E);v=Math.sqrt(j*j+w*w)}else v=l-Math.sqrt(j*j+E*E)}else v=(_?1:-1)*j;this.data[3+4*(d+y)]=Math.max(0,Math.min(255,v+i))}var S={y:(this.nextRow+n+.5)/this.height,height:2*n/this.height,width:s};return this.nextRow+=r,this.dirty=!0,S},r.prototype.bind=function(t){this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.RGBA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,this.data))}},{"../util/util":107}],26:[function(t,e,n){function r(t,e){this.gl=t,this.transform=e,this.reusableTextures={},this.preFbos={},this.frameHistory=new s,this.setup(),this.numSublayers=a.maxUnderzooming+a.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.lineWidthRange=t.getParameter(t.ALIASED_LINE_WIDTH_RANGE)}var o=t("../util/browser"),i=t("gl-matrix").mat4,s=t("./frame_history"),a=t("../source/tile_pyramid"),u=t("../data/bucket").EXTENT,l=t("../source/pixels_to_tile_units"),c=t("../util/util"),p=t("../util/struct_array"),h=t("../data/buffer"),d=t("./vertex_array_object"),f=t("./draw_raster").RasterBoundsArray,g=t("./create_uniform_pragmas");e.exports=r,c.extend(r.prototype,t("./painter/use_program")),r.prototype.resize=function(t,e){var n=this.gl;this.width=t*o.devicePixelRatio,this.height=e*o.devicePixelRatio,n.viewport(0,0,this.width,this.height)},r.prototype.setup=function(){var t=this.gl;t.verbose=!0,t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.enable(t.STENCIL_TEST),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),this._depthMask=!1,t.depthMask(!1);var e=this.PosArray=new p({members:[{name:"a_pos",type:"Int16",components:2}]}),n=new e;n.emplaceBack(0,0),n.emplaceBack(u,0),n.emplaceBack(0,u),n.emplaceBack(u,u),this.tileExtentBuffer=new h(n.serialize(),e.serialize(),h.BufferType.VERTEX),this.tileExtentVAO=new d,this.tileExtentPatternVAO=new d;var r=new e;r.emplaceBack(0,0),r.emplaceBack(u,0),r.emplaceBack(u,u),r.emplaceBack(0,u),r.emplaceBack(0,0),this.debugBuffer=new h(r.serialize(),e.serialize(),h.BufferType.VERTEX),this.debugVAO=new d;var o=new f;o.emplaceBack(0,0,0,0),o.emplaceBack(u,0,32767,0),o.emplaceBack(0,u,0,32767),o.emplaceBack(u,u,32767,32767),this.rasterBoundsBuffer=new h(o.serialize(),f.serialize(),h.BufferType.VERTEX),this.rasterBoundsVAO=new d},r.prototype.clearColor=function(){var t=this.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},r.prototype.clearStencil=function(){var t=this.gl;t.clearStencil(0),t.stencilMask(255),t.clear(t.STENCIL_BUFFER_BIT)},r.prototype.clearDepth=function(){var t=this.gl;t.clearDepth(1),this.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT)},r.prototype._renderTileClippingMasks=function(t){var e=this.gl;e.colorMask(!1,!1,!1,!1),this.depthMask(!1),e.disable(e.DEPTH_TEST),e.enable(e.STENCIL_TEST),e.stencilMask(248),e.stencilOp(e.KEEP,e.KEEP,e.REPLACE);var n=1;this._tileClippingMaskIDs={};for(var r=0;r<t.length;r++){var o=t[r],i=this._tileClippingMaskIDs[o.id]=n++<<3;e.stencilFunc(e.ALWAYS,i,248);var s=g([{name:"u_color",components:4}]),a=this.useProgram("fill",[],s,s);e.uniformMatrix4fv(a.u_matrix,!1,o.posMatrix),this.tileExtentVAO.bind(e,a,this.tileExtentBuffer),e.drawArrays(e.TRIANGLE_STRIP,0,this.tileExtentBuffer.length)}e.stencilMask(0),e.colorMask(!0,!0,!0,!0),this.depthMask(!0),e.enable(e.DEPTH_TEST)},r.prototype.enableTileClippingMask=function(t){var e=this.gl;e.stencilFunc(e.EQUAL,this._tileClippingMaskIDs[t.id],248)},r.prototype.prepareBuffers=function(){},r.prototype.bindDefaultFramebuffer=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)};var m={symbol:t("./draw_symbol"),circle:t("./draw_circle"),line:t("./draw_line"),fill:t("./draw_fill"),raster:t("./draw_raster"),background:t("./draw_background"),debug:t("./draw_debug")};r.prototype.render=function(t,e){this.style=t,this.options=e,this.lineAtlas=t.lineAtlas,this.spriteAtlas=t.spriteAtlas,this.spriteAtlas.setSprite(t.sprite),this.glyphSource=t.glyphSource,this.frameHistory.record(this.transform.zoom),this.prepareBuffers(),this.clearColor(),this.clearDepth(),this.showOverdrawInspector(e.showOverdrawInspector),this.depthRange=(t._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass({isOpaquePass:!0}),this.renderPass({isOpaquePass:!1})},r.prototype.renderPass=function(t){var e=this.style._groups,n=t.isOpaquePass;this.currentLayer=n?this.style._order.length:-1;for(var r=0;r<e.length;r++){var o,i=e[n?e.length-1-r:r],s=this.style.sources[i.source],a=[];if(s){for(a=s.getVisibleCoordinates(),o=0;o<a.length;o++)a[o].posMatrix=this.transform.calculatePosMatrix(a[o],s.maxzoom);this.clearStencil(),s.prepare&&s.prepare(),s.isTileClipped&&this._renderTileClippingMasks(a)}for(n?(this._showOverdrawInspector||this.gl.disable(this.gl.BLEND),this.isOpaquePass=!0):(this.gl.enable(this.gl.BLEND),this.isOpaquePass=!1,a.reverse()),o=0;o<i.length;o++){var u=i[n?i.length-1-o:o];this.currentLayer+=n?-1:1,this.renderLayer(this,s,u,a)}s&&m.debug(this,s,a)}},r.prototype.depthMask=function(t){t!==this._depthMask&&(this._depthMask=t,this.gl.depthMask(t))},r.prototype.renderLayer=function(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||r.length)&&(this.id=n.id,m[n.type](t,e,n,r))},r.prototype.setDepthSublayer=function(t){var e=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon,n=e-1+this.depthRange;this.gl.depthRange(n,e)},r.prototype.translatePosMatrix=function(t,e,n,r){if(!n[0]&&!n[1])return t;if("viewport"===r){var o=Math.sin(-this.transform.angle),s=Math.cos(-this.transform.angle);n=[n[0]*s-n[1]*o,n[0]*o+n[1]*s]}var a=[l(e,n[0],this.transform.zoom),l(e,n[1],this.transform.zoom),0],u=new Float32Array(16);return i.translate(u,t,a),u},r.prototype.saveTexture=function(t){var e=this.reusableTextures[t.size];e?e.push(t):this.reusableTextures[t.size]=[t]},r.prototype.getTexture=function(t){var e=this.reusableTextures[t];return e&&e.length>0?e.pop():null},r.prototype.lineWidth=function(t){this.gl.lineWidth(c.clamp(t,this.lineWidthRange[0],this.lineWidthRange[1]))},r.prototype.showOverdrawInspector=function(t){if(t||this._showOverdrawInspector){this._showOverdrawInspector=t;var e=this.gl;if(t){e.blendFunc(e.CONSTANT_COLOR,e.ONE);var n=8,r=1/n;e.blendColor(r,r,r,0),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)}else e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)}}},{"../data/bucket":1,"../data/buffer":6,"../source/pixels_to_tile_units":32,"../source/tile_pyramid":37,"../util/browser":92,"../util/struct_array":105,"../util/util":107,"./create_uniform_pragmas":15,"./draw_background":16,"./draw_circle":17,"./draw_debug":19,"./draw_fill":20,"./draw_line":21,"./draw_raster":22,"./draw_symbol":23,"./frame_history":24,"./painter/use_program":27,"./vertex_array_object":28,"gl-matrix":127}],27:[function(t,e,n){function r(t,e){return t.replace(/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,function(t,n,r,o,i){return e[n][i].replace(/{precision}/g,r)})}var o=t("../../util/util"),i=t("mapbox-gl-shaders"),s=i.util;e.exports._createProgram=function(t,e,n,a){for(var u=this.gl,l=u.createProgram(),c=i[t],p="#define MAPBOX_GL_JS;\n",h=0;h<e.length;h++)p+="#define "+e[h]+";\n";var d=u.createShader(u.FRAGMENT_SHADER);u.shaderSource(d,r(p+c.fragmentSource,a)),u.compileShader(d),u.attachShader(l,d);var f=u.createShader(u.VERTEX_SHADER);u.shaderSource(f,r(p+s+c.vertexSource,n)),u.compileShader(f),u.attachShader(l,f),u.linkProgram(l);for(var g={},m=u.getProgramParameter(l,u.ACTIVE_ATTRIBUTES),y=0;m>y;y++){var v=u.getActiveAttrib(l,y);g[v.name]=u.getAttribLocation(l,v.name)}for(var x={},b=u.getProgramParameter(l,u.ACTIVE_UNIFORMS),j=0;b>j;j++){var _=u.getActiveUniform(l,j);x[_.name]=u.getUniformLocation(l,_.name)}return o.extend({program:l,definition:c,attributes:g,numAttributes:m},g,x)},e.exports._createProgramCached=function(t,e,n,r){this.cache=this.cache||{};var o=JSON.stringify({name:t,defines:e,vertexPragmas:n,fragmentPragmas:r});return this.cache[o]||(this.cache[o]=this._createProgram(t,e,n,r)),this.cache[o]},e.exports.useProgram=function(t,e,n,r){var o=this.gl;e=e||[],this._showOverdrawInspector&&(e=e.concat("OVERDRAW_INSPECTOR"));var i=this._createProgramCached(t,e,n,r),s=this.currentProgram;return s!==i&&(o.useProgram(i.program),this.currentProgram=i),i}},{"../../util/util":107,"mapbox-gl-shaders":140}],28:[function(t,e,n){function r(){this.boundProgram=null,this.boundVertexBuffer=null,this.boundVertexBuffer2=null,this.boundElementBuffer=null,this.vao=null}e.exports=r,r.prototype.bind=function(t,e,n,r,o){void 0===t.extVertexArrayObject&&(t.extVertexArrayObject=t.getExtension("OES_vertex_array_object"));var i=!this.vao||this.boundProgram!==e||this.boundVertexBuffer!==n||this.boundVertexBuffer2!==o||this.boundElementBuffer!==r;!t.extVertexArrayObject||i?this.freshBind(t,e,n,r,o):t.extVertexArrayObject.bindVertexArrayOES(this.vao)},r.prototype.freshBind=function(t,e,n,r,o){var i,s=e.numAttributes;if(t.extVertexArrayObject)this.vao&&this.destroy(t),this.vao=t.extVertexArrayObject.createVertexArrayOES(),t.extVertexArrayObject.bindVertexArrayOES(this.vao),i=0,this.boundProgram=e,this.boundVertexBuffer=n,this.boundVertexBuffer2=o,this.boundElementBuffer=r;else{i=t.currentNumAttributes||0;for(var a=s;i>a;a++)t.disableVertexAttribArray(a)}for(var u=i;s>u;u++)t.enableVertexAttribArray(u);n.bind(t),n.setVertexAttribPointers(t,e),o&&(o.bind(t),o.setVertexAttribPointers(t,e)),r&&r.bind(t),t.currentNumAttributes=s},r.prototype.unbind=function(t){var e=t.extVertexArrayObject;e&&e.bindVertexArrayOES(null)},r.prototype.destroy=function(t){var e=t.extVertexArrayObject;e&&this.vao&&(e.deleteVertexArrayOES(this.vao),this.vao=null)}},{}],29:[function(t,e,n){function r(t){t=t||{},this._data=t.data,void 0!==t.maxzoom&&(this.maxzoom=t.maxzoom);var e=l/this.tileSize;this.geojsonVtOptions={buffer:(void 0!==t.buffer?t.buffer:128)*e,tolerance:(void 0!==t.tolerance?t.tolerance:.375)*e,extent:l,maxZoom:this.maxzoom},this.cluster=t.cluster||!1,this.superclusterOptions={maxZoom:Math.min(t.clusterMaxZoom,this.maxzoom-1)||this.maxzoom-1,extent:l,radius:(t.clusterRadius||50)*e,log:!1},this._pyramid=new s({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!0,load:this._loadTile.bind(this),abort:this._abortTile.bind(this),unload:this._unloadTile.bind(this),add:this._addTile.bind(this),remove:this._removeTile.bind(this),redoPlacement:this._redoTilePlacement.bind(this)})}var o=t("../util/util"),i=t("../util/evented"),s=t("./tile_pyramid"),a=t("./source"),u=t("resolve-url"),l=t("../data/bucket").EXTENT;e.exports=r,r.prototype=o.inherit(i,{minzoom:0,maxzoom:18,tileSize:512,_dirty:!0,isTileClipped:!0,setData:function(t){return this._data=t,this._dirty=!0,this.fire("change"),this.map&&this.update(this.map.transform),this},onAdd:function(t){
this.map=t},loaded:function(){return this._loaded&&this._pyramid.loaded()},update:function(t){this._dirty&&this._updateData(),this._loaded&&this._pyramid.update(this.used,t)},reload:function(){this._loaded&&this._pyramid.reload()},serialize:function(){return{type:"geojson",data:this._data}},getVisibleCoordinates:a._getVisibleCoordinates,getTile:a._getTile,queryRenderedFeatures:a._queryRenderedVectorFeatures,querySourceFeatures:a._querySourceFeatures,_updateData:function(){this._dirty=!1;var t={tileSize:this.tileSize,source:this.id,geojsonVtOptions:this.geojsonVtOptions,cluster:this.cluster,superclusterOptions:this.superclusterOptions},e=this._data;"string"==typeof e?t.url="undefined"!=typeof window?u(window.location.href,e):e:t.data=JSON.stringify(e),this.workerID=this.dispatcher.send("parse geojson",t,function(t){this._loaded=!0,t?this.fire("error",{error:t}):(this._pyramid.reload(),this.fire("change"))}.bind(this))},_loadTile:function(t){var e=t.coord.z>this.maxzoom?Math.pow(2,t.coord.z-this.maxzoom):1,n={uid:t.uid,coord:t.coord,zoom:t.coord.z,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,overscaling:e,angle:this.map.transform.angle,pitch:this.map.transform.pitch,showCollisionBoxes:this.map.showCollisionBoxes};t.workerID=this.dispatcher.send("load geojson tile",n,function(e,n){if(t.unloadVectorData(this.map.painter),!t.aborted){if(e)return void this.fire("tile.error",{tile:t});t.loadVectorData(n,this.map.style),t.redoWhenDone&&(t.redoWhenDone=!1,t.redoPlacement(this)),this.fire("tile.load",{tile:t})}}.bind(this),this.workerID)},_abortTile:function(t){t.aborted=!0},_addTile:function(t){this.fire("tile.add",{tile:t})},_removeTile:function(t){this.fire("tile.remove",{tile:t})},_unloadTile:function(t){t.unloadVectorData(this.map.painter),this.dispatcher.send("remove tile",{uid:t.uid,source:this.id},function(){},t.workerID)},redoPlacement:a.redoPlacement,_redoTilePlacement:function(t){t.redoPlacement(this)}})},{"../data/bucket":1,"../util/evented":99,"../util/util":107,"./source":34,"./tile_pyramid":37,"resolve-url":171}],30:[function(t,e,n){function r(t){this.features=t,this.length=t.length,this.extent=a}function o(t){if(this.type=t.type,1===t.type){this.rawGeometry=[];for(var e=0;e<t.geometry.length;e++)this.rawGeometry.push([t.geometry[e]])}else this.rawGeometry=t.geometry;this.properties=t.tags,this.extent=a}var i=t("point-geometry"),s=t("vector-tile").VectorTileFeature,a=t("../data/bucket").EXTENT;e.exports=r,r.prototype.feature=function(t){return new o(this.features[t])},o.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var n=t[e],r=[],o=0;o<n.length;o++)r.push(new i(n[o][0],n[o][1]));this.geometry.push(r)}return this.geometry},o.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-(1/0),r=1/0,o=-(1/0),i=0;i<t.length;i++)for(var s=t[i],a=0;a<s.length;a++){var u=s[a];e=Math.min(e,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),o=Math.max(o,u.y)}return[e,r,n,o]},o.prototype.toGeoJSON=s.prototype.toGeoJSON},{"../data/bucket":1,"point-geometry":169,"vector-tile":179}],31:[function(t,e,n){function r(t){this.url=t.url,this.coordinates=t.coordinates,c.getImage(t.url,function(e,n){e||(this.image=n,this.image.addEventListener("load",function(){this.map._rerender()}.bind(this)),this._loaded=!0,this.map&&this.setCoordinates(t.coordinates))}.bind(this))}var o=t("../util/util"),i=t("./tile"),s=t("./tile_coord"),a=t("../geo/lng_lat"),u=t("point-geometry"),l=t("../util/evented"),c=t("../util/ajax"),p=t("../data/bucket").EXTENT,h=t("../render/draw_raster").RasterBoundsArray,d=t("../data/buffer"),f=t("../render/vertex_array_object");e.exports=r,r.prototype=o.inherit(l,{onAdd:function(t){this.map=t,this.image&&this.setCoordinates(this.coordinates)},setCoordinates:function(t){this.coordinates=t;var e=this.map,n=t.map(function(t){return e.transform.locationCoordinate(a.convert(t)).zoomTo(0)}),r=this.centerCoord=o.getCoordinatesCenter(n);r.column=Math.round(r.column),r.row=Math.round(r.row);var l=n.map(function(t){var e=t.zoomTo(r.zoom);return new u(Math.round((e.column-r.column)*p),Math.round((e.row-r.row)*p))}),c=32767,g=new h;return g.emplaceBack(l[0].x,l[0].y,0,0),g.emplaceBack(l[1].x,l[1].y,c,0),g.emplaceBack(l[3].x,l[3].y,0,c),g.emplaceBack(l[2].x,l[2].y,c,c),this.tile=new i(new s(r.zoom,r.column,r.row)),this.tile.buckets={},this.tile.boundsBuffer=new d(g.serialize(),h.serialize(),d.BufferType.VERTEX),this.tile.boundsVAO=new f,this.fire("change"),this},loaded:function(){return this.image&&this.image.complete},update:function(){},reload:function(){},prepare:function(){if(this._loaded&&this.loaded()){var t=this.map.painter,e=t.gl;this.tile.texture?(e.bindTexture(e.TEXTURE_2D,this.tile.texture),e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,this.image)):(this.tile.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.tile.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.image))}},getVisibleCoordinates:function(){return this.tile?[this.tile.coord]:[]},getTile:function(){return this.tile},serialize:function(){return{type:"image",urls:this.url,coordinates:this.coordinates}}})},{"../data/bucket":1,"../data/buffer":6,"../geo/lng_lat":10,"../render/draw_raster":22,"../render/vertex_array_object":28,"../util/ajax":91,"../util/evented":99,"../util/util":107,"./tile":35,"./tile_coord":36,"point-geometry":169}],32:[function(t,e,n){var r=t("../data/bucket");e.exports=function(t,e,n){return e*(r.EXTENT/(t.tileSize*Math.pow(2,n-t.coord.z)))}},{"../data/bucket":1}],33:[function(t,e,n){function r(t){o.extend(this,o.pick(t,["url","scheme","tileSize"])),a._loadTileJSON.call(this,t)}var o=t("../util/util"),i=t("../util/ajax"),s=t("../util/evented"),a=t("./source"),u=t("../util/mapbox").normalizeTileURL;e.exports=r,r.prototype=o.inherit(s,{minzoom:0,maxzoom:22,roundZoom:!0,scheme:"xyz",tileSize:512,_loaded:!1,onAdd:function(t){this.map=t},loaded:function(){return this._pyramid&&this._pyramid.loaded()},update:function(t){this._pyramid&&this._pyramid.update(this.used,t,this.map.style.rasterFadeDuration)},reload:function(){},serialize:function(){return{type:"raster",url:this.url,tileSize:this.tileSize}},getVisibleCoordinates:a._getVisibleCoordinates,getTile:a._getTile,_loadTile:function(t){function e(e,n){if(delete t.request,!t.aborted){if(e)return t.errored=!0,void this.fire("tile.error",{tile:t,error:e});var r=this.map.painter.gl;t.texture=this.map.painter.getTexture(n.width),t.texture?(r.bindTexture(r.TEXTURE_2D,t.texture),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,n)):(t.texture=r.createTexture(),r.bindTexture(r.TEXTURE_2D,t.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),t.texture.size=n.width),r.generateMipmap(r.TEXTURE_2D),t.timeAdded=(new Date).getTime(),this.map.animationLoop.set(this.style.rasterFadeDuration),t.source=this,t.loaded=!0,this.fire("tile.load",{tile:t})}}var n=u(t.coord.url(this.tiles,null,this.scheme),this.url,this.tileSize);t.request=i.getImage(n,e.bind(this))},_abortTile:function(t){t.aborted=!0,t.request&&(t.request.abort(),delete t.request)},_addTile:function(t){this.fire("tile.add",{tile:t})},_removeTile:function(t){this.fire("tile.remove",{tile:t})},_unloadTile:function(t){t.texture&&this.map.painter.saveTexture(t.texture)}})},{"../util/ajax":91,"../util/evented":99,"../util/mapbox":104,"../util/util":107,"./source":34}],34:[function(t,e,n){function r(t,e){var n=t.coord,r=e.coord;return n.z-r.z||n.y-r.y||n.w-r.w||n.x-r.x}function o(t){for(var e=t[0]||{},n=1;n<t.length;n++){var r=t[n];for(var o in r){var i=r[o],s=e[o];if(void 0===s)s=e[o]=i;else for(var a=0;a<i.length;a++)s.push(i[a])}}return e}var i=t("../util/util"),s=t("../util/ajax"),a=t("../util/browser"),u=t("./tile_pyramid"),l=t("../util/mapbox").normalizeSourceURL,c=t("./tile_coord");n._loadTileJSON=function(t){var e=function(t,e){return t?void this.fire("error",{error:t}):(i.extend(this,i.pick(e,["tiles","minzoom","maxzoom","attribution"])),e.vector_layers&&(this.vectorLayers=e.vector_layers,this.vectorLayerIds=this.vectorLayers.map(function(t){return t.id})),this._pyramid=new u({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom,reparseOverscaled:this.reparseOverscaled,load:this._loadTile.bind(this),abort:this._abortTile.bind(this),unload:this._unloadTile.bind(this),add:this._addTile.bind(this),remove:this._removeTile.bind(this),redoPlacement:this._redoTilePlacement?this._redoTilePlacement.bind(this):void 0}),void this.fire("load"))}.bind(this);t.url?s.getJSON(l(t.url),e):a.frame(e.bind(this,null,t))},n.redoPlacement=function(){if(this._pyramid)for(var t=this._pyramid.orderedIDs(),e=0;e<t.length;e++){var n=this._pyramid.getTile(t[e]);this._redoTilePlacement(n)}},n._getTile=function(t){return this._pyramid.getTile(t.id)},n._getVisibleCoordinates=function(){return this._pyramid?this._pyramid.renderedIDs().map(c.fromID):[]},n._queryRenderedVectorFeatures=function(t,e,n,i){if(!this._pyramid||!this.map)return[];var s=this._pyramid.tilesIn(t);s.sort(r);for(var a=this.map.style._layers,u=[],l=0;l<s.length;l++){var c=s[l];c.tile.featureIndex&&u.push(c.tile.featureIndex.query({queryGeometry:c.queryGeometry,scale:c.scale,tileSize:c.tile.tileSize,bearing:i,params:e},a))}return o(u)},n._querySourceFeatures=function(t){if(!this._pyramid)return[];for(var e=this._pyramid,n=e.renderedIDs().map(function(t){return e.getTile(t)}),r=[],o={},i=0;i<n.length;i++){var s=n[i],a=new c(Math.min(s.sourceMaxZoom,s.coord.z),s.coord.x,s.coord.y,0).id;o[a]||(o[a]=!0,s.querySourceFeatures(r,t))}return r},n.create=function(e){var r={vector:t("./vector_tile_source"),raster:t("./raster_tile_source"),geojson:t("./geojson_source"),video:t("./video_source"),image:t("./image_source")};return n.is(e)?e:new r[e.type](e)},n.is=function(e){var n={vector:t("./vector_tile_source"),raster:t("./raster_tile_source"),geojson:t("./geojson_source"),video:t("./video_source"),image:t("./image_source")};for(var r in n)if(e instanceof n[r])return!0;return!1}},{"../util/ajax":91,"../util/browser":92,"../util/mapbox":104,"../util/util":107,"./geojson_source":29,"./image_source":31,"./raster_tile_source":33,"./tile_coord":36,"./tile_pyramid":37,"./vector_tile_source":38,"./video_source":39}],35:[function(t,e,n){function r(t,e,n){this.coord=t,this.uid=i.uniqueId(),this.loaded=!1,this.isUnloaded=!1,this.uses=0,this.tileSize=e,this.sourceMaxZoom=n,this.buckets={}}function o(t,e){if(e){for(var n={},r=0;r<t.length;r++){var o=e.getLayer(t[r].layerId);if(o){var a=s.create(i.extend({layer:o,childLayers:t[r].childLayerIds.map(e.getLayer.bind(e)).filter(function(t){return t})},t[r]));n[a.id]=a}}return n}}var i=t("../util/util"),s=t("../data/bucket"),a=t("../data/feature_index"),u=t("vector-tile"),l=t("pbf"),c=t("../util/vectortile_to_geojson"),p=t("feature-filter"),h=t("../symbol/collision_tile"),d=t("../symbol/collision_box"),f=t("../symbol/symbol_instances"),g=t("../symbol/symbol_quads");e.exports=r,r.prototype={loadVectorData:function(t,e){this.loaded=!0,t&&(this.collisionBoxArray=new d(t.collisionBoxArray),this.collisionTile=new h(t.collisionTile,this.collisionBoxArray),this.symbolInstancesArray=new f(t.symbolInstancesArray),this.symbolQuadsArray=new g(t.symbolQuadsArray),this.featureIndex=new a(t.featureIndex,t.rawTileData,this.collisionTile),this.rawTileData=t.rawTileData,this.buckets=o(t.buckets,e))},reloadSymbolData:function(t,e,n){if(!this.isUnloaded){this.collisionTile=new h(t.collisionTile,this.collisionBoxArray),this.featureIndex.setCollisionTile(this.collisionTile);for(var r in this.buckets){var s=this.buckets[r];"symbol"===s.type&&(s.destroy(e.gl),delete this.buckets[r])}i.extend(this.buckets,o(t.buckets,n))}},unloadVectorData:function(t){for(var e in this.buckets){var n=this.buckets[e];n.destroy(t.gl)}this.collisionBoxArray=null,this.symbolQuadsArray=null,this.symbolInstancesArray=null,this.collisionTile=null,this.featureIndex=null,this.rawTileData=null,this.buckets=null,this.loaded=!1,this.isUnloaded=!0},redoPlacement:function(t){function e(e,n){this.reloadSymbolData(n,t.map.painter,t.map.style),t.fire("tile.load",{tile:this}),this.redoingPlacement=!1,this.redoWhenDone&&(this.redoPlacement(t),this.redoWhenDone=!1)}return!this.loaded||this.redoingPlacement?void(this.redoWhenDone=!0):(this.redoingPlacement=!0,void t.dispatcher.send("redo placement",{uid:this.uid,source:t.id,angle:t.map.transform.angle,pitch:t.map.transform.pitch,showCollisionBoxes:t.map.showCollisionBoxes},e.bind(this),this.workerID))},getBucket:function(t){return this.buckets&&this.buckets[t.ref||t.id]},querySourceFeatures:function(t,e){if(this.rawTileData){this.vtLayers||(this.vtLayers=new u.VectorTile(new l(new Uint8Array(this.rawTileData))).layers);var n=this.vtLayers._geojsonTileLayer||this.vtLayers[e.sourceLayer];if(n)for(var r=p(e.filter),o={z:this.coord.z,x:this.coord.x,y:this.coord.y},i=0;i<n.length;i++){var s=n.feature(i);if(r(s)){var a=new c(s,this.coord.z,this.coord.x,this.coord.y);a.tile=o,t.push(a)}}}}}},{"../data/bucket":1,"../data/feature_index":7,"../symbol/collision_box":61,"../symbol/collision_tile":63,"../symbol/symbol_instances":72,"../symbol/symbol_quads":73,"../util/util":107,"../util/vectortile_to_geojson":108,"feature-filter":116,pbf:167,"vector-tile":179}],36:[function(t,e,n){function r(t,e,n,r){isNaN(r)&&(r=0),this.z=+t,this.x=+e,this.y=+n,this.w=+r,r*=2,0>r&&(r=-1*r-1);var o=1<<this.z;this.id=32*(o*o*r+o*this.y+this.x)+this.z,this.posMatrix=null}function o(t,e){if(t.row>e.row){var n=t;t=e,e=n}return{x0:t.column,y0:t.row,x1:e.column,y1:e.row,dx:e.column-t.column,dy:e.row-t.row}}function i(t,e,n,r,o){var i=Math.max(n,Math.floor(e.y0)),s=Math.min(r,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var a=t;t=e,e=a}for(var u=t.dx/t.dy,l=e.dx/e.dy,c=t.dx>0,p=e.dx<0,h=i;s>h;h++){var d=u*Math.max(0,Math.min(t.dy,h+c-t.y0))+t.x0,f=l*Math.max(0,Math.min(e.dy,h+p-e.y0))+e.x0;o(Math.floor(f),Math.ceil(d),h)}}function s(t,e,n,r,s,a){var u,l=o(t,e),c=o(e,n),p=o(n,t);l.dy>c.dy&&(u=l,l=c,c=u),l.dy>p.dy&&(u=l,l=p,p=u),c.dy>p.dy&&(u=c,c=p,p=u),l.dy&&i(p,l,r,s,a),c.dy&&i(p,c,r,s,a)}var a=t("whoots-js"),u=t("../geo/coordinate");e.exports=r,r.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y},r.prototype.toCoordinate=function(t){var e=Math.min(this.z,t),n=Math.pow(2,e),r=this.y,o=this.x+n*this.w;return new u(o,r,e)},r.fromID=function(t){var e=t%32,n=1<<e,o=(t-e)/32,i=o%n,s=(o-i)/n%n,a=Math.floor(o/(n*n));return a%2!==0&&(a=-1*a-1),a/=2,new r(e,i,s,a)},r.prototype.url=function(t,e,n){var r=a.getTileBBox(this.x,this.y,this.z);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",Math.min(this.z,e||this.z)).replace("{x}",this.x).replace("{y}","tms"===n?Math.pow(2,this.z)-this.y-1:this.y).replace("{bbox-epsg-3857}",r)},r.prototype.parent=function(t){return 0===this.z?null:this.z>t?new r(this.z-1,this.x,this.y,this.w):new r(this.z-1,Math.floor(this.x/2),Math.floor(this.y/2),this.w)},r.prototype.wrapped=function(){return new r(this.z,this.x,this.y,0)},r.prototype.children=function(t){if(this.z>=t)return[new r(this.z+1,this.x,this.y,this.w)];var e=this.z+1,n=2*this.x,o=2*this.y;return[new r(e,n,o,this.w),new r(e,n+1,o,this.w),new r(e,n,o+1,this.w),new r(e,n+1,o+1,this.w)]},r.cover=function(t,e,n){function o(t,e,o){var s,u,l;if(o>=0&&i>=o)for(s=t;e>s;s++)u=(s%i+i)%i,l=new r(n,u,o,Math.floor(s/i)),a[l.id]=l}var i=1<<t,a={};return s(e[0],e[1],e[2],0,i,o),s(e[2],e[3],e[0],0,i,o),Object.keys(a).map(function(t){return a[t]})}},{"../geo/coordinate":9,"whoots-js":187}],37:[function(t,e,n){function r(t){this.tileSize=t.tileSize,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,this.roundZoom=t.roundZoom,this.reparseOverscaled=t.reparseOverscaled,this._load=t.load,this._abort=t.abort,this._unload=t.unload,this._add=t.add,this._remove=t.remove,this._redoPlacement=t.redoPlacement,this._tiles={},this._cache=new l(0,function(t){return this._unload(t)}.bind(this)),this._filterRendered=this._filterRendered.bind(this)}function o(t,e,n){var r=n.zoomTo(Math.min(t.z,e));return{x:(r.column-(t.x+t.w*Math.pow(2,t.z)))*h,y:(r.row-t.y)*h}}function i(t,e){return t%32-e%32}var s=t("./tile"),a=t("./tile_coord"),u=t("point-geometry"),l=t("../util/lru_cache"),c=t("../geo/coordinate"),p=t("../util/util"),h=t("../data/bucket").EXTENT;e.exports=r,r.maxOverzooming=10,r.maxUnderzooming=3,r.prototype={loaded:function(){for(var t in this._tiles)if(!this._tiles[t].loaded&&!this._tiles[t].errored)return!1;return!0},orderedIDs:function(){return Object.keys(this._tiles).map(Number).sort(i)},renderedIDs:function(){return this.orderedIDs().filter(this._filterRendered)},_filterRendered:function(t){return this._tiles[t].loaded&&!this._coveredTiles[t]},reload:function(){this._cache.reset();for(var t in this._tiles)this._load(this._tiles[t])},getTile:function(t){return this._tiles[t]},getZoom:function(t){return t.zoom+Math.log(t.tileSize/this.tileSize)/Math.LN2},coveringZoomLevel:function(t){return(this.roundZoom?Math.round:Math.floor)(this.getZoom(t))},coveringTiles:function(t){var e=this.coveringZoomLevel(t),n=e;if(e<this.minzoom)return[];e>this.maxzoom&&(e=this.maxzoom);var r=t,o=r.locationCoordinate(r.center)._zoomTo(e),i=new u(o.column-.5,o.row-.5);return a.cover(e,[r.pointCoordinate(new u(0,0))._zoomTo(e),r.pointCoordinate(new u(r.width,0))._zoomTo(e),r.pointCoordinate(new u(r.width,r.height))._zoomTo(e),r.pointCoordinate(new u(0,r.height))._zoomTo(e)],this.reparseOverscaled?n:e).sort(function(t,e){return i.dist(t)-i.dist(e)})},findLoadedChildren:function(t,e,n){var r=!1;for(var o in this._tiles){var i=this._tiles[o];if(!(n[o]||!i.loaded||i.coord.z<=t.z||i.coord.z>e)){var s=Math.pow(2,Math.min(i.coord.z,this.maxzoom)-Math.min(t.z,this.maxzoom));if(Math.floor(i.coord.x/s)===t.x&&Math.floor(i.coord.y/s)===t.y)for(n[o]=!0,r=!0;i&&i.coord.z-1>t.z;){var a=i.coord.parent(this.maxzoom).id;i=this._tiles[a],i&&i.loaded&&(delete n[o],n[a]=!0)}}}return r},findLoadedParent:function(t,e,n){for(var r=t.z-1;r>=e;r--){t=t.parent(this.maxzoom);var o=this._tiles[t.id];if(o&&o.loaded)return n[t.id]=!0,o;if(this._cache.has(t.id))return this.addTile(t),n[t.id]=!0,this._tiles[t.id]}},updateCacheSize:function(t){var e=Math.ceil(t.width/t.tileSize)+1,n=Math.ceil(t.height/t.tileSize)+1,r=e*n,o=5;this._cache.setMaxSize(Math.floor(r*o))},update:function(t,e,n){var o,i,s;this.updateCacheSize(e);var u=(this.roundZoom?Math.round:Math.floor)(this.getZoom(e)),l=Math.max(u-r.maxOverzooming,this.minzoom),c=Math.max(u+r.maxUnderzooming,this.minzoom),h={},d=(new Date).getTime();this._coveredTiles={};var f=t?this.coveringTiles(e):[];for(o=0;o<f.length;o++)i=f[o],s=this.addTile(i),h[i.id]=!0,s.loaded||this.findLoadedChildren(i,c,h)||this.findLoadedParent(i,l,h);for(var g={},m=Object.keys(h),y=0;y<m.length;y++){var v=m[y];i=a.fromID(v),s=this._tiles[v],s&&s.timeAdded>d-(n||0)&&(this.findLoadedChildren(i,c,h)&&(h[v]=!0),this.findLoadedParent(i,l,g))}var x;for(x in g)h[x]||(this._coveredTiles[x]=!0);for(x in g)h[x]=!0;var b=p.keysDifference(this._tiles,h);for(o=0;o<b.length;o++)this.removeTile(+b[o]);this.transform=e},addTile:function(t){var e=this._tiles[t.id];if(e)return e;var n=t.wrapped();if(e=this._tiles[n.id],e||(e=this._cache.get(n.id),e&&this._redoPlacement&&this._redoPlacement(e)),!e){var r=t.z,o=r>this.maxzoom?Math.pow(2,r-this.maxzoom):1;e=new s(n,this.tileSize*o,this.maxzoom),this._load(e)}return e.uses++,this._tiles[t.id]=e,this._add(e,t),e},removeTile:function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._remove(e),e.uses>0||(e.loaded?this._cache.add(e.coord.wrapped().id,e):(this._abort(e),this._unload(e))))},clearTiles:function(){for(var t in this._tiles)this.removeTile(t);this._cache.reset()},tilesIn:function(t){for(var e={},n=this.orderedIDs(),r=1/0,i=1/0,s=-(1/0),u=-(1/0),l=t[0].zoom,p=0;p<t.length;p++){var d=t[p];r=Math.min(r,d.column),i=Math.min(i,d.row),s=Math.max(s,d.column),u=Math.max(u,d.row)}for(var f=0;f<n.length;f++){var g=this._tiles[n[f]],m=a.fromID(n[f]),y=[o(m,g.sourceMaxZoom,new c(r,i,l)),o(m,g.sourceMaxZoom,new c(s,u,l))];if(y[0].x<h&&y[0].y<h&&y[1].x>=0&&y[1].y>=0){for(var v=[],x=0;x<t.length;x++)v.push(o(m,g.sourceMaxZoom,t[x]));var b=e[g.coord.id];void 0===b&&(b=e[g.coord.id]={tile:g,coord:m,queryGeometry:[],scale:Math.pow(2,this.transform.zoom-g.coord.z)}),b.queryGeometry.push(v)}}var j=[];for(var _ in e)j.push(e[_]);return j}}},{"../data/bucket":1,"../geo/coordinate":9,"../util/lru_cache":103,"../util/util":107,"./tile":35,"./tile_coord":36,"point-geometry":169}],38:[function(t,e,n){function r(t){if(o.extend(this,o.pick(t,["url","scheme","tileSize"])),this._options=o.extend({type:"vector"},t),512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");s._loadTileJSON.call(this,t)}var o=t("../util/util"),i=t("../util/evented"),s=t("./source"),a=t("../util/mapbox").normalizeTileURL;e.exports=r,r.prototype=o.inherit(i,{minzoom:0,maxzoom:22,scheme:"xyz",tileSize:512,reparseOverscaled:!0,_loaded:!1,isTileClipped:!0,onAdd:function(t){this.map=t},loaded:function(){return this._pyramid&&this._pyramid.loaded()},update:function(t){this._pyramid&&this._pyramid.update(this.used,t)},reload:function(){this._pyramid&&this._pyramid.reload()},serialize:function(){return o.extend({},this._options)},getVisibleCoordinates:s._getVisibleCoordinates,getTile:s._getTile,queryRenderedFeatures:s._queryRenderedVectorFeatures,querySourceFeatures:s._querySourceFeatures,_loadTile:function(t){var e=t.coord.z>this.maxzoom?Math.pow(2,t.coord.z-this.maxzoom):1,n={url:a(t.coord.url(this.tiles,this.maxzoom,this.scheme),this.url),uid:t.uid,coord:t.coord,zoom:t.coord.z,tileSize:this.tileSize*e,source:this.id,overscaling:e,angle:this.map.transform.angle,pitch:this.map.transform.pitch,showCollisionBoxes:this.map.showCollisionBoxes};t.workerID?(n.rawTileData=t.rawTileData,this.dispatcher.send("reload tile",n,this._tileLoaded.bind(this,t),t.workerID)):t.workerID=this.dispatcher.send("load tile",n,this._tileLoaded.bind(this,t))},_tileLoaded:function(t,e,n){if(!t.aborted){if(e)return t.errored=!0,void this.fire("tile.error",{tile:t,error:e});t.loadVectorData(n,this.map.style),t.redoWhenDone&&(t.redoWhenDone=!1,t.redoPlacement(this)),this.fire("tile.load",{tile:t}),this.fire("tile.stats",n.bucketStats)}},_abortTile:function(t){t.aborted=!0,this.dispatcher.send("abort tile",{uid:t.uid,source:this.id},null,t.workerID)},_addTile:function(t){this.fire("tile.add",{tile:t})},_removeTile:function(t){this.fire("tile.remove",{tile:t})},_unloadTile:function(t){t.unloadVectorData(this.map.painter),this.dispatcher.send("remove tile",{uid:t.uid,source:this.id},null,t.workerID)},redoPlacement:s.redoPlacement,_redoTilePlacement:function(t){t.redoPlacement(this)}})},{"../util/evented":99,"../util/mapbox":104,"../util/util":107,"./source":34}],39:[function(t,e,n){function r(t){this.urls=t.urls,this.coordinates=t.coordinates,c.getVideo(t.urls,function(e,n){if(!e){this.video=n,this.video.loop=!0;var r;this.video.addEventListener("playing",function(){r=this.map.style.animationLoop.set(1/0),this.map._rerender()}.bind(this)),this.video.addEventListener("pause",function(){this.map.style.animationLoop.cancel(r)}.bind(this)),this._loaded=!0,this.map&&(this.video.play(),this.setCoordinates(t.coordinates))}}.bind(this))}var o=t("../util/util"),i=t("./tile"),s=t("./tile_coord"),a=t("../geo/lng_lat"),u=t("point-geometry"),l=t("../util/evented"),c=t("../util/ajax"),p=t("../data/bucket").EXTENT,h=t("../render/draw_raster").RasterBoundsArray,d=t("../data/buffer"),f=t("../render/vertex_array_object");e.exports=r,r.prototype=o.inherit(l,{roundZoom:!0,getVideo:function(){return this.video},onAdd:function(t){this.map=t,this.video&&(this.video.play(),this.setCoordinates(this.coordinates))},setCoordinates:function(t){this.coordinates=t;var e=this.map,n=t.map(function(t){return e.transform.locationCoordinate(a.convert(t)).zoomTo(0)}),r=this.centerCoord=o.getCoordinatesCenter(n);r.column=Math.round(r.column),r.row=Math.round(r.row);var l=n.map(function(t){var e=t.zoomTo(r.zoom);return new u(Math.round((e.column-r.column)*p),Math.round((e.row-r.row)*p))}),c=32767,g=new h;return g.emplaceBack(l[0].x,l[0].y,0,0),g.emplaceBack(l[1].x,l[1].y,c,0),g.emplaceBack(l[3].x,l[3].y,0,c),g.emplaceBack(l[2].x,l[2].y,c,c),this.tile=new i(new s(r.zoom,r.column,r.row)),this.tile.buckets={},this.tile.boundsBuffer=new d(g.serialize(),h.serialize(),d.BufferType.VERTEX),this.tile.boundsVAO=new f,this.fire("change"),this},loaded:function(){return this.video&&this.video.readyState>=2},update:function(){},reload:function(){},prepare:function(){if(this._loaded&&!(this.video.readyState<2)){var t=this.map.painter.gl;this.tile.texture?(t.bindTexture(t.TEXTURE_2D,this.tile.texture),t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,this.video)):(this.tile.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.tile.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.video)),this._currentTime=this.video.currentTime}},getVisibleCoordinates:function(){return this.tile?[this.tile.coord]:[]},getTile:function(){return this.tile},serialize:function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}})},{"../data/bucket":1,"../data/buffer":6,"../geo/lng_lat":10,"../render/draw_raster":22,"../render/vertex_array_object":28,"../util/ajax":91,"../util/evented":99,"../util/util":107,"./tile":35,"./tile_coord":36,"point-geometry":169}],40:[function(t,e,n){function r(t){this.self=t,this.actor=new i(t,this),this.loading={},this.loaded={},this.geoJSONIndexes={}}function o(t){var e={};for(var n in t){var r=t[n],o=r.ref||r.id,i=t[o];i.layout&&"none"===i.layout.visibility||(e[o]=e[o]||[],n===o?e[o].unshift(r):e[o].push(r))}return e}var i=t("../util/actor"),s=t("./worker_tile"),a=t("../style/style_layer"),l=t("../util/util"),c=t("../util/ajax"),p=t("vector-tile"),h=t("pbf"),d=t("supercluster"),f=t("geojson-vt"),g=t("geojson-rewind"),m=t("./geojson_wrapper"),y=t("vt-pbf");e.exports=function(t){return new r(t)},l.extend(r.prototype,{"set layers":function(t){function e(t){var e=a.create(t,t.ref&&n.layers[t.ref]);e.updatePaintTransitions({},{transition:!1}),n.layers[e.id]=e}this.layers={};for(var n=this,r=[],i=0;i<t.length;i++){var s=t[i];"fill"!==s.type&&"line"!==s.type&&"circle"!==s.type&&"symbol"!==s.type||(s.ref?r.push(i):e(s))}for(var u=0;u<r.length;u++)e(t[r[u]]);this.layerFamilies=o(this.layers)},"update layers":function(t){function e(t){var e=i.layers[t.ref];i.layers[t.id]?i.layers[t.id].set(t,e):i.layers[t.id]=a.create(t,e),i.layers[t.id].updatePaintTransitions({},{transition:!1})}var n,r,i=this;for(n in t)r=t[n],r.ref&&e(r);for(n in t)r=t[n],r.ref||e(r);this.layerFamilies=o(this.layers)},"load tile":function(t,e){function n(t,n){return delete this.loading[r][o],t?e(t):(i.data=new p.VectorTile(new h(new Uint8Array(n))),i.parse(i.data,this.layerFamilies,this.actor,n,e),this.loaded[r]=this.loaded[r]||{},void(this.loaded[r][o]=i))}var r=t.source,o=t.uid;this.loading[r]||(this.loading[r]={});var i=this.loading[r][o]=new s(t);i.xhr=c.getArrayBuffer(t.url,n.bind(this))},"reload tile":function(t,e){var n=this.loaded[t.source],r=t.uid;if(n&&n[r]){var o=n[r];o.parse(o.data,this.layerFamilies,this.actor,t.rawTileData,e)}},"abort tile":function(t){var e=this.loading[t.source],n=t.uid;e&&e[n]&&(e[n].xhr.abort(),delete e[n])},"remove tile":function(t){var e=this.loaded[t.source],n=t.uid;e&&e[n]&&delete e[n]},"redo placement":function(t,e){var n=this.loaded[t.source],r=this.loading[t.source],o=t.uid;if(n&&n[o]){var i=n[o],s=i.redoPlacement(t.angle,t.pitch,t.showCollisionBoxes);s.result&&e(null,s.result,s.transferables)}else r&&r[o]&&(r[o].angle=t.angle)},"parse geojson":function(t,e){var n=function(n,r){if(g(r,!0),n)return e(n);if("object"!=("undefined"==typeof r?"undefined":u(r)))return e(new Error("Input data is not a valid GeoJSON object."));try{this.geoJSONIndexes[t.source]=t.cluster?d(t.superclusterOptions).load(r.features):f(r,t.geojsonVtOptions)}catch(n){return e(n)}e(null)}.bind(this);if(t.url)c.getJSON(t.url,n);else{if("string"!=typeof t.data)return e(new Error("Input data is not a valid GeoJSON object."));n(null,JSON.parse(t.data))}},"load geojson tile":function(t,e){var n=t.source,r=t.coord;if(!this.geoJSONIndexes[n])return e(null,null);var o=this.geoJSONIndexes[n].getTile(Math.min(r.z,t.maxZoom),r.x,r.y),i=o?new s(t):void 0;if(this.loaded[n]=this.loaded[n]||{},this.loaded[n][t.uid]=i,!o)return e(null,null);var a=new m(o.features);a.name="_geojsonTileLayer";var u=y({layers:{_geojsonTileLayer:a}});0===u.byteOffset&&u.byteLength===u.buffer.byteLength||(u=new Uint8Array(u)),i.parse(a,this.layerFamilies,this.actor,u.buffer,e)}})},{"../style/style_layer":48,"../util/actor":90,"../util/ajax":91,"../util/util":107,"./geojson_wrapper":30,"./worker_tile":41,"geojson-rewind":117,"geojson-vt":122,pbf:167,supercluster:173,"vector-tile":179,"vt-pbf":183}],41:[function(t,e,n){function r(t){this.coord=t.coord,this.uid=t.uid,this.zoom=t.zoom,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=t.overscaling,this.angle=t.angle,this.pitch=t.pitch,this.showCollisionBoxes=t.showCollisionBoxes}function o(t){for(var e in t.arrayGroups)for(var n=t.arrayGroups[e],r=0;r<n.length;r++){var o=n[r];for(var i in o){var s=o[i];for(var a in s)if(s[a].length>0)return!0}}return!1}function i(t){return t.serialize()}function s(t){var e=[];for(var n in t){var r=t[n];for(var o in r.arrayGroups)for(var i=r.arrayGroups[o],s=0;s<i.length;s++){var a=i[s];for(var u in a){var l=a[u];for(var c in l)e.push(l[c].arrayBuffer)}}}return e}function a(t){return t.id}var u=t("../data/feature_index"),l=t("../symbol/collision_tile"),c=t("../data/bucket"),p=t("../symbol/collision_box"),h=t("../util/dictionary_coder"),d=t("../util/util"),f=t("../symbol/symbol_instances"),g=t("../symbol/symbol_quads");e.exports=r,r.prototype.parse=function(t,e,n,r,m){function y(t,e){for(var n=0;n<t.length;n++){var r=t.feature(n);r.index=n;for(var o in e)e[o].filter(r)&&e[o].features.push(r)}}function v(t){if(t)return m(t);if(z++,2===z){for(var e=D.length-1;e>=0;e--)x(L,D[e]);b()}}function x(t,e){var n=Date.now();e.populateBuffers(S,B,k);var r=Date.now()-n;if("symbol"!==e.type)for(var o=0;o<e.features.length;o++){var i=e.features[o];I.insert(i,i.index,e.sourceLayerIndex,e.index)}e.features=null,C._total+=r,C[e.id]=(C[e.id]||0)+r}function b(){L.status="done",L.redoPlacementAfterDone&&(L.redoPlacement(L.angle,L.pitch,null),L.redoPlacementAfterDone=!1);var t=I.serialize(),e=S.serialize(),n=L.collisionBoxArray.serialize(),a=L.symbolInstancesArray.serialize(),u=L.symbolQuadsArray.serialize(),l=[r].concat(t.transferables).concat(e.transferables),c=A.filter(o);m(null,{buckets:c.map(i),bucketStats:C,featureIndex:t.data,collisionTile:e.data,collisionBoxArray:n,symbolInstancesArray:a,symbolQuadsArray:u,rawTileData:r},s(c).concat(l))}this.status="parsing",this.data=t,this.collisionBoxArray=new p,this.symbolInstancesArray=new f,this.symbolQuadsArray=new g;var j,_,E,w,S=new l(this.angle,this.pitch,this.collisionBoxArray),I=new u(this.coord,this.overscaling,S,t.layers),M=new h(t.layers?Object.keys(t.layers).sort():["_geojsonTileLayer"]),C={
_total:0},L=this,P={},T={},N=0;for(var R in e)_=e[R][0],_.source===this.source&&(_.ref||_.minzoom&&this.zoom<_.minzoom||_.maxzoom&&this.zoom>=_.maxzoom||_.layout&&"none"===_.layout.visibility||t.layers&&!t.layers[_.sourceLayer]||(w=c.create({layer:_,index:N++,childLayers:e[R],zoom:this.zoom,overscaling:this.overscaling,showCollisionBoxes:this.showCollisionBoxes,collisionBoxArray:this.collisionBoxArray,symbolQuadsArray:this.symbolQuadsArray,symbolInstancesArray:this.symbolInstancesArray,sourceLayerIndex:M.encode(_.sourceLayer||"_geojsonTileLayer")}),w.createFilter(),P[_.id]=w,t.layers&&(E=_.sourceLayer,T[E]=T[E]||{},T[E][_.id]=w)));if(t.layers)for(E in T)1===_.version&&d.warnOnce('Vector tile source "'+this.source+'" layer "'+E+'" does not use vector tile spec v2 and therefore may have some rendering errors.'),_=t.layers[E],_&&y(_,T[E]);else y(t,P);var A=[],D=this.symbolBuckets=[],O=[];I.bucketLayerIDs={};for(var F in P)w=P[F],0!==w.features.length&&(I.bucketLayerIDs[w.index]=w.childLayers.map(a),A.push(w),"symbol"===w.type?D.push(w):O.push(w));var k={},B={},z=0;if(D.length>0){for(j=D.length-1;j>=0;j--)D[j].updateIcons(k),D[j].updateFont(B);for(var G in B)B[G]=Object.keys(B[G]).map(Number);k=Object.keys(k),n.send("get glyphs",{uid:this.uid,stacks:B},function(t,e){B=e,v(t)}),k.length?n.send("get icons",{icons:k},function(t,e){k=e,v(t)}):v()}for(j=O.length-1;j>=0;j--)x(this,O[j]);return 0===D.length?b():void 0},r.prototype.redoPlacement=function(t,e,n){if("done"!==this.status)return this.redoPlacementAfterDone=!0,this.angle=t,{};for(var r=new l(t,e,this.collisionBoxArray),a=this.symbolBuckets,u=a.length-1;u>=0;u--)a[u].placeFeatures(r,n);var c=r.serialize(),p=a.filter(o);return{result:{buckets:p.map(i),collisionTile:c.data},transferables:s(p).concat(c.transferables)}}},{"../data/bucket":1,"../data/feature_index":7,"../symbol/collision_box":61,"../symbol/collision_tile":63,"../symbol/symbol_instances":72,"../symbol/symbol_quads":73,"../util/dictionary_coder":98,"../util/util":107}],42:[function(t,e,n){function r(){this.n=0,this.times=[]}e.exports=r,r.prototype.stopped=function(){return this.times=this.times.filter(function(t){return t.time>=(new Date).getTime()}),!this.times.length},r.prototype.set=function(t){return this.times.push({id:this.n,time:t+(new Date).getTime()}),this.n++},r.prototype.cancel=function(t){this.times=this.times.filter(function(e){return e.id!==t})}},{}],43:[function(t,e,n){function r(t){this.base=t,this.retina=a.devicePixelRatio>1;var e=this.retina?"@2x":"";s.getJSON(u(t,e,".json"),function(t,e){return t?void this.fire("error",{error:t}):(this.data=e,void(this.img&&this.fire("load")))}.bind(this)),s.getImage(u(t,e,".png"),function(t,e){if(t)return void this.fire("error",{error:t});for(var n=e.getData(),r=e.data=new Uint8Array(n.length),o=0;o<n.length;o+=4){var i=n[o+3]/255;r[o+0]=n[o+0]*i,r[o+1]=n[o+1]*i,r[o+2]=n[o+2]*i,r[o+3]=n[o+3]}this.img=e,this.data&&this.fire("load")}.bind(this))}function o(){}var i=t("../util/evented"),s=t("../util/ajax"),a=t("../util/browser"),u=t("../util/mapbox").normalizeSpriteURL;e.exports=r,r.prototype=Object.create(i),r.prototype.toJSON=function(){return this.base},r.prototype.loaded=function(){return!(!this.data||!this.img)},r.prototype.resize=function(){if(a.devicePixelRatio>1!==this.retina){var t=new r(this.base);t.on("load",function(){this.img=t.img,this.data=t.data,this.retina=t.retina}.bind(this))}},o.prototype={x:0,y:0,width:0,height:0,pixelRatio:1,sdf:!1},r.prototype.getSpritePosition=function(t){if(!this.loaded())return new o;var e=this.data&&this.data[t];return e&&this.img?e:new o}},{"../util/ajax":91,"../util/browser":92,"../util/evented":99,"../util/mapbox":104}],44:[function(t,e,n){var r=t("csscolorparser").parseCSSColor,o=t("../util/util"),i=t("./style_function"),s={};e.exports=function t(e){if(i.isFunctionDefinition(e))return o.extend({},e,{stops:e.stops.map(function(e){return[e[0],t(e[1])]})});if("string"==typeof e){if(!s[e]){var n=r(e);if(!n)throw new Error("Invalid color "+e);s[e]=[n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3]]}return s[e]}throw new Error("Invalid color "+e)}},{"../util/util":107,"./style_function":47,csscolorparser:114}],45:[function(t,e,n){function r(t,e,n){this.animationLoop=e||new g,this.dispatcher=new f(n||1,this),this.spriteAtlas=new u(512,512),this.lineAtlas=new l(256,512),this._layers={},this._order=[],this._groups=[],this.sources={},this.zoomHistory={},c.bindAll(["_forwardSourceEvent","_forwardTileEvent","_forwardLayerEvent","_redoPlacement"],this),this._resetUpdates();var r=function(t,e){if(t)return void this.fire("error",{error:t});if(!m.emitErrors(this,m(e))){this._loaded=!0,this.stylesheet=e,this.updateClasses();var n=e.sources;for(var r in n)this.addSource(r,n[r]);e.sprite&&(this.sprite=new s(e.sprite),this.sprite.on("load",this.fire.bind(this,"change"))),this.glyphSource=new a(e.glyphs),this._resolve(),this.fire("load")}}.bind(this);"string"==typeof t?p.getJSON(h(t),r):d.frame(r.bind(this,null,t)),this.on("source.load",function(t){var e=t.source;if(e&&e.vectorLayerIds)for(var n in this._layers){var r=this._layers[n];r.source===e.id&&this._validateLayer(r)}})}var o=t("../util/evented"),i=t("./style_layer"),s=t("./image_sprite"),a=t("../symbol/glyph_source"),u=t("../symbol/sprite_atlas"),l=t("../render/line_atlas"),c=t("../util/util"),p=t("../util/ajax"),h=t("../util/mapbox").normalizeStyleURL,d=t("../util/browser"),f=t("../util/dispatcher"),g=t("./animation_loop"),m=t("./validate_style"),y=t("../source/source"),v=t("./style_spec"),x=t("./style_function");e.exports=r,r.prototype=c.inherit(o,{_loaded:!1,_validateLayer:function(t){var e=this.sources[t.source];t.sourceLayer&&e&&e.vectorLayerIds&&-1===e.vectorLayerIds.indexOf(t.sourceLayer)&&this.fire("error",{error:new Error('Source layer "'+t.sourceLayer+'" does not exist on source "'+e.id+'" as specified by style layer "'+t.id+'"')})},loaded:function(){if(!this._loaded)return!1;for(var t in this.sources)if(!this.sources[t].loaded())return!1;return!this.sprite||this.sprite.loaded()},_resolve:function(){var t,e;this._layers={},this._order=this.stylesheet.layers.map(function(t){return t.id});for(var n=0;n<this.stylesheet.layers.length;n++)e=this.stylesheet.layers[n],e.ref||(t=i.create(e),this._layers[t.id]=t,t.on("error",this._forwardLayerEvent));for(var r=0;r<this.stylesheet.layers.length;r++)if(e=this.stylesheet.layers[r],e.ref){var o=this.getLayer(e.ref);t=i.create(e,o),this._layers[t.id]=t,t.on("error",this._forwardLayerEvent)}this._groupLayers(),this._updateWorkerLayers()},_groupLayers:function(){var t;this._groups=[];for(var e=0;e<this._order.length;++e){var n=this._layers[this._order[e]];t&&n.source===t.source||(t=[],t.source=n.source,this._groups.push(t)),t.push(n)}},_updateWorkerLayers:function(t){this.dispatcher.broadcast(t?"update layers":"set layers",this._serializeLayers(t))},_serializeLayers:function(t){t=t||this._order;for(var e=[],n={includeRefProperties:!0},r=0;r<t.length;r++)e.push(this._layers[t[r]].serialize(n));return e},_applyClasses:function(t,e){if(this._loaded){t=t||[],e=e||{transition:!0};var n=this.stylesheet.transition||{},r=this._updates.allPaintProps?this._layers:this._updates.paintProps;for(var o in r){var i=this._layers[o],s=this._updates.paintProps[o];if(this._updates.allPaintProps||s.all)i.updatePaintTransitions(t,e,n,this.animationLoop);else for(var a in s)this._layers[o].updatePaintTransition(a,t,e,n,this.animationLoop)}}},_recalculate:function(t){for(var e in this.sources)this.sources[e].used=!1;this._updateZoomHistory(t),this.rasterFadeDuration=300;for(var n in this._layers){var r=this._layers[n];r.recalculate(t,this.zoomHistory),!r.isHidden(t)&&r.source&&(this.sources[r.source].used=!0)}var o=300;Math.floor(this.z)!==Math.floor(t)&&this.animationLoop.set(o),this.z=t,this.fire("zoom")},_updateZoomHistory:function(t){var e=this.zoomHistory;void 0===e.lastIntegerZoom&&(e.lastIntegerZoom=Math.floor(t),e.lastIntegerZoomTime=0,e.lastZoom=t),Math.floor(e.lastZoom)<Math.floor(t)?(e.lastIntegerZoom=Math.floor(t),e.lastIntegerZoomTime=Date.now()):Math.floor(e.lastZoom)>Math.floor(t)&&(e.lastIntegerZoom=Math.floor(t+1),e.lastIntegerZoomTime=Date.now()),e.lastZoom=t},_checkLoaded:function(){if(!this._loaded)throw new Error("Style is not done loading")},update:function(t,e){if(!this._updates.changed)return this;if(this._updates.allLayers)this._groupLayers(),this._updateWorkerLayers();else{var n=Object.keys(this._updates.layers);n.length&&this._updateWorkerLayers(n)}var r,o=Object.keys(this._updates.sources);for(r=0;r<o.length;r++)this._reloadSource(o[r]);for(r=0;r<this._updates.events.length;r++){var i=this._updates.events[r];this.fire(i[0],i[1])}return this._applyClasses(t,e),this._updates.changed&&this.fire("change"),this._resetUpdates(),this},_resetUpdates:function(){this._updates={events:[],layers:{},sources:{},paintProps:{}}},addSource:function(t,e){if(this._checkLoaded(),void 0!==this.sources[t])throw new Error("There is already a source with this ID");return!y.is(e)&&this._handleErrors(m.source,"sources."+t,e)?this:(e=y.create(e),this.sources[t]=e,e.id=t,e.style=this,e.dispatcher=this.dispatcher,e.on("load",this._forwardSourceEvent).on("error",this._forwardSourceEvent).on("change",this._forwardSourceEvent).on("tile.add",this._forwardTileEvent).on("tile.load",this._forwardTileEvent).on("tile.error",this._forwardTileEvent).on("tile.remove",this._forwardTileEvent).on("tile.stats",this._forwardTileEvent),this._updates.events.push(["source.add",{source:e}]),this._updates.changed=!0,this)},removeSource:function(t){if(this._checkLoaded(),void 0===this.sources[t])throw new Error("There is no source with this ID");var e=this.sources[t];return delete this.sources[t],e.off("load",this._forwardSourceEvent).off("error",this._forwardSourceEvent).off("change",this._forwardSourceEvent).off("tile.add",this._forwardTileEvent).off("tile.load",this._forwardTileEvent).off("tile.error",this._forwardTileEvent).off("tile.remove",this._forwardTileEvent).off("tile.stats",this._forwardTileEvent),this._updates.events.push(["source.remove",{source:e}]),this._updates.changed=!0,this},getSource:function(t){return this.sources[t]},addLayer:function(t,e){if(this._checkLoaded(),!(t instanceof i)){if(this._handleErrors(m.layer,"layers."+t.id,t,!1,{arrayIndex:-1}))return this;var n=t.ref&&this.getLayer(t.ref);t=i.create(t,n)}return this._validateLayer(t),t.on("error",this._forwardLayerEvent),this._layers[t.id]=t,this._order.splice(e?this._order.indexOf(e):1/0,0,t.id),this._updates.allLayers=!0,t.source&&(this._updates.sources[t.source]=!0),this._updates.events.push(["layer.add",{layer:t}]),this.updateClasses(t.id)},removeLayer:function(t){this._checkLoaded();var e=this._layers[t];if(void 0===e)throw new Error("There is no layer with this ID");for(var n in this._layers)this._layers[n].ref===t&&this.removeLayer(n);return e.off("error",this._forwardLayerEvent),delete this._layers[t],this._order.splice(this._order.indexOf(t),1),this._updates.allLayers=!0,this._updates.events.push(["layer.remove",{layer:e}]),this._updates.changed=!0,this},getLayer:function(t){return this._layers[t]},getReferentLayer:function(t){var e=this.getLayer(t);return e.ref&&(e=this.getLayer(e.ref)),e},setLayerZoomRange:function(t,e,n){this._checkLoaded();var r=this.getReferentLayer(t);return r.minzoom===e&&r.maxzoom===n?this:(null!=e&&(r.minzoom=e),null!=n&&(r.maxzoom=n),this._updateLayer(r))},setFilter:function(t,e){this._checkLoaded();var n=this.getReferentLayer(t);return this._handleErrors(m.filter,"layers."+n.id+".filter",e)?this:c.deepEqual(n.filter,e)?this:(n.filter=c.clone(e),this._updateLayer(n))},getFilter:function(t){return this.getReferentLayer(t).filter},setLayoutProperty:function(t,e,n){this._checkLoaded();var r=this.getReferentLayer(t);return c.deepEqual(r.getLayoutProperty(e),n)?this:(r.setLayoutProperty(e,n),this._updateLayer(r))},getLayoutProperty:function(t,e){return this.getReferentLayer(t).getLayoutProperty(e)},setPaintProperty:function(t,e,n,r){this._checkLoaded();var o=this.getLayer(t);if(c.deepEqual(o.getPaintProperty(e,r),n))return this;var i=o.isPaintValueFeatureConstant(e);o.setPaintProperty(e,n,r);var s=!(n&&x.isFunctionDefinition(n)&&"$zoom"!==n.property&&void 0!==n.property);return s&&i||(this._updates.layers[t]=!0,o.source&&(this._updates.sources[o.source]=!0)),this.updateClasses(t,e)},getPaintProperty:function(t,e,n){return this.getLayer(t).getPaintProperty(e,n)},updateClasses:function(t,e){if(this._updates.changed=!0,t){var n=this._updates.paintProps;n[t]||(n[t]={}),n[t][e||"all"]=!0}else this._updates.allPaintProps=!0;return this},serialize:function(){return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:c.mapObject(this.sources,function(t){return t.serialize()}),layers:this._order.map(function(t){return this._layers[t].serialize()},this)},function(t){return void 0!==t})},_updateLayer:function(t){return this._updates.layers[t.id]=!0,t.source&&(this._updates.sources[t.source]=!0),this._updates.changed=!0,this},_flattenRenderedFeatures:function(t){for(var e=[],n=this._order.length-1;n>=0;n--)for(var r=this._order[n],o=0;o<t.length;o++){var i=t[o][r];if(i)for(var s=0;s<i.length;s++)e.push(i[s])}return e},queryRenderedFeatures:function(t,e,n,r){e&&e.filter&&this._handleErrors(m.filter,"queryRenderedFeatures.filter",e.filter,!0);var o=[];for(var i in this.sources){var s=this.sources[i];s.queryRenderedFeatures&&o.push(s.queryRenderedFeatures(t,e,n,r))}return this._flattenRenderedFeatures(o)},querySourceFeatures:function(t,e){e&&e.filter&&this._handleErrors(m.filter,"querySourceFeatures.filter",e.filter,!0);var n=this.getSource(t);return n&&n.querySourceFeatures?n.querySourceFeatures(e):[]},_handleErrors:function(t,e,n,r,o){var i=r?m.throwErrors:m.emitErrors,s=t.call(m,c.extend({key:e,style:this.serialize(),value:n,styleSpec:v},o));return i.call(m,this,s)},_remove:function(){this.dispatcher.remove()},_reloadSource:function(t){this.sources[t].reload()},_updateSources:function(t){for(var e in this.sources)this.sources[e].update(t)},_redoPlacement:function(){for(var t in this.sources)this.sources[t].redoPlacement&&this.sources[t].redoPlacement()},_forwardSourceEvent:function(t){this.fire("source."+t.type,c.extend({source:t.target},t))},_forwardTileEvent:function(t){this.fire(t.type,c.extend({source:t.target},t))},_forwardLayerEvent:function(t){this.fire("layer."+t.type,c.extend({layer:{id:t.target.id}},t))},"get sprite json":function(t,e){var n=this.sprite;n.loaded()?e(null,{sprite:n.data,retina:n.retina}):n.on("load",function(){e(null,{sprite:n.data,retina:n.retina})})},"get icons":function(t,e){var n=this.sprite,r=this.spriteAtlas;n.loaded()?(r.setSprite(n),r.addIcons(t.icons,e)):n.on("load",function(){r.setSprite(n),r.addIcons(t.icons,e)})},"get glyphs":function(t,e){function n(t,n,r){t&&console.error(t),i[r]=n,o--,0===o&&e(null,i)}var r=t.stacks,o=Object.keys(r).length,i={};for(var s in r)this.glyphSource.getSimpleGlyphs(s,r[s],t.uid,n)}})},{"../render/line_atlas":25,"../source/source":34,"../symbol/glyph_source":66,"../symbol/sprite_atlas":71,"../util/ajax":91,"../util/browser":92,"../util/dispatcher":94,"../util/evented":99,"../util/mapbox":104,"../util/util":107,"./animation_loop":42,"./image_sprite":43,"./style_function":47,"./style_layer":48,"./style_spec":55,"./validate_style":57}],46:[function(t,e,n){function r(t,e){this.type=t.type,this.transitionable=t.transition,this.value=a.clone(e),this.isFunction=i.isFunctionDefinition(e),this.json=JSON.stringify(this.value);var n="color"===this.type?s(this.value):e;if(this.calculate=i[t.function||"piecewise-constant"](n),this.isFeatureConstant=this.calculate.isFeatureConstant,this.isZoomConstant=this.calculate.isZoomConstant,"piecewise-constant"===t.function&&t.transition&&(this.calculate=o(this.calculate)),!this.isFeatureConstant&&!this.isZoomConstant){this.stopZoomLevels=[];for(var r=[],u=this.value.stops,l=0;l<this.value.stops.length;l++){var c=u[l][0].zoom;this.stopZoomLevels.indexOf(c)<0&&(this.stopZoomLevels.push(c),r.push([c,r.length]))}this.calculateInterpolationT=i.interpolated({stops:r,base:e.base})}}function o(t){return function(e,n){var r,o,i,s=e.zoom,a=e.zoomHistory,u=e.duration,l=s%1,c=Math.min((Date.now()-a.lastIntegerZoomTime)/u,1),p=1,h=1;return s>a.lastIntegerZoom?(r=l+(1-l)*c,p*=2,o=t({zoom:s-1},n),i=t({zoom:s},n)):(r=1-(1-c)*l,i=t({zoom:s},n),o=t({zoom:s+1},n),p/=2),void 0===o||void 0===i?void 0:{from:o,fromScale:p,to:i,toScale:h,t:r}}}var i=t("./style_function"),s=t("./parse_color"),a=t("../util/util");e.exports=r},{"../util/util":107,"./parse_color":44,"./style_function":47}],47:[function(t,e,n){var r=t("mapbox-gl-function");n.interpolated=function(t){var e=r.interpolated(t),n=function(t,n){return e(t&&t.zoom,n||{})};return n.isFeatureConstant=e.isFeatureConstant,n.isZoomConstant=e.isZoomConstant,n},n["piecewise-constant"]=function(t){var e=r["piecewise-constant"](t),n=function(t,n){return e(t&&t.zoom,n||{})};return n.isFeatureConstant=e.isFeatureConstant,n.isZoomConstant=e.isZoomConstant,n},n.isFunctionDefinition=r.isFunctionDefinition},{"mapbox-gl-function":138}],48:[function(t,e,n){function r(t,e){this.set(t,e)}function o(t){return t.value}var i=t("../util/util"),s=t("./style_transition"),a=t("./style_declaration"),u=t("./style_spec"),l=t("./validate_style"),c=t("./parse_color"),p=t("../util/evented");e.exports=r;var h="-transition";r.create=function(e,n){var r={background:t("./style_layer/background_style_layer"),circle:t("./style_layer/circle_style_layer"),fill:t("./style_layer/fill_style_layer"),line:t("./style_layer/line_style_layer"),raster:t("./style_layer/raster_style_layer"),symbol:t("./style_layer/symbol_style_layer")};return new r[(n||e).type](e,n)},r.prototype=i.inherit(p,{set:function(t,e){this.id=t.id,this.ref=t.ref,this.metadata=t.metadata,this.type=(e||t).type,this.source=(e||t).source,this.sourceLayer=(e||t)["source-layer"],this.minzoom=(e||t).minzoom,this.maxzoom=(e||t).maxzoom,this.filter=(e||t).filter,this.paint={},this.layout={},this._paintSpecifications=u["paint_"+this.type],this._layoutSpecifications=u["layout_"+this.type],this._paintTransitions={},this._paintTransitionOptions={},this._paintDeclarations={},this._layoutDeclarations={},this._layoutFunctions={};var n,r;for(var o in t){var i=o.match(/^paint(?:\.(.*))?$/);if(i){var s=i[1]||"";for(n in t[o])this.setPaintProperty(n,t[o][n],s)}}if(this.ref)this._layoutDeclarations=e._layoutDeclarations;else for(r in t.layout)this.setLayoutProperty(r,t.layout[r]);for(n in this._paintSpecifications)this.paint[n]=this.getPaintValue(n);for(r in this._layoutSpecifications)this._updateLayoutValue(r)},setLayoutProperty:function(t,e){if(null==e)delete this._layoutDeclarations[t];else{var n="layers."+this.id+".layout."+t;if(this._handleErrors(l.layoutProperty,n,t,e))return;this._layoutDeclarations[t]=new a(this._layoutSpecifications[t],e)}this._updateLayoutValue(t)},getLayoutProperty:function(t){return this._layoutDeclarations[t]&&this._layoutDeclarations[t].value},getLayoutValue:function(t,e,n){var r=this._layoutSpecifications[t],o=this._layoutDeclarations[t];return o?o.calculate(e,n):r.default},setPaintProperty:function(t,e,n){var r="layers."+this.id+(n?'["paint.'+n+'"].':".paint.")+t;if(i.endsWith(t,h))if(this._paintTransitionOptions[n||""]||(this._paintTransitionOptions[n||""]={}),null===e||void 0===e)delete this._paintTransitionOptions[n||""][t];else{if(this._handleErrors(l.paintProperty,r,t,e))return;this._paintTransitionOptions[n||""][t]=e}else if(this._paintDeclarations[n||""]||(this._paintDeclarations[n||""]={}),null===e||void 0===e)delete this._paintDeclarations[n||""][t];else{if(this._handleErrors(l.paintProperty,r,t,e))return;this._paintDeclarations[n||""][t]=new a(this._paintSpecifications[t],e)}},getPaintProperty:function(t,e){return e=e||"",i.endsWith(t,h)?this._paintTransitionOptions[e]&&this._paintTransitionOptions[e][t]:this._paintDeclarations[e]&&this._paintDeclarations[e][t]&&this._paintDeclarations[e][t].value},getPaintValue:function(t,e,n){var r=this._paintSpecifications[t],o=this._paintTransitions[t];return o?o.calculate(e,n):"color"===r.type&&r.default?c(r.default):r.default},getPaintValueStopZoomLevels:function(t){var e=this._paintTransitions[t];return e?e.declaration.stopZoomLevels:[]},getPaintInterpolationT:function(t,e){var n=this._paintTransitions[t];return n.declaration.calculateInterpolationT({zoom:e})},isPaintValueFeatureConstant:function(t){var e=this._paintTransitions[t];return!e||e.declaration.isFeatureConstant},isPaintValueZoomConstant:function(t){var e=this._paintTransitions[t];return!e||e.declaration.isZoomConstant},isHidden:function(t){return!!(this.minzoom&&t<this.minzoom)||(!!(this.maxzoom&&t>=this.maxzoom)||("none"===this.layout.visibility||0===this.paint[this.type+"-opacity"]))},updatePaintTransitions:function(t,e,n,r){for(var o=i.extend({},this._paintDeclarations[""]),s=0;s<t.length;s++)i.extend(o,this._paintDeclarations[t[s]]);var a;for(a in o)this._applyPaintDeclaration(a,o[a],e,n,r);for(a in this._paintTransitions)a in o||this._applyPaintDeclaration(a,null,e,n,r)},updatePaintTransition:function(t,e,n,r,o){for(var i=this._paintDeclarations[""][t],s=0;s<e.length;s++){var a=this._paintDeclarations[e[s]];a&&a[t]&&(i=a[t])}this._applyPaintDeclaration(t,i,n,r,o)},recalculate:function(t,e){for(var n in this._paintTransitions)this.paint[n]=this.getPaintValue(n,{zoom:t,zoomHistory:e});for(var r in this._layoutFunctions)this.layout[r]=this.getLayoutValue(r,{zoom:t,zoomHistory:e})},serialize:function(t){var e={id:this.id,ref:this.ref,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom};for(var n in this._paintDeclarations){var r=""===n?"paint":"paint."+n;e[r]=i.mapObject(this._paintDeclarations[n],o)}return(!this.ref||t&&t.includeRefProperties)&&i.extend(e,{type:this.type,source:this.source,"source-layer":this.sourceLayer,filter:this.filter,layout:i.mapObject(this._layoutDeclarations,o)}),i.filterObject(e,function(t,e){return void 0!==t&&!("layout"===e&&!Object.keys(t).length)})},_applyPaintDeclaration:function(t,e,n,r,o){var u=n.transition?this._paintTransitions[t]:void 0,l=this._paintSpecifications[t];if(null!==e&&void 0!==e||(e=new a(l,l.default)),!u||u.declaration.json!==e.json){var c=i.extend({duration:300,delay:0},r,this.getPaintProperty(t+h)),p=this._paintTransitions[t]=new s(l,e,u,c);p.instant()||(p.loopID=o.set(p.endTime-Date.now())),u&&o.cancel(u.loopID)}},_updateLayoutValue:function(t){var e=this._layoutDeclarations[t];e&&e.isFunction?this._layoutFunctions[t]=!0:(delete this._layoutFunctions[t],this.layout[t]=this.getLayoutValue(t))},_handleErrors:function(t,e,n,r){return l.emitErrors(this,t.call(l,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:u,style:{glyphs:!0,sprite:!0}}))}})},{"../util/evented":99,"../util/util":107,"./parse_color":44,"./style_declaration":46,"./style_layer/background_style_layer":49,"./style_layer/circle_style_layer":50,"./style_layer/fill_style_layer":51,"./style_layer/line_style_layer":52,"./style_layer/raster_style_layer":53,"./style_layer/symbol_style_layer":54,"./style_spec":55,"./style_transition":56,"./validate_style":57}],49:[function(t,e,n){function r(){i.apply(this,arguments)}var o=t("../../util/util"),i=t("../style_layer");e.exports=r,r.prototype=o.inherit(i,{})},{"../../util/util":107,"../style_layer":48}],50:[function(t,e,n){function r(){i.apply(this,arguments)}var o=t("../../util/util"),i=t("../style_layer");e.exports=r,r.prototype=o.inherit(i,{})},{"../../util/util":107,"../style_layer":48}],51:[function(t,e,n){function r(){i.apply(this,arguments)}var o=t("../../util/util"),i=t("../style_layer");r.prototype=o.inherit(i,{getPaintValue:function(t,e,n){return"fill-outline-color"===t&&void 0===this.getPaintProperty("fill-outline-color")?i.prototype.getPaintValue.call(this,"fill-color",e,n):i.prototype.getPaintValue.call(this,t,e,n)},getPaintValueStopZoomLevels:function(t){return"fill-outline-color"===t&&void 0===this.getPaintProperty("fill-outline-color")?i.prototype.getPaintValueStopZoomLevels.call(this,"fill-color"):i.prototype.getPaintValueStopZoomLevels.call(this,arguments)},getPaintInterpolationT:function(t,e){return"fill-outline-color"===t&&void 0===this.getPaintProperty("fill-outline-color")?i.prototype.getPaintInterpolationT.call(this,"fill-color",e):i.prototype.getPaintInterpolationT.call(this,t,e)},isPaintValueFeatureConstant:function(t){return"fill-outline-color"===t&&void 0===this.getPaintProperty("fill-outline-color")?i.prototype.isPaintValueFeatureConstant.call(this,"fill-color"):i.prototype.isPaintValueFeatureConstant.call(this,t)},isPaintValueZoomConstant:function(t){return"fill-outline-color"===t&&void 0===this.getPaintProperty("fill-outline-color")?i.prototype.isPaintValueZoomConstant.call(this,"fill-color"):i.prototype.isPaintValueZoomConstant.call(this,t)}}),e.exports=r},{"../../util/util":107,"../style_layer":48}],52:[function(t,e,n){function r(){i.apply(this,arguments)}var o=t("../../util/util"),i=t("../style_layer");e.exports=r,r.prototype=o.inherit(i,{getPaintValue:function(t,e,n){var r=i.prototype.getPaintValue.apply(this,arguments);if(r&&"line-dasharray"===t){var o=Math.floor(e.zoom);this._flooredZoom!==o&&(this._flooredZoom=o,this._flooredLineWidth=this.getPaintValue("line-width",e,n)),r.fromScale*=this._flooredLineWidth,r.toScale*=this._flooredLineWidth}return r}})},{"../../util/util":107,"../style_layer":48}],53:[function(t,e,n){function r(){i.apply(this,arguments)}var o=t("../../util/util"),i=t("../style_layer");e.exports=r,r.prototype=o.inherit(i,{})},{"../../util/util":107,"../style_layer":48}],54:[function(t,e,n){function r(){i.apply(this,arguments)}var o=t("../../util/util"),i=t("../style_layer");e.exports=r,r.prototype=o.inherit(i,{isHidden:function(){if(i.prototype.isHidden.apply(this,arguments))return!0;var t=0===this.paint["text-opacity"]||!this.layout["text-field"],e=0===this.paint["icon-opacity"]||!this.layout["icon-image"];return!(!t||!e)},getLayoutValue:function(t,e,n){return"text-rotation-alignment"===t&&"line"===this.getLayoutValue("symbol-placement",e,n)&&!this.getLayoutProperty("text-rotation-alignment")||"icon-rotation-alignment"===t&&"line"===this.getLayoutValue("symbol-placement",e,n)&&!this.getLayoutProperty("icon-rotation-alignment")?"map":i.prototype.getLayoutValue.apply(this,arguments)}})},{"../../util/util":107,"../style_layer":48}],55:[function(t,e,n){e.exports=t("mapbox-gl-style-spec/reference/latest")},{"mapbox-gl-style-spec/reference/latest":162}],56:[function(t,e,n){function r(t,e,n,r){this.declaration=e,this.startTime=this.endTime=(new Date).getTime(),"piecewise-constant"===t.function&&t.transition?this.interp=o:this.interp=s[t.type],this.oldTransition=n,this.duration=r.duration||0,this.delay=r.delay||0,this.instant()||(this.endTime=this.startTime+this.duration+this.delay,this.ease=i.easeCubicInOut),n&&n.endTime<=this.startTime&&delete n.oldTransition}function o(t,e,n){return void 0===(t&&t.to)||void 0===(e&&e.to)?void 0:{from:t.to,fromScale:t.toScale,to:e.to,toScale:e.toScale,t:n}}var i=t("../util/util"),s=t("../util/interpolate");e.exports=r,r.prototype.instant=function(){return!this.oldTransition||!this.interp||0===this.duration&&0===this.delay},r.prototype.calculate=function(t,e){var n=this.declaration.calculate(i.extend({},t,{duration:this.duration}),e);if(this.instant())return n;var r=t.time||Date.now();if(r<this.endTime){var o=this.oldTransition.calculate(i.extend({},t,{time:this.startTime}),e),s=this.ease((r-this.startTime-this.delay)/this.duration);n=this.interp(o,n,s)}return n}},{"../util/interpolate":101,"../util/util":107}],57:[function(t,e,n){e.exports=t("mapbox-gl-style-spec/lib/validate_style.min"),e.exports.emitErrors=function(t,e){if(e&&e.length){for(var n=0;n<e.length;n++)t.fire("error",{error:new Error(e[n].message)});return!0}return!1},e.exports.throwErrors=function(t,e){if(e)for(var n=0;n<e.length;n++)throw new Error(e[n].message)}},{"mapbox-gl-style-spec/lib/validate_style.min":161}],58:[function(t,e,n){function r(t,e,n,r){this.x=t,this.y=e,this.angle=n,void 0!==r&&(this.segment=r)}var o=t("point-geometry");e.exports=r,r.prototype=Object.create(o.prototype),r.prototype.clone=function(){return new r(this.x,this.y,this.angle,this.segment)}},{"point-geometry":169}],59:[function(t,e,n){function r(t,e,n,r,o){if(void 0===e.segment)return!0;for(var i=e,s=e.segment+1,a=0;a>-n/2;){if(s--,0>s)return!1;a-=t[s].dist(i),i=t[s]}a+=t[s].dist(t[s+1]),s++;for(var u=[],l=0;n/2>a;){var c=t[s-1],p=t[s],h=t[s+1];if(!h)return!1;var d=c.angleTo(p)-p.angleTo(h);for(d=Math.abs((d+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:a,angleDelta:d}),l+=d;a-u[0].distance>r;)l-=u.shift().angleDelta;if(l>o)return!1;s++,a+=p.dist(h)}return!0}e.exports=r},{}],60:[function(t,e,n){function r(t,e,n,r,i){for(var s=[],a=0;a<t.length;a++)for(var u,l=t[a],c=0;c<l.length-1;c++){var p=l[c],h=l[c+1];p.x<e&&h.x<e||(p.x<e?p=new o(e,p.y+(h.y-p.y)*((e-p.x)/(h.x-p.x)))._round():h.x<e&&(h=new o(e,p.y+(h.y-p.y)*((e-p.x)/(h.x-p.x)))._round()),p.y<n&&h.y<n||(p.y<n?p=new o(p.x+(h.x-p.x)*((n-p.y)/(h.y-p.y)),n)._round():h.y<n&&(h=new o(p.x+(h.x-p.x)*((n-p.y)/(h.y-p.y)),n)._round()),p.x>=r&&h.x>=r||(p.x>=r?p=new o(r,p.y+(h.y-p.y)*((r-p.x)/(h.x-p.x)))._round():h.x>=r&&(h=new o(r,p.y+(h.y-p.y)*((r-p.x)/(h.x-p.x)))._round()),p.y>=i&&h.y>=i||(p.y>=i?p=new o(p.x+(h.x-p.x)*((i-p.y)/(h.y-p.y)),i)._round():h.y>=i&&(h=new o(p.x+(h.x-p.x)*((i-p.y)/(h.y-p.y)),i)._round()),u&&p.equals(u[u.length-1])||(u=[p],s.push(u)),u.push(h)))))}return s}var o=t("point-geometry");e.exports=r},{"point-geometry":169}],61:[function(t,e,n){var r=t("../util/struct_array"),o=t("../util/util"),i=t("point-geometry"),s=e.exports=new r({members:[{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Float32",name:"maxScale"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"bbox0"},{type:"Int16",name:"bbox1"},{type:"Int16",name:"bbox2"},{type:"Int16",name:"bbox3"},{type:"Float32",name:"placementScale"}]});o.extendAll(s.prototype.StructType.prototype,{get anchorPoint(){return new i(this.anchorPointX,this.anchorPointY)}})},{"../util/struct_array":105,"../util/util":107,"point-geometry":169}],62:[function(t,e,n){function r(t,e,n,r,o,i,s,a,u,l,c){var p=s.top*a-u,h=s.bottom*a+u,d=s.left*a-u,f=s.right*a+u;if(this.boxStartIndex=t.length,l){var g=h-p,m=f-d;if(g>0)if(g=Math.max(10*a,g),c){var y=e[n.segment+1].sub(e[n.segment])._unit()._mult(m),v=[n.sub(y),n.add(y)];this._addLineCollisionBoxes(t,v,n,0,m,g,r,o,i)}else this._addLineCollisionBoxes(t,e,n,n.segment,m,g,r,o,i)}else t.emplaceBack(n.x,n.y,d,p,f,h,1/0,r,o,i,0,0,0,0,0);this.boxEndIndex=t.length}e.exports=r,r.prototype._addLineCollisionBoxes=function(t,e,n,r,o,i,s,a,u){var l=i/2,c=Math.floor(o/l),p=-i/2,h=this.boxes,d=n,f=r+1,g=p;do{if(f--,0>f)return h;g-=e[f].dist(d),d=e[f]}while(g>-o/2);for(var m=e[f].dist(e[f+1]),y=0;c>y;y++){for(var v=-o/2+y*l;v>g+m;){if(g+=m,f++,f+1>=e.length)return h;m=e[f].dist(e[f+1])}var x=v-g,b=e[f],j=e[f+1],_=j.sub(b)._unit()._mult(x)._add(b)._round(),E=Math.max(Math.abs(v-p)-l/2,0),w=o/2/E;t.emplaceBack(_.x,_.y,-i/2,-i/2,i/2,i/2,w,s,a,u,0,0,0,0,0)}return h}},{}],63:[function(t,e,n){function r(t,e,n){if("object"==("undefined"==typeof t?"undefined":u(t))){var r=t;n=e,t=r.angle,e=r.pitch,this.grid=new s(r.grid),this.ignoredGrid=new s(r.ignoredGrid)}else this.grid=new s(i,12,6),this.ignoredGrid=new s(i,12,0);this.angle=t,this.pitch=e;var o=Math.sin(t),a=Math.cos(t);if(this.rotationMatrix=[a,-o,o,a],this.reverseRotationMatrix=[a,o,-o,a],this.yStretch=1/Math.cos(e/180*Math.PI),this.yStretch=Math.pow(this.yStretch,1.3),
this.collisionBoxArray=n,0===n.length){n.emplaceBack();var l=32767;n.emplaceBack(0,0,0,-l,0,l,l,0,0,0,0,0,0,0,0,0),n.emplaceBack(i,0,0,-l,0,l,l,0,0,0,0,0,0,0,0,0),n.emplaceBack(0,0,-l,0,l,0,l,0,0,0,0,0,0,0,0,0),n.emplaceBack(0,i,-l,0,l,0,l,0,0,0,0,0,0,0,0,0)}this.tempCollisionBox=n.get(0),this.edges=[n.get(1),n.get(2),n.get(3),n.get(4)]}var o=t("point-geometry"),i=t("../data/bucket").EXTENT,s=t("grid-index");e.exports=r,r.prototype.serialize=function(){var t={angle:this.angle,pitch:this.pitch,grid:this.grid.toArrayBuffer(),ignoredGrid:this.ignoredGrid.toArrayBuffer()};return{data:t,transferables:[t.grid,t.ignoredGrid]}},r.prototype.minScale=.25,r.prototype.maxScale=2,r.prototype.placeCollisionFeature=function(t,e,n){for(var r=this.collisionBoxArray,i=this.minScale,s=this.rotationMatrix,a=this.yStretch,u=t.boxStartIndex;u<t.boxEndIndex;u++){var l=r.get(u),c=l.anchorPoint._matMult(s),p=c.x,h=c.y,d=p+l.x1,f=h+l.y1*a,g=p+l.x2,m=h+l.y2*a;if(l.bbox0=d,l.bbox1=f,l.bbox2=g,l.bbox3=m,!e)for(var y=this.grid.query(d,f,g,m),v=0;v<y.length;v++){var x=r.get(y[v]),b=x.anchorPoint._matMult(s);if(i=this.getPlacementScale(i,c,l,b,x),i>=this.maxScale)return i}if(n){var j;if(this.angle){var _=this.reverseRotationMatrix,E=new o(l.x1,l.y1).matMult(_),w=new o(l.x2,l.y1).matMult(_),S=new o(l.x1,l.y2).matMult(_),I=new o(l.x2,l.y2).matMult(_);j=this.tempCollisionBox,j.anchorPointX=l.anchorPoint.x,j.anchorPointY=l.anchorPoint.y,j.x1=Math.min(E.x,w.x,S.x,I.x),j.y1=Math.min(E.y,w.x,S.x,I.x),j.x2=Math.max(E.x,w.x,S.x,I.x),j.y2=Math.max(E.y,w.x,S.x,I.x),j.maxScale=l.maxScale}else j=l;for(var M=0;M<this.edges.length;M++){var C=this.edges[M];if(i=this.getPlacementScale(i,l.anchorPoint,j,C.anchorPoint,C),i>=this.maxScale)return i}}}return i},r.prototype.queryRenderedSymbols=function(t,e,n,r,i){var s={},a=[],u=this.collisionBoxArray,l=this.rotationMatrix,c=new o(t,e)._matMult(l),p=this.tempCollisionBox;p.anchorX=c.x,p.anchorY=c.y,p.x1=0,p.y1=0,p.x2=n-t,p.y2=r-e,p.maxScale=i,i=p.maxScale;for(var h=[c.x+p.x1/i,c.y+p.y1/i*this.yStretch,c.x+p.x2/i,c.y+p.y2/i*this.yStretch],d=this.grid.query(h[0],h[1],h[2],h[3]),f=this.ignoredGrid.query(h[0],h[1],h[2],h[3]),g=0;g<f.length;g++)d.push(f[g]);for(var m=0;m<d.length;m++){var y=u.get(d[m]),v=y.sourceLayerIndex,x=y.featureIndex;if(void 0===s[v]&&(s[v]={}),!s[v][x]){var b=y.anchorPoint.matMult(l),j=this.getPlacementScale(this.minScale,c,p,b,y);j>=i&&(s[v][x]=!0,a.push(d[m]))}}return a},r.prototype.getPlacementScale=function(t,e,n,r,o){var i=e.x-r.x,s=e.y-r.y,a=(o.x1-n.x2)/i,u=(o.x2-n.x1)/i,l=(o.y1-n.y2)*this.yStretch/s,c=(o.y2-n.y1)*this.yStretch/s;(isNaN(a)||isNaN(u))&&(a=u=1),(isNaN(l)||isNaN(c))&&(l=c=1);var p=Math.min(Math.max(a,u),Math.max(l,c)),h=o.maxScale,d=n.maxScale;return p>h&&(p=h),p>d&&(p=d),p>t&&p>=o.placementScale&&(t=p),t},r.prototype.insertCollisionFeature=function(t,e,n){for(var r=n?this.ignoredGrid:this.grid,o=this.collisionBoxArray,i=t.boxStartIndex;i<t.boxEndIndex;i++){var s=o.get(i);s.placementScale=e,e<this.maxScale&&r.insert(i,s.bbox0,s.bbox1,s.bbox2,s.bbox3)}}},{"../data/bucket":1,"grid-index":137,"point-geometry":169}],64:[function(t,e,n){function r(t,e,n,r,i,s,a,u,l){var c=r?.6*s*a:0,p=Math.max(r?r.right-r.left:0,i?i.right-i.left:0),h=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;e/4>e-p*a&&(e=p*a+e/4);var d=2*s,f=h?e/2*u%e:(p/2+d)*a*u%e;return o(t,f,e,c,n,p*a,h,!1,l)}function o(t,e,n,r,u,l,c,p,h){for(var d=l/2,f=0,g=0;g<t.length-1;g++)f+=t[g].dist(t[g+1]);for(var m=0,y=e-n,v=[],x=0;x<t.length-1;x++){for(var b=t[x],j=t[x+1],_=b.dist(j),E=j.angleTo(b);m+_>y+n;){y+=n;var w=(y-m)/_,S=i(b.x,j.x,w),I=i(b.y,j.y,w);if(S>=0&&h>S&&I>=0&&h>I&&y-d>=0&&f>=y+d){var M=new s(S,I,E,x)._round();r&&!a(t,M,l,r,u)||v.push(M)}}m+=_}return p||v.length||c||(v=o(t,m/2,n,r,u,l,c,!0,h)),v}var i=t("../util/interpolate"),s=t("../symbol/anchor"),a=t("./check_max_angle");e.exports=r},{"../symbol/anchor":58,"../util/interpolate":101,"./check_max_angle":59}],65:[function(t,e,n){function r(t,e){this.width=t,this.height=e,this.bin=new o(t,e),this.index={},this.ids={},this.data=new Uint8Array(t*e)}var o=t("shelf-pack"),i=t("../util/util");e.exports=r,r.prototype.getGlyphs=function(){var t,e,n,r={};for(var o in this.ids)t=o.split("#"),e=t[0],n=t[1],r[e]||(r[e]=[]),r[e].push(n);return r},r.prototype.getRects=function(){var t,e,n,r={};for(var o in this.ids)t=o.split("#"),e=t[0],n=t[1],r[e]||(r[e]={}),r[e][n]=this.index[o];return r},r.prototype.addGlyph=function(t,e,n,r){if(!n)return null;var o=e+"#"+n.id;if(this.index[o])return this.ids[o].indexOf(t)<0&&this.ids[o].push(t),this.index[o];if(!n.bitmap)return null;var s=n.width+2*r,a=n.height+2*r,u=1,l=s+2*u,c=a+2*u;l+=4-l%4,c+=4-c%4;var p=this.bin.packOne(l,c);if(p||(this.resize(),p=this.bin.packOne(l,c)),!p)return i.warnOnce("glyph bitmap overflow"),null;this.index[o]=p,this.ids[o]=[t];for(var h=this.data,d=n.bitmap,f=0;a>f;f++)for(var g=this.width*(p.y+f+u)+p.x+u,m=s*f,y=0;s>y;y++)h[g+y]=d[m+y];return this.dirty=!0,p},r.prototype.resize=function(){var t=this.width,e=this.height;if(!(t>512||e>512)){this.texture&&(this.gl&&this.gl.deleteTexture(this.texture),this.texture=null),this.width*=2,this.height*=2,this.bin.resize(this.width,this.height);for(var n,r,o=new ArrayBuffer(this.width*this.height),i=0;e>i;i++)n=new Uint8Array(this.data.buffer,e*i,t),r=new Uint8Array(o,e*i*2,t),r.set(n);this.data=new Uint8Array(o)}},r.prototype.bind=function(t){this.gl=t,this.texture?t.bindTexture(t.TEXTURE_2D,this.texture):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,null))},r.prototype.updateTexture=function(t){this.bind(t),this.dirty&&(t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data),this.dirty=!1)}},{"../util/util":107,"shelf-pack":172}],66:[function(t,e,n){function r(t){this.url=t&&s(t),this.atlases={},this.stacks={},this.loading={}}function o(t,e,n){var r=1;this.advance=t.advance,this.left=t.left-n-r,this.top=t.top+n+r,this.rect=e}function i(t,e,n,r){return r=r||"abc",n.replace("{s}",r[t.length%r.length]).replace("{fontstack}",t).replace("{range}",e)}var s=t("../util/mapbox").normalizeGlyphsURL,a=t("../util/ajax").getArrayBuffer,u=t("../util/glyphs"),l=t("../symbol/glyph_atlas"),c=t("pbf");e.exports=r,r.prototype.getSimpleGlyphs=function(t,e,n,r){void 0===this.stacks[t]&&(this.stacks[t]={}),void 0===this.atlases[t]&&(this.atlases[t]=new l(128,128));for(var i,s={},a=this.stacks[t],u=this.atlases[t],c=3,p={},h=0,d=0;d<e.length;d++){var f=e[d];if(i=Math.floor(f/256),a[i]){var g=a[i].glyphs[f],m=u.addGlyph(n,t,g,c);g&&(s[f]=new o(g,m,c))}else void 0===p[i]&&(p[i]=[],h++),p[i].push(f)}h||r(void 0,s,t);var y=function(e,i,a){if(!e)for(var l=this.stacks[t][i]=a.stacks[0],d=0;d<p[i].length;d++){var f=p[i][d],g=l.glyphs[f],m=u.addGlyph(n,t,g,c);g&&(s[f]=new o(g,m,c))}h--,h||r(void 0,s,t)}.bind(this);for(var v in p)this.loadRange(t,v,y)},r.prototype.loadRange=function(t,e,n){if(256*e>65535)return n("glyphs > 65535 not supported");void 0===this.loading[t]&&(this.loading[t]={});var r=this.loading[t];if(r[e])r[e].push(n);else{r[e]=[n];var o=256*e+"-"+(256*e+255),s=i(t,o,this.url);a(s,function(t,n){for(var o=!t&&new u(new c(new Uint8Array(n))),i=0;i<r[e].length;i++)r[e][i](t,e,o);delete r[e]})}},r.prototype.getGlyphAtlas=function(t){return this.atlases[t]}},{"../symbol/glyph_atlas":65,"../util/ajax":91,"../util/glyphs":100,"../util/mapbox":104,pbf:167}],67:[function(t,e,n){e.exports=function(t,e,n){function r(r){c.push(t[r]),p.push(n[r]),h.push(e[r]),d++}function o(t,e,n){var r=l[t];return delete l[t],l[e]=r,p[r][0].pop(),p[r][0]=p[r][0].concat(n[0]),r}function i(t,e,n){var r=u[e];return delete u[e],u[t]=r,p[r][0].shift(),p[r][0]=n[0].concat(p[r][0]),r}function s(t,e,n){var r=n?e[0][e[0].length-1]:e[0][0];return t+":"+r.x+":"+r.y}var a,u={},l={},c=[],p=[],h=[],d=0;for(a=0;a<t.length;a++){var f=n[a],g=e[a];if(g){var m=s(g,f),y=s(g,f,!0);if(m in l&&y in u&&l[m]!==u[y]){var v=i(m,y,f),x=o(m,y,p[v]);delete u[m],delete l[y],l[s(g,p[x],!0)]=x,p[v]=null}else m in l?o(m,y,f):y in u?i(m,y,f):(r(a),u[m]=d-1,l[y]=d-1)}else r(a)}return{features:c,textFeatures:h,geometries:p}}},{}],68:[function(t,e,n){function r(t,e,n,r,o,i,s,a,u){this.anchorPoint=t,this.tl=e,this.tr=n,this.bl=r,this.br=o,this.tex=i,this.angle=s,this.minScale=a,this.maxScale=u}function o(t,e,n,o,i,s){var l=e.image.rect,c=1,p=e.left-c,h=p+l.w/e.image.pixelRatio,d=e.top-c,f=d+l.h/e.image.pixelRatio,g=new a(p,d),m=new a(h,d),y=new a(h,f),v=new a(p,f),x=i["icon-rotate"]*Math.PI/180;if(s){var b=o[t.segment];if(t.y===b.y&&t.x===b.x&&t.segment+1<o.length){var j=o[t.segment+1];x+=Math.atan2(t.y-j.y,t.x-j.x)+Math.PI}else x+=Math.atan2(t.y-b.y,t.x-b.x)}if(x){var _=Math.sin(x),E=Math.cos(x),w=[E,-_,_,E];g=g.matMult(w),m=m.matMult(w),v=v.matMult(w),y=y.matMult(w)}return[new r(new a(t.x,t.y),g,m,v,y,e.image.rect,0,u,1/0)]}function i(t,e,n,o,i,l){for(var c=i["text-rotate"]*Math.PI/180,p=i["text-keep-upright"],h=e.positionedGlyphs,d=[],f=0;f<h.length;f++){var g=h[f],m=g.glyph,y=m.rect;if(y){var v,x=(g.x+m.advance/2)*n,b=u;l?(v=[],b=s(v,t,x,o,t.segment,!0),p&&(b=Math.min(b,s(v,t,x,o,t.segment,!1)))):v=[{anchorPoint:new a(t.x,t.y),offset:0,angle:0,maxScale:1/0,minScale:u}];for(var j=g.x+m.left,_=g.y-m.top,E=j+y.w,w=_+y.h,S=new a(j,_),I=new a(E,_),M=new a(j,w),C=new a(E,w),L=0;L<v.length;L++){var P=v[L],T=S,N=I,R=M,A=C,D=P.angle+c;if(D){var O=Math.sin(D),F=Math.cos(D),k=[F,-O,O,F];T=T.matMult(k),N=N.matMult(k),R=R.matMult(k),A=A.matMult(k)}var B=Math.max(P.minScale,b),z=(t.angle+c+P.offset+2*Math.PI)%(2*Math.PI);d.push(new r(P.anchorPoint,T,N,R,A,y,z,B,P.maxScale))}}}return d}function s(t,e,n,r,o,i){var s=!i;0>n&&(i=!i),i&&o++;var l=new a(e.x,e.y),c=r[o],p=1/0;n=Math.abs(n);for(var h=u;;){var d=l.dist(c),f=n/d,g=Math.atan2(c.y-l.y,c.x-l.x);if(i||(g+=Math.PI),s&&(g+=Math.PI),t.push({anchorPoint:l,offset:s?Math.PI:0,minScale:f,maxScale:p,angle:(g+2*Math.PI)%(2*Math.PI)}),h>=f)break;for(l=c;l.equals(c);)if(o+=i?1:-1,c=r[o],!c)return f;var m=c.sub(l)._unit();l=l.sub(m._mult(d)),p=f}return h}var a=t("point-geometry");e.exports={getIconQuads:o,getGlyphQuads:i,SymbolQuad:r};var u=.5},{"point-geometry":169}],69:[function(t,e,n){function r(t,e,n){for(var r=[],i=0,s=t.length;s>i;i++){var a=o(t[i].properties,e["text-field"]);if(a){a=a.toString();var u=e["text-transform"];"uppercase"===u?a=a.toLocaleUpperCase():"lowercase"===u&&(a=a.toLocaleLowerCase());for(var l=0;l<a.length;l++)n[a.charCodeAt(l)]=!0;r[i]=a}else r[i]=null}return r}var o=t("../util/token");e.exports=r},{"../util/token":106}],70:[function(t,e,n){function r(t,e,n,r){this.codePoint=t,this.x=e,this.y=n,this.glyph=r}function o(t,e,n,r,o,i){this.positionedGlyphs=t,this.text=e,this.top=n,this.bottom=r,this.left=o,this.right=i}function i(t,e,n,i,a,u,l,c,p){for(var h=[],d=new o(h,t,p[1],p[1],p[0],p[0]),f=-17,g=0,m=f,y=0;y<t.length;y++){var v=t.charCodeAt(y),x=e[v];x&&(h.push(new r(v,g,m,x)),g+=x.advance+c)}return!!h.length&&(s(d,e,i,n,a,u,l,p),d)}function s(t,e,n,r,o,i,s,l){var c=null,d=0,f=0,g=0,m=0,y=t.positionedGlyphs;if(r)for(var v=0;v<y.length;v++){var x=y[v];if(x.x-=d,x.y+=n*g,x.x>r&&null!==c){var b=y[c+1].x;m=Math.max(b,m);for(var j=c+1;v>=j;j++)y[j].y+=n,y[j].x-=b;if(s){var _=c;p[y[c].codePoint]&&_--,a(y,e,f,_,s)}f=c+1,c=null,d+=b,g++}h[x.codePoint]&&(c=v)}var E=y[y.length-1],w=E.x+e[E.codePoint].advance;m=Math.max(m,w);var S=(g+1)*n;a(y,e,f,y.length-1,s),u(y,s,o,i,m,n,g,l),t.top+=-i*S,t.bottom=t.top+S,t.left+=-o*m,t.right=t.left+m}function a(t,e,n,r,o){for(var i=e[t[r].codePoint].advance,s=(t[r].x+i)*o,a=n;r>=a;a++)t[a].x-=s}function u(t,e,n,r,o,i,s,a){for(var u=(e-n)*o+a[0],l=(-r*(s+1)+.5)*i+a[1],c=0;c<t.length;c++)t[c].x+=u,t[c].y+=l}function l(t,e){if(!t||!t.rect)return null;var n=e["icon-offset"][0],r=e["icon-offset"][1],o=n-t.width/2,i=o+t.width,s=r-t.height/2,a=s+t.height;return new c(t,s,a,o,i)}function c(t,e,n,r,o){this.image=t,this.top=e,this.bottom=n,this.left=r,this.right=o}e.exports={shapeText:i,shapeIcon:l};var p={32:!0,8203:!0},h={32:!0,38:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0}},{}],71:[function(t,e,n){function r(t,e){this.width=t,this.height=e,this.bin=new s(t,e),this.images={},this.data=!1,this.texture=0,this.filter=0,this.pixelRatio=1,this.dirty=!0}function o(t,e,n,r,o,i,s,a,u,l,c){var p,h,d=r*e+n,f=a*i+s;if(c)for(f-=i,h=-1;l>=h;h++,d=((h+l)%l+r)*e+n,f+=i)for(p=-1;u>=p;p++)o[f+p]=t[d+(p+u)%u];else for(h=0;l>h;h++,d+=e,f+=i)for(p=0;u>p;p++)o[f+p]=t[d+p]}function i(t,e,n,r,o){this.rect=t,this.width=e,this.height=n,this.sdf=r,this.pixelRatio=o}var s=t("shelf-pack"),a=t("../util/browser"),u=t("../util/util");e.exports=r,r.prototype.allocateImage=function(t,e){t/=this.pixelRatio,e/=this.pixelRatio;var n=2,r=t+n+(4-(t+n)%4),o=e+n+(4-(e+n)%4),i=this.bin.packOne(r,o);return i?i:(u.warnOnce("SpriteAtlas out of space."),null)},r.prototype.getImage=function(t,e){if(this.images[t])return this.images[t];if(!this.sprite)return null;var n=this.sprite.getSpritePosition(t);if(!n.width||!n.height)return null;var r=this.allocateImage(n.width,n.height);if(!r)return null;var o=new i(r,n.width/n.pixelRatio,n.height/n.pixelRatio,n.sdf,n.pixelRatio/this.pixelRatio);return this.images[t]=o,this.copy(r,n,e),o},r.prototype.getPosition=function(t,e){var n=this.getImage(t,e),r=n&&n.rect;if(!r)return null;var o=n.width*n.pixelRatio,i=n.height*n.pixelRatio,s=1;return{size:[n.width,n.height],tl:[(r.x+s)/this.width,(r.y+s)/this.height],br:[(r.x+s+o)/this.width,(r.y+s+i)/this.height]}},r.prototype.allocate=function(){if(!this.data){var t=Math.floor(this.width*this.pixelRatio),e=Math.floor(this.height*this.pixelRatio);this.data=new Uint32Array(t*e);for(var n=0;n<this.data.length;n++)this.data[n]=0}},r.prototype.copy=function(t,e,n){if(this.sprite.img.data){var r=new Uint32Array(this.sprite.img.data.buffer);this.allocate();var i=this.data,s=1;o(r,this.sprite.img.width,e.x,e.y,i,this.width*this.pixelRatio,(t.x+s)*this.pixelRatio,(t.y+s)*this.pixelRatio,e.width,e.height,n),this.dirty=!0}},r.prototype.setSprite=function(t){t&&(this.pixelRatio=a.devicePixelRatio>1?2:1,this.canvas&&(this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio)),this.sprite=t},r.prototype.addIcons=function(t,e){for(var n=0;n<t.length;n++)this.getImage(t[n]);e(null,this.images)},r.prototype.bind=function(t,e){var n=!1;this.texture?t.bindTexture(t.TEXTURE_2D,this.texture):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),n=!0);var r=e?t.LINEAR:t.NEAREST;r!==this.filter&&(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r),this.filter=r),this.dirty&&(this.allocate(),n?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width*this.pixelRatio,this.height*this.pixelRatio,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)):t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width*this.pixelRatio,this.height*this.pixelRatio,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)),this.dirty=!1)}},{"../util/browser":92,"../util/util":107,"shelf-pack":172}],72:[function(t,e,n){var r=t("../util/struct_array"),o=t("../util/util"),i=t("point-geometry"),s=e.exports=new r({members:[{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"glyphQuadStartIndex"},{type:"Uint16",name:"glyphQuadEndIndex"},{type:"Uint16",name:"iconQuadStartIndex"},{type:"Uint16",name:"iconQuadEndIndex"},{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int8",name:"index"}]});o.extendAll(s.prototype.StructType.prototype,{get anchorPoint(){return new i(this.anchorPointX,this.anchorPointY)}})},{"../util/struct_array":105,"../util/util":107,"point-geometry":169}],73:[function(t,e,n){var r=t("../util/struct_array"),o=t("../util/util"),i=t("point-geometry"),s=t("./quads").SymbolQuad,a=e.exports=new r({members:[{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Float32",name:"tlX"},{type:"Float32",name:"tlY"},{type:"Float32",name:"trX"},{type:"Float32",name:"trY"},{type:"Float32",name:"blX"},{type:"Float32",name:"blY"},{type:"Float32",name:"brX"},{type:"Float32",name:"brY"},{type:"Int16",name:"texH"},{type:"Int16",name:"texW"},{type:"Int16",name:"texX"},{type:"Int16",name:"texY"},{type:"Float32",name:"angle"},{type:"Float32",name:"maxScale"},{type:"Float32",name:"minScale"}]});o.extendAll(a.prototype.StructType.prototype,{get anchorPoint(){return new i(this.anchorPointX,this.anchorPointY)},get SymbolQuad(){return new s(this.anchorPoint,new i(this.tlX,this.tlY),new i(this.trX,this.trY),new i(this.blX,this.blY),new i(this.brX,this.brY),{x:this.texX,y:this.texY,h:this.texH,w:this.texW,height:this.texH,width:this.texW},this.angle,this.minScale,this.maxScale)}})},{"../util/struct_array":105,"../util/util":107,"./quads":68,"point-geometry":169}],74:[function(t,e,n){var r=t("../util/dom"),o=t("point-geometry"),i={scrollZoom:t("./handler/scroll_zoom"),boxZoom:t("./handler/box_zoom"),dragRotate:t("./handler/drag_rotate"),dragPan:t("./handler/drag_pan"),keyboard:t("./handler/keyboard"),doubleClickZoom:t("./handler/dblclick_zoom"),touchZoomRotate:t("./handler/touch_zoom_rotate")};e.exports=function(t,e,n){function s(e){t.stop(),j=r.mousePos(x,e),y("mousedown",e)}function a(e){var n=t.dragRotate&&t.dragRotate.isActive();b&&!n&&y("contextmenu",b),b=null,y("mouseup",e)}function u(e){if(!(t.dragPan&&t.dragPan.isActive()||t.dragRotate&&t.dragRotate.isActive())){for(var n=e.toElement||e.target;n&&n!==x;)n=n.parentNode;n===x&&y("mousemove",e)}}function l(e){t.stop(),v("touchstart",e),!e.touches||e.touches.length>1||(_?(clearTimeout(_),_=null,y("dblclick",e)):_=setTimeout(d,300))}function c(t){v("touchmove",t)}function p(t){v("touchend",t)}function h(t){v("touchcancel",t)}function d(){_=null}function f(t){var e=r.mousePos(x,t);e.equals(j)&&y("click",t)}function g(t){y("dblclick",t),t.preventDefault()}function m(t){b=t,t.preventDefault()}function y(e,n){var o=r.mousePos(x,n);return t.fire(e,{lngLat:t.unproject(o),point:o,originalEvent:n})}function v(e,n){var i=r.touchPos(x,n),s=i.reduce(function(t,e,n,r){return t.add(e.div(r.length))},new o(0,0));return t.fire(e,{lngLat:t.unproject(s),point:s,lngLats:i.map(function(e){return t.unproject(e)},this),points:i,originalEvent:n})}var x=t.getCanvasContainer(),b=null,j=null,_=null;for(var E in i)t[E]=new i[E](t,n),e[E]&&t[E].enable();x.addEventListener("mousedown",s,!1),x.addEventListener("mouseup",a,!1),x.addEventListener("mousemove",u,!1),x.addEventListener("touchstart",l,!1),x.addEventListener("touchend",p,!1),x.addEventListener("touchmove",c,!1),x.addEventListener("touchcancel",h,!1),x.addEventListener("click",f,!1),x.addEventListener("dblclick",g,!1),x.addEventListener("contextmenu",m,!1)}},{"../util/dom":95,"./handler/box_zoom":80,"./handler/dblclick_zoom":81,"./handler/drag_pan":82,"./handler/drag_rotate":83,"./handler/keyboard":84,"./handler/scroll_zoom":85,"./handler/touch_zoom_rotate":86,"point-geometry":169}],75:[function(t,e,n){var r=t("../util/util"),o=t("../util/interpolate"),i=t("../util/browser"),s=t("../geo/lng_lat"),a=t("../geo/lng_lat_bounds"),u=t("point-geometry"),l=e.exports=function(){};r.extend(l.prototype,{getCenter:function(){return this.transform.center},setCenter:function(t,e){return this.jumpTo({center:t},e),this},panBy:function(t,e,n){return this.panTo(this.transform.center,r.extend({offset:u.convert(t).mult(-1)},e),n),this},panTo:function(t,e,n){return this.easeTo(r.extend({center:t},e),n)},getZoom:function(){return this.transform.zoom},setZoom:function(t,e){return this.jumpTo({zoom:t},e),this},zoomTo:function(t,e,n){return this.easeTo(r.extend({zoom:t},e),n)},zoomIn:function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},zoomOut:function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},getBearing:function(){return this.transform.bearing},setBearing:function(t,e){return this.jumpTo({bearing:t},e),this},rotateTo:function(t,e,n){return this.easeTo(r.extend({bearing:t},e),n)},resetNorth:function(t,e){return this.rotateTo(0,r.extend({duration:1e3},t),e),this},snapToNorth:function(t,e){return Math.abs(this.getBearing())<this.options.bearingSnap?this.resetNorth(t,e):this},getPitch:function(){return this.transform.pitch},setPitch:function(t,e){return this.jumpTo({pitch:t},e),this},fitBounds:function(t,e,n){e=r.extend({padding:0,offset:[0,0],maxZoom:1/0},e),t=a.convert(t);var o=u.convert(e.offset),i=this.transform,s=i.project(t.getNorthWest()),l=i.project(t.getSouthEast()),c=l.sub(s),p=(i.width-2*e.padding-2*Math.abs(o.x))/c.x,h=(i.height-2*e.padding-2*Math.abs(o.y))/c.y;return e.center=i.unproject(s.add(l).div(2)),e.zoom=Math.min(i.scaleZoom(i.scale*Math.min(p,h)),e.maxZoom),e.bearing=0,e.linear?this.easeTo(e,n):this.flyTo(e,n)},jumpTo:function(t,e){this.stop();var n=this.transform,r=!1,o=!1,i=!1;return"zoom"in t&&n.zoom!==+t.zoom&&(r=!0,n.zoom=+t.zoom),"center"in t&&(n.center=s.convert(t.center)),"bearing"in t&&n.bearing!==+t.bearing&&(o=!0,n.bearing=+t.bearing),"pitch"in t&&n.pitch!==+t.pitch&&(i=!0,n.pitch=+t.pitch),this.fire("movestart",e).fire("move",e),r&&this.fire("zoomstart",e).fire("zoom",e).fire("zoomend",e),o&&this.fire("rotate",e),i&&this.fire("pitch",e),this.fire("moveend",e)},easeTo:function(t,e){this.stop(),t=r.extend({offset:[0,0],duration:500,easing:r.ease},t);var n,i,a=this.transform,l=u.convert(t.offset),c=this.getZoom(),p=this.getBearing(),h=this.getPitch(),d="zoom"in t?+t.zoom:c,f="bearing"in t?this._normalizeBearing(t.bearing,p):p,g="pitch"in t?+t.pitch:h;"center"in t?(n=s.convert(t.center),i=a.centerPoint.add(l)):"around"in t?(n=s.convert(t.around),i=a.locationPoint(n)):(i=a.centerPoint.add(l),n=a.pointLocation(i));var m=a.locationPoint(n);return t.animate===!1&&(t.duration=0),this.zooming=d!==c,this.rotating=p!==f,this.pitching=g!==h,t.noMoveStart||this.fire("movestart",e),this.zooming&&this.fire("zoomstart",e),clearTimeout(this._onEaseEnd),this._ease(function(t){this.zooming&&(a.zoom=o(c,d,t)),this.rotating&&(a.bearing=o(p,f,t)),this.pitching&&(a.pitch=o(h,g,t)),a.setLocationAtPoint(n,m.add(i.sub(m)._mult(t))),this.fire("move",e),this.zooming&&this.fire("zoom",e),this.rotating&&this.fire("rotate",e),this.pitching&&this.fire("pitch",e)},function(){t.delayEndEvents?this._onEaseEnd=setTimeout(this._easeToEnd.bind(this,e),t.delayEndEvents):this._easeToEnd(e)}.bind(this),t),this},_easeToEnd:function(t){this.zooming&&this.fire("zoomend",t),this.fire("moveend",t),this.zooming=!1,this.rotating=!1,this.pitching=!1},flyTo:function(t,e){function n(t){var e=(S*S-w*w+(t?-1:1)*L*L*I*I)/(2*(t?S:w)*L*I);return Math.log(Math.sqrt(e*e+1)-e)}function i(t){return(Math.exp(t)-Math.exp(-t))/2}function a(t){return(Math.exp(t)+Math.exp(-t))/2}function l(t){return i(t)/a(t)}this.stop(),t=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},t);var c=this.transform,p=u.convert(t.offset),h=this.getZoom(),d=this.getBearing(),f=this.getPitch(),g="center"in t?s.convert(t.center):this.getCenter(),m="zoom"in t?+t.zoom:h,y="bearing"in t?this._normalizeBearing(t.bearing,d):d,v="pitch"in t?+t.pitch:f;Math.abs(c.center.lng)+Math.abs(g.lng)>180&&(c.center.lng>0&&g.lng<0?g.lng+=360:c.center.lng<0&&g.lng>0&&(g.lng-=360));var x=c.zoomScale(m-h),b=c.point,j="center"in t?c.project(g).sub(p.div(x)):b,_=c.worldSize,E=t.curve,w=Math.max(c.width,c.height),S=w/x,I=j.sub(b).mag();if("minZoom"in t){var M=r.clamp(Math.min(t.minZoom,h,m),c.minZoom,c.maxZoom),C=w/c.zoomScale(M-h);E=Math.sqrt(C/I*2)}var L=E*E,P=n(0),T=function(t){return a(P)/a(P+E*t)},N=function(t){return w*((a(P)*l(P+E*t)-i(P))/L)/I},R=(n(1)-P)/E;if(Math.abs(I)<1e-6){if(Math.abs(w-S)<1e-6)return this.easeTo(t);var A=w>S?-1:1;R=Math.abs(Math.log(S/w))/E,N=function(){return 0},T=function(t){return Math.exp(A*E*t)}}if("duration"in t)t.duration=+t.duration;else{var D="screenSpeed"in t?+t.screenSpeed/E:+t.speed;t.duration=1e3*R/D}return this.zooming=!0,d!==y&&(this.rotating=!0),f!==v&&(this.pitching=!0),this.fire("movestart",e),this.fire("zoomstart",e),this._ease(function(t){var n=t*R,r=N(n);c.zoom=h+c.scaleZoom(1/T(n)),c.center=c.unproject(b.add(j.sub(b).mult(r)),_),this.rotating&&(c.bearing=o(d,y,t)),this.pitching&&(c.pitch=o(f,v,t)),this.fire("move",e),this.fire("zoom",e),this.rotating&&this.fire("rotate",e),this.pitching&&this.fire("pitch",e)},function(){this.fire("zoomend",e),this.fire("moveend",e),this.zooming=!1,this.rotating=!1,this.pitching=!1},t),this},isEasing:function(){return!!this._abortFn},stop:function(){return this._abortFn&&(this._abortFn(),this._finishEase()),this},_ease:function(t,e,n){this._finishFn=e,this._abortFn=i.timed(function(e){t.call(this,n.easing(e)),1===e&&this._finishEase()},n.animate===!1?0:n.duration,this)},_finishEase:function(){delete this._abortFn;var t=this._finishFn;delete this._finishFn,t.call(this)},_normalizeBearing:function(t,e){t=r.wrap(t,-180,180);var n=Math.abs(t-e);return Math.abs(t-360-e)<n&&(t-=360),Math.abs(t+360-e)<n&&(t+=360),t},_updateEasing:function(t,e,n){var o;if(this.ease){var i=this.ease,s=(Date.now()-i.start)/i.duration,a=i.easing(s+.01)-i.easing(s),u=.27/Math.sqrt(a*a+1e-4)*.01,l=Math.sqrt(.0729-u*u);o=r.bezier(u,l,.25,1)}else o=n?r.bezier.apply(r,n):r.ease;return this.ease={start:(new Date).getTime(),to:Math.pow(2,e),duration:t,easing:o},o}})},{"../geo/lng_lat":10,"../geo/lng_lat_bounds":11,"../util/browser":92,"../util/interpolate":101,"../util/util":107,"point-geometry":169}],76:[function(t,e,n){function r(t){s.setOptions(this,t)}var o=t("./control"),i=t("../../util/dom"),s=t("../../util/util");e.exports=r,r.createAttributionString=function(t){var e=[];for(var n in t){var r=t[n];r.attribution&&e.indexOf(r.attribution)<0&&e.push(r.attribution)}return e.sort(function(t,e){return t.length-e.length}),e=e.filter(function(t,n){for(var r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0}),e.join(" | ")},r.prototype=s.inherit(o,{options:{position:"bottom-right"},onAdd:function(t){var e="mapboxgl-ctrl-attrib",n=this._container=i.create("div",e,t.getContainer());return this._update(),t.on("source.load",this._update.bind(this)),t.on("source.change",this._update.bind(this)),t.on("source.remove",this._update.bind(this)),t.on("moveend",this._updateEditLink.bind(this)),n},_update:function(){this._map.style&&(this._container.innerHTML=r.createAttributionString(this._map.style.sources)),this._editLink=this._container.getElementsByClassName("mapbox-improve-map")[0],this._updateEditLink()},_updateEditLink:function(){if(this._editLink){var t=this._map.getCenter();this._editLink.href="https://www.mapbox.com/map-feedback/#/"+t.lng+"/"+t.lat+"/"+Math.round(this._map.getZoom()+1)}}})},{"../../util/dom":95,"../../util/util":107,"./control":77}],77:[function(t,e,n){function r(){}var o=t("../../util/util"),i=t("../../util/evented");e.exports=r,r.prototype={addTo:function(t){this._map=t;var e=this._container=this.onAdd(t);if(this.options&&this.options.position){var n=this.options.position,r=t._controlCorners[n];e.className+=" mapboxgl-ctrl",-1!==n.indexOf("bottom")?r.insertBefore(e,r.firstChild):r.appendChild(e)}return this},remove:function(){return this._container.parentNode.removeChild(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this}},o.extend(r.prototype,i)},{"../../util/evented":99,"../../util/util":107}],78:[function(t,e,n){function r(t){a.setOptions(this,t)}var o=t("./control"),i=t("../../util/browser"),s=t("../../util/dom"),a=t("../../util/util");e.exports=r;var u={enableHighAccuracy:!1,timeout:6e3};r.prototype=a.inherit(o,{options:{position:"top-right"},onAdd:function(t){var e="mapboxgl-ctrl",n=this._container=s.create("div",e+"-group",t.getContainer());return i.supportsGeolocation?(this._container.addEventListener("contextmenu",this._onContextMenu.bind(this)),this._geolocateButton=s.create("button",e+"-icon "+e+"-geolocate",this._container),this._geolocateButton.addEventListener("click",this._onClickGeolocate.bind(this)),n):n},_onContextMenu:function(t){t.preventDefault()},_onClickGeolocate:function(){navigator.geolocation.getCurrentPosition(this._success.bind(this),this._error.bind(this),u),this._timeoutId=setTimeout(this._finish.bind(this),1e4)},_success:function(t){this._map.jumpTo({center:[t.coords.longitude,t.coords.latitude],zoom:17,bearing:0,pitch:0}),this.fire("geolocate",t),this._finish()},_error:function(t){this.fire("error",t),this._finish()},_finish:function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}})},{"../../util/browser":92,"../../util/dom":95,"../../util/util":107,"./control":77}],79:[function(t,e,n){function r(t){a.setOptions(this,t)}function o(t){return new MouseEvent(t.type,{button:2,buttons:2,bubbles:!0,cancelable:!0,detail:t.detail,view:t.view,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,movementX:t.movementX,movementY:t.movementY,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey})}var i=t("./control"),s=t("../../util/dom"),a=t("../../util/util");e.exports=r,r.prototype=a.inherit(i,{options:{position:"top-right"},onAdd:function(t){var e="mapboxgl-ctrl",n=this._container=s.create("div",e+"-group",t.getContainer());return this._container.addEventListener("contextmenu",this._onContextMenu.bind(this)),this._zoomInButton=this._createButton(e+"-icon "+e+"-zoom-in",t.zoomIn.bind(t)),this._zoomOutButton=this._createButton(e+"-icon "+e+"-zoom-out",t.zoomOut.bind(t)),this._compass=this._createButton(e+"-icon "+e+"-compass",t.resetNorth.bind(t)),this._compassArrow=s.create("div","arrow",this._compass),this._compass.addEventListener("mousedown",this._onCompassDown.bind(this)),this._onCompassMove=this._onCompassMove.bind(this),this._onCompassUp=this._onCompassUp.bind(this),t.on("rotate",this._rotateCompassArrow.bind(this)),this._rotateCompassArrow(),this._el=t.getCanvasContainer(),n},_onContextMenu:function(t){t.preventDefault()},_onCompassDown:function(t){0===t.button&&(s.disableDrag(),document.addEventListener("mousemove",this._onCompassMove),document.addEventListener("mouseup",this._onCompassUp),this._el.dispatchEvent(o(t)),t.stopPropagation())},_onCompassMove:function(t){0===t.button&&(this._el.dispatchEvent(o(t)),t.stopPropagation())},_onCompassUp:function(t){0===t.button&&(document.removeEventListener("mousemove",this._onCompassMove),document.removeEventListener("mouseup",this._onCompassUp),s.enableDrag(),this._el.dispatchEvent(o(t)),t.stopPropagation())},_createButton:function(t,e){var n=s.create("button",t,this._container);return n.addEventListener("click",function(){e()}),n},_rotateCompassArrow:function(){var t="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t}})},{"../../util/dom":95,"../../util/util":107,"./control":77}],80:[function(t,e,n){function r(t){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),s.bindHandlers(this)}var o=t("../../util/dom"),i=t("../../geo/lng_lat_bounds"),s=t("../../util/util");e.exports=r,r.prototype={_enabled:!1,_active:!1,isEnabled:function(){return this._enabled},isActive:function(){return this._active},enable:function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onMouseDown,!1),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onMouseDown),this._enabled=!1)},_onMouseDown:function(t){t.shiftKey&&0===t.button&&(document.addEventListener("mousemove",this._onMouseMove,!1),document.addEventListener("keydown",this._onKeyDown,!1),document.addEventListener("mouseup",this._onMouseUp,!1),o.disableDrag(),this._startPos=o.mousePos(this._el,t),
this._active=!0)},_onMouseMove:function(t){var e=this._startPos,n=o.mousePos(this._el,t);this._box||(this._box=o.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var r=Math.min(e.x,n.x),i=Math.max(e.x,n.x),s=Math.min(e.y,n.y),a=Math.max(e.y,n.y);o.setTransform(this._box,"translate("+r+"px,"+s+"px)"),this._box.style.width=i-r+"px",this._box.style.height=a-s+"px"},_onMouseUp:function(t){if(0===t.button){var e=this._startPos,n=o.mousePos(this._el,t),r=new i(this._map.unproject(e),this._map.unproject(n));this._finish(),e.x===n.x&&e.y===n.y?this._fireEvent("boxzoomcancel",t):this._map.fitBounds(r,{linear:!0}).fire("boxzoomend",{originalEvent:t,boxZoomBounds:r})}},_onKeyDown:function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},_finish:function(){this._active=!1,document.removeEventListener("mousemove",this._onMouseMove,!1),document.removeEventListener("keydown",this._onKeyDown,!1),document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.parentNode.removeChild(this._box),this._box=null),o.enableDrag()},_fireEvent:function(t,e){return this._map.fire(t,{originalEvent:e})}}},{"../../geo/lng_lat_bounds":11,"../../util/dom":95,"../../util/util":107}],81:[function(t,e,n){function r(t){this._map=t,this._onDblClick=this._onDblClick.bind(this)}e.exports=r,r.prototype={_enabled:!1,isEnabled:function(){return this._enabled},enable:function(){this.isEnabled()||(this._map.on("dblclick",this._onDblClick),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._map.off("dblclick",this._onDblClick),this._enabled=!1)},_onDblClick:function(t){this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat})}}},{}],82:[function(t,e,n){function r(t){this._map=t,this._el=t.getCanvasContainer(),i.bindHandlers(this)}var o=t("../../util/dom"),i=t("../../util/util");e.exports=r;var s=.3,a=i.bezier(0,0,s,1),u=1400,l=2500;r.prototype={_enabled:!1,_active:!1,isEnabled:function(){return this._enabled},isActive:function(){return this._active},enable:function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this._enabled=!1)},_onDown:function(t){this._ignoreEvent(t)||this.isActive()||(t.touches?(document.addEventListener("touchmove",this._onMove),document.addEventListener("touchend",this._onTouchEnd)):(document.addEventListener("mousemove",this._onMove),document.addEventListener("mouseup",this._onMouseUp)),this._active=!1,this._startPos=this._pos=o.mousePos(this._el,t),this._inertia=[[Date.now(),this._pos]])},_onMove:function(t){if(!this._ignoreEvent(t)){this.isActive()||(this._active=!0,this._fireEvent("dragstart",t),this._fireEvent("movestart",t));var e=o.mousePos(this._el,t),n=this._map;n.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),e]),n.transform.setLocationAtPoint(n.transform.pointLocation(this._pos),e),this._fireEvent("drag",t),this._fireEvent("move",t),this._pos=e,t.preventDefault()}},_onUp:function(t){if(this.isActive()){this._active=!1,this._fireEvent("dragend",t),this._drainInertiaBuffer();var e=function(){this._fireEvent("moveend",t)}.bind(this),n=this._inertia;if(n.length<2)return void e();var r=n[n.length-1],o=n[0],i=r[1].sub(o[1]),c=(r[0]-o[0])/1e3;if(0===c||r[1].equals(o[1]))return void e();var p=i.mult(s/c),h=p.mag();h>u&&(h=u,p._unit()._mult(h));var d=h/(l*s),f=p.mult(-d/2);this._map.panBy(f,{duration:1e3*d,easing:a,noMoveStart:!0},{originalEvent:t})}},_onMouseUp:function(t){this._ignoreEvent(t)||(this._onUp(t),document.removeEventListener("mousemove",this._onMove),document.removeEventListener("mouseup",this._onMouseUp))},_onTouchEnd:function(t){this._ignoreEvent(t)||(this._onUp(t),document.removeEventListener("touchmove",this._onMove),document.removeEventListener("touchend",this._onTouchEnd))},_fireEvent:function(t,e){return this._map.fire(t,{originalEvent:e})},_ignoreEvent:function(t){var e=this._map;if(e.boxZoom&&e.boxZoom.isActive())return!0;if(e.dragRotate&&e.dragRotate.isActive())return!0;if(t.touches)return t.touches.length>1;if(t.ctrlKey)return!0;var n=1,r=0;return"mousemove"===t.type?t.buttons&0===n:t.button!==r},_drainInertiaBuffer:function(){for(var t=this._inertia,e=Date.now(),n=160;t.length>0&&e-t[0][0]>n;)t.shift()}}},{"../../util/dom":95,"../../util/util":107}],83:[function(t,e,n){function r(t,e){this._map=t,this._el=t.getCanvasContainer(),this._bearingSnap=e.bearingSnap,s.bindHandlers(this)}var o=t("../../util/dom"),i=t("point-geometry"),s=t("../../util/util");e.exports=r;var a=.25,u=s.bezier(0,0,a,1),l=180,c=720;r.prototype={_enabled:!1,_active:!1,isEnabled:function(){return this._enabled},isActive:function(){return this._active},enable:function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)},_onDown:function(t){if(!this._ignoreEvent(t)&&!this.isActive()){document.addEventListener("mousemove",this._onMove),document.addEventListener("mouseup",this._onUp),this._active=!1,this._inertia=[[Date.now(),this._map.getBearing()]],this._startPos=this._pos=o.mousePos(this._el,t),this._center=this._map.transform.centerPoint;var e=this._startPos.sub(this._center),n=e.mag();200>n&&(this._center=this._startPos.add(new i((-200),0)._rotate(e.angle()))),t.preventDefault()}},_onMove:function(t){if(!this._ignoreEvent(t)){this.isActive()||(this._active=!0,this._fireEvent("rotatestart",t),this._fireEvent("movestart",t));var e=this._map;e.stop();var n=this._pos,r=o.mousePos(this._el,t),i=this._center,s=n.sub(i).angleWith(r.sub(i))/Math.PI*180,a=e.getBearing()-s,u=this._inertia,l=u[u.length-1];this._drainInertiaBuffer(),u.push([Date.now(),e._normalizeBearing(a,l[1])]),e.transform.bearing=a,this._fireEvent("rotate",t),this._fireEvent("move",t),this._pos=r}},_onUp:function(t){if(!this._ignoreEvent(t)&&(document.removeEventListener("mousemove",this._onMove),document.removeEventListener("mouseup",this._onUp),this.isActive())){this._active=!1,this._fireEvent("rotateend",t),this._drainInertiaBuffer();var e=this._map,n=e.getBearing(),r=this._inertia,o=function(){Math.abs(n)<this._bearingSnap?e.resetNorth({noMoveStart:!0},{originalEvent:t}):this._fireEvent("moveend",t)}.bind(this);if(r.length<2)return void o();var i=r[0],s=r[r.length-1],p=r[r.length-2],h=e._normalizeBearing(n,p[1]),d=s[1]-i[1],f=0>d?-1:1,g=(s[0]-i[0])/1e3;if(0===d||0===g)return void o();var m=Math.abs(d*(a/g));m>l&&(m=l);var y=m/(c*a),v=f*m*(y/2);h+=v,Math.abs(e._normalizeBearing(h,0))<this._bearingSnap&&(h=e._normalizeBearing(0,h)),e.rotateTo(h,{duration:1e3*y,easing:u,noMoveStart:!0},{originalEvent:t})}},_fireEvent:function(t,e){return this._map.fire(t,{originalEvent:e})},_ignoreEvent:function(t){var e=this._map;if(e.boxZoom&&e.boxZoom.isActive())return!0;if(e.dragPan&&e.dragPan.isActive())return!0;if(t.touches)return t.touches.length>1;var n=t.ctrlKey?1:2,r=t.ctrlKey?0:2;return"mousemove"===t.type?t.buttons&0===n:t.button!==r},_drainInertiaBuffer:function(){for(var t=this._inertia,e=Date.now(),n=160;t.length>0&&e-t[0][0]>n;)t.shift()}}},{"../../util/dom":95,"../../util/util":107,"point-geometry":169}],84:[function(t,e,n){function r(t){this._map=t,this._el=t.getCanvasContainer(),this._onKeyDown=this._onKeyDown.bind(this)}e.exports=r;var o=80,i=2,s=5;r.prototype={_enabled:!1,isEnabled:function(){return this._enabled},enable:function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=this._map,n={originalEvent:t};if(!e.isEasing())switch(t.keyCode){case 61:case 107:case 171:case 187:e.zoomTo(Math.round(e.getZoom())+(t.shiftKey?2:1),n);break;case 189:case 109:case 173:e.zoomTo(Math.round(e.getZoom())-(t.shiftKey?2:1),n);break;case 37:t.shiftKey?e.easeTo({bearing:e.getBearing()-i},n):(t.preventDefault(),e.panBy([-o,0],n));break;case 39:t.shiftKey?e.easeTo({bearing:e.getBearing()+i},n):(t.preventDefault(),e.panBy([o,0],n));break;case 38:t.shiftKey?e.easeTo({pitch:e.getPitch()+s},n):(t.preventDefault(),e.panBy([0,-o],n));break;case 40:t.shiftKey?e.easeTo({pitch:Math.max(e.getPitch()-s,0)},n):(t.preventDefault(),e.panBy([0,o],n))}}}}},{}],85:[function(t,e,n){function r(t){this._map=t,this._el=t.getCanvasContainer(),s.bindHandlers(this)}var o=t("../../util/dom"),i=t("../../util/browser"),s=t("../../util/util");e.exports=r;var a="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",u=-1!==a.indexOf("firefox"),l=-1!==a.indexOf("safari")&&-1===a.indexOf("chrom");r.prototype={_enabled:!1,isEnabled:function(){return this._enabled},enable:function(){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)},_onWheel:function(t){var e;"wheel"===t.type?(e=t.deltaY,u&&t.deltaMode===window.WheelEvent.DOM_DELTA_PIXEL&&(e/=i.devicePixelRatio),t.deltaMode===window.WheelEvent.DOM_DELTA_LINE&&(e*=40)):"mousewheel"===t.type&&(e=-t.wheelDeltaY,l&&(e/=3));var n=i.now(),r=n-(this._time||0);this._pos=o.mousePos(this._el,t),this._time=n,0!==e&&e%4.000244140625===0?(this._type="wheel",e=Math.floor(e/4)):0!==e&&Math.abs(e)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout,40)):this._type||(this._type=Math.abs(r*e)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&this._zoom(-e,t),t.preventDefault()},_onTimeout:function(){this._type="wheel",this._zoom(-this._lastValue)},_zoom:function(t,e){if(0!==t){var n=this._map,r=2/(1+Math.exp(-Math.abs(t/100)));0>t&&0!==r&&(r=1/r);var o=n.ease?n.ease.to:n.transform.scale,i=n.transform.scaleZoom(o*r);n.zoomTo(i,{duration:0,around:n.unproject(this._pos),delayEndEvents:200},{originalEvent:e})}}}},{"../../util/browser":92,"../../util/dom":95,"../../util/util":107}],86:[function(t,e,n){function r(t){this._map=t,this._el=t.getCanvasContainer(),i.bindHandlers(this)}var o=t("../../util/dom"),i=t("../../util/util");e.exports=r;var s=.15,a=i.bezier(0,0,s,1),u=12,l=2.5,c=.15,p=4;r.prototype={_enabled:!1,isEnabled:function(){return this._enabled},enable:function(){this.isEnabled()||(this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)},disableRotation:function(){this._rotationDisabled=!0},enableRotation:function(){this._rotationDisabled=!1},_onStart:function(t){if(2===t.touches.length){var e=o.mousePos(this._el,t.touches[0]),n=o.mousePos(this._el,t.touches[1]);this._startVec=e.sub(n),this._startScale=this._map.transform.scale,this._startBearing=this._map.transform.bearing,this._gestureIntent=void 0,this._inertia=[],document.addEventListener("touchmove",this._onMove,!1),document.addEventListener("touchend",this._onEnd,!1)}},_onMove:function(t){if(2===t.touches.length){var e=o.mousePos(this._el,t.touches[0]),n=o.mousePos(this._el,t.touches[1]),r=e.add(n).div(2),i=e.sub(n),s=i.mag()/this._startVec.mag(),a=this._rotationDisabled?0:180*i.angleWith(this._startVec)/Math.PI,u=this._map;if(this._gestureIntent){var l={duration:0,around:u.unproject(r)};"rotate"===this._gestureIntent&&(l.bearing=this._startBearing+a),"zoom"!==this._gestureIntent&&"rotate"!==this._gestureIntent||(l.zoom=u.transform.scaleZoom(this._startScale*s)),u.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),s,r]),u.easeTo(l,{originalEvent:t})}else{var h=Math.abs(1-s)>c,d=Math.abs(a)>p;d?this._gestureIntent="rotate":h&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=i,this._startScale=u.transform.scale,this._startBearing=u.transform.bearing)}t.preventDefault()}},_onEnd:function(t){document.removeEventListener("touchmove",this._onMove),document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer();var e=this._inertia,n=this._map;if(e.length<2)return void n.snapToNorth({},{originalEvent:t});var r=e[e.length-1],o=e[0],i=n.transform.scaleZoom(this._startScale*r[1]),c=n.transform.scaleZoom(this._startScale*o[1]),p=i-c,h=(r[0]-o[0])/1e3,d=r[2];if(0===h||i===c)return void n.snapToNorth({},{originalEvent:t});var f=p*s/h;Math.abs(f)>l&&(f=f>0?l:-l);var g=1e3*Math.abs(f/(u*s)),m=i+f*g/2e3;0>m&&(m=0),n.easeTo({zoom:m,duration:g,easing:a,around:n.unproject(d)},{originalEvent:t})},_drainInertiaBuffer:function(){for(var t=this._inertia,e=Date.now(),n=160;t.length>2&&e-t[0][0]>n;)t.shift()}}},{"../../util/dom":95,"../../util/util":107}],87:[function(t,e,n){function r(){o.bindAll(["_onHashChange","_updateHash"],this)}e.exports=r;var o=t("../util/util");r.prototype={addTo:function(t){return this._map=t,window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},remove:function(){return window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),delete this._map,this},_onHashChange:function(){var t=location.hash.replace("#","").split("/");return t.length>=3&&(this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:+(t[3]||0)}),!0)},_updateHash:function(){var t=this._map.getCenter(),e=this._map.getZoom(),n=this._map.getBearing(),r=Math.max(0,Math.ceil(Math.log(e)/Math.LN2)),o="#"+Math.round(100*e)/100+"/"+t.lat.toFixed(r)+"/"+t.lng.toFixed(r)+(n?"/"+Math.round(10*n)/10:"");window.history.replaceState("","",o)}}},{"../util/util":107}],88:[function(t,e,n){function r(t){t.parentNode&&t.parentNode.removeChild(t)}var o=t("../util/canvas"),i=t("../util/util"),s=t("../util/browser"),a=t("../util/browser").window,u=t("../util/evented"),l=t("../util/dom"),c=t("../style/style"),p=t("../style/animation_loop"),h=t("../render/painter"),d=t("../geo/transform"),f=t("./hash"),g=t("./bind_handlers"),m=t("./camera"),y=t("../geo/lng_lat"),v=t("../geo/lng_lat_bounds"),x=t("point-geometry"),b=t("./control/attribution"),j=0,_=20,E={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:j,maxZoom:_,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,workerCount:Math.max(s.hardwareConcurrency-1,1)},w=e.exports=function(t){if(t=i.extend({},E,t),t.workerCount<1)throw new Error("workerCount must an integer greater than or equal to 1.");this._interactive=t.interactive,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._trackResize=t.trackResize,this._workerCount=t.workerCount,"string"==typeof t.container?this._container=document.getElementById(t.container):this._container=t.container,this.animationLoop=new p,this.transform=new d(t.minZoom,t.maxZoom),t.maxBounds&&this.setMaxBounds(t.maxBounds),i.bindAll(["_forwardStyleEvent","_forwardSourceEvent","_forwardLayerEvent","_forwardTileEvent","_onStyleLoad","_onStyleChange","_onSourceAdd","_onSourceRemove","_onSourceUpdate","_onWindowOnline","_onWindowResize","onError","_update","_render"],this),this._setupContainer(),this._setupPainter(),this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),this.on("moveend",function(){this.animationLoop.set(300),this._rerender()}.bind(this)),"undefined"!=typeof a&&(a.addEventListener("online",this._onWindowOnline,!1),a.addEventListener("resize",this._onWindowResize,!1)),g(this,{scrollZoom:t.interactive&&t.scrollZoom,boxZoom:t.interactive&&t.boxZoom,dragRotate:t.interactive&&t.dragRotate,dragPan:t.interactive&&t.dragPan,keyboard:t.interactive&&t.keyboard,doubleClickZoom:t.interactive&&t.doubleClickZoom,touchZoomRotate:t.interactive&&t.touchZoomRotate},t),this._hash=t.hash&&(new f).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),this.stacks={},this._classes=[],this.resize(),t.classes&&this.setClasses(t.classes),t.style&&this.setStyle(t.style),t.attributionControl&&this.addControl(new b(t.attributionControl)),this.on("error",this.onError),this.on("style.error",this.onError),this.on("source.error",this.onError),this.on("tile.error",this.onError),this.on("layer.error",this.onError)};i.extend(w.prototype,u),i.extend(w.prototype,m.prototype),i.extend(w.prototype,{addControl:function(t){return t.addTo(this),this},addClass:function(t,e){return this._classes.indexOf(t)>=0||""===t?this:(this._classes.push(t),this._classOptions=e,this.style&&this.style.updateClasses(),this._update(!0))},removeClass:function(t,e){var n=this._classes.indexOf(t);return 0>n||""===t?this:(this._classes.splice(n,1),this._classOptions=e,this.style&&this.style.updateClasses(),this._update(!0))},setClasses:function(t,e){for(var n={},r=0;r<t.length;r++)""!==t[r]&&(n[t[r]]=!0);return this._classes=Object.keys(n),this._classOptions=e,this.style&&this.style.updateClasses(),this._update(!0)},hasClass:function(t){return this._classes.indexOf(t)>=0},getClasses:function(){return this._classes},resize:function(){var t=0,e=0;return this._container&&(t=this._container.offsetWidth||400,e=this._container.offsetHeight||300),this._canvas.resize(t,e),this.transform.resize(t,e),this.painter.resize(t,e),this.fire("movestart").fire("move").fire("resize").fire("moveend")},getBounds:function(){var t=new v(this.transform.pointLocation(new x(0,0)),this.transform.pointLocation(this.transform.size));return(this.transform.angle||this.transform.pitch)&&(t.extend(this.transform.pointLocation(new x(this.transform.size.x,0))),t.extend(this.transform.pointLocation(new x(0,this.transform.size.y)))),t},setMaxBounds:function(t){if(t){var e=v.convert(t);this.transform.lngRange=[e.getWest(),e.getEast()],this.transform.latRange=[e.getSouth(),e.getNorth()],this.transform._constrain(),this._update()}else null!==t&&void 0!==t||(this.transform.lngRange=[],this.transform.latRange=[],this._update());return this},setMinZoom:function(t){if(t=null===t||void 0===t?j:t,t>=j&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between "+j+" and the current maxZoom, inclusive")},setMaxZoom:function(t){if(t=null===t||void 0===t?_:t,t>=this.transform.minZoom&&_>=t)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be between the current minZoom and "+_+", inclusive")},project:function(t){return this.transform.locationPoint(y.convert(t))},unproject:function(t){return this.transform.pointLocation(x.convert(t))},queryRenderedFeatures:function(t,e){t instanceof x||Array.isArray(t)||(e=t,t=void 0);var n=this._makeQueryGeometry(t);return this.style.queryRenderedFeatures(n,e,this.transform.zoom,this.transform.angle)},_makeQueryGeometry:function(t){void 0===t&&(t=[x.convert([0,0]),x.convert([this.transform.width,this.transform.height])]);var e,n=t instanceof x||"number"==typeof t[0];if(n){var r=x.convert(t);e=[r]}else{var o=[x.convert(t[0]),x.convert(t[1])];e=[o[0],new x(o[1].x,o[0].y),o[1],new x(o[0].x,o[1].y),o[0]]}return e=e.map(function(t){return this.transform.pointCoordinate(t)}.bind(this))},querySourceFeatures:function(t,e){return this.style.querySourceFeatures(t,e)},setStyle:function(t){return this.style&&(this.style.off("load",this._onStyleLoad).off("error",this._forwardStyleEvent).off("change",this._onStyleChange).off("source.add",this._onSourceAdd).off("source.remove",this._onSourceRemove).off("source.load",this._onSourceUpdate).off("source.error",this._forwardSourceEvent).off("source.change",this._onSourceUpdate).off("layer.add",this._forwardLayerEvent).off("layer.remove",this._forwardLayerEvent).off("layer.error",this._forwardLayerEvent).off("tile.add",this._forwardTileEvent).off("tile.remove",this._forwardTileEvent).off("tile.load",this._update).off("tile.error",this._forwardTileEvent).off("tile.stats",this._forwardTileEvent)._remove(),this.off("rotate",this.style._redoPlacement),this.off("pitch",this.style._redoPlacement)),t?(t instanceof c?this.style=t:this.style=new c(t,this.animationLoop,this._workerCount),this.style.on("load",this._onStyleLoad).on("error",this._forwardStyleEvent).on("change",this._onStyleChange).on("source.add",this._onSourceAdd).on("source.remove",this._onSourceRemove).on("source.load",this._onSourceUpdate).on("source.error",this._forwardSourceEvent).on("source.change",this._onSourceUpdate).on("layer.add",this._forwardLayerEvent).on("layer.remove",this._forwardLayerEvent).on("layer.error",this._forwardLayerEvent).on("tile.add",this._forwardTileEvent).on("tile.remove",this._forwardTileEvent).on("tile.load",this._update).on("tile.error",this._forwardTileEvent).on("tile.stats",this._forwardTileEvent),this.on("rotate",this.style._redoPlacement),this.on("pitch",this.style._redoPlacement),this):(this.style=null,this)},getStyle:function(){return this.style?this.style.serialize():void 0},addSource:function(t,e){return this.style.addSource(t,e),this._update(!0),this},removeSource:function(t){return this.style.removeSource(t),this._update(!0),this},getSource:function(t){return this.style.getSource(t)},addLayer:function(t,e){return this.style.addLayer(t,e),this._update(!0),this},removeLayer:function(t){return this.style.removeLayer(t),this._update(!0),this},getLayer:function(t){return this.style.getLayer(t)},setFilter:function(t,e){return this.style.setFilter(t,e),this._update(!0),this},setLayerZoomRange:function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0),this},getFilter:function(t){return this.style.getFilter(t)},setPaintProperty:function(t,e,n,r){return this.style.setPaintProperty(t,e,n,r),this._update(!0),this},getPaintProperty:function(t,e,n){return this.style.getPaintProperty(t,e,n)},setLayoutProperty:function(t,e,n){return this.style.setLayoutProperty(t,e,n),this._update(!0),this},getLayoutProperty:function(t,e){return this.style.getLayoutProperty(t,e)},getContainer:function(){return this._container},getCanvasContainer:function(){return this._canvasContainer},getCanvas:function(){return this._canvas.getElement()},_setupContainer:function(){var t=this._container;t.classList.add("mapboxgl-map");var e=this._canvasContainer=l.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=new o(this,e);var n=this._controlContainer=l.create("div","mapboxgl-control-container",t),r=this._controlCorners={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){r[t]=l.create("div","mapboxgl-ctrl-"+t,n)})},_setupPainter:function(){var t=this._canvas.getWebGLContext({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer});return t?void(this.painter=new h(t,this.transform)):void this.fire("error",{error:new Error("Failed to initialize WebGL")})},_contextLost:function(t){t.preventDefault(),this._frameId&&s.cancelFrame(this._frameId),this.fire("webglcontextlost",{originalEvent:t})},_contextRestored:function(t){this._setupPainter(),this.resize(),this._update(),this.fire("webglcontextrestored",{originalEvent:t})},loaded:function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},_update:function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this._rerender(),this):this},_render:function(){try{this.style&&this._styleDirty&&(this._styleDirty=!1,this.style.update(this._classes,this._classOptions),this._classOptions=null,this.style._recalculate(this.transform.zoom)),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.painter.render(this.style,{debug:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,vertices:this.vertices,rotating:this.rotating,zooming:this.zooming}),this.fire("render"),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire("load")),this._frameId=null,this.animationLoop.stopped()||(this._styleDirty=!0),(this._sourcesDirty||this._repaint||!this.animationLoop.stopped())&&this._rerender()}catch(t){this.fire("error",{error:t})}return this},remove:function(){this._hash&&this._hash.remove(),s.cancelFrame(this._frameId),this.setStyle(null),"undefined"!=typeof a&&a.removeEventListener("resize",this._onWindowResize,!1),r(this._canvasContainer),r(this._controlContainer),this._container.classList.remove("mapboxgl-map")},onError:function(t){console.error(t.error)},_rerender:function(){this.style&&!this._frameId&&(this._frameId=s.frame(this._render))},_forwardStyleEvent:function(t){this.fire("style."+t.type,i.extend({style:t.target},t))},_forwardSourceEvent:function(t){this.fire(t.type,i.extend({style:t.target},t))},_forwardLayerEvent:function(t){this.fire(t.type,i.extend({style:t.target},t))},_forwardTileEvent:function(t){this.fire(t.type,i.extend({style:t.target},t))},_onStyleLoad:function(t){this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this.style.update(this._classes,{transition:!1}),this._forwardStyleEvent(t)},_onStyleChange:function(t){this._update(!0),this._forwardStyleEvent(t)},_onSourceAdd:function(t){var e=t.source;e.onAdd&&e.onAdd(this),this._forwardSourceEvent(t)},_onSourceRemove:function(t){var e=t.source;e.onRemove&&e.onRemove(this),this._forwardSourceEvent(t)},_onSourceUpdate:function(t){this._update(),this._forwardSourceEvent(t)},_onWindowOnline:function(){this._update()},_onWindowResize:function(){this._trackResize&&this.stop().resize()._update()}}),i.extendAll(w.prototype,{_showTileBoundaries:!1,get showTileBoundaries(){return this._showTileBoundaries},set showTileBoundaries(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},_showCollisionBoxes:!1,get showCollisionBoxes(){return this._showCollisionBoxes},set showCollisionBoxes(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,this.style._redoPlacement())},_showOverdrawInspector:!1,get showOverdrawInspector(){return this._showOverdrawInspector},set showOverdrawInspector(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},_repaint:!1,get repaint(){return this._repaint},set repaint(t){this._repaint=t,this._update()},_vertices:!1,get vertices(){return this._vertices},set vertices(t){this._vertices=t,this._update()}})},{"../geo/lng_lat":10,"../geo/lng_lat_bounds":11,"../geo/transform":12,"../render/painter":26,"../style/animation_loop":42,"../style/style":45,"../util/browser":92,"../util/canvas":93,"../util/dom":95,"../util/evented":99,"../util/util":107,"./bind_handlers":74,"./camera":75,"./control/attribution":76,"./hash":87,"point-geometry":169}],89:[function(t,e,n){function r(t){o.setOptions(this,t),o.bindAll(["_update","_onClickClose"],this)}e.exports=r;var o=t("../util/util"),i=t("../util/evented"),s=t("../util/dom"),a=t("../geo/lng_lat");r.prototype=o.inherit(i,{options:{closeButton:!0,closeOnClick:!0},addTo:function(t){return this._map=t,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this},remove:function(){return this._content&&this._content.parentNode&&this._content.parentNode.removeChild(this._content),this._container&&(this._container.parentNode.removeChild(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this},getLngLat:function(){return this._lngLat},setLngLat:function(t){return this._lngLat=a.convert(t),this._update(),this},setText:function(t){return this.setDOMContent(document.createTextNode(t))},setHTML:function(t){var e,n=document.createDocumentFragment(),r=document.createElement("body");for(r.innerHTML=t;e=r.firstChild,e;)n.appendChild(e);return this.setDOMContent(n)},setDOMContent:function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},_createContent:function(){this._content&&this._content.parentNode&&this._content.parentNode.removeChild(this._content),this._content=s.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=s.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},_update:function(){if(this._map&&this._lngLat&&this._content){this._container||(this._container=s.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=s.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content));var t=this._map.project(this._lngLat).round(),e=this.options.anchor;if(!e){var n=this._container.offsetWidth,r=this._container.offsetHeight;e=t.y<r?["top"]:t.y>this._map.transform.height-r?["bottom"]:[],t.x<n/2?e.push("left"):t.x>this._map.transform.width-n/2&&e.push("right"),e=0===e.length?"bottom":e.join("-")}var o={top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},i=this._container.classList;for(var a in o)i.remove("mapboxgl-popup-anchor-"+a);i.add("mapboxgl-popup-anchor-"+e),s.setTransform(this._container,o[e]+" translate("+t.x+"px,"+t.y+"px)")}},_onClickClose:function(){this.remove()}})},{"../geo/lng_lat":10,"../util/dom":95,"../util/evented":99,"../util/util":107}],90:[function(t,e,n){function r(t,e){this.target=t,this.parent=e,this.callbacks={},this.callbackID=0,this.receive=this.receive.bind(this),this.target.addEventListener("message",this.receive,!1)}e.exports=r,r.prototype.receive=function(t){var e,n=t.data;if("<response>"===n.type)e=this.callbacks[n.id],delete this.callbacks[n.id],e(n.error||null,n.data);else if("undefined"!=typeof n.id){var r=n.id;this.parent[n.type](n.data,function(t,e,n){this.postMessage({type:"<response>",id:String(r),error:t?String(t):null,data:e},n)}.bind(this))}else this.parent[n.type](n.data)},r.prototype.send=function(t,e,n,r){var o=null;n&&(this.callbacks[o=this.callbackID++]=n),this.postMessage({type:t,id:String(o),data:e},r)},r.prototype.postMessage=function(t,e){this.target.postMessage(t,e)}},{}],91:[function(t,e,n){function r(t){var e=document.createElement("a");return e.href=t,e.protocol===document.location.protocol&&e.host===document.location.host}n.getJSON=function(t,e){var n=new XMLHttpRequest;return n.open("GET",t,!0),n.setRequestHeader("Accept","application/json"),n.onerror=function(t){e(t)},n.onload=function(){if(n.status>=200&&n.status<300&&n.response){var t;try{t=JSON.parse(n.response)}catch(r){return e(r)}e(null,t)}else e(new Error(n.statusText))},n.send(),n},n.getArrayBuffer=function(t,e){var n=new XMLHttpRequest;return n.open("GET",t,!0),n.responseType="arraybuffer",n.onerror=function(t){e(t)},n.onload=function(){n.status>=200&&n.status<300&&n.response?e(null,n.response):e(new Error(n.statusText))},n.send(),n},n.getImage=function(t,e){return n.getArrayBuffer(t,function(t,n){if(t)return e(t);var r=new Image;r.onload=function(){e(null,r),(window.URL||window.webkitURL).revokeObjectURL(r.src)};var o=new Blob([new Uint8Array(n)],{type:"image/png"});return r.src=(window.URL||window.webkitURL).createObjectURL(o),r.getData=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return t.width=r.width,t.height=r.height,
e.drawImage(r,0,0),e.getImageData(0,0,r.width,r.height).data},r})},n.getVideo=function(t,e){var n=document.createElement("video");n.onloadstart=function(){e(null,n)};for(var o=0;o<t.length;o++){var i=document.createElement("source");r(t[o])||(n.crossOrigin="Anonymous"),i.src=t[o],n.appendChild(i)}return n.getData=function(){return n},n}},{}],92:[function(t,e,n){n.window=window,e.exports.now=function(){return window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date)}();var r=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;n.frame=function(t){return r(t)};var o=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame;n.cancelFrame=function(t){o(t)},n.timed=function(t,r,o){function i(u){s||(u=e.exports.now(),u>=a+r?t.call(o,1):(t.call(o,(u-a)/r),n.frame(i)))}if(!r)return t.call(o,1),null;var s=!1,a=e.exports.now();return n.frame(i),function(){s=!0}},n.supported=t("mapbox-gl-js-supported"),n.hardwareConcurrency=navigator.hardwareConcurrency||4,Object.defineProperty(n,"devicePixelRatio",{get:function(){return window.devicePixelRatio}}),n.supportsWebp=!1;var i=document.createElement("img");i.onload=function(){n.supportsWebp=!0},i.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=",n.supportsGeolocation=!!navigator.geolocation},{"mapbox-gl-js-supported":139}],93:[function(t,e,n){function r(t,e){this.canvas=document.createElement("canvas"),t&&e&&(this.canvas.style.position="absolute",this.canvas.classList.add("mapboxgl-canvas"),this.canvas.addEventListener("webglcontextlost",t._contextLost.bind(t),!1),this.canvas.addEventListener("webglcontextrestored",t._contextRestored.bind(t),!1),this.canvas.setAttribute("tabindex",0),e.appendChild(this.canvas))}var o=t("../util"),i=t("mapbox-gl-js-supported");e.exports=r,r.prototype.resize=function(t,e){var n=window.devicePixelRatio||1;this.canvas.width=n*t,this.canvas.height=n*e,this.canvas.style.width=t+"px",this.canvas.style.height=e+"px"},r.prototype.getWebGLContext=function(t){return t=o.extend({},t,i.webGLContextAttributes),this.canvas.getContext("webgl",t)||this.canvas.getContext("experimental-webgl",t)},r.prototype.getElement=function(){return this.canvas}},{"../util":107,"mapbox-gl-js-supported":139}],94:[function(t,e,n){function r(e,n){this.actors=[],this.currentActor=0;for(var r=0;e>r;r++){var s=new i(t("../../source/worker")),a=new o(s,n);a.name="Worker "+r,this.actors.push(a)}}var o=t("../actor"),i=t("webworkify");e.exports=r,r.prototype={broadcast:function(t,e){for(var n=0;n<this.actors.length;n++)this.actors[n].send(t,e)},send:function(t,e,n,r,o){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(t,e,n,o),r},remove:function(){for(var t=0;t<this.actors.length;t++)this.actors[t].target.terminate();this.actors=[]}}},{"../../source/worker":40,"../actor":90,webworkify:186}],95:[function(t,e,n){function r(t){for(var e=0;e<t.length;e++)if(t[e]in a)return t[e]}function o(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",o,!0)}var i=t("point-geometry");n.create=function(t,e,n){var r=document.createElement(t);return e&&(r.className=e),n&&n.appendChild(r),r};var s,a=document.documentElement.style,u=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){u&&(s=a[u],a[u]="none")},n.enableDrag=function(){u&&(a[u]=s)};var l=r(["transform","WebkitTransform"]);n.setTransform=function(t,e){t.style[l]=e},n.suppressClick=function(){window.addEventListener("click",o,!0),window.setTimeout(function(){window.removeEventListener("click",o,!0)},0)},n.mousePos=function(t,e){var n=t.getBoundingClientRect();return e=e.touches?e.touches[0]:e,new i(e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop)},n.touchPos=function(t,e){for(var n=t.getBoundingClientRect(),r=[],o=0;o<e.touches.length;o++)r.push(new i(e.touches[o].clientX-n.left-t.clientLeft,e.touches[o].clientY-n.top-t.clientTop));return r}},{"point-geometry":169}],96:[function(t,e,n){function r(t,e){return e.area-t.area}function o(t){for(var e,n,r=0,o=0,i=t.length,s=i-1;i>o;s=o++)e=t[o],n=t[s],r+=(n.x-e.x)*(e.y+n.y);return r}var i=t("quickselect");e.exports=function(t,e){var n=t.length;if(1>=n)return[t];for(var s,a,u=[],l=0;n>l;l++){var c=o(t[l]);0!==c&&(t[l].area=Math.abs(c),void 0===a&&(a=0>c),a===0>c?(s&&u.push(s),s=[t[l]]):s.push(t[l]))}if(s&&u.push(s),e>1)for(var p=0;p<u.length;p++)u[p].length<=e||(i(u[p],e,1,u[p].length-1,r),u[p]=u[p].slice(0,e));return u}},{quickselect:170}],97:[function(t,e,n){e.exports={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0}},{}],98:[function(t,e,n){function r(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}}e.exports=r,r.prototype.encode=function(t){return this._stringToNumber[t]},r.prototype.decode=function(t){return this._numberToString[t]}},{}],99:[function(t,e,n){var r=t("./util"),o={on:function(t,e){return this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e),this},off:function(t,e){if(!t)return delete this._events,this;if(!this.listens(t))return this;if(e){var n=this._events[t].indexOf(e);n>=0&&this._events[t].splice(n,1),this._events[t].length||delete this._events[t]}else delete this._events[t];return this},once:function(t,e){var n=function(r){this.off(t,n),e.call(this,r)}.bind(this);return this.on(t,n),this},fire:function(t,e){if(!this.listens(t))return this;e=r.extend({},e),r.extend(e,{type:t,target:this});for(var n=this._events[t].slice(),o=0;o<n.length;o++)n[o].call(this,e);return this},listens:function(t){return!(!this._events||!this._events[t])}};e.exports=o},{"./util":107}],100:[function(t,e,n){function r(t,e){this.stacks=t.readFields(o,[],e)}function o(t,e,n){if(1===t){var r=n.readMessage(i,{glyphs:{}});e.push(r)}}function i(t,e,n){if(1===t)e.name=n.readString();else if(2===t)e.range=n.readString();else if(3===t){var r=n.readMessage(s,{});e.glyphs[r.id]=r}}function s(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}e.exports=r},{}],101:[function(t,e,n){function r(t,e,n){return t*(1-n)+e*n}e.exports=r,r.number=r,r.vec2=function(t,e,n){return[r(t[0],e[0],n),r(t[1],e[1],n)]},r.color=function(t,e,n){return[r(t[0],e[0],n),r(t[1],e[1],n),r(t[2],e[2],n),r(t[3],e[3],n)]},r.array=function(t,e,n){return t.map(function(t,o){return r(t,e[o],n)})}},{}],102:[function(t,e,n){function r(t,e,n){for(var r=0;r<t.length;r++)for(var o=t[r],i=0;i<e.length;i++)for(var s=e[i],a=0;a<s.length;a++){var u=s[a];if(d(o,u))return!0;if(c(u,o,n))return!0}return!1}function o(t,e){if(1===t.length&&1===t[0].length)return h(e,t[0][0]);for(var n=0;n<e.length;n++)for(var r=e[n],o=0;o<r.length;o++)if(h(t,r[o]))return!0;for(var i=0;i<t.length;i++){for(var s=t[i],u=0;u<s.length;u++)if(h(e,s[u]))return!0;for(var l=0;l<e.length;l++)if(a(s,e[l]))return!0}return!1}function i(t,e,n){for(var r=0;r<e.length;r++)for(var o=e[r],i=0;i<t.length;i++){var a=t[i];if(a.length>=3)for(var u=0;u<o.length;u++)if(d(a,o[u]))return!0;if(s(a,o,n))return!0}return!1}function s(t,e,n){if(t.length>1){if(a(t,e))return!0;for(var r=0;r<e.length;r++)if(c(e[r],t,n))return!0}for(var o=0;o<t.length;o++)if(c(t[o],e,n))return!0;return!1}function a(t,e){for(var n=0;n<t.length-1;n++)for(var r=t[n],o=t[n+1],i=0;i<e.length-1;i++){var s=e[i],a=e[i+1];if(l(r,o,s,a))return!0}return!1}function u(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function l(t,e,n,r){return u(t,n,r)!==u(e,n,r)&&u(t,e,n)!==u(t,e,r)}function c(t,e,n){var r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(var o=1;o<e.length;o++){var i=e[o-1],s=e[o];if(p(t,i,s)<r)return!0}return!1}function p(t,e,n){var r=e.distSqr(n);if(0===r)return t.distSqr(e);var o=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return 0>o?t.distSqr(e):o>1?t.distSqr(n):t.distSqr(n.sub(e)._mult(o)._add(e))}function h(t,e){for(var n,r,o,i=!1,s=0;s<t.length;s++){n=t[s];for(var a=0,u=n.length-1;a<n.length;u=a++)r=n[a],o=n[u],r.y>e.y!=o.y>e.y&&e.x<(o.x-r.x)*(e.y-r.y)/(o.y-r.y)+r.x&&(i=!i)}return i}function d(t,e){for(var n=!1,r=0,o=t.length-1;r<t.length;o=r++){var i=t[r],s=t[o];i.y>e.y!=s.y>e.y&&e.x<(s.x-i.x)*(e.y-i.y)/(s.y-i.y)+i.x&&(n=!n)}return n}e.exports={multiPolygonIntersectsBufferedMultiPoint:r,multiPolygonIntersectsMultiPolygon:o,multiPolygonIntersectsBufferedMultiLine:i}},{}],103:[function(t,e,n){function r(t,e){this.max=t,this.onRemove=e,this.reset()}e.exports=r,r.prototype.reset=function(){for(var t in this.data)this.onRemove(this.data[t]);return this.data={},this.order=[],this},r.prototype.add=function(t,e){if(this.has(t))this.order.splice(this.order.indexOf(t),1),this.data[t]=e,this.order.push(t);else if(this.data[t]=e,this.order.push(t),this.order.length>this.max){var n=this.get(this.order[0]);n&&this.onRemove(n)}return this},r.prototype.has=function(t){return t in this.data},r.prototype.keys=function(){return this.order},r.prototype.get=function(t){if(!this.has(t))return null;var e=this.data[t];return delete this.data[t],this.order.splice(this.order.indexOf(t),1),e},r.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this.get(this.order[0]);e&&this.onRemove(e)}return this}},{}],104:[function(t,e,n){function r(t,e,n){if(n=n||o.ACCESS_TOKEN,!n&&o.REQUIRE_ACCESS_TOKEN)throw new Error("An API access token is required to use Mapbox GL. See https://www.mapbox.com/developers/api/#access-tokens");if(t=t.replace(/^mapbox:\/\//,o.API_URL+e),t+=-1!==t.indexOf("?")?"&access_token=":"?access_token=",o.REQUIRE_ACCESS_TOKEN){if("s"===n[0])throw new Error("Use a public access token (pk.*) with Mapbox GL JS, not a secret access token (sk.*). See https://www.mapbox.com/developers/api/#access-tokens");t+=n}return t}var o=t("./config"),i=t("./browser");e.exports.normalizeStyleURL=function(t,e){if(!t.match(/^mapbox:\/\/styles\//))return t;var n=t.split("/"),o=n[3],i=n[4],s=n[5]?"/draft":"";return r("mapbox://"+o+"/"+i+s,"/styles/v1/",e)},e.exports.normalizeSourceURL=function(t,e){return t.match(/^mapbox:\/\//)?r(t+".json","/v4/",e)+"&secure":t},e.exports.normalizeGlyphsURL=function(t,e){if(!t.match(/^mapbox:\/\//))return t;var n=t.split("/")[3];return r("mapbox://"+n+"/{fontstack}/{range}.pbf","/fonts/v1/",e)},e.exports.normalizeSpriteURL=function(t,e,n,o){if(!t.match(/^mapbox:\/\/sprites\//))return t+e+n;var i=t.split("/"),s=i[3],a=i[4],u=i[5]?"/draft":"";return r("mapbox://"+s+"/"+a+u+"/sprite"+e+n,"/styles/v1/",o)},e.exports.normalizeTileURL=function(t,e,n){if(!e||!e.match(/^mapbox:\/\//))return t;t=t.replace(/([?&]access_token=)tk\.[^&]+/,"$1"+o.ACCESS_TOKEN);var r=i.supportsWebp?"webp":"$1";return t.replace(/\.((?:png|jpg)\d*)(?=$|\?)/,i.devicePixelRatio>=2||512===n?"@2x."+r:"."+r)}},{"./browser":92,"./config":97}],105:[function(t,e,n){function r(t){function e(){h.apply(this,arguments)}function n(){d.apply(this,arguments),this.members=e.prototype.members}var r=JSON.stringify(t);if(g[r])return g[r];void 0===t.alignment&&(t.alignment=1),e.prototype=Object.create(h.prototype);var a=0,l=0,f=["Uint8"];return e.prototype.members=t.members.map(function(n){n={name:n.name,type:n.type,components:n.components||1},f.indexOf(n.type)<0&&f.push(n.type);var r=s(n.type);l=Math.max(l,r),n.offset=a=i(a,Math.max(t.alignment,r));for(var o=0;o<n.components;o++)Object.defineProperty(e.prototype,n.name+(1===n.components?"":o),{get:c(n,o),set:p(n,o)});return a+=r*n.components,n}),e.prototype.alignment=t.alignment,e.prototype.size=i(a,Math.max(l,t.alignment)),n.serialize=o,n.prototype=Object.create(d.prototype),n.prototype.StructType=e,n.prototype.bytesPerElement=e.prototype.size,n.prototype.emplaceBack=u(e.prototype.members,e.prototype.size),n.prototype._usedTypes=f,g[r]=n,n}function o(){return{members:this.prototype.StructType.prototype.members,alignment:this.prototype.StructType.prototype.alignment,bytesPerElement:this.prototype.bytesPerElement}}function i(t,e){return Math.ceil(t/e)*e}function s(t){return f[t].BYTES_PER_ELEMENT}function a(t){return t.toLowerCase()}function u(t,e){for(var n=[],r=[],o="var i = this.length;\nthis.resize(this.length + 1);\n",i=0;i<t.length;i++){var u=t[i],l=s(u.type);n.indexOf(l)<0&&(n.push(l),o+="var o"+l.toFixed(0)+" = i * "+(e/l).toFixed(0)+";\n");for(var c=0;c<u.components;c++){var p="v"+r.length,h="o"+l.toFixed(0)+" + "+(u.offset/l+c).toFixed(0);o+="this."+a(u.type)+"["+h+"] = "+p+";\n",r.push(p)}}return o+="return i;",new Function(r,o)}function l(t,e){var n="this._pos"+s(t.type).toFixed(0),r=(t.offset/s(t.type)+e).toFixed(0),o=n+" + "+r;return"this._structArray."+a(t.type)+"["+o+"]"}function c(t,e){return new Function([],"return "+l(t,e)+";")}function p(t,e){return new Function(["x"],l(t,e)+" = x;")}function h(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}function d(t){void 0!==t?(this.arrayBuffer=t.arrayBuffer,this.length=t.length,this.capacity=this.arrayBuffer.byteLength/this.bytesPerElement,this._refreshViews()):(this.capacity=-1,this.resize(0))}e.exports=r;var f={Int8:Int8Array,Uint8:Uint8Array,Uint8Clamped:Uint8ClampedArray,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array,Float64:Float64Array},g={};d.prototype.DEFAULT_CAPACITY=128,d.prototype.RESIZE_MULTIPLIER=5,d.prototype.serialize=function(){return this.trim(),{length:this.length,arrayBuffer:this.arrayBuffer}},d.prototype.get=function(t){return new this.StructType(this,t)},d.prototype.trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},d.prototype.resize=function(t){if(this.length=t,t>this.capacity){this.capacity=Math.max(t,Math.floor(this.capacity*this.RESIZE_MULTIPLIER),this.DEFAULT_CAPACITY),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},d.prototype._refreshViews=function(){for(var t=0;t<this._usedTypes.length;t++){var e=this._usedTypes[t];this[a(e)]=new f[e](this.arrayBuffer)}},d.prototype.toArray=function(t,e){for(var n=[],r=t;e>r;r++){var o=this.get(r);n.push(o)}return n}},{}],106:[function(t,e,n){function r(t,e){return e.replace(/{([^{}]+)}/g,function(e,n){return n in t?t[n]:""})}e.exports=r},{}],107:[function(t,e,n){var r=t("unitbezier"),o=t("../geo/coordinate");n.easeCubicInOut=function(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)},n.bezier=function(t,e,n,o){var i=new r(t,e,n,o);return function(t){return i.solve(t)}},n.ease=n.bezier(.25,.1,.25,1),n.clamp=function(t,e,n){return Math.min(n,Math.max(e,t))},n.wrap=function(t,e,n){var r=n-e,o=((t-e)%r+r)%r+e;return o===e?n:o},n.coalesce=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];if(null!==e&&void 0!==e)return e}},n.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var r=t.length,o=new Array(t.length),i=null;t.forEach(function(t,s){e(t,function(t,e){t&&(i=t),o[s]=e,0===--r&&n(i,o)})})},n.keysDifference=function(t,e){var n=[];for(var r in t)r in e||n.push(r);return n},n.extend=function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t},n.extendAll=function(t,e){for(var n in e)Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n));return t},n.inherit=function(t,e){var r="function"==typeof t?t.prototype:t,o=Object.create(r);return n.extendAll(o,e),o},n.pick=function(t,e){for(var n={},r=0;r<e.length;r++){var o=e[r];o in t&&(n[o]=t[o])}return n};var i=1;n.uniqueId=function(){return i++},n.debounce=function(t,e){var n,r;return function(){r=arguments,clearTimeout(n),n=setTimeout(function(){t.apply(null,r)},e)}},n.bindAll=function(t,e){t.forEach(function(t){e[t]=e[t].bind(e)})},n.bindHandlers=function(t){for(var e in t)"function"==typeof t[e]&&0===e.indexOf("_on")&&(t[e]=t[e].bind(t))},n.setOptions=function(t,e){t.hasOwnProperty("options")||(t.options=t.options?Object.create(t.options):{});for(var n in e)t.options[n]=e[n];return t.options},n.getCoordinatesCenter=function(t){for(var e=1/0,n=1/0,r=-(1/0),i=-(1/0),s=0;s<t.length;s++)e=Math.min(e,t[s].column),n=Math.min(n,t[s].row),r=Math.max(r,t[s].column),i=Math.max(i,t[s].row);var a=r-e,u=i-n,l=Math.max(a,u);return new o((e+r)/2,(n+i)/2,0).zoomTo(Math.floor(-Math.log(l)/Math.LN2))},n.endsWith=function(t,e){return-1!==t.indexOf(e,t.length-e.length)},n.startsWith=function(t,e){return 0===t.indexOf(e)},n.mapObject=function(t,e,n){var r={};for(var o in t)r[o]=e.call(n||this,t[o],o,t);return r},n.filterObject=function(t,e,n){var r={};for(var o in t)e.call(n||this,t[o],o,t)&&(r[o]=t[o]);return r},n.deepEqual=function t(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1;return!0}if("object"==("undefined"==typeof e?"undefined":u(e))){if("object"!=("undefined"==typeof n?"undefined":u(n)))return!1;var o=Object.keys(e);if(o.length!==Object.keys(n).length)return!1;for(var i in e)if(!t(e[i],n[i]))return!1;return!0}return e===n},n.clone=function(t){return Array.isArray(t)?t.map(n.clone):"object"==("undefined"==typeof t?"undefined":u(t))?n.mapObject(t,n.clone):t},n.arraysIntersect=function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1};var s={};n.warnOnce=function(t){s[t]||("undefined"!=typeof console&&console.warn(t),s[t]=!0)}},{"../geo/coordinate":9,unitbezier:178}],108:[function(t,e,n){function r(t,e,n,r){this._vectorTileFeature=t,t._z=e,t._x=n,t._y=r,this.properties=t.properties,t._id&&(this.id=t._id)}e.exports=r,r.prototype={type:"Feature",get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},set geometry(t){this._geometry=t},toJSON:function(){var t={};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&"toJSON"!==e&&(t[e]=this[e]);return t}}},{}],109:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],110:[function(t,e,n){(function(t){function e(t,e){for(var n=0,r=t.length-1;r>=0;r--){var o=t[r];"."===o?t.splice(r,1):".."===o?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(t){return o.exec(t).slice(1)};n.resolve=function(){for(var n="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var s=i>=0?arguments[i]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(n=s+"/"+n,o="/"===s.charAt(0))}return n=e(r(n.split("/"),function(t){return!!t}),!o).join("/"),(o?"/":"")+n||"."},n.normalize=function(t){var o=n.isAbsolute(t),i="/"===s(t,-1);return t=e(r(t.split("/"),function(t){return!!t}),!o).join("/"),t||o||(t="."),t&&i&&(t+="/"),(o?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(r(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},n.relative=function(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var o=r(t.split("/")),i=r(e.split("/")),s=Math.min(o.length,i.length),a=s,u=0;s>u;u++)if(o[u]!==i[u]){a=u;break}for(var l=[],u=a;u<o.length;u++)l.push("..");return l=l.concat(i.slice(a)),l.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){var e=i(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(t,e){var n=i(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},n.extname=function(t){return i(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return 0>e&&(e=t.length+e),t.substr(e,n)}}).call(this,t("_process"))},{_process:111}],111:[function(t,e,n){function r(){c&&a&&(c=!1,a.length?l=a.concat(l):p=-1,l.length&&o())}function o(){if(!c){var t=setTimeout(r);c=!0;for(var e=l.length;e;){for(a=l,l=[];++p<e;)a&&a[p].run();p=-1,e=l.length}a=null,c=!1,clearTimeout(t)}}function i(t,e){this.fun=t,this.array=e}function s(){}var a,u=e.exports={},l=[],c=!1,p=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new i(t,e)),1!==l.length||c||setTimeout(o,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=s,u.addListener=s,u.once=s,u.off=s,u.removeListener=s,u.removeAllListeners=s,u.emit=s,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],112:[function(t,e,n){e.exports=function(t){return t&&"object"==("undefined"==typeof t?"undefined":u(t))&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],113:[function(t,e,n){(function(e,r){function o(t,e){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(e)?r.showHidden=e:e&&n._extend(r,e),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),l(r,t,r.depth)}function i(t,e){var n=o.styles[e];return n?"["+o.colors[n][0]+"m"+t+"["+o.colors[n][1]+"m":t}function s(t,e){return t}function a(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function l(t,e,r){if(t.customInspect&&e&&M(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var o=e.inspect(r,t);return b(o)||(o=l(t,o,r)),o}var i=c(t,e);if(i)return i;var s=Object.keys(e),u=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),I(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return p(e);if(0===s.length){if(M(e)){var m=e.name?": "+e.name:"";return t.stylize("[Function"+m+"]","special")}if(E(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(S(e))return t.stylize(Date.prototype.toString.call(e),"date");if(I(e))return p(e)}var y="",v=!1,x=["{","}"];if(g(e)&&(v=!0,x=["[","]"]),M(e)){var j=e.name?": "+e.name:"";y=" [Function"+j+"]"}if(E(e)&&(y=" "+RegExp.prototype.toString.call(e)),S(e)&&(y=" "+Date.prototype.toUTCString.call(e)),I(e)&&(y=" "+p(e)),0===s.length&&(!v||0==e.length))return x[0]+y+x[1];if(0>r)return E(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var _;return _=v?h(t,e,r,u,s):s.map(function(n){return d(t,e,r,u,n,v)}),t.seen.pop(),f(_,y,x)}function c(t,e){if(_(e))return t.stylize("undefined","undefined");if(b(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return x(e)?t.stylize(""+e,"number"):m(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}function p(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,o){for(var i=[],s=0,a=e.length;a>s;++s)N(e,String(s))?i.push(d(t,e,n,r,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(d(t,e,n,r,o,!0))}),i}function d(t,e,n,r,o,i){var s,a,u;if(u=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]},u.get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),N(r,o)||(s="["+o+"]"),a||(t.seen.indexOf(u.value)<0?(a=y(n)?l(t,u.value,null):l(t,u.value,n-1),a.indexOf("\n")>-1&&(a=i?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),_(s)){if(i&&o.match(/^\d+$/))return a;s=JSON.stringify(""+o),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function f(t,e,n){var r=0,o=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function g(t){return Array.isArray(t)}function m(t){return"boolean"==typeof t}function y(t){return null===t}function v(t){return null==t}function x(t){return"number"==typeof t}function b(t){return"string"==typeof t}function j(t){return"symbol"==("undefined"==typeof t?"undefined":u(t))}function _(t){return void 0===t}function E(t){return w(t)&&"[object RegExp]"===L(t)}function w(t){return"object"==("undefined"==typeof t?"undefined":u(t))&&null!==t}function S(t){return w(t)&&"[object Date]"===L(t)}function I(t){return w(t)&&("[object Error]"===L(t)||t instanceof Error)}function M(t){return"function"==typeof t}function C(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==("undefined"==typeof t?"undefined":u(t))||"undefined"==typeof t}function L(t){return Object.prototype.toString.call(t)}function P(t){return 10>t?"0"+t.toString(10):t.toString(10)}function T(){var t=new Date,e=[P(t.getHours()),P(t.getMinutes()),P(t.getSeconds())].join(":");return[t.getDate(),O[t.getMonth()],e].join(" ")}function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var R=/%[sdj%]/g;n.format=function(t){if(!b(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(o(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,i=r.length,s=String(t).replace(R,function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return t}}),a=r[n];i>n;a=r[++n])s+=y(a)||!w(a)?" "+a:" "+o(a);return s},n.deprecate=function(t,o){function i(){if(!s){if(e.throwDeprecation)throw new Error(o);e.traceDeprecation?console.trace(o):console.error(o),s=!0}return t.apply(this,arguments)}if(_(r.process))return function(){return n.deprecate(t,o).apply(this,arguments)};if(e.noDeprecation===!0)return t;var s=!1;return i};var A,D={};n.debuglog=function(t){if(_(A)&&(A=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!D[t])if(new RegExp("\\b"+t+"\\b","i").test(A)){var r=e.pid;D[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,e)}}else D[t]=function(){};return D[t]},n.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=g,n.isBoolean=m,n.isNull=y,n.isNullOrUndefined=v,n.isNumber=x,n.isString=b,n.isSymbol=j,n.isUndefined=_,n.isRegExp=E,n.isObject=w,n.isDate=S,n.isError=I,n.isFunction=M,n.isPrimitive=C,n.isBuffer=t("./support/isBuffer");var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",T(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n._extend=function(t,e){if(!e||!w(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,t("_process"),"undefined"!=typeof a?a:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":112,_process:111,inherits:109}],114:[function(t,e,n){function r(t){return t=Math.round(t),0>t?0:t>255?255:t}function o(t){return 0>t?0:t>1?1:t}function i(t){return r("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function s(t){return o("%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))}function a(t,e,n){return 0>n?n+=1:n>1&&(n-=1),1>6*n?t+(e-t)*n*6:1>2*n?e:2>3*n?t+(e-t)*(2/3-n)*6:t}function u(t){var e=t.replace(/ /g,"").toLowerCase();if(e in l)return l[e].slice();if("#"===e[0]){if(4===e.length){var n=parseInt(e.substr(1),16);return n>=0&&4095>=n?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null}if(7===e.length){var n=parseInt(e.substr(1),16);return n>=0&&16777215>=n?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null}return null}var o=e.indexOf("("),u=e.indexOf(")");if(-1!==o&&u+1===e.length){var c=e.substr(0,o),p=e.substr(o+1,u-(o+1)).split(","),h=1;switch(c){case"rgba":if(4!==p.length)return null;h=s(p.pop());case"rgb":return 3!==p.length?null:[i(p[0]),i(p[1]),i(p[2]),h];case"hsla":if(4!==p.length)return null;h=s(p.pop());case"hsl":if(3!==p.length)return null;var d=(parseFloat(p[0])%360+360)%360/360,f=s(p[1]),g=s(p[2]),m=.5>=g?g*(f+1):g+f-g*f,y=2*g-m;return[r(255*a(y,m,d+1/3)),r(255*a(y,m,d)),r(255*a(y,m,d-1/3)),h];default:return null}}return null}var l={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],
moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{n.parseCSSColor=u}catch(c){}},{}],115:[function(t,e,n){function r(t,e,n){n=n||2;var r=e&&e.length,i=r?e[0]*n:t.length,a=o(t,0,i,n,!0),u=[];if(!a)return u;var l,c,h,d,f,g,m;if(r&&(a=p(t,e,a,n)),t.length>80*n){l=h=t[0],c=d=t[1];for(var y=n;i>y;y+=n)f=t[y],g=t[y+1],l>f&&(l=f),c>g&&(c=g),f>h&&(h=f),g>d&&(d=g);m=Math.max(h-l,d-c)}return s(a,u,n,l,c,m),u}function o(t,e,n,r,o){var i,s;if(o===T(t,e,n,r)>0)for(i=e;n>i;i+=r)s=C(i,t[i],t[i+1],s);else for(i=n-r;i>=e;i-=r)s=C(i,t[i],t[i+1],s);return s&&_(s,s.next)&&(L(s),s=s.next),s}function i(t,e){if(!t)return t;e||(e=t);var n,r=t;do if(n=!1,r.steiner||!_(r,r.next)&&0!==j(r.prev,r,r.next))r=r.next;else{if(L(r),r=e=r.prev,r===r.next)return null;n=!0}while(n||r!==e);return e}function s(t,e,n,r,o,p,h){if(t){!h&&p&&g(t,r,o,p);for(var d,f,m=t;t.prev!==t.next;)if(d=t.prev,f=t.next,p?u(t,r,o,p):a(t))e.push(d.i/n),e.push(t.i/n),e.push(f.i/n),L(t),t=f.next,m=f.next;else if(t=f,t===m){h?1===h?(t=l(t,e,n),s(t,e,n,r,o,p,2)):2===h&&c(t,e,n,r,o,p):s(i(t),e,n,r,o,p,1);break}}}function a(t){var e=t.prev,n=t,r=t.next;if(j(e,n,r)>=0)return!1;for(var o=t.next.next;o!==t.prev;){if(x(e.x,e.y,n.x,n.y,r.x,r.y,o.x,o.y)&&j(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function u(t,e,n,r){var o=t.prev,i=t,s=t.next;if(j(o,i,s)>=0)return!1;for(var a=o.x<i.x?o.x<s.x?o.x:s.x:i.x<s.x?i.x:s.x,u=o.y<i.y?o.y<s.y?o.y:s.y:i.y<s.y?i.y:s.y,l=o.x>i.x?o.x>s.x?o.x:s.x:i.x>s.x?i.x:s.x,c=o.y>i.y?o.y>s.y?o.y:s.y:i.y>s.y?i.y:s.y,p=y(a,u,e,n,r),h=y(l,c,e,n,r),d=t.nextZ;d&&d.z<=h;){if(d!==t.prev&&d!==t.next&&x(o.x,o.y,i.x,i.y,s.x,s.y,d.x,d.y)&&j(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=t.prevZ;d&&d.z>=p;){if(d!==t.prev&&d!==t.next&&x(o.x,o.y,i.x,i.y,s.x,s.y,d.x,d.y)&&j(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function l(t,e,n){var r=t;do{var o=r.prev,i=r.next.next;!_(o,i)&&E(o,r,r.next,i)&&S(o,i)&&S(i,o)&&(e.push(o.i/n),e.push(r.i/n),e.push(i.i/n),L(r),L(r.next),r=t=i),r=r.next}while(r!==t);return r}function c(t,e,n,r,o,a){var u=t;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&b(u,l)){var c=M(u,l);return u=i(u,u.next),c=i(c,c.next),s(u,e,n,r,o,a),void s(c,e,n,r,o,a)}l=l.next}u=u.next}while(u!==t)}function p(t,e,n,r){var s,a,u,l,c,p=[];for(s=0,a=e.length;a>s;s++)u=e[s]*r,l=a-1>s?e[s+1]*r:t.length,c=o(t,u,l,r,!1),c===c.next&&(c.steiner=!0),p.push(v(c));for(p.sort(h),s=0;s<p.length;s++)d(p[s],n),n=i(n,n.next);return n}function h(t,e){return t.x-e.x}function d(t,e){if(e=f(t,e)){var n=M(e,t);i(n,n.next)}}function f(t,e){var n,r=e,o=t.x,i=t.y,s=-(1/0);do{if(i<=r.y&&i>=r.next.y){var a=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o>=a&&a>s){if(s=a,a===o){if(i===r.y)return r;if(i===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(o===s)return n.prev;var u,l=n,c=n.x,p=n.y,h=1/0;for(r=n.next;r!==l;)o>=r.x&&r.x>=c&&x(p>i?o:s,i,c,p,p>i?s:o,i,r.x,r.y)&&(u=Math.abs(i-r.y)/(o-r.x),(h>u||u===h&&r.x>n.x)&&S(r,t)&&(n=r,h=u)),r=r.next;return n}function g(t,e,n,r){var o=t;do null===o.z&&(o.z=y(o.x,o.y,e,n,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==t);o.prevZ.nextZ=null,o.prevZ=null,m(o)}function m(t){var e,n,r,o,i,s,a,u,l=1;do{for(n=t,t=null,i=null,s=0;n;){for(s++,r=n,a=0,e=0;l>e&&(a++,r=r.nextZ);e++);for(u=l;a>0||u>0&&r;)0===a?(o=r,r=r.nextZ,u--):0!==u&&r?n.z<=r.z?(o=n,n=n.nextZ,a--):(o=r,r=r.nextZ,u--):(o=n,n=n.nextZ,a--),i?i.nextZ=o:t=o,o.prevZ=i,i=o;n=r}i.nextZ=null,l*=2}while(s>1);return t}function y(t,e,n,r,o){return t=32767*(t-n)/o,e=32767*(e-r)/o,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function v(t){var e=t,n=t;do e.x<n.x&&(n=e),e=e.next;while(e!==t);return n}function x(t,e,n,r,o,i,s,a){return(o-s)*(e-a)-(t-s)*(i-a)>=0&&(t-s)*(r-a)-(n-s)*(e-a)>=0&&(n-s)*(i-a)-(o-s)*(r-a)>=0}function b(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!w(t,e)&&S(t,e)&&S(e,t)&&I(t,e)}function j(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function _(t,e){return t.x===e.x&&t.y===e.y}function E(t,e,n,r){return!!(_(t,e)&&_(n,r)||_(t,r)&&_(n,e))||j(t,e,n)>0!=j(t,e,r)>0&&j(n,r,t)>0!=j(n,r,e)>0}function w(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&E(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function S(t,e){return j(t.prev,t,t.next)<0?j(t,e,t.next)>=0&&j(t,t.prev,e)>=0:j(t,e,t.prev)<0||j(t,t.next,e)<0}function I(t,e){var n=t,r=!1,o=(t.x+e.x)/2,i=(t.y+e.y)/2;do n.y>i!=n.next.y>i&&o<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function M(t,e){var n=new P(t.i,t.x,t.y),r=new P(e.i,e.x,e.y),o=t.next,i=e.prev;return t.next=e,e.prev=t,n.next=o,o.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function C(t,e,n,r){var o=new P(t,e,n);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function L(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function P(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function T(t,e,n,r){for(var o=0,i=e,s=n-r;n>i;i+=r)o+=(t[s]-t[i])*(t[i+1]+t[s+1]),s=i;return o}e.exports=r,r.deviation=function(t,e,n,r){var o=e&&e.length,i=o?e[0]*n:t.length,s=Math.abs(T(t,0,i,n));if(o)for(var a=0,u=e.length;u>a;a++){var l=e[a]*n,c=u-1>a?e[a+1]*n:t.length;s-=Math.abs(T(t,l,c,n))}var p=0;for(a=0;a<r.length;a+=3){var h=r[a]*n,d=r[a+1]*n,f=r[a+2]*n;p+=Math.abs((t[h]-t[f])*(t[d+1]-t[h+1])-(t[h]-t[d])*(t[f+1]-t[h+1]))}return 0===s&&0===p?0:Math.abs((p-s)/s)},r.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,o=0;o<t.length;o++){for(var i=0;i<t[o].length;i++)for(var s=0;e>s;s++)n.vertices.push(t[o][i][s]);o>0&&(r+=t[o-1].length,n.holes.push(r))}return n}},{}],116:[function(t,e,n){function r(t){return new Function("f","var p = (f && f.properties || {}); return "+o(t))}function o(t){if(!t)return"true";var e=t[0];if(t.length<=1)return"any"===e?"false":"true";var n="=="===e?s(t[1],t[2],"===",!1):"!="===e?s(t[1],t[2],"!==",!1):"<"===e||">"===e||"<="===e||">="===e?s(t[1],t[2],e,!0):"any"===e?a(t.slice(1),"||"):"all"===e?a(t.slice(1),"&&"):"none"===e?c(a(t.slice(1),"||")):"in"===e?u(t[1],t.slice(2)):"!in"===e?c(u(t[1],t.slice(2))):"has"===e?l(t[1]):"!has"===e?c(l([t[1]])):"true";return"("+n+")"}function i(t){return"$type"===t?"f.type":"p["+JSON.stringify(t)+"]"}function s(t,e,n,r){var o=i(t),s="$type"===t?h.indexOf(e):JSON.stringify(e);return(r?"typeof "+o+"=== typeof "+s+"&&":"")+o+n+s}function a(t,e){return t.map(o).join(e)}function u(t,e){"$type"===t&&(e=e.map(function(t){return h.indexOf(t)}));var n=JSON.stringify(e.sort(p)),r=i(t);return e.length<=200?n+".indexOf("+r+") !== -1":"function(v, a, i, j) {while (i <= j) { var m = (i + j) >> 1;    if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;}return false; }("+r+", "+n+",0,"+(e.length-1)+")"}function l(t){return JSON.stringify(t)+" in p"}function c(t){return"!("+t+")"}function p(t,e){return e>t?-1:t>e?1:0}e.exports=r;var h=["Unknown","Point","LineString","Polygon"]},{}],117:[function(t,e,n){function r(t,e){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.map(o(r,e)),t;case"Feature":return t.geometry=r(t.geometry,e),t;case"Polygon":case"MultiPolygon":return i(t,e);default:return t}}function o(t,e){return function(n){return t(n,e)}}function i(t,e){return"Polygon"===t.type?t.coordinates=s(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(o(s,e))),t}function s(t,e){e=!!e,t[0]=a(t[0],!e);for(var n=1;n<t.length;n++)t[n]=a(t[n],e);return t}function a(t,e){return u(t)===e?t:t.reverse()}function u(t){return l.ring(t)>=0}var l=t("geojson-area");e.exports=r},{"geojson-area":118}],118:[function(t,e,n){function r(t){if("Polygon"===t.type)return o(t.coordinates);if("MultiPolygon"===t.type){for(var e=0,n=0;n<t.coordinates.length;n++)e+=o(t.coordinates[n]);return e}return null}function o(t){var e=0;if(t&&t.length>0){e+=Math.abs(i(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(i(t[n]))}return e}function i(t){var e=0;if(t.length>2){for(var n,r,o=0;o<t.length-1;o++)n=t[o],r=t[o+1],e+=s(r[0]-n[0])*(2+Math.sin(s(n[1]))+Math.sin(s(r[1])));e=e*a.RADIUS*a.RADIUS/2}return e}function s(t){return t*Math.PI/180}var a=t("wgs84");e.exports.geometry=r,e.exports.ring=i},{wgs84:119}],119:[function(t,e,n){e.exports.RADIUS=6378137,e.exports.FLATTENING=1/298.257223563,e.exports.POLAR_RADIUS=6356752.3142},{}],120:[function(t,e,n){function r(t,e,n,r,s,a,u,l){if(n/=e,r/=e,u>=n&&r>=l)return t;if(u>r||n>l)return null;for(var c=[],p=0;p<t.length;p++){var h,d,f=t[p],g=f.geometry,m=f.type;if(h=f.min[s],d=f.max[s],h>=n&&r>=d)c.push(f);else if(!(h>r||n>d)){var y=1===m?o(g,n,r,s):i(g,n,r,s,a,3===m);y.length&&c.push({geometry:y,type:m,tags:t[p].tags||null,min:f.min,max:f.max})}}return c.length?c:null}function o(t,e,n,r){for(var o=[],i=0;i<t.length;i++){var s=t[i],a=s[r];a>=e&&n>=a&&o.push(s)}return o}function i(t,e,n,r,o,i){for(var a=[],u=0;u<t.length;u++){var l,c,p,h=0,d=0,f=null,g=t[u],m=g.area,y=g.dist,v=g.length,x=[];for(c=0;v-1>c;c++)l=f||g[c],f=g[c+1],h=d||l[r],d=f[r],e>h?d>n?(x.push(o(l,f,e),o(l,f,n)),i||(x=s(a,x,m,y))):d>=e&&x.push(o(l,f,e)):h>n?e>d?(x.push(o(l,f,n),o(l,f,e)),i||(x=s(a,x,m,y))):n>=d&&x.push(o(l,f,n)):(x.push(l),e>d?(x.push(o(l,f,e)),i||(x=s(a,x,m,y))):d>n&&(x.push(o(l,f,n)),i||(x=s(a,x,m,y))));l=g[v-1],h=l[r],h>=e&&n>=h&&x.push(l),p=x[x.length-1],i&&p&&(x[0][0]!==p[0]||x[0][1]!==p[1])&&x.push(x[0]),s(a,x,m,y)}return a}function s(t,e,n,r){return e.length&&(e.area=n,e.dist=r,t.push(e)),[]}e.exports=r},{}],121:[function(t,e,n){function r(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)o(n,t.features[r],e);else"Feature"===t.type?o(n,t,e):o(n,{geometry:t},e);return n}function o(t,e,n){var r,u,l,c=e.geometry,p=c.type,h=c.coordinates,d=e.properties;if("Point"===p)t.push(i(d,1,[a(h)]));else if("MultiPoint"===p)t.push(i(d,1,s(h)));else if("LineString"===p)t.push(i(d,2,[s(h,n)]));else if("MultiLineString"===p||"Polygon"===p){for(l=[],r=0;r<h.length;r++)l.push(s(h[r],n));t.push(i(d,"Polygon"===p?3:2,l))}else if("MultiPolygon"===p){for(l=[],r=0;r<h.length;r++)for(u=0;u<h[r].length;u++)l.push(s(h[r][u],n));t.push(i(d,3,l))}else{if("GeometryCollection"!==p)throw new Error("Input data is not a valid GeoJSON object.");for(r=0;r<c.geometries.length;r++)o(t,{geometry:c.geometries[r],properties:d},n)}}function i(t,e,n){var r={geometry:n,type:e,tags:t||null,min:[2,1],max:[-1,0]};return l(r),r}function s(t,e){for(var n=[],r=0;r<t.length;r++)n.push(a(t[r]));return e&&(p(n,e),u(n)),n}function a(t){var e=Math.sin(t[1]*Math.PI/180),n=t[0]/360+.5,r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r=-1>r?-1:r>1?1:r,[n,r,0]}function u(t){for(var e,n,r=0,o=0,i=0;i<t.length-1;i++)e=n||t[i],n=t[i+1],r+=e[0]*n[1]-n[0]*e[1],o+=Math.abs(n[0]-e[0])+Math.abs(n[1]-e[1]);t.area=Math.abs(r/2),t.dist=o}function l(t){var e=t.geometry,n=t.min,r=t.max;if(1===t.type)c(n,r,e);else for(var o=0;o<e.length;o++)c(n,r,e[o]);return t}function c(t,e,n){for(var r,o=0;o<n.length;o++)r=n[o],t[0]=Math.min(r[0],t[0]),e[0]=Math.max(r[0],e[0]),t[1]=Math.min(r[1],t[1]),e[1]=Math.max(r[1],e[1])}e.exports=r;var p=t("./simplify")},{"./simplify":123}],122:[function(t,e,n){function r(t,e){return new o(t,e)}function o(t,e){e=this.options=u(Object.create(this.options),e);var n=e.debug;n&&console.time("preprocess data");var r=1<<e.maxZoom,o=c(t,e.tolerance/(r*e.extent));this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),o=d(o,e.buffer/e.extent,s),o.length&&this.splitTile(o,0,0,0),n&&(o.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function i(t,e,n){return 32*((1<<t)*n+e)+t}function s(t,e,n){return[n,(n-t[0])*(e[1]-t[1])/(e[0]-t[0])+t[1],1]}function a(t,e,n){return[(n-t[1])*(e[0]-t[0])/(e[1]-t[1])+t[0],n,1]}function u(t,e){for(var n in e)t[n]=e[n];return t}function l(t,e,n){var r=t.source;if(1!==r.length)return!1;var o=r[0];if(3!==o.type||o.geometry.length>1)return!1;var i=o.geometry[0].length;if(5!==i)return!1;for(var s=0;i>s;s++){var a=p.point(o.geometry[0][s],e,t.z2,t.x,t.y);if(a[0]!==-n&&a[0]!==e+n||a[1]!==-n&&a[1]!==e+n)return!1}return!0}e.exports=r;var c=t("./convert"),p=t("./transform"),h=t("./clip"),d=t("./wrap"),f=t("./tile");o.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0},o.prototype.splitTile=function(t,e,n,r,o,u,c){for(var p=[t,e,n,r],d=this.options,g=d.debug,m=null;p.length;){r=p.pop(),n=p.pop(),e=p.pop(),t=p.pop();var y=1<<e,v=i(e,n,r),x=this.tiles[v],b=e===d.maxZoom?0:d.tolerance/(y*d.extent);if(!x&&(g>1&&console.time("creation"),x=this.tiles[v]=f(t,y,n,r,b,e===d.maxZoom),this.tileCoords.push({z:e,x:n,y:r}),g)){g>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,x.numFeatures,x.numPoints,x.numSimplified),console.timeEnd("creation"));var j="z"+e;this.stats[j]=(this.stats[j]||0)+1,this.total++}if(x.source=t,o){if(e===d.maxZoom||e===o)continue;var _=1<<o-e;if(n!==Math.floor(u/_)||r!==Math.floor(c/_))continue}else if(e===d.indexMaxZoom||x.numPoints<=d.indexMaxPoints)continue;if(d.solidChildren||!l(x,d.extent,d.buffer)){x.source=null,g>1&&console.time("clipping");var E,w,S,I,M,C,L=.5*d.buffer/d.extent,P=.5-L,T=.5+L,N=1+L;E=w=S=I=null,M=h(t,y,n-L,n+T,0,s,x.min[0],x.max[0]),C=h(t,y,n+P,n+N,0,s,x.min[0],x.max[0]),M&&(E=h(M,y,r-L,r+T,1,a,x.min[1],x.max[1]),w=h(M,y,r+P,r+N,1,a,x.min[1],x.max[1])),C&&(S=h(C,y,r-L,r+T,1,a,x.min[1],x.max[1]),I=h(C,y,r+P,r+N,1,a,x.min[1],x.max[1])),g>1&&console.timeEnd("clipping"),E&&p.push(E,e+1,2*n,2*r),w&&p.push(w,e+1,2*n,2*r+1),S&&p.push(S,e+1,2*n+1,2*r),I&&p.push(I,e+1,2*n+1,2*r+1)}else o&&(m=e)}return m},o.prototype.getTile=function(t,e,n){var r=this.options,o=r.extent,s=r.debug,a=1<<t;e=(e%a+a)%a;var u=i(t,e,n);if(this.tiles[u])return p.tile(this.tiles[u],o);s>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var c,h=t,d=e,f=n;!c&&h>0;)h--,d=Math.floor(d/2),f=Math.floor(f/2),c=this.tiles[i(h,d,f)];if(!c||!c.source)return null;if(s>1&&console.log("found parent tile z%d-%d-%d",h,d,f),l(c,o,r.buffer))return p.tile(c,o);s>1&&console.time("drilling down");var g=this.splitTile(c.source,h,d,f,t,e,n);if(s>1&&console.timeEnd("drilling down"),null!==g){var m=1<<t-g;u=i(g,Math.floor(e/m),Math.floor(n/m))}return this.tiles[u]?p.tile(this.tiles[u],o):null}},{"./clip":120,"./convert":121,"./tile":124,"./transform":125,"./wrap":126}],123:[function(t,e,n){function r(t,e){var n,r,i,s,a=e*e,u=t.length,l=0,c=u-1,p=[];for(t[l][2]=1,t[c][2]=1;c;){for(r=0,n=l+1;c>n;n++)i=o(t[n],t[l],t[c]),i>r&&(s=n,r=i);r>a?(t[s][2]=r,p.push(l),p.push(s),l=s):(c=p.pop(),l=p.pop())}}function o(t,e,n){var r=e[0],o=e[1],i=n[0],s=n[1],a=t[0],u=t[1],l=i-r,c=s-o;if(0!==l||0!==c){var p=((a-r)*l+(u-o)*c)/(l*l+c*c);p>1?(r=i,o=s):p>0&&(r+=l*p,o+=c*p)}return l=a-r,c=u-o,l*l+c*c}e.exports=r},{}],124:[function(t,e,n){function r(t,e,n,r,i,s){for(var a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z2:e,transformed:!1,min:[2,1],max:[-1,0]},u=0;u<t.length;u++){a.numFeatures++,o(a,t[u],i,s);var l=t[u].min,c=t[u].max;l[0]<a.min[0]&&(a.min[0]=l[0]),l[1]<a.min[1]&&(a.min[1]=l[1]),c[0]>a.max[0]&&(a.max[0]=c[0]),c[1]>a.max[1]&&(a.max[1]=c[1])}return a}function o(t,e,n,r){var o,i,s,a,u=e.geometry,l=e.type,c=[],p=n*n;if(1===l)for(o=0;o<u.length;o++)c.push(u[o]),t.numPoints++,t.numSimplified++;else for(o=0;o<u.length;o++)if(s=u[o],r||!(2===l&&s.dist<n||3===l&&s.area<p)){var h=[];for(i=0;i<s.length;i++)a=s[i],(r||a[2]>p)&&(h.push(a),t.numSimplified++),t.numPoints++;c.push(h)}else t.numPoints+=s.length;c.length&&t.features.push({geometry:c,type:l,tags:e.tags||null})}e.exports=r},{}],125:[function(t,e,n){function r(t,e){if(t.transformed)return t;var n,r,i,s=t.z2,a=t.x,u=t.y;for(n=0;n<t.features.length;n++){var l=t.features[n],c=l.geometry,p=l.type;if(1===p)for(r=0;r<c.length;r++)c[r]=o(c[r],e,s,a,u);else for(r=0;r<c.length;r++){var h=c[r];for(i=0;i<h.length;i++)h[i]=o(h[i],e,s,a,u)}}return t.transformed=!0,t}function o(t,e,n,r,o){var i=Math.round(e*(t[0]*n-r)),s=Math.round(e*(t[1]*n-o));return[i,s]}n.tile=r,n.point=o},{}],126:[function(t,e,n){function r(t,e,n){var r=t,i=s(t,1,-1-e,e,0,n,-1,2),a=s(t,1,1-e,2+e,0,n,-1,2);return(i||a)&&(r=s(t,1,-e,1+e,0,n,-1,2),i&&(r=o(i,1).concat(r)),a&&(r=r.concat(o(a,-1)))),r}function o(t,e){for(var n=[],r=0;r<t.length;r++){var o,s=t[r],a=s.type;if(1===a)o=i(s.geometry,e);else{o=[];for(var u=0;u<s.geometry.length;u++)o.push(i(s.geometry[u],e))}n.push({geometry:o,type:a,tags:s.tags,min:[s.min[0]+e,s.min[1]],max:[s.max[0]+e,s.max[1]]})}return n}function i(t,e){var n=[];n.area=t.area,n.dist=t.dist;for(var r=0;r<t.length;r++)n.push([t[r][0]+e,t[r][1],t[r][2]]);return n}var s=t("./clip");e.exports=r},{"./clip":120}],127:[function(t,e,n){n.glMatrix=t("./gl-matrix/common.js"),n.mat2=t("./gl-matrix/mat2.js"),n.mat2d=t("./gl-matrix/mat2d.js"),n.mat3=t("./gl-matrix/mat3.js"),n.mat4=t("./gl-matrix/mat4.js"),n.quat=t("./gl-matrix/quat.js"),n.vec2=t("./gl-matrix/vec2.js"),n.vec3=t("./gl-matrix/vec3.js"),n.vec4=t("./gl-matrix/vec4.js")},{"./gl-matrix/common.js":128,"./gl-matrix/mat2.js":129,"./gl-matrix/mat2d.js":130,"./gl-matrix/mat3.js":131,"./gl-matrix/mat4.js":132,"./gl-matrix/quat.js":133,"./gl-matrix/vec2.js":134,"./gl-matrix/vec3.js":135,"./gl-matrix/vec4.js":136}],128:[function(t,e,n){var r={};r.EPSILON=1e-6,r.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,r.RANDOM=Math.random,r.ENABLE_SIMD=!1,r.SIMD_AVAILABLE=r.ARRAY_TYPE===Float32Array&&"SIMD"in this,r.USE_SIMD=r.ENABLE_SIMD&&r.SIMD_AVAILABLE,r.setMatrixArrayType=function(t){r.ARRAY_TYPE=t};var o=Math.PI/180;r.toRadian=function(t){return t*o},r.equals=function(t,e){return Math.abs(t-e)<=r.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},e.exports=r},{}],129:[function(t,e,n){var r=t("./common.js"),o={};o.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},o.clone=function(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},o.fromValues=function(t,e,n,o){var i=new r.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=o,i},o.set=function(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t},o.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},o.invert=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],s=n*i-o*r;return s?(s=1/s,t[0]=i*s,t[1]=-r*s,t[2]=-o*s,t[3]=n*s,t):null},o.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},o.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},o.multiply=function(t,e,n){var r=e[0],o=e[1],i=e[2],s=e[3],a=n[0],u=n[1],l=n[2],c=n[3];return t[0]=r*a+i*u,t[1]=o*a+s*u,t[2]=r*l+i*c,t[3]=o*l+s*c,t},o.mul=o.multiply,o.rotate=function(t,e,n){var r=e[0],o=e[1],i=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*a,t[1]=o*u+s*a,t[2]=r*-a+i*u,t[3]=o*-a+s*u,t},o.scale=function(t,e,n){var r=e[0],o=e[1],i=e[2],s=e[3],a=n[0],u=n[1];return t[0]=r*a,t[1]=o*a,t[2]=i*u,t[3]=s*u,t},o.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},o.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},o.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},o.LDU=function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},o.sub=o.subtract,o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},o.equals=function(t,e){var n=t[0],o=t[1],i=t[2],s=t[3],a=e[0],u=e[1],l=e[2],c=e[3];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-u)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(i-l)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-c)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(c))},o.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},o.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},e.exports=o},{"./common.js":128}],130:[function(t,e,n){var r=t("./common.js"),o={};o.create=function(){var t=new r.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},o.clone=function(t){var e=new r.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},o.fromValues=function(t,e,n,o,i,s){var a=new r.ARRAY_TYPE(6);return a[0]=t,a[1]=e,a[2]=n,a[3]=o,a[4]=i,a[5]=s,a},o.set=function(t,e,n,r,o,i,s){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=s,t},o.invert=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],s=e[4],a=e[5],u=n*i-r*o;return u?(u=1/u,t[0]=i*u,t[1]=-r*u,t[2]=-o*u,t[3]=n*u,t[4]=(o*a-i*s)*u,t[5]=(r*s-n*a)*u,t):null},o.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},o.multiply=function(t,e,n){var r=e[0],o=e[1],i=e[2],s=e[3],a=e[4],u=e[5],l=n[0],c=n[1],p=n[2],h=n[3],d=n[4],f=n[5];return t[0]=r*l+i*c,t[1]=o*l+s*c,t[2]=r*p+i*h,t[3]=o*p+s*h,t[4]=r*d+i*f+a,t[5]=o*d+s*f+u,t},o.mul=o.multiply,o.rotate=function(t,e,n){var r=e[0],o=e[1],i=e[2],s=e[3],a=e[4],u=e[5],l=Math.sin(n),c=Math.cos(n);return t[0]=r*c+i*l,t[1]=o*c+s*l,t[2]=r*-l+i*c,t[3]=o*-l+s*c,t[4]=a,t[5]=u,t},o.scale=function(t,e,n){var r=e[0],o=e[1],i=e[2],s=e[3],a=e[4],u=e[5],l=n[0],c=n[1];return t[0]=r*l,t[1]=o*l,t[2]=i*c,t[3]=s*c,t[4]=a,t[5]=u,t},o.translate=function(t,e,n){var r=e[0],o=e[1],i=e[2],s=e[3],a=e[4],u=e[5],l=n[0],c=n[1];return t[0]=r,t[1]=o,t[2]=i,t[3]=s,t[4]=r*l+i*c+a,t[5]=o*l+s*c+u,t},o.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},o.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},o.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},o.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t},o.sub=o.subtract,o.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},o.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},o.equals=function(t,e){var n=t[0],o=t[1],i=t[2],s=t[3],a=t[4],u=t[5],l=e[0],c=e[1],p=e[2],h=e[3],d=e[4],f=e[5];return Math.abs(n-l)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(o-c)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(i-p)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(s-h)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(a-d)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(u-f)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(f))},e.exports=o},{"./common.js":128}],131:[function(t,e,n){var r=t("./common.js"),o={};o.create=function(){var t=new r.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},o.clone=function(t){var e=new r.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},o.fromValues=function(t,e,n,o,i,s,a,u,l){var c=new r.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=o,c[4]=i,c[5]=s,c[6]=a,c[7]=u,c[8]=l,c},o.set=function(t,e,n,r,o,i,s,a,u,l){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=s,t[6]=a,t[7]=u,t[8]=l,t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},o.invert=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],s=e[4],a=e[5],u=e[6],l=e[7],c=e[8],p=c*s-a*l,h=-c*i+a*u,d=l*i-s*u,f=n*p+r*h+o*d;return f?(f=1/f,t[0]=p*f,t[1]=(-c*r+o*l)*f,t[2]=(a*r-o*s)*f,t[3]=h*f,t[4]=(c*n-o*u)*f,t[5]=(-a*n+o*i)*f,t[6]=d*f,t[7]=(-l*n+r*u)*f,t[8]=(s*n-r*i)*f,t):null},o.adjoint=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],s=e[4],a=e[5],u=e[6],l=e[7],c=e[8];return t[0]=s*c-a*l,t[1]=o*l-r*c,t[2]=r*a-o*s,t[3]=a*u-i*c,t[4]=n*c-o*u,t[5]=o*i-n*a,t[6]=i*l-s*u,t[7]=r*u-n*l,t[8]=n*s-r*i,t},o.determinant=function(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],s=t[5],a=t[6],u=t[7],l=t[8];return e*(l*i-s*u)+n*(-l*o+s*a)+r*(u*o-i*a)},o.multiply=function(t,e,n){var r=e[0],o=e[1],i=e[2],s=e[3],a=e[4],u=e[5],l=e[6],c=e[7],p=e[8],h=n[0],d=n[1],f=n[2],g=n[3],m=n[4],y=n[5],v=n[6],x=n[7],b=n[8];return t[0]=h*r+d*s+f*l,t[1]=h*o+d*a+f*c,t[2]=h*i+d*u+f*p,t[3]=g*r+m*s+y*l,t[4]=g*o+m*a+y*c,t[5]=g*i+m*u+y*p,t[6]=v*r+x*s+b*l,t[7]=v*o+x*a+b*c,t[8]=v*i+x*u+b*p,t},o.mul=o.multiply,o.translate=function(t,e,n){var r=e[0],o=e[1],i=e[2],s=e[3],a=e[4],u=e[5],l=e[6],c=e[7],p=e[8],h=n[0],d=n[1];return t[0]=r,t[1]=o,t[2]=i,t[3]=s,t[4]=a,t[5]=u,t[6]=h*r+d*s+l,t[7]=h*o+d*a+c,t[8]=h*i+d*u+p,t},o.rotate=function(t,e,n){var r=e[0],o=e[1],i=e[2],s=e[3],a=e[4],u=e[5],l=e[6],c=e[7],p=e[8],h=Math.sin(n),d=Math.cos(n);return t[0]=d*r+h*s,t[1]=d*o+h*a,t[2]=d*i+h*u,t[3]=d*s-h*r,t[4]=d*a-h*o,t[5]=d*u-h*i,t[6]=l,t[7]=c,t[8]=p,t},o.scale=function(t,e,n){var r=n[0],o=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},o.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},o.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},o.fromQuat=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],s=n+n,a=r+r,u=o+o,l=n*s,c=r*s,p=r*a,h=o*s,d=o*a,f=o*u,g=i*s,m=i*a,y=i*u;return t[0]=1-p-f,t[3]=c-y,t[6]=h+m,t[1]=c+y,t[4]=1-l-f,t[7]=d-g,t[2]=h-m,t[5]=d+g,t[8]=1-l-p,t},o.normalFromMat4=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],s=e[4],a=e[5],u=e[6],l=e[7],c=e[8],p=e[9],h=e[10],d=e[11],f=e[12],g=e[13],m=e[14],y=e[15],v=n*a-r*s,x=n*u-o*s,b=n*l-i*s,j=r*u-o*a,_=r*l-i*a,E=o*l-i*u,w=c*g-p*f,S=c*m-h*f,I=c*y-d*f,M=p*m-h*g,C=p*y-d*g,L=h*y-d*m,P=v*L-x*C+b*M+j*I-_*S+E*w;return P?(P=1/P,t[0]=(a*L-u*C+l*M)*P,t[1]=(u*I-s*L-l*S)*P,t[2]=(s*C-a*I+l*w)*P,t[3]=(o*C-r*L-i*M)*P,t[4]=(n*L-o*I+i*S)*P,t[5]=(r*I-n*C-i*w)*P,t[6]=(g*E-m*_+y*j)*P,t[7]=(m*b-f*E-y*x)*P,t[8]=(f*_-g*b+y*v)*P,t):null},o.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t},o.sub=o.subtract,o.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},o.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},o.equals=function(t,e){var n=t[0],o=t[1],i=t[2],s=t[3],a=t[4],u=t[5],l=t[6],c=t[7],p=t[8],h=e[0],d=e[1],f=e[2],g=e[3],m=e[4],y=e[5],v=t[6],x=e[7],b=e[8];return Math.abs(n-h)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(o-d)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(i-f)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(s-g)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(a-m)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(u-y)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(l-v)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(c-x)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(p-b)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(b))},e.exports=o},{"./common.js":128}],132:[function(t,e,n){var r=t("./common.js"),o={scalar:{},SIMD:{}};o.create=function(){var t=new r.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.clone=function(t){var e=new r.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.fromValues=function(t,e,n,o,i,s,a,u,l,c,p,h,d,f,g,m){var y=new r.ARRAY_TYPE(16);return y[0]=t,y[1]=e,y[2]=n,y[3]=o,y[4]=i,y[5]=s,y[6]=a,y[7]=u,y[8]=l,y[9]=c,y[10]=p,y[11]=h,y[12]=d,y[13]=f,y[14]=g,y[15]=m,y},o.set=function(t,e,n,r,o,i,s,a,u,l,c,p,h,d,f,g,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=s,t[6]=a,t[7]=u,t[8]=l,t[9]=c,t[10]=p,
t[11]=h,t[12]=d,t[13]=f,t[14]=g,t[15]=m,t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.scalar.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],o=e[3],i=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=o,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},o.SIMD.transpose=function(t,e){var n,r,o,i,s,a,u,l,c,p;return n=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),s=SIMD.Float32x4.shuffle(n,r,0,1,4,5),a=SIMD.Float32x4.shuffle(o,i,0,1,4,5),u=SIMD.Float32x4.shuffle(s,a,0,2,4,6),l=SIMD.Float32x4.shuffle(s,a,1,3,5,7),SIMD.Float32x4.store(t,0,u),SIMD.Float32x4.store(t,4,l),s=SIMD.Float32x4.shuffle(n,r,2,3,6,7),a=SIMD.Float32x4.shuffle(o,i,2,3,6,7),c=SIMD.Float32x4.shuffle(s,a,0,2,4,6),p=SIMD.Float32x4.shuffle(s,a,1,3,5,7),SIMD.Float32x4.store(t,8,c),SIMD.Float32x4.store(t,12,p),t},o.transpose=r.USE_SIMD?o.SIMD.transpose:o.scalar.transpose,o.scalar.invert=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],s=e[4],a=e[5],u=e[6],l=e[7],c=e[8],p=e[9],h=e[10],d=e[11],f=e[12],g=e[13],m=e[14],y=e[15],v=n*a-r*s,x=n*u-o*s,b=n*l-i*s,j=r*u-o*a,_=r*l-i*a,E=o*l-i*u,w=c*g-p*f,S=c*m-h*f,I=c*y-d*f,M=p*m-h*g,C=p*y-d*g,L=h*y-d*m,P=v*L-x*C+b*M+j*I-_*S+E*w;return P?(P=1/P,t[0]=(a*L-u*C+l*M)*P,t[1]=(o*C-r*L-i*M)*P,t[2]=(g*E-m*_+y*j)*P,t[3]=(h*_-p*E-d*j)*P,t[4]=(u*I-s*L-l*S)*P,t[5]=(n*L-o*I+i*S)*P,t[6]=(m*b-f*E-y*x)*P,t[7]=(c*E-h*b+d*x)*P,t[8]=(s*C-a*I+l*w)*P,t[9]=(r*I-n*C-i*w)*P,t[10]=(f*_-g*b+y*v)*P,t[11]=(p*b-c*_-d*v)*P,t[12]=(a*S-s*M-u*w)*P,t[13]=(n*M-r*S+o*w)*P,t[14]=(g*x-f*j-m*v)*P,t[15]=(c*j-p*x+h*v)*P,t):null},o.SIMD.invert=function(t,e){var n,r,o,i,s,a,u,l,c,p,h=SIMD.Float32x4.load(e,0),d=SIMD.Float32x4.load(e,4),f=SIMD.Float32x4.load(e,8),g=SIMD.Float32x4.load(e,12);return s=SIMD.Float32x4.shuffle(h,d,0,1,4,5),r=SIMD.Float32x4.shuffle(f,g,0,1,4,5),n=SIMD.Float32x4.shuffle(s,r,0,2,4,6),r=SIMD.Float32x4.shuffle(r,s,1,3,5,7),s=SIMD.Float32x4.shuffle(h,d,2,3,6,7),i=SIMD.Float32x4.shuffle(f,g,2,3,6,7),o=SIMD.Float32x4.shuffle(s,i,0,2,4,6),i=SIMD.Float32x4.shuffle(i,s,1,3,5,7),s=SIMD.Float32x4.mul(o,i),s=SIMD.Float32x4.swizzle(s,1,0,3,2),a=SIMD.Float32x4.mul(r,s),u=SIMD.Float32x4.mul(n,s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),a=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,s),a),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,s),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),s=SIMD.Float32x4.mul(r,o),s=SIMD.Float32x4.swizzle(s,1,0,3,2),a=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,s),a),c=SIMD.Float32x4.mul(n,s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),a=SIMD.Float32x4.sub(a,SIMD.Float32x4.mul(i,s)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,s),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),s=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(r,2,3,0,1),i),s=SIMD.Float32x4.swizzle(s,1,0,3,2),o=SIMD.Float32x4.swizzle(o,2,3,0,1),a=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,s),a),l=SIMD.Float32x4.mul(n,s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),a=SIMD.Float32x4.sub(a,SIMD.Float32x4.mul(o,s)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,s),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),s=SIMD.Float32x4.mul(n,r),s=SIMD.Float32x4.swizzle(s,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,s),l),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,s),c),s=SIMD.Float32x4.swizzle(s,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,s),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(o,s)),s=SIMD.Float32x4.mul(n,i),s=SIMD.Float32x4.swizzle(s,1,0,3,2),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,s)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,s),l),s=SIMD.Float32x4.swizzle(s,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,s),u),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(r,s)),s=SIMD.Float32x4.mul(n,o),s=SIMD.Float32x4.swizzle(s,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,s),u),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(r,s)),s=SIMD.Float32x4.swizzle(s,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(i,s)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,s),c),p=SIMD.Float32x4.mul(n,a),p=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(p,2,3,0,1),p),p=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(p,1,0,3,2),p),s=SIMD.Float32x4.reciprocalApproximation(p),p=SIMD.Float32x4.sub(SIMD.Float32x4.add(s,s),SIMD.Float32x4.mul(p,SIMD.Float32x4.mul(s,s))),(p=SIMD.Float32x4.swizzle(p,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(p,a)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(p,u)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(p,l)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(p,c)),t):null},o.invert=r.USE_SIMD?o.SIMD.invert:o.scalar.invert,o.scalar.adjoint=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],s=e[4],a=e[5],u=e[6],l=e[7],c=e[8],p=e[9],h=e[10],d=e[11],f=e[12],g=e[13],m=e[14],y=e[15];return t[0]=a*(h*y-d*m)-p*(u*y-l*m)+g*(u*d-l*h),t[1]=-(r*(h*y-d*m)-p*(o*y-i*m)+g*(o*d-i*h)),t[2]=r*(u*y-l*m)-a*(o*y-i*m)+g*(o*l-i*u),t[3]=-(r*(u*d-l*h)-a*(o*d-i*h)+p*(o*l-i*u)),t[4]=-(s*(h*y-d*m)-c*(u*y-l*m)+f*(u*d-l*h)),t[5]=n*(h*y-d*m)-c*(o*y-i*m)+f*(o*d-i*h),t[6]=-(n*(u*y-l*m)-s*(o*y-i*m)+f*(o*l-i*u)),t[7]=n*(u*d-l*h)-s*(o*d-i*h)+c*(o*l-i*u),t[8]=s*(p*y-d*g)-c*(a*y-l*g)+f*(a*d-l*p),t[9]=-(n*(p*y-d*g)-c*(r*y-i*g)+f*(r*d-i*p)),t[10]=n*(a*y-l*g)-s*(r*y-i*g)+f*(r*l-i*a),t[11]=-(n*(a*d-l*p)-s*(r*d-i*p)+c*(r*l-i*a)),t[12]=-(s*(p*m-h*g)-c*(a*m-u*g)+f*(a*h-u*p)),t[13]=n*(p*m-h*g)-c*(r*m-o*g)+f*(r*h-o*p),t[14]=-(n*(a*m-u*g)-s*(r*m-o*g)+f*(r*u-o*a)),t[15]=n*(a*h-u*p)-s*(r*h-o*p)+c*(r*u-o*a),t},o.SIMD.adjoint=function(t,e){var n,r,o,i,s,a,u,l,c,p,h,d,f,n=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12);return c=SIMD.Float32x4.shuffle(n,r,0,1,4,5),a=SIMD.Float32x4.shuffle(o,i,0,1,4,5),s=SIMD.Float32x4.shuffle(c,a,0,2,4,6),a=SIMD.Float32x4.shuffle(a,c,1,3,5,7),c=SIMD.Float32x4.shuffle(n,r,2,3,6,7),l=SIMD.Float32x4.shuffle(o,i,2,3,6,7),u=SIMD.Float32x4.shuffle(c,l,0,2,4,6),l=SIMD.Float32x4.shuffle(l,c,1,3,5,7),c=SIMD.Float32x4.mul(u,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),p=SIMD.Float32x4.mul(a,c),h=SIMD.Float32x4.mul(s,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,c),p),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,c),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.mul(a,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),p),f=SIMD.Float32x4.mul(s,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(l,c)),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,c),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,2,3,0,1),l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),u=SIMD.Float32x4.swizzle(u,2,3,0,1),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),p),d=SIMD.Float32x4.mul(s,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(u,c)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,c),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),c=SIMD.Float32x4.mul(s,a),c=SIMD.Float32x4.swizzle(c,1,0,3,2),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),d),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,c),f),c=SIMD.Float32x4.swizzle(c,2,3,0,1),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),d),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.mul(s,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(u,c)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,c),d),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),h),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(a,c)),c=SIMD.Float32x4.mul(s,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),h),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(a,c)),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,c)),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,c),f),SIMD.Float32x4.store(t,0,p),SIMD.Float32x4.store(t,4,h),SIMD.Float32x4.store(t,8,d),SIMD.Float32x4.store(t,12,f),t},o.adjoint=r.USE_SIMD?o.SIMD.adjoint:o.scalar.adjoint,o.determinant=function(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],s=t[5],a=t[6],u=t[7],l=t[8],c=t[9],p=t[10],h=t[11],d=t[12],f=t[13],g=t[14],m=t[15],y=e*s-n*i,v=e*a-r*i,x=e*u-o*i,b=n*a-r*s,j=n*u-o*s,_=r*u-o*a,E=l*f-c*d,w=l*g-p*d,S=l*m-h*d,I=c*g-p*f,M=c*m-h*f,C=p*m-h*g;return y*C-v*M+x*I+b*S-j*w+_*E},o.SIMD.multiply=function(t,e,n){var r=SIMD.Float32x4.load(e,0),o=SIMD.Float32x4.load(e,4),i=SIMD.Float32x4.load(e,8),s=SIMD.Float32x4.load(e,12),a=SIMD.Float32x4.load(n,0),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,3,3,3,3),s))));SIMD.Float32x4.store(t,0,u);var l=SIMD.Float32x4.load(n,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),s))));SIMD.Float32x4.store(t,4,c);var p=SIMD.Float32x4.load(n,8),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,3,3,3,3),s))));SIMD.Float32x4.store(t,8,h);var d=SIMD.Float32x4.load(n,12),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),s))));return SIMD.Float32x4.store(t,12,f),t},o.scalar.multiply=function(t,e,n){var r=e[0],o=e[1],i=e[2],s=e[3],a=e[4],u=e[5],l=e[6],c=e[7],p=e[8],h=e[9],d=e[10],f=e[11],g=e[12],m=e[13],y=e[14],v=e[15],x=n[0],b=n[1],j=n[2],_=n[3];return t[0]=x*r+b*a+j*p+_*g,t[1]=x*o+b*u+j*h+_*m,t[2]=x*i+b*l+j*d+_*y,t[3]=x*s+b*c+j*f+_*v,x=n[4],b=n[5],j=n[6],_=n[7],t[4]=x*r+b*a+j*p+_*g,t[5]=x*o+b*u+j*h+_*m,t[6]=x*i+b*l+j*d+_*y,t[7]=x*s+b*c+j*f+_*v,x=n[8],b=n[9],j=n[10],_=n[11],t[8]=x*r+b*a+j*p+_*g,t[9]=x*o+b*u+j*h+_*m,t[10]=x*i+b*l+j*d+_*y,t[11]=x*s+b*c+j*f+_*v,x=n[12],b=n[13],j=n[14],_=n[15],t[12]=x*r+b*a+j*p+_*g,t[13]=x*o+b*u+j*h+_*m,t[14]=x*i+b*l+j*d+_*y,t[15]=x*s+b*c+j*f+_*v,t},o.multiply=r.USE_SIMD?o.SIMD.multiply:o.scalar.multiply,o.mul=o.multiply,o.scalar.translate=function(t,e,n){var r,o,i,s,a,u,l,c,p,h,d,f,g=n[0],m=n[1],y=n[2];return e===t?(t[12]=e[0]*g+e[4]*m+e[8]*y+e[12],t[13]=e[1]*g+e[5]*m+e[9]*y+e[13],t[14]=e[2]*g+e[6]*m+e[10]*y+e[14],t[15]=e[3]*g+e[7]*m+e[11]*y+e[15]):(r=e[0],o=e[1],i=e[2],s=e[3],a=e[4],u=e[5],l=e[6],c=e[7],p=e[8],h=e[9],d=e[10],f=e[11],t[0]=r,t[1]=o,t[2]=i,t[3]=s,t[4]=a,t[5]=u,t[6]=l,t[7]=c,t[8]=p,t[9]=h,t[10]=d,t[11]=f,t[12]=r*g+a*m+p*y+e[12],t[13]=o*g+u*m+h*y+e[13],t[14]=i*g+l*m+d*y+e[14],t[15]=s*g+c*m+f*y+e[15]),t},o.SIMD.translate=function(t,e,n){var r=SIMD.Float32x4.load(e,0),o=SIMD.Float32x4.load(e,4),i=SIMD.Float32x4.load(e,8),s=SIMD.Float32x4.load(e,12),a=SIMD.Float32x4(n[0],n[1],n[2],0);e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11]),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(a,0,0,0,0)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(a,1,1,1,1)),i=SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(a,2,2,2,2));var u=SIMD.Float32x4.add(r,SIMD.Float32x4.add(o,SIMD.Float32x4.add(i,s)));return SIMD.Float32x4.store(t,12,u),t},o.translate=r.USE_SIMD?o.SIMD.translate:o.scalar.translate,o.scalar.scale=function(t,e,n){var r=n[0],o=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.SIMD.scale=function(t,e,n){var r,o,i,s=SIMD.Float32x4(n[0],n[1],n[2],0);return r=SIMD.Float32x4.load(e,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(s,0,0,0,0))),o=SIMD.Float32x4.load(e,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(s,1,1,1,1))),i=SIMD.Float32x4.load(e,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(s,2,2,2,2))),t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.scale=r.USE_SIMD?o.SIMD.scale:o.scalar.scale,o.rotate=function(t,e,n,o){var i,s,a,u,l,c,p,h,d,f,g,m,y,v,x,b,j,_,E,w,S,I,M,C,L=o[0],P=o[1],T=o[2],N=Math.sqrt(L*L+P*P+T*T);return Math.abs(N)<r.EPSILON?null:(N=1/N,L*=N,P*=N,T*=N,i=Math.sin(n),s=Math.cos(n),a=1-s,u=e[0],l=e[1],c=e[2],p=e[3],h=e[4],d=e[5],f=e[6],g=e[7],m=e[8],y=e[9],v=e[10],x=e[11],b=L*L*a+s,j=P*L*a+T*i,_=T*L*a-P*i,E=L*P*a-T*i,w=P*P*a+s,S=T*P*a+L*i,I=L*T*a+P*i,M=P*T*a-L*i,C=T*T*a+s,t[0]=u*b+h*j+m*_,t[1]=l*b+d*j+y*_,t[2]=c*b+f*j+v*_,t[3]=p*b+g*j+x*_,t[4]=u*E+h*w+m*S,t[5]=l*E+d*w+y*S,t[6]=c*E+f*w+v*S,t[7]=p*E+g*w+x*S,t[8]=u*I+h*M+m*C,t[9]=l*I+d*M+y*C,t[10]=c*I+f*M+v*C,t[11]=p*I+g*M+x*C,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},o.scalar.rotateX=function(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[4],s=e[5],a=e[6],u=e[7],l=e[8],c=e[9],p=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*o+l*r,t[5]=s*o+c*r,t[6]=a*o+p*r,t[7]=u*o+h*r,t[8]=l*o-i*r,t[9]=c*o-s*r,t[10]=p*o-a*r,t[11]=h*o-u*r,t},o.SIMD.rotateX=function(t,e,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var i=SIMD.Float32x4.load(e,4),s=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(s,r))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,o),SIMD.Float32x4.mul(i,r))),t},o.rotateX=r.USE_SIMD?o.SIMD.rotateX:o.scalar.rotateX,o.scalar.rotateY=function(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[0],s=e[1],a=e[2],u=e[3],l=e[8],c=e[9],p=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o-l*r,t[1]=s*o-c*r,t[2]=a*o-p*r,t[3]=u*o-h*r,t[8]=i*r+l*o,t[9]=s*r+c*o,t[10]=a*r+p*o,t[11]=u*r+h*o,t},o.SIMD.rotateY=function(t,e,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var i=SIMD.Float32x4.load(e,0),s=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(s,r))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,r),SIMD.Float32x4.mul(s,o))),t},o.rotateY=r.USE_SIMD?o.SIMD.rotateY:o.scalar.rotateY,o.scalar.rotateZ=function(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[0],s=e[1],a=e[2],u=e[3],l=e[4],c=e[5],p=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o+l*r,t[1]=s*o+c*r,t[2]=a*o+p*r,t[3]=u*o+h*r,t[4]=l*o-i*r,t[5]=c*o-s*r,t[6]=p*o-a*r,t[7]=h*o-u*r,t},o.SIMD.rotateZ=function(t,e,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var i=SIMD.Float32x4.load(e,0),s=SIMD.Float32x4.load(e,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(s,r))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,o),SIMD.Float32x4.mul(i,r))),t},o.rotateZ=r.USE_SIMD?o.SIMD.rotateZ:o.scalar.rotateZ,o.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},o.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromRotation=function(t,e,n){var o,i,s,a=n[0],u=n[1],l=n[2],c=Math.sqrt(a*a+u*u+l*l);return Math.abs(c)<r.EPSILON?null:(c=1/c,a*=c,u*=c,l*=c,o=Math.sin(e),i=Math.cos(e),s=1-i,t[0]=a*a*s+i,t[1]=u*a*s+l*o,t[2]=l*a*s-u*o,t[3]=0,t[4]=a*u*s-l*o,t[5]=u*u*s+i,t[6]=l*u*s+a*o,t[7]=0,t[8]=a*l*s+u*o,t[9]=u*l*s-a*o,t[10]=l*l*s+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},o.fromXRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromYRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromZRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromRotationTranslation=function(t,e,n){var r=e[0],o=e[1],i=e[2],s=e[3],a=r+r,u=o+o,l=i+i,c=r*a,p=r*u,h=r*l,d=o*u,f=o*l,g=i*l,m=s*a,y=s*u,v=s*l;return t[0]=1-(d+g),t[1]=p+v,t[2]=h-y,t[3]=0,t[4]=p-v,t[5]=1-(c+g),t[6]=f+m,t[7]=0,t[8]=h+y,t[9]=f-m,t[10]=1-(c+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},o.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},o.getRotation=function(t,e){var n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t},o.fromRotationTranslationScale=function(t,e,n,r){var o=e[0],i=e[1],s=e[2],a=e[3],u=o+o,l=i+i,c=s+s,p=o*u,h=o*l,d=o*c,f=i*l,g=i*c,m=s*c,y=a*u,v=a*l,x=a*c,b=r[0],j=r[1],_=r[2];return t[0]=(1-(f+m))*b,t[1]=(h+x)*b,t[2]=(d-v)*b,t[3]=0,t[4]=(h-x)*j,t[5]=(1-(p+m))*j,t[6]=(g+y)*j,t[7]=0,t[8]=(d+v)*_,t[9]=(g-y)*_,t[10]=(1-(p+f))*_,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},o.fromRotationTranslationScaleOrigin=function(t,e,n,r,o){var i=e[0],s=e[1],a=e[2],u=e[3],l=i+i,c=s+s,p=a+a,h=i*l,d=i*c,f=i*p,g=s*c,m=s*p,y=a*p,v=u*l,x=u*c,b=u*p,j=r[0],_=r[1],E=r[2],w=o[0],S=o[1],I=o[2];return t[0]=(1-(g+y))*j,t[1]=(d+b)*j,t[2]=(f-x)*j,t[3]=0,t[4]=(d-b)*_,t[5]=(1-(h+y))*_,t[6]=(m+v)*_,t[7]=0,t[8]=(f+x)*E,t[9]=(m-v)*E,t[10]=(1-(h+g))*E,t[11]=0,t[12]=n[0]+w-(t[0]*w+t[4]*S+t[8]*I),t[13]=n[1]+S-(t[1]*w+t[5]*S+t[9]*I),t[14]=n[2]+I-(t[2]*w+t[6]*S+t[10]*I),t[15]=1,t},o.fromQuat=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],s=n+n,a=r+r,u=o+o,l=n*s,c=r*s,p=r*a,h=o*s,d=o*a,f=o*u,g=i*s,m=i*a,y=i*u;return t[0]=1-p-f,t[1]=c+y,t[2]=h-m,t[3]=0,t[4]=c-y,t[5]=1-l-f,t[6]=d+g,t[7]=0,t[8]=h+m,t[9]=d-g,t[10]=1-l-p,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.frustum=function(t,e,n,r,o,i,s){var a=1/(n-e),u=1/(o-r),l=1/(i-s);return t[0]=2*i*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*u,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(o+r)*u,t[10]=(s+i)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*i*2*l,t[15]=0,t},o.perspective=function(t,e,n,r,o){var i=1/Math.tan(e/2),s=1/(r-o);return t[0]=i/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(o+r)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*o*r*s,t[15]=0,t},o.perspectiveFromFieldOfView=function(t,e,n,r){var o=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),u=2/(s+a),l=2/(o+i);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-((s-a)*u*.5),t[9]=(o-i)*l*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},o.ortho=function(t,e,n,r,o,i,s){var a=1/(e-n),u=1/(r-o),l=1/(i-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*a,t[13]=(o+r)*u,t[14]=(s+i)*l,t[15]=1,t},o.lookAt=function(t,e,n,i){var s,a,u,l,c,p,h,d,f,g,m=e[0],y=e[1],v=e[2],x=i[0],b=i[1],j=i[2],_=n[0],E=n[1],w=n[2];return Math.abs(m-_)<r.EPSILON&&Math.abs(y-E)<r.EPSILON&&Math.abs(v-w)<r.EPSILON?o.identity(t):(h=m-_,d=y-E,f=v-w,g=1/Math.sqrt(h*h+d*d+f*f),h*=g,d*=g,f*=g,s=b*f-j*d,a=j*h-x*f,u=x*d-b*h,g=Math.sqrt(s*s+a*a+u*u),g?(g=1/g,s*=g,a*=g,u*=g):(s=0,a=0,u=0),l=d*u-f*a,c=f*s-h*u,p=h*a-d*s,g=Math.sqrt(l*l+c*c+p*p),g?(g=1/g,l*=g,c*=g,p*=g):(l=0,c=0,p=0),t[0]=s,t[1]=l,t[2]=h,t[3]=0,t[4]=a,t[5]=c,t[6]=d,t[7]=0,t[8]=u,t[9]=p,t[10]=f,t[11]=0,t[12]=-(s*m+a*y+u*v),t[13]=-(l*m+c*y+p*v),t[14]=-(h*m+d*y+f*v),t[15]=1,t)},o.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t},o.sub=o.subtract,o.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},o.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},o.equals=function(t,e){var n=t[0],o=t[1],i=t[2],s=t[3],a=t[4],u=t[5],l=t[6],c=t[7],p=t[8],h=t[9],d=t[10],f=t[11],g=t[12],m=t[13],y=t[14],v=t[15],x=e[0],b=e[1],j=e[2],_=e[3],E=e[4],w=e[5],S=e[6],I=e[7],M=e[8],C=e[9],L=e[10],P=e[11],T=e[12],N=e[13],R=e[14],A=e[15];return Math.abs(n-x)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(o-b)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(i-j)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(j))&&Math.abs(s-_)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(a-E)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(u-w)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(l-S)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(c-I)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(p-M)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(M))&&Math.abs(h-C)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(C))&&Math.abs(d-L)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(L))&&Math.abs(f-P)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(g-T)<=r.EPSILON*Math.max(1,Math.abs(g),Math.abs(T))&&Math.abs(m-N)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(N))&&Math.abs(y-R)<=r.EPSILON*Math.max(1,Math.abs(y),Math.abs(R))&&Math.abs(v-A)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(A))},e.exports=o},{"./common.js":128}],133:[function(t,e,n){var r=t("./common.js"),o=t("./mat3.js"),i=t("./vec3.js"),s=t("./vec4.js"),a={};a.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},a.rotationTo=function(){var t=i.create(),e=i.fromValues(1,0,0),n=i.fromValues(0,1,0);return function(r,o,s){var u=i.dot(o,s);return-.999999>u?(i.cross(t,e,o),i.length(t)<1e-6&&i.cross(t,n,o),i.normalize(t,t),a.setAxisAngle(r,t,Math.PI),r):u>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(i.cross(t,o,s),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+u,a.normalize(r,r))}}(),a.setAxes=function(){var t=o.create();return function(e,n,r,o){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=o[0],t[4]=o[1],t[7]=o[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],a.normalize(e,a.fromMat3(e,t))}}(),a.clone=s.clone,a.fromValues=s.fromValues,a.copy=s.copy,a.set=s.set,a.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},a.setAxisAngle=function(t,e,n){n=.5*n;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t},a.getAxisAngle=function(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return 0!=r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n},a.add=s.add,a.multiply=function(t,e,n){var r=e[0],o=e[1],i=e[2],s=e[3],a=n[0],u=n[1],l=n[2],c=n[3];return t[0]=r*c+s*a+o*l-i*u,t[1]=o*c+s*u+i*a-r*l,t[2]=i*c+s*l+r*u-o*a,t[3]=s*c-r*a-o*u-i*l,t},a.mul=a.multiply,a.scale=s.scale,a.rotateX=function(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=r*u+s*a,t[1]=o*u+i*a,t[2]=i*u-o*a,t[3]=s*u-r*a,t},a.rotateY=function(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=r*u-i*a,t[1]=o*u+s*a,t[2]=i*u+r*a,t[3]=s*u-o*a,t},a.rotateZ=function(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*a,t[1]=o*u-r*a,t[2]=i*u+s*a,t[3]=s*u-i*a,t},a.calculateW=function(t,e){var n=e[0],r=e[1],o=e[2];return t[0]=n,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),t},a.dot=s.dot,a.lerp=s.lerp,a.slerp=function(t,e,n,r){var o,i,s,a,u,l=e[0],c=e[1],p=e[2],h=e[3],d=n[0],f=n[1],g=n[2],m=n[3];return i=l*d+c*f+p*g+h*m,0>i&&(i=-i,d=-d,f=-f,g=-g,m=-m),1-i>1e-6?(o=Math.acos(i),s=Math.sin(o),a=Math.sin((1-r)*o)/s,u=Math.sin(r*o)/s):(a=1-r,u=r),t[0]=a*l+u*d,t[1]=a*c+u*f,t[2]=a*p+u*g,t[3]=a*h+u*m,t},a.sqlerp=function(){var t=a.create(),e=a.create();return function(n,r,o,i,s,u){return a.slerp(t,r,s,u),a.slerp(e,o,i,u),a.slerp(n,t,e,2*u*(1-u)),n}}(),a.invert=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],s=n*n+r*r+o*o+i*i,a=s?1/s:0;return t[0]=-n*a,t[1]=-r*a,t[2]=-o*a,t[3]=i*a,t},a.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},a.length=s.length,a.len=a.length,a.squaredLength=s.squaredLength,a.sqrLen=a.squaredLength,a.normalize=s.normalize,a.fromMat3=function(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var i=(o+1)%3,s=(o+2)%3;n=Math.sqrt(e[3*o+o]-e[3*i+i]-e[3*s+s]+1),t[o]=.5*n,n=.5/n,t[3]=(e[3*i+s]-e[3*s+i])*n,t[i]=(e[3*i+o]+e[3*o+i])*n,t[s]=(e[3*s+o]+e[3*o+s])*n}return t},a.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},a.exactEquals=s.exactEquals,a.equals=s.equals,e.exports=a},{"./common.js":128,"./mat3.js":131,"./vec3.js":135,"./vec4.js":136}],134:[function(t,e,n){var r=t("./common.js"),o={};o.create=function(){var t=new r.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},o.clone=function(t){var e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},o.fromValues=function(t,e){var n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},o.set=function(t,e,n){return t[0]=e,t[1]=n,t},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},o.sub=o.subtract,o.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},o.mul=o.multiply,o.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},o.div=o.divide,o.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},o.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},o.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},o.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},o.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},o.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},o.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},o.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)},o.dist=o.distance,o.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)},o.len=o.length,o.squaredLength=function(t){var e=t[0],n=t[1];return e*e+n*n},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},o.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},o.normalize=function(t,e){var n=e[0],r=e[1],o=n*n+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},o.cross=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},o.lerp=function(t,e,n,r){var o=e[0],i=e[1];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t},o.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},o.transformMat2=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o,t[1]=n[1]*r+n[3]*o,t},o.transformMat2d=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o+n[4],t[1]=n[1]*r+n[3]*o+n[5],t},o.transformMat3=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[3]*o+n[6],t[1]=n[1]*r+n[4]*o+n[7],t},o.transformMat4=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[4]*o+n[12],t[1]=n[1]*r+n[5]*o+n[13],t},o.forEach=function(){var t=o.create();return function(e,n,r,o,i,s){var a,u;for(n||(n=2),r||(r=0),u=o?Math.min(o*n+r,e.length):e.length,a=r;u>a;a+=n)t[0]=e[a],t[1]=e[a+1],i(t,t,s),e[a]=t[0],e[a+1]=t[1];return e}}(),o.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},o.equals=function(t,e){var n=t[0],o=t[1],i=e[0],s=e[1];return Math.abs(n-i)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))},e.exports=o},{"./common.js":128}],135:[function(t,e,n){var r=t("./common.js"),o={};o.create=function(){var t=new r.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},o.clone=function(t){var e=new r.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},o.fromValues=function(t,e,n){var o=new r.ARRAY_TYPE(3);return o[0]=t,o[1]=e,o[2]=n,o},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},o.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},o.sub=o.subtract,o.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t},o.mul=o.multiply,o.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},o.div=o.divide,o.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},o.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},o.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},o.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},o.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},o.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},o.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},o.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(n*n+r*r+o*o)},o.dist=o.distance,o.squaredDistance=function(t,e){
var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return n*n+r*r+o*o},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)},o.len=o.length,o.squaredLength=function(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},o.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},o.normalize=function(t,e){var n=e[0],r=e[1],o=e[2],i=n*n+r*r+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},o.cross=function(t,e,n){var r=e[0],o=e[1],i=e[2],s=n[0],a=n[1],u=n[2];return t[0]=o*u-i*a,t[1]=i*s-r*u,t[2]=r*a-o*s,t},o.lerp=function(t,e,n,r){var o=e[0],i=e[1],s=e[2];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t[2]=s+r*(n[2]-s),t},o.hermite=function(t,e,n,r,o,i){var s=i*i,a=s*(2*i-3)+1,u=s*(i-2)+i,l=s*(i-1),c=s*(3-2*i);return t[0]=e[0]*a+n[0]*u+r[0]*l+o[0]*c,t[1]=e[1]*a+n[1]*u+r[1]*l+o[1]*c,t[2]=e[2]*a+n[2]*u+r[2]*l+o[2]*c,t},o.bezier=function(t,e,n,r,o,i){var s=1-i,a=s*s,u=i*i,l=a*s,c=3*i*a,p=3*u*s,h=u*i;return t[0]=e[0]*l+n[0]*c+r[0]*p+o[0]*h,t[1]=e[1]*l+n[1]*c+r[1]*p+o[1]*h,t[2]=e[2]*l+n[2]*c+r[2]*p+o[2]*h,t},o.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI,o=2*r.RANDOM()-1,i=Math.sqrt(1-o*o)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=o*e,t},o.transformMat4=function(t,e,n){var r=e[0],o=e[1],i=e[2],s=n[3]*r+n[7]*o+n[11]*i+n[15];return s=s||1,t[0]=(n[0]*r+n[4]*o+n[8]*i+n[12])/s,t[1]=(n[1]*r+n[5]*o+n[9]*i+n[13])/s,t[2]=(n[2]*r+n[6]*o+n[10]*i+n[14])/s,t},o.transformMat3=function(t,e,n){var r=e[0],o=e[1],i=e[2];return t[0]=r*n[0]+o*n[3]+i*n[6],t[1]=r*n[1]+o*n[4]+i*n[7],t[2]=r*n[2]+o*n[5]+i*n[8],t},o.transformQuat=function(t,e,n){var r=e[0],o=e[1],i=e[2],s=n[0],a=n[1],u=n[2],l=n[3],c=l*r+a*i-u*o,p=l*o+u*r-s*i,h=l*i+s*o-a*r,d=-s*r-a*o-u*i;return t[0]=c*l+d*-s+p*-u-h*-a,t[1]=p*l+d*-a+h*-s-c*-u,t[2]=h*l+d*-u+c*-a-p*-s,t},o.rotateX=function(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[0],i[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),i[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t},o.rotateY=function(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),i[1]=o[1],i[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t},o.rotateZ=function(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),i[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),i[2]=o[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t},o.forEach=function(){var t=o.create();return function(e,n,r,o,i,s){var a,u;for(n||(n=3),r||(r=0),u=o?Math.min(o*n+r,e.length):e.length,a=r;u>a;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],i(t,t,s),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}}(),o.angle=function(t,e){var n=o.fromValues(t[0],t[1],t[2]),r=o.fromValues(e[0],e[1],e[2]);o.normalize(n,n),o.normalize(r,r);var i=o.dot(n,r);return i>1?0:Math.acos(i)},o.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},o.equals=function(t,e){var n=t[0],o=t[1],i=t[2],s=e[0],a=e[1],u=e[2];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-a)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(a))&&Math.abs(i-u)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))},e.exports=o},{"./common.js":128}],136:[function(t,e,n){var r=t("./common.js"),o={};o.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},o.clone=function(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.fromValues=function(t,e,n,o){var i=new r.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=o,i},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.set=function(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},o.sub=o.subtract,o.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t},o.mul=o.multiply,o.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t},o.div=o.divide,o.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},o.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},o.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},o.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},o.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},o.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},o.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},o.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],i=e[3]-t[3];return Math.sqrt(n*n+r*r+o*o+i*i)},o.dist=o.distance,o.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],i=e[3]-t[3];return n*n+r*r+o*o+i*i},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],n=t[1],r=t[2],o=t[3];return Math.sqrt(e*e+n*n+r*r+o*o)},o.len=o.length,o.squaredLength=function(t){var e=t[0],n=t[1],r=t[2],o=t[3];return e*e+n*n+r*r+o*o},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},o.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},o.normalize=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],s=n*n+r*r+o*o+i*i;return s>0&&(s=1/Math.sqrt(s),t[0]=n*s,t[1]=r*s,t[2]=o*s,t[3]=i*s),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},o.lerp=function(t,e,n,r){var o=e[0],i=e[1],s=e[2],a=e[3];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t[2]=s+r*(n[2]-s),t[3]=a+r*(n[3]-a),t},o.random=function(t,e){return e=e||1,t[0]=r.RANDOM(),t[1]=r.RANDOM(),t[2]=r.RANDOM(),t[3]=r.RANDOM(),o.normalize(t,t),o.scale(t,t,e),t},o.transformMat4=function(t,e,n){var r=e[0],o=e[1],i=e[2],s=e[3];return t[0]=n[0]*r+n[4]*o+n[8]*i+n[12]*s,t[1]=n[1]*r+n[5]*o+n[9]*i+n[13]*s,t[2]=n[2]*r+n[6]*o+n[10]*i+n[14]*s,t[3]=n[3]*r+n[7]*o+n[11]*i+n[15]*s,t},o.transformQuat=function(t,e,n){var r=e[0],o=e[1],i=e[2],s=n[0],a=n[1],u=n[2],l=n[3],c=l*r+a*i-u*o,p=l*o+u*r-s*i,h=l*i+s*o-a*r,d=-s*r-a*o-u*i;return t[0]=c*l+d*-s+p*-u-h*-a,t[1]=p*l+d*-a+h*-s-c*-u,t[2]=h*l+d*-u+c*-a-p*-s,t[3]=e[3],t},o.forEach=function(){var t=o.create();return function(e,n,r,o,i,s){var a,u;for(n||(n=4),r||(r=0),u=o?Math.min(o*n+r,e.length):e.length,a=r;u>a;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],i(t,t,s),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}}(),o.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},o.equals=function(t,e){var n=t[0],o=t[1],i=t[2],s=t[3],a=e[0],u=e[1],l=e[2],c=e[3];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-u)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(i-l)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-c)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(c))},e.exports=o},{"./common.js":128}],137:[function(t,e,n){function r(t,e,n){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],e=i[1],n=i[2],this.d=e+2*n;for(var s=0;s<this.d*this.d;s++){var a=i[o+s],u=i[o+s+1];r.push(a===u?null:i.subarray(a,u))}var l=i[o+r.length],c=i[o+r.length+1];this.keys=i.subarray(l,c),this.bboxes=i.subarray(c),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var p=0;p<this.d*this.d;p++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var h=n/e*t;this.min=-h,this.max=t+h}e.exports=r;var o=3;r.prototype.insert=function(t,e,n,r,o){this._forEachCell(e,n,r,o,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(o)},r.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},r.prototype._insertCell=function(t,e,n,r,o,i){this.cells[o].push(i)},r.prototype.query=function(t,e,n,r){var o=this.min,i=this.max;if(o>=t&&o>=e&&n>=i&&r>=i)return this.keys.slice();var s=[],a={};return this._forEachCell(t,e,n,r,this._queryCell,s,a),s},r.prototype._queryCell=function(t,e,n,r,o,i,s){var a=this.cells[o];if(null!==a)for(var u=this.keys,l=this.bboxes,c=0;c<a.length;c++){var p=a[c];if(void 0===s[p]){var h=4*p;t<=l[h+2]&&e<=l[h+3]&&n>=l[h+0]&&r>=l[h+1]?(s[p]=!0,i.push(u[p])):s[p]=!1}}},r.prototype._forEachCell=function(t,e,n,r,o,i,s){for(var a=this._convertToCellCoord(t),u=this._convertToCellCoord(e),l=this._convertToCellCoord(n),c=this._convertToCellCoord(r),p=a;l>=p;p++)for(var h=u;c>=h;h++){var d=this.d*h+p;if(o.call(this,t,e,n,r,d,i,s))return}},r.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},r.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=o+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(e+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var s=e,a=0;a<t.length;a++){var u=t[a];i[o+a]=s,i.set(u,s),s+=u.length}return i[o+t.length]=s,i.set(this.keys,s),s+=this.keys.length,i[o+t.length+1]=s,i.set(this.bboxes,s),s+=this.bboxes.length,i.buffer}},{}],138:[function(t,e,n){function r(t,e){var n;if(p(t)){var a,l="object"==u(t.stops[0][0]),c=l||void 0!==t.property,h=l||!c,d=t.type||e||"exponential";if("exponential"===d)a=s;else if("interval"===d)a=i;else{if("categorical"!==d)throw new Error('Unknown function type "'+d+'"');a=o}if(l){for(var f={},g=[],m=0;m<t.stops.length;m++){var y=t.stops[m];void 0===f[y[0].zoom]&&(f[y[0].zoom]={zoom:y[0].zoom,type:t.type,property:t.property,stops:[]}),f[y[0].zoom].stops.push([y[0].value,y[1]])}for(var v in f)g.push([f[v].zoom,r(f[v])]);n=function(e,n){return s({stops:g,base:t.base},e)(e,n)},n.isFeatureConstant=!1,n.isZoomConstant=!1}else h?(n=function(e){return a(t,e)},n.isFeatureConstant=!0,n.isZoomConstant=!1):(n=function(e,n){return a(t,n[t.property])},n.isFeatureConstant=!1,n.isZoomConstant=!0)}else n=function(){return t},n.isFeatureConstant=!0,n.isZoomConstant=!0;return n}function o(t,e){for(var n=0;n<t.stops.length;n++)if(e===t.stops[n][0])return t.stops[n][1];return t.stops[0][1]}function i(t,e){for(var n=0;n<t.stops.length&&!(e<t.stops[n][0]);n++);return t.stops[Math.max(n-1,0)][1]}function s(t,e){for(var n=void 0!==t.base?t.base:1,r=0;!(r>=t.stops.length)&&!(e<=t.stops[r][0]);)r++;return 0===r?t.stops[r][1]:r===t.stops.length?t.stops[r-1][1]:a(e,n,t.stops[r-1][0],t.stops[r][0],t.stops[r-1][1],t.stops[r][1])}function a(t,e,n,r,o,i){return"function"==typeof o?function(){var s=o.apply(void 0,arguments),u=i.apply(void 0,arguments);return a(t,e,n,r,s,u)}:o.length?c(t,e,n,r,o,i):l(t,e,n,r,o,i)}function l(t,e,n,r,o,i){var s,a=r-n,u=t-n;return s=1===e?u/a:(Math.pow(e,u)-1)/(Math.pow(e,a)-1),o*(1-s)+i*s}function c(t,e,n,r,o,i){for(var s=[],a=0;a<o.length;a++)s[a]=l(t,e,n,r,o[a],i[a]);return s}function p(t){return"object"==("undefined"==typeof t?"undefined":u(t))&&t.stops}e.exports.isFunctionDefinition=p,e.exports.interpolated=function(t){return r(t,"exponential")},e.exports["piecewise-constant"]=function(t){return r(t,"interval")}},{}],139:[function(t,e,n){function r(t){return!!(o()&&i()&&s()&&a()&&u()&&l()&&c(t&&t.failIfMajorPerformanceCaveat))}function o(){return"undefined"!=typeof window&&"undefined"!=typeof document}function i(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function s(){return Function.prototype&&Function.prototype.bind}function a(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function u(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function l(){return"Worker"in window}function c(t){return void 0===h[t]&&(h[t]=p(t)),h[t]}function p(t){var e=document.createElement("canvas"),n=Object.create(r.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=t,e.probablySupportsContext?e.probablySupportsContext("webgl",n)||e.probablySupportsContext("experimental-webgl",n):e.supportsContext?e.supportsContext("webgl",n)||e.supportsContext("experimental-webgl",n):e.getContext("webgl",n)||e.getContext("experimental-webgl",n)}"undefined"!=typeof e&&e.exports?e.exports=r:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=r);var h={};r.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},{}],140:[function(t,e,n){t("path");e.exports={debug:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform lowp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, step(32767.0, a_pos.x), 1);\n}\n"},fill:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n#pragma mapbox: define lowp vec4 color\nuniform lowp float u_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define lowp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},circle:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp vec4 blur\n#pragma mapbox: define lowp vec4 opacity\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp vec4 blur\n    #pragma mapbox: initialize lowp vec4 opacity\n\n    float t = smoothstep(1.0 - max(blur, v_antialiasblur), 1.0, length(v_extrude));\n    gl_FragColor = color * (1.0 - t) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_devicepixelratio;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp vec4 blur\n#pragma mapbox: define lowp vec4 opacity\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main(void) {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp vec4 blur\n    #pragma mapbox: initialize lowp vec4 opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    v_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5), 0, 1);\n\n    gl_Position.xy += extrude;\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    v_antialiasblur = 1.0 / u_devicepixelratio / radius;\n}\n"},line:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform lowp vec4 u_color;\nuniform lowp float u_opacity;\nuniform float u_blur;\n\nvarying vec2 v_linewidth;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_linewidth.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_linewidth.t) or when fading out\n    // (v_linewidth.s)\n    float blur = u_blur * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_linewidth.t - blur), v_linewidth.s - dist) / blur, 0.0, 1.0);\n\n    gl_FragColor = u_color * (alpha * u_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_linewidth;\nuniform mediump float u_gapwidth;\nuniform mediump float u_antialiasing;\nuniform mediump float u_extra;\nuniform mat2 u_antialiasingmatrix;\nuniform mediump float u_offset;\nuniform mediump float u_blur;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying float v_gamma_scale;\n\nvoid main() {\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    float inset = u_gapwidth + (u_gapwidth > 0.0 ? u_antialiasing : 0.0);\n    float outset = u_gapwidth + u_linewidth * (u_gapwidth > 0.0 ? 2.0 : 1.0) + u_antialiasing;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset = u_offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit of the position before scaling it with the\n    // model/view matrix.\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5) + (offset + dist) / u_ratio, 0.0, 1.0);\n\n    // position of y on the screen\n    float y = gl_Position.y / gl_Position.w;\n\n    // how much features are squished in the y direction by the tilt\n    float squish_scale = length(a_extrude) / length(u_antialiasingmatrix * a_extrude);\n\n    // how much features are squished in all directions by the perspectiveness\n    float perspective_scale = 1.0 / (1.0 - min(y * u_extra, 0.9));\n\n    v_linewidth = vec2(outset, inset);\n    v_gamma_scale = perspective_scale * squish_scale;\n}\n"},linepattern:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_blur;\n\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_fade;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\nvoid main() {\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_linewidth.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_linewidth.t) or when fading out\n    // (v_linewidth.s)\n    float blur = u_blur * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_linewidth.t - blur), v_linewidth.s - dist) / blur, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n    float y_a = 0.5 + (v_normal.y * v_linewidth.s / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * v_linewidth.s / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a, u_pattern_br_a, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b, u_pattern_br_b, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    alpha *= u_opacity;\n\n    gl_FragColor = color * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_linewidth;\nuniform mediump float u_gapwidth;\nuniform mediump float u_antialiasing;\nuniform mediump float u_extra;\nuniform mat2 u_antialiasingmatrix;\nuniform mediump float u_offset;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\nvoid main() {\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    float inset = u_gapwidth + (u_gapwidth > 0.0 ? u_antialiasing : 0.0);\n    float outset = u_gapwidth + u_linewidth * (u_gapwidth > 0.0 ? 2.0 : 1.0) + u_antialiasing;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset = u_offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit of the position before scaling it with the\n    // model/view matrix.\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5) + (offset + dist) / u_ratio, 0.0, 1.0);\n    v_linesofar = a_linesofar;\n\n    // position of y on the screen\n    float y = gl_Position.y / gl_Position.w;\n\n    // how much features are squished in the y direction by the tilt\n    float squish_scale = length(a_extrude) / length(u_antialiasingmatrix * a_extrude);\n\n    // how much features are squished in all directions by the perspectiveness\n#ifndef MAPBOX_GL_JS\n    float perspective_scale = 1.0 / (1.0 - y * u_extra);\n#else\n    float perspective_scale = 1.0 / (1.0 - min(y * u_extra, 0.9));\n#endif\n\n    v_linewidth = vec2(outset, inset);\n    v_gamma_scale = perspective_scale * squish_scale;\n}\n"},linesdfpattern:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform lowp vec4 u_color;\nuniform lowp float u_opacity;\n\nuniform float u_blur;\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\nvoid main() {\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_linewidth.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_linewidth.t) or when fading out\n    // (v_linewidth.s)\n    float blur = u_blur * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_linewidth.t - blur), v_linewidth.s - dist) / blur, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma, 0.5 + u_sdfgamma, sdfdist);\n\n    gl_FragColor = u_color * (alpha * u_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_linewidth;\nuniform mediump float u_gapwidth;\nuniform mediump float u_antialiasing;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform float u_extra;\nuniform mat2 u_antialiasingmatrix;\nuniform mediump float u_offset;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\nvoid main() {\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    float inset = u_gapwidth + (u_gapwidth > 0.0 ? u_antialiasing : 0.0);\n    float outset = u_gapwidth + u_linewidth * (u_gapwidth > 0.0 ? 2.0 : 1.0) + u_antialiasing;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset = u_offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit of the position before scaling it with the\n    // model/view matrix.\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5) + (offset + dist) / u_ratio, 0.0, 1.0);\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    // position of y on the screen\n    float y = gl_Position.y / gl_Position.w;\n\n    // how much features are squished in the y direction by the tilt\n    float squish_scale = length(a_extrude) / length(u_antialiasingmatrix * a_extrude);\n\n    // how much features are squished in all directions by the perspectiveness\n    float perspective_scale = 1.0 / (1.0 - min(y * u_extra, 0.9));\n\n    v_linewidth = vec2(outset, inset);\n    v_gamma_scale = perspective_scale * squish_scale;\n}\n"},outline:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n#pragma mapbox: define lowp vec4 outline_color\n\nuniform lowp float u_opacity;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 outline_color\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = smoothstep(1.0, 0.0, dist);\n    gl_FragColor = outline_color * (alpha * u_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp vec4 outline_color\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 outline_color\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},outlinepattern:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_opacity;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = smoothstep(1.0, 0.0, dist);\n    \n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",
vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n#ifndef MAPBOX_GL_JS\nuniform vec2 u_patternscale_a;\nuniform vec2 u_patternscale_b;\nuniform vec2 u_offset_a;\nuniform vec2 u_offset_b;\n#else\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n#endif\n\nattribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n#ifndef MAPBOX_GL_JS\n    v_pos_a = u_patternscale_a * a_pos + u_offset_a;\n    v_pos_b = u_patternscale_b * a_pos + u_offset_b;\n    v_pos = (gl_Position.xy/gl_Position.w + 1.0) / 2.0 * u_world;\n#else\n    vec2 scaled_size_a = u_scale_a * u_pattern_size_a;\n    vec2 scaled_size_b = u_scale_b * u_pattern_size_b;\n\n    // the correct offset needs to be calculated.\n    // \n    // The offset depends on how many pixels are between the world origin and\n    // the edge of the tile:\n    // vec2 offset = mod(pixel_coord, size)\n    //\n    // At high zoom levels there are a ton of pixels between the world origin\n    // and the edge of the tile. The glsl spec only guarantees 16 bits of\n    // precision for highp floats. We need more than that.\n    //\n    // The pixel_coord is passed in as two 16 bit values:\n    // pixel_coord_upper = floor(pixel_coord / 2^16)\n    // pixel_coord_lower = mod(pixel_coord, 2^16)\n    //\n    // The offset is calculated in a series of steps that should preserve this precision:\n    vec2 offset_a = mod(mod(mod(u_pixel_coord_upper, scaled_size_a) * 256.0, scaled_size_a) * 256.0 + u_pixel_coord_lower, scaled_size_a);\n    vec2 offset_b = mod(mod(mod(u_pixel_coord_upper, scaled_size_b) * 256.0, scaled_size_b) * 256.0 + u_pixel_coord_lower, scaled_size_b);\n\n    v_pos_a = (u_tile_units_to_pixels * a_pos + offset_a) / scaled_size_a;\n    v_pos_b = (u_tile_units_to_pixels * a_pos + offset_b) / scaled_size_b;\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n#endif\n}\n"},pattern:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_opacity;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n#ifndef MAPBOX_GL_JS\nuniform mat4 u_matrix;\nuniform vec2 u_patternscale_a;\nuniform vec2 u_patternscale_b;\nuniform vec2 u_offset_a;\nuniform vec2 u_offset_b;\n#else\nuniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n#endif\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n#ifndef MAPBOX_GL_JS\n    v_pos_a = u_patternscale_a * a_pos + u_offset_a;\n    v_pos_b = u_patternscale_b * a_pos + u_offset_b;\n#else\n    vec2 scaled_size_a = u_scale_a * u_pattern_size_a;\n    vec2 scaled_size_b = u_scale_b * u_pattern_size_b;\n\n    // the correct offset needs to be calculated.\n    // \n    // The offset depends on how many pixels are between the world origin and\n    // the edge of the tile:\n    // vec2 offset = mod(pixel_coord, size)\n    //\n    // At high zoom levels there are a ton of pixels between the world origin\n    // and the edge of the tile. The glsl spec only guarantees 16 bits of\n    // precision for highp floats. We need more than that.\n    //\n    // The pixel_coord is passed in as two 16 bit values:\n    // pixel_coord_upper = floor(pixel_coord / 2^16)\n    // pixel_coord_lower = mod(pixel_coord, 2^16)\n    //\n    // The offset is calculated in a series of steps that should preserve this precision:\n    vec2 offset_a = mod(mod(mod(u_pixel_coord_upper, scaled_size_a) * 256.0, scaled_size_a) * 256.0 + u_pixel_coord_lower, scaled_size_a);\n    vec2 offset_b = mod(mod(mod(u_pixel_coord_upper, scaled_size_b) * 256.0, scaled_size_b) * 256.0 + u_pixel_coord_lower, scaled_size_b);\n\n    v_pos_a = (u_tile_units_to_pixels * a_pos + offset_a) / scaled_size_a;\n    v_pos_b = (u_tile_units_to_pixels * a_pos + offset_b) / scaled_size_b;\n#endif\n}\n"},raster:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n#ifndef MAPBOX_GL_JS\nuniform sampler2D u_image;\nuniform float u_opacity;\n#endif\n\n#ifndef MAPBOX_GL_JS\nvarying vec2 v_pos;\n#else\nuniform float u_opacity0;\nuniform float u_opacity1;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n#endif\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n#ifndef MAPBOX_GL_JS\n    vec4 color = texture2D(u_image, v_pos) * u_opacity;\n#else\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    vec4 color = color0 * u_opacity0 + color1 * u_opacity1;\n#endif\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb), color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform mat4 u_matrix;\n#ifndef MAPBOX_GL_JS\nuniform float u_buffer;\n#else\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n#endif\n\nattribute vec2 a_pos;\n#ifdef MAPBOX_GL_JS\nattribute vec2 a_texture_pos;\n#endif\n\n#ifndef MAPBOX_GL_JS\nvarying vec2 v_pos;\n\n#else\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n#endif\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n#ifndef MAPBOX_GL_JS\n    float dimension = (8192.0 + 2.0 * u_buffer);\n    v_pos = (a_pos / dimension) + (u_buffer / dimension);\n#else\n    v_pos0 = (((a_texture_pos / 32767.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n#endif\n}\n"},icon:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\nuniform lowp float u_opacity;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    lowp float alpha = texture2D(u_fadetexture, v_fade_tex).a * u_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec4 a_data1;\nattribute vec4 a_data2;\n\n\n// matrix is for the vertex position.\nuniform mat4 u_matrix;\n\nuniform mediump float u_zoom;\nuniform bool u_skewed;\nuniform vec2 u_extrude_scale;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    vec2 a_tex = a_data1.xy;\n    mediump float a_labelminzoom = a_data1[2];\n    mediump vec2 a_zoom = a_data2.st;\n    mediump float a_minzoom = a_zoom[0];\n    mediump float a_maxzoom = a_zoom[1];\n\n    // u_zoom is the current zoom level adjusted for the change in font size\n    mediump float z = 2.0 - step(a_minzoom, u_zoom) - (1.0 - step(a_maxzoom, u_zoom));\n\n    vec2 extrude = u_extrude_scale * (a_offset / 64.0);\n    if (u_skewed) {\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\n        gl_Position.z += z * gl_Position.w;\n    } else {\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n    }\n\n    v_tex = a_tex / u_texsize;\n    v_fade_tex = vec2(a_labelminzoom / 255.0, 0.0);\n}\n"},sdf:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\nuniform lowp vec4 u_color;\nuniform lowp float u_opacity;\nuniform lowp float u_buffer;\nuniform lowp float u_gamma;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\nvarying float v_gamma_scale;\n\nvoid main() {\n    lowp float dist = texture2D(u_texture, v_tex).a;\n    lowp float fade_alpha = texture2D(u_fadetexture, v_fade_tex).a;\n    lowp float gamma = u_gamma * v_gamma_scale;\n    lowp float alpha = smoothstep(u_buffer - gamma, u_buffer + gamma, dist) * fade_alpha;\n\n    gl_FragColor = u_color * (alpha * u_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec4 a_data1;\nattribute vec4 a_data2;\n\n\n// matrix is for the vertex position.\nuniform mat4 u_matrix;\n\nuniform mediump float u_zoom;\nuniform bool u_skewed;\nuniform vec2 u_extrude_scale;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\nvarying float v_gamma_scale;\n\nvoid main() {\n    vec2 a_tex = a_data1.xy;\n    mediump float a_labelminzoom = a_data1[2];\n    mediump vec2 a_zoom = a_data2.st;\n    mediump float a_minzoom = a_zoom[0];\n    mediump float a_maxzoom = a_zoom[1];\n\n    // u_zoom is the current zoom level adjusted for the change in font size\n    mediump float z = 2.0 - step(a_minzoom, u_zoom) - (1.0 - step(a_maxzoom, u_zoom));\n\n    vec2 extrude = u_extrude_scale * (a_offset / 64.0);\n    if (u_skewed) {\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\n        gl_Position.z += z * gl_Position.w;\n    } else {\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n    }\n\n    v_gamma_scale = (gl_Position.w - 0.5);\n\n    v_tex = a_tex / u_texsize;\n    v_fade_tex = vec2(a_labelminzoom / 255.0, 0.0);\n}\n"},collisionbox:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_zoom;\nuniform float u_maxzoom;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0) * alpha;\n\n    if (v_placement_zoom > u_zoom) {\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n    }\n\n    if (u_zoom >= v_max_zoom) {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0) * alpha * 0.25;\n    }\n\n    if (v_placement_zoom >= u_maxzoom) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 1.0) * alpha * 0.2;\n    }\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_data;\n\nuniform mat4 u_matrix;\nuniform float u_scale;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos + a_extrude / u_scale, 0.0, 1.0);\n\n    v_max_zoom = a_data.x;\n    v_placement_zoom = a_data.y;\n}\n"}},e.exports.util="float evaluate_zoom_function_1(const vec4 values, const float t) {\n    if (t < 1.0) {\n        return mix(values[0], values[1], t);\n    } else if (t < 2.0) {\n        return mix(values[1], values[2], t - 1.0);\n    } else {\n        return mix(values[2], values[3], t - 2.0);\n    }\n}\nvec4 evaluate_zoom_function_4(const vec4 value0, const vec4 value1, const vec4 value2, const vec4 value3, const float t) {\n    if (t < 1.0) {\n        return mix(value0, value1, t);\n    } else if (t < 2.0) {\n        return mix(value1, value2, t - 1.0);\n    } else {\n        return mix(value2, value3, t - 2.0);\n    }\n}\n"},{path:110}],141:[function(t,e,n){function r(t,e){this.message=(t?t+": ":"")+o.apply(o,Array.prototype.slice.call(arguments,2)),null!==e&&void 0!==e&&e.__line__&&(this.line=e.__line__)}var o=t("util").format;e.exports=r},{util:113}],142:[function(t,e,n){e.exports=function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}},{}],143:[function(t,e,n){e.exports=function(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":"undefined"==typeof t?"undefined":u(t)}},{}],144:[function(t,e,n){e.exports=function(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}},{}],145:[function(t,e,n){var r=t("../error/validation_error"),o=t("../util/get_type"),i=t("../util/extend");e.exports=function(e){var n=t("./validate_function"),s=t("./validate_object"),a={"*":function(){return[]},array:t("./validate_array"),boolean:t("./validate_boolean"),number:t("./validate_number"),color:t("./validate_color"),constants:t("./validate_constants"),enum:t("./validate_enum"),filter:t("./validate_filter"),function:t("./validate_function"),layer:t("./validate_layer"),object:t("./validate_object"),source:t("./validate_source"),string:t("./validate_string")},u=e.value,l=e.valueSpec,c=e.key,p=e.styleSpec,h=e.style;if("string"===o(u)&&"@"===u[0]){if(p.$version>7)return[new r(c,u,"constants have been deprecated as of v8")];if(!(u in h.constants))return[new r(c,u,'constant "%s" not found',u)];e=i({},e,{value:h.constants[u]})}return l.function&&"object"===o(u)?n(e):l.type&&a[l.type]?a[l.type](e):s(i({},e,{valueSpec:l.type?p[l.type]:l}))}},{"../error/validation_error":141,"../util/extend":142,"../util/get_type":143,"./validate_array":146,"./validate_boolean":147,"./validate_color":148,"./validate_constants":149,"./validate_enum":150,"./validate_filter":151,"./validate_function":152,"./validate_layer":154,"./validate_number":156,"./validate_object":157,"./validate_source":159,"./validate_string":160}],146:[function(t,e,n){var r=t("../util/get_type"),o=t("./validate"),i=t("../error/validation_error");e.exports=function(t){var e=t.value,n=t.valueSpec,s=t.style,a=t.styleSpec,u=t.key,l=t.arrayElementValidator||o;if("array"!==r(e))return[new i(u,e,"array expected, %s found",r(e))];if(n.length&&e.length!==n.length)return[new i(u,e,"array length %d expected, length %d found",n.length,e.length)];if(n["min-length"]&&e.length<n["min-length"])return[new i(u,e,"array length at least %d expected, length %d found",n["min-length"],e.length)];var c={type:n.value};a.$version<7&&(c.function=n.function),"object"===r(n.value)&&(c=n.value);for(var p=[],h=0;h<e.length;h++)p=p.concat(l({array:e,arrayIndex:h,value:e[h],valueSpec:c,style:s,styleSpec:a,key:u+"["+h+"]"}));return p}},{"../error/validation_error":141,"../util/get_type":143,"./validate":145}],147:[function(t,e,n){var r=t("../util/get_type"),o=t("../error/validation_error");e.exports=function(t){var e=t.value,n=t.key,i=r(e);return"boolean"!==i?[new o(n,e,"boolean expected, %s found",i)]:[]}},{"../error/validation_error":141,"../util/get_type":143}],148:[function(t,e,n){var r=t("../error/validation_error"),o=t("../util/get_type"),i=t("csscolorparser").parseCSSColor;e.exports=function(t){var e=t.key,n=t.value,s=o(n);return"string"!==s?[new r(e,n,"color expected, %s found",s)]:null===i(n)?[new r(e,n,'color expected, "%s" found',n)]:[]}},{"../error/validation_error":141,"../util/get_type":143,csscolorparser:114}],149:[function(t,e,n){var r=t("../error/validation_error"),o=t("../util/get_type");e.exports=function(t){var e=t.key,n=t.value,i=t.styleSpec;if(i.$version>7)return n?[new r(e,n,"constants have been deprecated as of v8")]:[];var s=o(n);if("object"!==s)return[new r(e,n,"object expected, %s found",s)];var a=[];for(var u in n)"@"!==u[0]&&a.push(new r(e+"."+u,n[u],'constants must start with "@"'));return a}},{"../error/validation_error":141,"../util/get_type":143}],150:[function(t,e,n){var r=t("../error/validation_error"),o=t("../util/unbundle_jsonlint");e.exports=function(t){var e=t.key,n=t.value,i=t.valueSpec,s=[];return-1===i.values.indexOf(o(n))&&s.push(new r(e,n,"expected one of [%s], %s found",i.values.join(", "),n)),s}},{"../error/validation_error":141,"../util/unbundle_jsonlint":144}],151:[function(t,e,n){var r=t("../error/validation_error"),o=t("./validate_enum"),i=t("../util/get_type"),s=t("../util/unbundle_jsonlint");e.exports=function t(e){var n,a=e.value,u=e.key,l=e.styleSpec,c=[];if("array"!==i(a))return[new r(u,a,"array expected, %s found",i(a))];if(a.length<1)return[new r(u,a,"filter array must have at least 1 element")];switch(c=c.concat(o({key:u+"[0]",value:a[0],valueSpec:l.filter_operator,style:e.style,styleSpec:e.styleSpec})),s(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&"$type"==a[1]&&c.push(new r(u,a,'"$type" cannot be use with operator "%s"',a[0]));case"==":case"!=":3!=a.length&&c.push(new r(u,a,'filter array for operator "%s" must have 3 elements',a[0]));case"in":case"!in":a.length>=2&&(n=i(a[1]),"string"!==n?c.push(new r(u+"[1]",a[1],"string expected, %s found",n)):"@"===a[1][0]&&c.push(new r(u+"[1]",a[1],"filter key cannot be a constant")));for(var p=2;p<a.length;p++)n=i(a[p]),"$type"==a[1]?c=c.concat(o({key:u+"["+p+"]",value:a[p],valueSpec:l.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"===n&&"@"===a[p][0]?c.push(new r(u+"["+p+"]",a[p],"filter value cannot be a constant")):"string"!==n&&"number"!==n&&"boolean"!==n&&c.push(new r(u+"["+p+"]",a[p],"string, number, or boolean expected, %s found",n));break;case"any":case"all":case"none":for(p=1;p<a.length;p++)c=c.concat(t({key:u+"["+p+"]",value:a[p],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":n=i(a[1]),2!==a.length?c.push(new r(u,a,'filter array for "%s" operator must have 2 elements',a[0])):"string"!==n?c.push(new r(u+"[1]",a[1],"string expected, %s found",n)):"@"===a[1][0]&&c.push(new r(u+"[1]",a[1],"filter key cannot be a constant"))}return c}},{"../error/validation_error":141,"../util/get_type":143,"../util/unbundle_jsonlint":144,"./validate_enum":150}],152:[function(t,e,n){var r=t("../error/validation_error"),o=t("../util/get_type"),i=t("./validate"),s=t("./validate_object"),a=t("./validate_array"),u=t("./validate_number");e.exports=function(t){function e(t){var e=[],i=t.value;return e=e.concat(a({key:t.key,value:i,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:n})),"array"===o(i)&&0===i.length&&e.push(new r(t.key,i,"array must have at least one stop")),e}function n(t){var e=[],n=t.value,a=t.key;if("array"!==o(n))return[new r(a,n,"array expected, %s found",o(n))];if(2!==n.length)return[new r(a,n,"array length %d expected, length %d found",2,n.length)];var h=o(n[0]);if(c||(c=h),h!==c)return[new r(a,n,"%s stop key type must match previous stop key type %s",h,c)];if("object"===h){if(void 0===n[0].zoom)return[new r(a,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new r(a,n,"object stop key must have value")];e=e.concat(s({key:a+"[0]",value:n[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:u,value:l}}))}else e=e.concat((d?u:l)({key:a+"[0]",value:n[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec}));return e=e.concat(i({key:a+"[1]",value:n[1],valueSpec:p,style:t.style,styleSpec:t.styleSpec})),"number"===o(n[0])&&("piecewise-constant"===p.function&&n[0]%1!==0&&e.push(new r(a+"[0]",n[0],"zoom level for piecewise-constant functions must be an integer")),0!==t.arrayIndex&&n[0]<t.array[t.arrayIndex-1][0]&&e.push(new r(a+"[0]",n[0],"array stops must appear in ascending order"))),e}function l(t){var e=[],n=o(t.value);return"number"!==n&&"string"!==n&&"array"!==n&&e.push(new r(t.key,t.value,"property value must be a number, string or array")),e}var c,p=t.valueSpec,h=void 0!==t.value.property||"object"===c,d=void 0===t.value.property||"object"===c,f=s({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:e}});return t.styleSpec.$version>=8&&(h&&!t.valueSpec["property-function"]?f.push(new r(t.key,t.value,"property functions not supported")):d&&!t.valueSpec["zoom-function"]&&f.push(new r(t.key,t.value,"zoom functions not supported"))),f}},{"../error/validation_error":141,"../util/get_type":143,"./validate":145,"./validate_array":146,"./validate_number":156,"./validate_object":157}],153:[function(t,e,n){var r=t("../error/validation_error"),o=t("./validate_string");e.exports=function(t){var e=t.value,n=t.key,i=o(t);return i.length?i:(-1===e.indexOf("{fontstack}")&&i.push(new r(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&i.push(new r(n,e,'"glyphs" url must include a "{range}" token')),i)}},{"../error/validation_error":141,"./validate_string":160}],154:[function(t,e,n){var r=t("../error/validation_error"),o=t("../util/unbundle_jsonlint"),i=t("./validate_object"),s=t("./validate_filter"),a=t("./validate_paint_property"),u=t("./validate_layout_property"),l=t("../util/extend");e.exports=function(t){var e=[],n=t.value,c=t.key,p=t.style,h=t.styleSpec;n.type||n.ref||e.push(new r(c,n,'either "type" or "ref" is required'));var d=o(n.type),f=o(n.ref);if(n.id)for(var g=0;g<t.arrayIndex;g++){var m=p.layers[g];o(m.id)===o(n.id)&&e.push(new r(c,n.id,'duplicate layer id "%s", previously used at line %d',n.id,m.id.__line__))}if("ref"in n){["type","source","source-layer","filter","layout"].forEach(function(t){t in n&&e.push(new r(c,n[t],'"%s" is prohibited for ref layers',t))});var y;p.layers.forEach(function(t){t.id==f&&(y=t)}),y?y.ref?e.push(new r(c,n.ref,"ref cannot reference another ref layer")):d=o(y.type):e.push(new r(c,n.ref,'ref layer "%s" not found',f))}else if("background"!==d)if(n.source){var v=p.sources&&p.sources[n.source];v?"vector"==v.type&&"raster"==d?e.push(new r(c,n.source,'layer "%s" requires a raster source',n.id)):"raster"==v.type&&"raster"!=d?e.push(new r(c,n.source,'layer "%s" requires a vector source',n.id)):"vector"!=v.type||n["source-layer"]||e.push(new r(c,n,'layer "%s" must specify a "source-layer"',n.id)):e.push(new r(c,n.source,'source "%s" not found',n.source))}else e.push(new r(c,n,'missing required property "source"'));return e=e.concat(i({key:c,value:n,valueSpec:h.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{filter:s,layout:function(t){return i({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return u(l({layerType:d},t))}}})},paint:function(t){return i({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return a(l({layerType:d},t))}}})}}}))}},{"../error/validation_error":141,"../util/extend":142,"../util/unbundle_jsonlint":144,"./validate_filter":151,"./validate_layout_property":155,"./validate_object":157,"./validate_paint_property":158}],155:[function(t,e,n){var r=t("./validate"),o=t("../error/validation_error");e.exports=function(t){var e=t.key,n=t.style,i=t.styleSpec,s=t.value,a=t.objectKey,u=i["layout_"+t.layerType];if(t.valueSpec||u[a]){var l=[];return"symbol"===t.layerType&&("icon-image"===a&&n&&!n.sprite?l.push(new o(e,s,'use of "icon-image" requires a style "sprite" property')):"text-field"===a&&n&&!n.glyphs&&l.push(new o(e,s,'use of "text-field" requires a style "glyphs" property'))),l.concat(r({key:t.key,value:s,valueSpec:t.valueSpec||u[a],style:n,styleSpec:i}))}return[new o(e,s,'unknown property "%s"',a)]}},{"../error/validation_error":141,"./validate":145}],156:[function(t,e,n){var r=t("../util/get_type"),o=t("../error/validation_error");e.exports=function(t){var e=t.key,n=t.value,i=t.valueSpec,s=r(n);return"number"!==s?[new o(e,n,"number expected, %s found",s)]:"minimum"in i&&n<i.minimum?[new o(e,n,"%s is less than the minimum value %s",n,i.minimum)]:"maximum"in i&&n>i.maximum?[new o(e,n,"%s is greater than the maximum value %s",n,i.maximum)]:[]}},{"../error/validation_error":141,"../util/get_type":143}],157:[function(t,e,n){var r=t("../error/validation_error"),o=t("../util/get_type"),i=t("./validate");e.exports=function(t){var e=t.key,n=t.value,s=t.valueSpec,a=t.objectElementValidators||{},u=t.style,l=t.styleSpec,c=[],p=o(n);if("object"!==p)return[new r(e,n,"object expected, %s found",p)];for(var h in n){var d=h.split(".")[0],f=s&&(s[d]||s["*"]),g=a[d]||a["*"];f||g?c=c.concat((g||i)({key:(e?e+".":e)+h,value:n[h],valueSpec:f,style:u,styleSpec:l,object:n,objectKey:h})):""!==e&&1!==e.split(".").length&&c.push(new r(e,n[h],'unknown property "%s"',h))}for(d in s)s[d].required&&void 0===s[d].default&&void 0===n[d]&&c.push(new r(e,n,'missing required property "%s"',d));return c}},{"../error/validation_error":141,"../util/get_type":143,"./validate":145}],158:[function(t,e,n){var r=t("./validate"),o=t("../error/validation_error");e.exports=function(t){var e=t.key,n=t.style,i=t.styleSpec,s=t.value,a=t.objectKey,u=i["paint_"+t.layerType],l=a.match(/^(.*)-transition$/);return l&&u[l[1]]&&u[l[1]].transition?r({key:e,value:s,valueSpec:i.transition,style:n,styleSpec:i}):t.valueSpec||u[a]?r({key:t.key,value:s,valueSpec:t.valueSpec||u[a],style:n,styleSpec:i}):[new o(e,s,'unknown property "%s"',a)]}},{"../error/validation_error":141,"./validate":145}],159:[function(t,e,n){var r=t("../error/validation_error"),o=t("../util/unbundle_jsonlint"),i=t("./validate_object"),s=t("./validate_enum");e.exports=function(t){var e=t.value,n=t.key,a=t.styleSpec,u=t.style;if(!e.type)return[new r(n,e,'"type" is required')];var l=o(e.type);switch(l){case"vector":case"raster":var c=[];if(c=c.concat(i({key:n,value:e,valueSpec:a.source_tile,style:t.style,styleSpec:a})),"url"in e)for(var p in e)["type","url","tileSize"].indexOf(p)<0&&c.push(new r(n+"."+p,e[p],'a source with a "url" property may not include a "%s" property',p));return c;case"geojson":return i({key:n,value:e,valueSpec:a.source_geojson,style:u,styleSpec:a});case"video":return i({key:n,value:e,valueSpec:a.source_video,style:u,styleSpec:a});case"image":return i({key:n,value:e,valueSpec:a.source_image,style:u,styleSpec:a});default:return s({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","geojson","video","image"]},style:u,styleSpec:a})}}},{"../error/validation_error":141,"../util/unbundle_jsonlint":144,"./validate_enum":150,"./validate_object":157}],160:[function(t,e,n){var r=t("../util/get_type"),o=t("../error/validation_error");e.exports=function(t){var e=t.value,n=t.key,i=r(e);return"string"!==i?[new o(n,e,"string expected, %s found",i)]:[]}},{"../error/validation_error":141,"../util/get_type":143}],161:[function(t,e,n){function r(t,e){e=e||u;var n=[];return n=n.concat(a({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:l}})),e.$version>7&&t.constants&&(n=n.concat(s({key:"constants",value:t.constants,style:t,styleSpec:e}))),o(n)}function o(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function i(t){return function(){return o(t.apply(this,arguments))}}var s=t("./validate/validate_constants"),a=t("./validate/validate"),u=t("../reference/latest.min"),l=t("./validate/validate_glyphs_url");r.source=i(t("./validate/validate_source")),r.layer=i(t("./validate/validate_layer")),r.filter=i(t("./validate/validate_filter")),r.paintProperty=i(t("./validate/validate_paint_property")),r.layoutProperty=i(t("./validate/validate_layout_property")),e.exports=r},{"../reference/latest.min":163,"./validate/validate":145,"./validate/validate_constants":149,"./validate/validate_filter":151,"./validate/validate_glyphs_url":153,"./validate/validate_layer":154,"./validate/validate_layout_property":155,"./validate/validate_paint_property":158,"./validate/validate_source":159}],162:[function(t,e,n){e.exports=t("./v8.json")},{"./v8.json":164}],163:[function(t,e,n){e.exports=t("./v8.min.json")},{"./v8.min.json":165}],164:[function(t,e,n){e.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8],doc:"Stylesheet version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:"Default bearing, in degrees.  The style bearing will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface.  The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the 'sprite-image' layout property.",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the 'text-field' layout property.",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties.",example:{duration:300,delay:0}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},sources:{"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For GeoJSON and video sources, a URL must be provided."}},source:["source_tile","source_geojson","source_video","source_image"],source_tile:{type:{required:!0,type:"enum",values:["vector","raster"],doc:"The data type of the tile source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<mapid>`."
},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},"*":{type:"*",doc:"Other keys to configure the data source."}},source_geojson:{type:{required:!0,type:"enum",values:["geojson"],doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:14,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},buffer:{type:"number",default:64,doc:"Tile buffer size on each side (higher means fewer rendering artifacts near tile edges but slower performance)."},tolerance:{type:"number",default:3,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups."},clusterRadius:{type:"number",default:400,doc:"Radius of each cluster when clustering points, relative to 4096 tile."},clusterMaxZoom:{type:"number",doc:"Max zoom to cluster points on. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered)."}},source_video:{type:{required:!0,type:"enum",values:["video"],doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},source_image:{type:{required:!0,type:"enum",values:["image"],doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image"},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},layer:{id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:["fill","line","symbol","circle","raster","background"],doc:"Rendering type of this layer."},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},ref:{type:"string",doc:"References another layer to copy `type`, `source`, `source-layer`, `minzoom`, `maxzoom`, `filter`, and `layout` properties from. This allows the layers to share processing and be more efficient."},source:{type:"string",doc:"Name of a source description to be used for this layer."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required if the source supports multiple layers."},minzoom:{type:"number",minimum:0,maximum:22,doc:"The minimum zoom level on which the layer gets parsed and appears on."},maxzoom:{type:"number",minimum:0,maximum:22,doc:"The maximum zoom level on which the layer gets parsed and appears on."},interactive:{type:"boolean",doc:"Enable querying of feature data from this layer for interactivity.",default:!1},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."},"paint.*":{type:"paint",doc:"Class-specific paint properties for this layer. The class name is the part after the first dot."}},layout:["layout_fill","layout_line","layout_circle","layout_symbol","layout_raster","layout_background"],layout_background:{visibility:{type:"enum",function:"piecewise-constant","zoom-function":!0,values:["visible","none"],default:"visible",doc:"The display of this layer. `none` hides this layer."}},layout_fill:{visibility:{type:"enum",function:"piecewise-constant","zoom-function":!0,values:["visible","none"],default:"visible",doc:"The display of this layer. `none` hides this layer."}},layout_circle:{visibility:{type:"enum",function:"piecewise-constant","zoom-function":!0,values:["visible","none"],default:"visible",doc:"The display of this layer. `none` hides this layer."}},layout_line:{"line-cap":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["butt","round","square"],default:"butt",doc:"The display of line endings."},"line-join":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["bevel","round","miter"],default:"miter",doc:"The display of lines when joining."},"line-miter-limit":{type:"number",default:2,function:"interpolated","zoom-function":!0,"property-function":!0,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number",default:1.05,function:"interpolated","zoom-function":!0,"property-function":!0,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}]},visibility:{type:"enum",function:"piecewise-constant","zoom-function":!0,values:["visible","none"],default:"visible",doc:"The display of this layer. `none` hides this layer."}},layout_symbol:{"symbol-placement":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["point","line"],default:"point",doc:"Label placement relative to its geometry. `line` can only be used on LineStrings and Polygons."},"symbol-spacing":{type:"number",default:250,minimum:1,function:"interpolated","zoom-function":!0,"property-function":!0,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer."},"icon-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"]},"icon-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"]},"icon-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],default:"viewport",doc:"Orientation of icon when map is rotated.",requires:["icon-image"]},"icon-size":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,doc:"Scale factor for icon. 1 is original size, 3 triples the size.",requires:["icon-image"]},"icon-text-fit":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!1,values:["none","both","width","height"],default:"none",doc:"Position and scale an icon by the its corresponding text.",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,doc:"Size of padding area around the text-fit size in clockwise order: top, right, bottom, left.",requires:["icon-image","icon-text-fit","text-field"]},"icon-image":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,doc:"A string with {tokens} replaced, referencing the data property to pull from.",tokens:!0},"icon-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"]},"icon-padding":{type:"number",default:2,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"]},"icon-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"]},"text-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],doc:"Aligns text to the plane of the `viewport` or the `map` when the map is pitched. Matches `text-rotation-alignment` if unspecified.",requires:["text-field"]},"text-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],default:"viewport",doc:"Orientation of text when map is rotated.",requires:["text-field"]},"text-field":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:"",tokens:!0,doc:"Value to use for a text label. Feature properties are specified using tokens like {field_name}."},"text-font":{type:"array",value:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"]},"text-size":{type:"number",default:16,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,doc:"Font size.",requires:["text-field"]},"text-max-width":{type:"number",default:10,minimum:0,units:"em",function:"interpolated","zoom-function":!0,"property-function":!0,doc:"The maximum line width for text wrapping.",requires:["text-field"]},"text-line-height":{type:"number",default:1.2,units:"em",function:"interpolated","zoom-function":!0,"property-function":!0,doc:"Text leading value for multi-line text.",requires:["text-field"]},"text-letter-spacing":{type:"number",default:0,units:"em",function:"interpolated","zoom-function":!0,"property-function":!0,doc:"Text tracking amount.",requires:["text-field"]},"text-justify":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["left","center","right"],default:"center",doc:"Text justification options.",requires:["text-field"]},"text-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field"]},"text-max-angle":{type:"number",default:45,units:"degrees",function:"interpolated","zoom-function":!0,"property-function":!0,doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number",default:0,period:360,units:"degrees",function:"interpolated","zoom-function":!0,"property-function":!0,doc:"Rotates the text clockwise.",requires:["text-field"]},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"]},"text-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["none","uppercase","lowercase"],default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"]},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up.",value:"number",units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,length:2,default:[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"]},"text-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"]},"text-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"]},visibility:{type:"enum",function:"piecewise-constant","zoom-function":!0,values:["visible","none"],default:"visible",doc:"The display of this layer. `none` hides this layer."}},layout_raster:{visibility:{type:"enum",function:"piecewise-constant","zoom-function":!0,values:["visible","none"],default:"visible",doc:"The display of this layer. `none` hides this layer."}},filter:{type:"array",value:"*",doc:"A filter selects specific features from a layer."},filter_operator:{type:"enum",values:["==","!=",">",">=","<","<=","in","!in","all","any","none","has","!has"],doc:"The filter operator."},geometry_type:{type:"enum",values:["Point","LineString","Polygon"],doc:"The geometry type for the filter to select."},color_operation:{type:"enum",values:["lighten","saturate","spin","fade","mix"],doc:"A color operation to apply."},function:{stops:{type:"array",required:!0,doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a global property or feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:["exponential","interval","categorical"],doc:"The interpolation strategy to use in function evaluation.",default:"exponential"}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2,doc:"Zoom level and value pair."},paint:["paint_fill","paint_line","paint_circle","paint_symbol","paint_raster","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!0,doc:"Whether or not the fill should be antialiased."},"fill-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the fill-color, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as rgba with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively."},"fill-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],doc:"Control whether the translation is relative to the map (north) or viewport (screen)",default:"map",requires:["fill-translate"]},"fill-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512)."}},paint_line:{"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively."},"line-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],doc:"Control whether the translation is relative to the map (north) or viewport (screen)",default:"map",requires:["line-translate"]},"line-width":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",doc:"Stroke thickness."},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number",default:0,doc:'The line\'s offset perpendicular to its direction. Values may be positive or negative, where positive indicates "rightwards" (if you were moving in the direction of the line) and negative indicates "leftwards."',function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels."},"line-dasharray":{type:"array",value:"number",function:"piecewise-constant","zoom-function":!0,"property-function":!0,doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512)."}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",doc:"Circle radius."},"circle-color":{type:"color",default:"#000000",doc:"The color of the circle.",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively."},"circle-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],doc:"Control whether the translation is relative to the map (north) or viewport (screen)",default:"map",requires:["circle-translate"]}},paint_symbol:{"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,doc:"The color of the icon. This can only be used with sdf icons.",requires:["icon-image"]},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with sdf icons.",requires:["icon-image"]},"icon-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"]},"icon-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"]},"icon-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],doc:"Control whether the translation is relative to the map (north) or viewport (screen).",default:"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"]},"text-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"]},"text-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"]},"text-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],doc:"Control whether the translation is relative to the map (north) or viewport (screen).",default:"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel."},"raster-brightness-min":{type:"number",function:"interpolated","zoom-function":!0,doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number",function:"interpolated","zoom-function":!0,doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number",default:300,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"milliseconds",doc:"Fade duration when a new tile is added."}},paint_background:{"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",function:"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512)."},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",function:"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}}}},{}],165:[function(t,e,n){e.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_tile","source_geojson","source_video","source_image"],source_tile:{type:{required:!0,type:"enum",values:["vector","raster"]},url:{type:"string"},tiles:{type:"array",value:"string"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:["geojson"]},data:{type:"*"},maxzoom:{type:"number",default:14},buffer:{type:"number",default:64},tolerance:{type:"number",default:3},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:400},clusterMaxZoom:{type:"number"}},source_video:{type:{required:!0,type:"enum",values:["video"]},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:["image"]},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:["fill","line","symbol","circle","raster","background"]},metadata:{type:"*"},ref:{type:"string"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:22},maxzoom:{type:"number",minimum:0,maximum:22},interactive:{type:"boolean",default:!1},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"},"paint.*":{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_symbol","layout_raster","layout_background"],layout_background:{visibility:{type:"enum",function:"piecewise-constant","zoom-function":!0,values:["visible","none"],default:"visible"}},layout_fill:{visibility:{type:"enum",function:"piecewise-constant","zoom-function":!0,values:["visible","none"],default:"visible"}},layout_circle:{visibility:{type:"enum",function:"piecewise-constant","zoom-function":!0,values:["visible","none"],default:"visible"}},layout_line:{"line-cap":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["butt","round","square"],default:"butt"},"line-join":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["bevel","round","miter"],default:"miter"},"line-miter-limit":{type:"number",default:2,function:"interpolated","zoom-function":!0,"property-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number",default:1.05,function:"interpolated","zoom-function":!0,"property-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum",function:"piecewise-constant","zoom-function":!0,values:["visible","none"],default:"visible"}},layout_symbol:{"symbol-placement":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["point","line"],default:"point"},"symbol-spacing":{type:"number",default:250,minimum:1,function:"interpolated","zoom-function":!0,"property-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1},"icon-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,requires:["icon-image"]},"icon-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],default:"viewport",requires:["icon-image"]},"icon-size":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"icon-text-fit":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!1,values:["none","both","width","height"],default:"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",function:"interpolated",
"zoom-function":!0,"property-function":!0,requires:["icon-image","icon-text-fit","text-field"]},"icon-image":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,tokens:!0},"icon-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number",default:2,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"text-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],requires:["text-field"]},"text-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],default:"viewport",requires:["text-field"]},"text-field":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:"",tokens:!0},"text-font":{type:"array",value:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number",default:16,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-max-width":{type:"number",default:10,minimum:0,units:"em",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-line-height":{type:"number",default:1.2,units:"em",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number",default:0,units:"em",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-justify":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["left","center","right"],default:"center",requires:["text-field"]},"text-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:"center",requires:["text-field"]},"text-max-angle":{type:"number",default:45,units:"degrees",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number",default:0,period:360,units:"degrees",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["none","uppercase","lowercase"],default:"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,length:2,default:[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,requires:["text-field"]},"text-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,requires:["text-field","icon-image"]},visibility:{type:"enum",function:"piecewise-constant","zoom-function":!0,values:["visible","none"],default:"visible"}},layout_raster:{visibility:{type:"enum",function:"piecewise-constant","zoom-function":!0,values:["visible","none"],default:"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:["==","!=",">",">=","<","<=","in","!in","all","any","none","has","!has"]},geometry_type:{type:"enum",values:["Point","LineString","Polygon"]},color_operation:{type:"enum",values:["lighten","saturate","spin","fade","mix"]},function:{stops:{type:"array",required:!0,value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:["exponential","interval","categorical"],default:"exponential"}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},paint:["paint_fill","paint_line","paint_circle","paint_symbol","paint_raster","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!0},"fill-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],default:"map",requires:["fill-translate"]},"fill-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,transition:!0}},paint_line:{"line-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],default:"map",requires:["line-translate"]},"line-width":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number",function:"piecewise-constant","zoom-function":!0,"property-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,transition:!0}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],default:"map",requires:["circle-translate"]}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],default:"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:["map","viewport"],default:"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number",function:"interpolated","zoom-function":!0,default:0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number",function:"interpolated","zoom-function":!0,default:1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number",default:300,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"milliseconds"}},paint_background:{"background-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}}}},{}],166:[function(t,e,n){function r(t){var e;t&&t.length&&(e=t,t=e.length);var n=new Uint8Array(t||0);return e&&n.set(e),n.readUInt32LE=i.readUInt32LE,n.writeUInt32LE=i.writeUInt32LE,n.readInt32LE=i.readInt32LE,n.writeInt32LE=i.writeInt32LE,n.readFloatLE=i.readFloatLE,n.writeFloatLE=i.writeFloatLE,n.readDoubleLE=i.readDoubleLE,n.writeDoubleLE=i.writeDoubleLE,n.toString=i.toString,n.write=i.write,n.slice=i.slice,n.copy=i.copy,n._isBuffer=!0,n}function o(t){for(var e,n,r=t.length,o=[],i=0;r>i;i++){if(e=t.charCodeAt(i),e>55295&&57344>e){if(!n){e>56319||i+1===r?o.push(239,191,189):n=e;continue}if(56320>e){o.push(239,191,189),n=e;continue}e=n-55296<<10|e-56320|65536,n=null}else n&&(o.push(239,191,189),n=null);128>e?o.push(e):2048>e?o.push(e>>6|192,63&e|128):65536>e?o.push(e>>12|224,e>>6&63|128,63&e|128):o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}return o}e.exports=r;var i,s,a,u=t("ieee754");i={readUInt32LE:function(t){return(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},writeUInt32LE:function(t,e){this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24},readInt32LE:function(t){return(this[t]|this[t+1]<<8|this[t+2]<<16)+(this[t+3]<<24)},readFloatLE:function(t){return u.read(this,t,!0,23,4)},readDoubleLE:function(t){return u.read(this,t,!0,52,8)},writeFloatLE:function(t,e){return u.write(this,t,e,!0,23,4)},writeDoubleLE:function(t,e){return u.write(this,t,e,!0,52,8)},toString:function(t,e,n){var r="",o="";e=e||0,n=Math.min(this.length,n||this.length);for(var i=e;n>i;i++){var s=this[i];127>=s?(r+=decodeURIComponent(o)+String.fromCharCode(s),o=""):o+="%"+s.toString(16)}return r+=decodeURIComponent(o)},write:function(t,e){for(var n=t===s?a:o(t),r=0;r<n.length;r++)this[e+r]=n[r]},slice:function(t,e){return this.subarray(t,e)},copy:function(t,e){e=e||0;for(var n=0;n<this.length;n++)t[e+n]=this[n]}},i.writeInt32LE=i.writeUInt32LE,r.byteLength=function(t){return s=t,a=o(t),a.length},r.isBuffer=function(t){return!(!t||!t._isBuffer)}},{ieee754:168}],167:[function(t,e,n){(function(n){function r(t){this.buf=m.isBuffer(t)?t:new m(t||0),this.pos=0,this.length=this.buf.length}function o(t,e){var n,r=e.buf;if(n=r[e.pos++],t+=268435456*(127&n),128>n)return t;if(n=r[e.pos++],t+=34359738368*(127&n),128>n)return t;if(n=r[e.pos++],t+=4398046511104*(127&n),128>n)return t;if(n=r[e.pos++],t+=562949953421312*(127&n),128>n)return t;if(n=r[e.pos++],t+=72057594037927940*(127&n),128>n)return t;if(n=r[e.pos++],t+=0x8000000000000000*(127&n),128>n)return t;throw new Error("Expected varint not more than 10 bytes")}function i(t,e){e.realloc(10);for(var n=e.pos+10;t>=1;){if(e.pos>=n)throw new Error("Given varint doesn't fit into 10 bytes");var r=255&t;e.buf[e.pos++]=r|(t>=128?128:0),t/=128}}function s(t,e,n){var r=16383>=e?1:2097151>=e?2:268435455>=e?3:Math.ceil(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var o=n.pos-1;o>=t;o--)n.buf[o+r]=n.buf[o]}function a(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function u(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function l(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function c(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function p(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function h(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function d(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function f(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function g(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}e.exports=r;var m=n.Buffer||t("./buffer");r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;var y=4294967296,v=1/y,x=Math.pow(2,63);r.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),o=r>>3,i=this.pos;t(o,e,this),this.pos===i&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=this.buf.readUInt32LE(this.pos);return this.pos+=4,t},readSFixed32:function(){var t=this.buf.readInt32LE(this.pos);return this.pos+=4,t},readFixed64:function(){var t=this.buf.readUInt32LE(this.pos)+this.buf.readUInt32LE(this.pos+4)*y;return this.pos+=8,t},readSFixed64:function(){var t=this.buf.readUInt32LE(this.pos)+this.buf.readInt32LE(this.pos+4)*y;return this.pos+=8,t},readFloat:function(){var t=this.buf.readFloatLE(this.pos);return this.pos+=4,t},readDouble:function(){var t=this.buf.readDoubleLE(this.pos);return this.pos+=8,t},readVarint:function(){var t,e,n=this.buf;return e=n[this.pos++],t=127&e,128>e?t:(e=n[this.pos++],t|=(127&e)<<7,128>e?t:(e=n[this.pos++],t|=(127&e)<<14,128>e?t:(e=n[this.pos++],t|=(127&e)<<21,128>e?t:o(t,this))))},readVarint64:function(){var t=this.pos,e=this.readVarint();if(x>e)return e;for(var n=this.pos-2;255===this.buf[n];)n--;t>n&&(n=t),e=0;for(var r=0;n-t+1>r;r++){var o=127&~this.buf[t+r];e+=4>r?o<<7*r:o*Math.pow(2,7*r)}return-e-1},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.buf.toString("utf8",this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.slice(this.pos,t);return this.pos=t,e},readPackedVarint:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readVarint());return e},readPackedSVarint:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(t){var e=7&t;if(e===r.Varint)for(;this.buf[this.pos++]>127;);else if(e===r.Bytes)this.pos=this.readVarint()+this.pos;else if(e===r.Fixed32)this.pos+=4;else{if(e!==r.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new m(e);this.buf.copy(n),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.slice(0,this.length)},writeFixed32:function(t){this.realloc(4),this.buf.writeUInt32LE(t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),this.buf.writeInt32LE(t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),this.buf.writeInt32LE(-1&t,this.pos),this.buf.writeUInt32LE(Math.floor(t*v),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),this.buf.writeInt32LE(-1&t,this.pos),this.buf.writeInt32LE(Math.floor(t*v),this.pos+4),this.pos+=8},writeVarint:function(t){return t=+t,t>268435455?void i(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),void(127>=t||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),127>=t||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),127>=t||(this.buf[this.pos++]=t>>>7&127)))))},writeSVarint:function(t){this.writeVarint(0>t?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t);var e=m.byteLength(t);this.writeVarint(e),this.realloc(e),this.buf.write(t,this.pos),this.pos+=e},writeFloat:function(t){this.realloc(4),this.buf.writeFloatLE(t,this.pos),this.pos+=4},writeDouble:function(t){this.realloc(8),this.buf.writeDoubleLE(t,this.pos),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;e>n;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&s(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,r.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,a,e)},writePackedSVarint:function(t,e){this.writeMessage(t,u,e)},writePackedBoolean:function(t,e){this.writeMessage(t,p,e)},writePackedFloat:function(t,e){this.writeMessage(t,l,e)},writePackedDouble:function(t,e){this.writeMessage(t,c,e)},writePackedFixed32:function(t,e){this.writeMessage(t,h,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,d,e)},writePackedFixed64:function(t,e){this.writeMessage(t,f,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,g,e)},writeBytesField:function(t,e){this.writeTag(t,r.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,r.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,r.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,r.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}}).call(this,"undefined"!=typeof a?a:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./buffer":166}],168:[function(t,e,n){n.read=function(t,e,n,r,o){var i,s,a=8*o-r-1,u=(1<<a)-1,l=u>>1,c=-7,p=n?o-1:0,h=n?-1:1,d=t[e+p];for(p+=h,i=d&(1<<-c)-1,d>>=-c,c+=a;c>0;i=256*i+t[e+p],p+=h,c-=8);for(s=i&(1<<-c)-1,i>>=-c,c+=r;c>0;s=256*s+t[e+p],p+=h,c-=8);if(0===i)i=1-l;else{if(i===u)return s?NaN:(d?-1:1)*(1/0);s+=Math.pow(2,r),i-=l}return(d?-1:1)*s*Math.pow(2,i-r)},n.write=function(t,e,n,r,o,i){var s,a,u,l=8*i-o-1,c=(1<<l)-1,p=c>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,f=r?1:-1,g=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+p>=1?h/u:h*Math.pow(2,1-p),e*u>=2&&(s++,u/=2),s+p>=c?(a=0,s=c):s+p>=1?(a=(e*u-1)*Math.pow(2,o),s+=p):(a=e*Math.pow(2,p-1)*Math.pow(2,o),s=0));o>=8;t[n+d]=255&a,d+=f,a/=256,o-=8);for(s=s<<o|a,l+=o;l>0;t[n+d]=255&s,d+=f,s/=256,l-=8);t[n+d-f]|=128*g}},{}],169:[function(t,e,n){function r(t,e){this.x=t,this.y=e}e.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,o=n*this.x+e*this.y;return this.x=r,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(t){return t instanceof r?t:Array.isArray(t)?new r(t[0],t[1]):t}},{}],170:[function(t,e,n){function r(t,e,n,s,a){for(n=n||0,s=s||t.length-1,a=a||i;s>n;){if(s-n>600){var u=s-n+1,l=e-n+1,c=Math.log(u),p=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*p*(u-p)/u)*(0>l-u/2?-1:1),d=Math.max(n,Math.floor(e-l*p/u+h)),f=Math.min(s,Math.floor(e+(u-l)*p/u+h));r(t,e,d,f,a)}var g=t[e],m=n,y=s;for(o(t,n,e),a(t[s],g)>0&&o(t,n,s);y>m;){for(o(t,m,y),m++,y--;a(t[m],g)<0;)m++;for(;a(t[y],g)>0;)y--}0===a(t[n],g)?o(t,n,y):(y++,o(t,y,s)),e>=y&&(n=y+1),y>=e&&(s=y-1)}}function o(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function i(t,e){return e>t?-1:t>e?1:0}e.exports=r},{}],171:[function(e,n,r){void function(e,o){"function"==typeof t&&t.amd?t(o):"object"==("undefined"==typeof r?"undefined":u(r))?n.exports=o():e.resolveUrl=o()}(this,function(){function t(){var t=arguments.length;if(0===t)throw new Error("resolveUrl requires at least one argument; got none.");var e=document.createElement("base");if(e.href=arguments[0],1===t)return e.href;var n=document.getElementsByTagName("head")[0];n.insertBefore(e,n.firstChild);for(var r,o=document.createElement("a"),i=1;t>i;i++)o.href=arguments[i],r=o.href,e.href=r;return n.removeChild(e),r}return t})},{}],172:[function(t,e,n){function r(t,e,n){n=n||{},this.w=t||64,this.h=e||64,this.autoResize=!!n.autoResize,this.shelves=[],this.stats={},this.count=function(t){this.stats[t]=(0|this.stats[t])+1}}function o(t,e,n){this.x=0,this.y=t,this.w=this.free=e,this.h=n}e.exports=r,r.prototype.pack=function(t,e){t=[].concat(t),e=e||{};for(var n,r,o,i=[],s=0;s<t.length;s++)if(n=t[s].w||t[s].width,r=t[s].h||t[s].height,n&&r){if(o=this.packOne(n,r),!o)continue;e.inPlace&&(t[s].x=o.x,t[s].y=o.y),i.push(o)}return i},r.prototype.packOne=function(t,e){for(var n,r,i=0,s={shelf:-1,waste:1/0},a=0;a<this.shelves.length;a++){if(n=this.shelves[a],i+=n.h,e===n.h&&t<=n.free)return this.count(e),n.alloc(t,e);e>n.h||t>n.free||e<n.h&&t<=n.free&&(r=n.h-e,r<s.waste&&(s.waste=r,s.shelf=a))}if(-1!==s.shelf)return n=this.shelves[s.shelf],this.count(e),n.alloc(t,e);if(e<=this.h-i&&t<=this.w)return n=new o(i,this.w,e),this.shelves.push(n),this.count(e),n.alloc(t,e);if(this.autoResize){var u,l,c,p;return u=l=this.h,c=p=this.w,(u>=c||t>c)&&(p=2*Math.max(t,c)),(c>u||e>u)&&(l=2*Math.max(e,u)),this.resize(p,l),this.packOne(t,e)}return null},r.prototype.clear=function(){this.shelves=[],this.stats={}},r.prototype.resize=function(t,e){if(t<this.w||e<this.h)return!1;this.w=t,this.h=e;for(var n=0;n<this.shelves.length;n++)this.shelves[n].resize(t);return!0},o.prototype.alloc=function(t,e){if(t>this.free||e>this.h)return null;var n=this.x;return this.x+=t,this.free-=t,{x:n,y:this.y,w:t,h:e,width:t,height:e}},o.prototype.resize=function(t){return!(t<this.w)&&(this.free+=t-this.w,this.w=t,!0)}},{}],173:[function(t,e,n){function r(t){return new o(t)}function o(t){this.options=d(Object.create(this.options),t),this.trees=new Array(this.options.maxZoom+1)}function i(t,e,n,r){return{x:t,y:e,zoom:1/0,id:r,numPoints:n}}function s(t,e){var n=t.geometry.coordinates;return i(l(n[0]),c(n[1]),1,e)}function a(t){return{type:"Feature",properties:u(t),geometry:{type:"Point",coordinates:[p(t.x),h(t.y)]}}}function u(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return{cluster:!0,point_count:e,point_count_abbreviated:n}}function l(t){return t/360+.5}function c(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return 0>n?0:n>1?1:n}function p(t){return 360*(t-.5)}function h(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function d(t,e){for(var n in e)t[n]=e[n];return t}function f(t){return t.x}function g(t){return t.y}var m=t("kdbush");e.exports=r,o.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1},load:function(t){var e=this.options.log;e&&console.time("total time");var n="prepare "+t.length+" points";e&&console.time(n),this.points=t;var r=t.map(s);e&&console.timeEnd(n);for(var o=this.options.maxZoom;o>=this.options.minZoom;o--){var i=+Date.now();this.trees[o+1]=m(r,f,g,this.options.nodeSize,Float32Array),r=this._cluster(r,o),e&&console.log("z%d: %d clusters in %dms",o,r.length,+Date.now()-i)}return this.trees[this.options.minZoom]=m(r,f,g,this.options.nodeSize,Float32Array),e&&console.timeEnd("total time"),this},getClusters:function(t,e){for(var n=this.trees[this._limitZoom(e)],r=n.range(l(t[0]),c(t[3]),l(t[2]),c(t[1])),o=[],i=0;i<r.length;i++){var s=n.points[r[i]];o.push(-1!==s.id?this.points[s.id]:a(s))}return o},getTile:function(t,e,n){var r=Math.pow(2,t),o=this.options.extent,i=this.options.radius/o,s=this.trees[this._limitZoom(t)],a=s.range((e-i)/r,(n-i)/r,(e+1+i)/r,(n+1+i)/r);if(!a.length)return null;for(var l={features:[]},c=0;c<a.length;c++){var p=s.points[a[c]],h={type:1,geometry:[[Math.round(o*(p.x*r-e)),Math.round(o*(p.y*r-n))]],tags:-1!==p.id?this.points[p.id].properties:u(p)};l.features.push(h)}return l},_limitZoom:function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},_cluster:function(t,e){for(var n=[],r=this.options.radius/(this.options.extent*Math.pow(2,e)),o=0;o<t.length;o++){var s=t[o];if(!(s.zoom<=e)){s.zoom=e;for(var a=this.trees[e+1],u=a.within(s.x,s.y,r),l=!1,c=s.numPoints,p=s.x*c,h=s.y*c,d=0;d<u.length;d++){var f=a.points[u[d]];e<f.zoom&&(l=!0,f.zoom=e,p+=f.x*f.numPoints,h+=f.y*f.numPoints,c+=f.numPoints)}n.push(l?i(p/c,h/c,c,-1):s)}}return n}}},{kdbush:174}],174:[function(t,e,n){function r(t,e,n,r,i){return new o(t,e,n,r,i)}function o(t,e,n,r,o){e=e||i,n=n||s,o=o||Array,this.nodeSize=r||64,this.points=t,this.ids=new o(t.length),this.coords=new o(2*t.length);for(var u=0;u<t.length;u++)this.ids[u]=u,this.coords[2*u]=e(t[u]),this.coords[2*u+1]=n(t[u]);a(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function i(t){return t[0]}function s(t){return t[1]}var a=t("./sort"),u=t("./range"),l=t("./within");e.exports=r,o.prototype={range:function(t,e,n,r){return u(this.ids,this.coords,t,e,n,r,this.nodeSize)},within:function(t,e,n){return l(this.ids,this.coords,t,e,n,this.nodeSize)}}},{"./range":175,"./sort":176,"./within":177}],175:[function(t,e,n){function r(t,e,n,r,o,i,s){for(var a,u,l=[0,t.length-1,0],c=[];l.length;){var p=l.pop(),h=l.pop(),d=l.pop();if(s>=h-d)for(var f=d;h>=f;f++)a=e[2*f],u=e[2*f+1],a>=n&&o>=a&&u>=r&&i>=u&&c.push(t[f]);else{var g=Math.floor((d+h)/2);a=e[2*g],u=e[2*g+1],a>=n&&o>=a&&u>=r&&i>=u&&c.push(t[g]);var m=(p+1)%2;(0===p?a>=n:u>=r)&&(l.push(d),l.push(g-1),l.push(m)),(0===p?o>=a:i>=u)&&(l.push(g+1),l.push(h),l.push(m))}}return c}e.exports=r},{}],176:[function(t,e,n){function r(t,e,n,i,s,a){if(!(n>=s-i)){var u=Math.floor((i+s)/2);o(t,e,u,i,s,a%2),r(t,e,n,i,u-1,a+1),r(t,e,n,u+1,s,a+1)}}function o(t,e,n,r,s,a){for(;s>r;){if(s-r>600){var u=s-r+1,l=n-r+1,c=Math.log(u),p=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*p*(u-p)/u)*(0>l-u/2?-1:1),d=Math.max(r,Math.floor(n-l*p/u+h)),f=Math.min(s,Math.floor(n+(u-l)*p/u+h));o(t,e,n,d,f,a)}var g=e[2*n+a],m=r,y=s;for(i(t,e,r,n),e[2*s+a]>g&&i(t,e,r,s);y>m;){for(i(t,e,m,y),m++,y--;e[2*m+a]<g;)m++;for(;e[2*y+a]>g;)y--}e[2*r+a]===g?i(t,e,r,y):(y++,i(t,e,y,s)),n>=y&&(r=y+1),y>=n&&(s=y-1)}
}function i(t,e,n,r){s(t,n,r),s(e,2*n,2*r),s(e,2*n+1,2*r+1)}function s(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}e.exports=r},{}],177:[function(t,e,n){function r(t,e,n,r,i,s){for(var a=[0,t.length-1,0],u=[],l=i*i;a.length;){var c=a.pop(),p=a.pop(),h=a.pop();if(s>=p-h)for(var d=h;p>=d;d++)o(e[2*d],e[2*d+1],n,r)<=l&&u.push(t[d]);else{var f=Math.floor((h+p)/2),g=e[2*f],m=e[2*f+1];o(g,m,n,r)<=l&&u.push(t[f]);var y=(c+1)%2;(0===c?g>=n-i:m>=r-i)&&(a.push(h),a.push(f-1),a.push(y)),(0===c?n+i>=g:r+i>=m)&&(a.push(f+1),a.push(p),a.push(y))}}return u}function o(t,e,n,r){var o=t-n,i=e-r;return o*o+i*i}e.exports=r},{}],178:[function(t,e,n){function r(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}e.exports=r,r.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},r.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},r.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},r.prototype.solveCurveX=function(t,e){"undefined"==typeof e&&(e=1e-6);var n,r,o,i,s;for(o=t,s=0;8>s;s++){if(i=this.sampleCurveX(o)-t,Math.abs(i)<e)return o;var a=this.sampleCurveDerivativeX(o);if(Math.abs(a)<1e-6)break;o-=i/a}if(n=0,r=1,o=t,n>o)return n;if(o>r)return r;for(;r>n;){if(i=this.sampleCurveX(o),Math.abs(i-t)<e)return o;t>i?n=o:r=o,o=.5*(r-n)+n}return o},r.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}},{}],179:[function(t,e,n){e.exports.VectorTile=t("./lib/vectortile.js"),e.exports.VectorTileFeature=t("./lib/vectortilefeature.js"),e.exports.VectorTileLayer=t("./lib/vectortilelayer.js")},{"./lib/vectortile.js":180,"./lib/vectortilefeature.js":181,"./lib/vectortilelayer.js":182}],180:[function(t,e,n){function r(t,e){this.layers=t.readFields(o,{},e)}function o(t,e,n){if(3===t){var r=new i(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}var i=t("./vectortilelayer");e.exports=r},{"./vectortilelayer":182}],181:[function(t,e,n){function r(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(o,this,e)}function o(t,e,n){1==t?e._id=n.readVarint():2==t?i(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function i(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],o=e._values[t.readVarint()];e.properties[r]=o}}function s(t){var e=t.length;if(1>=e)return[t];for(var n,r,o=[],i=0;e>i;i++){var s=a(t[i]);0!==s&&(void 0===r&&(r=0>s),r===0>s?(n&&o.push(n),n=[t[i]]):n.push(t[i]))}return n&&o.push(n),o}function a(t){for(var e,n,r=0,o=0,i=t.length,s=i-1;i>o;s=o++)e=t[o],n=t[s],r+=(n.x-e.x)*(e.y+n.y);return r}var u=t("point-geometry");e.exports=r,r.types=["Unknown","Point","LineString","Polygon"],r.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,o=0,i=0,s=0,a=[];t.pos<n;){if(!o){var l=t.readVarint();r=7&l,o=l>>3}if(o--,1===r||2===r)i+=t.readSVarint(),s+=t.readSVarint(),1===r&&(e&&a.push(e),e=[]),e.push(new u(i,s));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&a.push(e),a},r.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,o=0,i=0,s=1/0,a=-(1/0),u=1/0,l=-(1/0);t.pos<e;){if(!r){var c=t.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)o+=t.readSVarint(),i+=t.readSVarint(),s>o&&(s=o),o>a&&(a=o),u>i&&(u=i),i>l&&(l=i);else if(7!==n)throw new Error("unknown command "+n)}return[s,u,a,l]},r.prototype.toGeoJSON=function(t,e,n){function o(t){for(var e=0;e<t.length;e++){var n=t[e],r=180-360*(n.y+c)/u;t[e]=[360*(n.x+l)/u-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}var i,a,u=this.extent*Math.pow(2,n),l=this.extent*t,c=this.extent*e,p=this.loadGeometry(),h=r.types[this.type];switch(this.type){case 1:var d=[];for(i=0;i<p.length;i++)d[i]=p[i][0];p=d,o(p);break;case 2:for(i=0;i<p.length;i++)o(p[i]);break;case 3:for(p=s(p),i=0;i<p.length;i++)for(a=0;a<p[i].length;a++)o(p[i][a])}1===p.length?p=p[0]:h="Multi"+h;var f={type:"Feature",geometry:{type:h,coordinates:p},properties:this.properties};return"_id"in this&&(f.id=this._id),f}},{"point-geometry":169}],182:[function(t,e,n){function r(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(o,this,e),this.length=this._features.length}function o(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(i(n))}function i(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}var s=t("./vectortilefeature.js");e.exports=r,r.prototype.feature=function(t){if(0>t||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new s(this._pbf,e,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":181}],183:[function(t,e,n){function r(t){var e=[];for(var n in t.layers)e.push(i(t.layers[n]));var r=new p;return h.tile.write({layers:e},r),r.finish()}function o(t){var e={};for(var n in t)e[n]=new d(t[n].features),e[n].name=n;return r({layers:e})}function i(t){for(var e={name:t.name||"",version:t.version||1,extent:t.extent||4096,keys:[],values:[],features:[]},n={},r={},o=0;o<t.length;o++){var i=t.feature(o);i.geometry=l(i.loadGeometry());var s=[];for(var a in i.properties){var u=n[a];"undefined"==typeof u&&(e.keys.push(a),u=e.keys.length-1,n[a]=u);var p=c(i.properties[a]),h=r[p.key];"undefined"==typeof h&&(e.values.push(p),h=e.values.length-1,r[p.key]=h),s.push(u),s.push(h)}i.tags=s,e.features.push(i)}return e}function s(t,e){return(e<<3)+(7&t)}function a(t){return t<<1^t>>31}function l(t){for(var e=[],n=0,r=0,o=t.length,i=0;o>i;i++){var u=t[i];e.push(s(1,1));for(var l=0;l<u.length;l++){1===l&&e.push(s(2,u.length-1));var c=u[l].x-n,p=u[l].y-r;e.push(a(c),a(p)),n+=c,r+=p}}return e}function c(t){var e,n="undefined"==typeof t?"undefined":u(t);return e="string"===n?{string_value:t}:"boolean"===n?{bool_value:t}:"number"===n?t!==(0|t)?{float_value:t}:0>t?{sint_value:t}:{uint_value:t}:{string_value:""+t},e.key=n+":"+t,e}var p=t("pbf"),h=t("./vector-tile-pb"),d=t("./lib/geojson_wrapper");e.exports=r,e.exports.fromVectorTileJs=r,e.exports.fromGeojsonVt=o,e.exports.GeoJSONWrapper=d},{"./lib/geojson_wrapper":184,"./vector-tile-pb":185,pbf:167}],184:[function(t,e,n){function r(t){this.features=t,this.length=t.length}function o(t){this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=4096}var i=t("point-geometry"),s=t("vector-tile").VectorTileFeature;e.exports=r,r.prototype.feature=function(t){return new o(this.features[t])},o.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var n=t[e],r=[],o=0;o<n.length;o++)r.push(new i(n[o][0],n[o][1]));this.geometry.push(r)}return this.geometry},o.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-(1/0),r=1/0,o=-(1/0),i=0;i<t.length;i++)for(var s=t[i],a=0;a<s.length;a++){var u=s[a];e=Math.min(e,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),o=Math.max(o,u.y)}return[e,r,n,o]},o.prototype.toGeoJSON=s.prototype.toGeoJSON},{"point-geometry":169,"vector-tile":179}],185:[function(t,e,n){function r(t,e){return t.readFields(o,{layers:[]},e)}function o(t,e,n){3===t&&e.layers.push(h(n,n.readVarint()+n.pos))}function i(t,e){var n;if(void 0!==t.layers)for(n=0;n<t.layers.length;n++)e.writeMessage(3,f,t.layers[n])}function s(t,e){return t.readFields(a,{},e)}function a(t,e,n){1===t?e.string_value=n.readString():2===t?e.float_value=n.readFloat():3===t?e.double_value=n.readDouble():4===t?e.int_value=n.readVarint():5===t?e.uint_value=n.readVarint():6===t?e.sint_value=n.readSVarint():7===t&&(e.bool_value=n.readBoolean())}function u(t,e){void 0!==t.string_value&&e.writeStringField(1,t.string_value),void 0!==t.float_value&&e.writeFloatField(2,t.float_value),void 0!==t.double_value&&e.writeDoubleField(3,t.double_value),void 0!==t.int_value&&e.writeVarintField(4,t.int_value),void 0!==t.uint_value&&e.writeVarintField(5,t.uint_value),void 0!==t.sint_value&&e.writeSVarintField(6,t.sint_value),void 0!==t.bool_value&&e.writeBooleanField(7,t.bool_value)}function l(t,e){var n=t.readFields(c,{},e);return void 0===n.type&&(n.type="Unknown"),n}function c(t,e,n){1===t?e.id=n.readVarint():2===t?e.tags=n.readPackedVarint():3===t?e.type=n.readVarint():4===t&&(e.geometry=n.readPackedVarint())}function p(t,e){void 0!==t.id&&e.writeVarintField(1,t.id),void 0!==t.tags&&e.writePackedVarint(2,t.tags),void 0!==t.type&&e.writeVarintField(3,t.type),void 0!==t.geometry&&e.writePackedVarint(4,t.geometry)}function h(t,e){return t.readFields(d,{features:[],keys:[],values:[]},e)}function d(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():2===t?e.features.push(l(n,n.readVarint()+n.pos)):3===t?e.keys.push(n.readString()):4===t?e.values.push(s(n,n.readVarint()+n.pos)):5===t&&(e.extent=n.readVarint())}function f(t,e){void 0!==t.version&&e.writeVarintField(15,t.version),void 0!==t.name&&e.writeStringField(1,t.name);var n;if(void 0!==t.features)for(n=0;n<t.features.length;n++)e.writeMessage(2,p,t.features[n]);if(void 0!==t.keys)for(n=0;n<t.keys.length;n++)e.writeStringField(3,t.keys[n]);if(void 0!==t.values)for(n=0;n<t.values.length;n++)e.writeMessage(4,u,t.values[n]);void 0!==t.extent&&e.writeVarintField(5,t.extent)}var g=n.tile={read:r,write:i};g.GeomType={Unknown:0,Point:1,LineString:2,Polygon:3},g.value={read:s,write:u},g.feature={read:l,write:p},g.layer={read:h,write:f}},{}],186:[function(t,e,n){var r=arguments[3],o=arguments[4],i=arguments[5],s=JSON.stringify;e.exports=function(t,e){for(var n,a=Object.keys(i),u=0,l=a.length;l>u;u++){var c=a[u],p=i[c].exports;if(p===t||p&&p.default===t){n=c;break}}if(!n){n=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var h={},u=0,l=a.length;l>u;u++){var c=a[u];h[c]=c}o[n]=[Function(["require","module","exports"],"("+t+")(self)"),h]}var d=Math.floor(Math.pow(16,8)*Math.random()).toString(16),f={};f[n]=n,o[d]=[Function(["require"],"var f = require("+s(n)+");(f.default ? f.default : f)(self);"),f];var g="("+r+")({"+Object.keys(o).map(function(t){return s(t)+":["+o[t][0]+","+s(o[t][1])+"]"}).join(",")+"},{},["+s(d)+"])",m=window.URL||window.webkitURL||window.mozURL||window.msURL,y=new Blob([g],{type:"text/javascript"});return e&&e.bare?y:new Worker(m.createObjectURL(y))}},{}],187:[function(t,e,n){n.getURL=function(t,e,r,o,i,s){s=s||{};var a=t+"?"+["bbox="+n.getTileBBox(r,o,i),"format="+(s.format||"image/png"),"service="+(s.service||"WMS"),"version="+(s.version||"1.1.1"),"request="+(s.request||"GetMap"),"srs="+(s.srs||"EPSG:3857"),"width="+(s.width||256),"height="+(s.height||256),"layers="+e].join("&");return a},n.getTileBBox=function(t,e,r){e=Math.pow(2,r)-e-1;var o=n.getMercCoords(256*t,256*e,r),i=n.getMercCoords(256*(t+1),256*(e+1),r);return o[0]+","+o[1]+","+i[0]+","+i[1]},n.getMercCoords=function(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n),o=t*r-2*Math.PI*6378137/2,i=e*r-2*Math.PI*6378137/2;return[o,i]}},{}],188:[function(t,e,n){e.exports={name:"mapbox-gl",description:"A WebGL interactive maps library",version:"0.20.1",main:"js/mapbox-gl.js",license:"BSD-3-Clause",repository:{type:"git",url:"git://github.com/mapbox/mapbox-gl-js.git"},engines:{node:">=4.0.0"},dependencies:{csscolorparser:"^1.0.2",earcut:"^2.0.3",envify:"^3.4.0","feature-filter":"^2.1.0","geojson-rewind":"^0.1.0","geojson-vt":"2.1.8","gl-matrix":"^2.3.1","grid-index":"^0.1.0","mapbox-gl-function":"^1.2.1","mapbox-gl-js-supported":"^1.1.0","mapbox-gl-shaders":"mapbox/mapbox-gl-shaders#9af2892c56c74c4d2d7e5cc59b6e5e4fe3837c6f","mapbox-gl-style-spec":"^8.7.0",minifyify:"^7.0.1",pbf:"^1.3.2",pngjs:"^2.2.0","point-geometry":"^0.0.0",quickselect:"^1.0.0",request:"^2.39.0","resolve-url":"^0.2.1","shelf-pack":"^1.0.0",supercluster:"^2.0.1",unassertify:"^2.0.0",unitbezier:"^0.0.0","vector-tile":"^1.2.1","vt-pbf":"^2.0.2",webworkify:"1.2.0","whoots-js":"^2.0.0"},devDependencies:{benchmark:"~2.1.0",browserify:"^13.0.0","browserify-middleware":"^7.0.0","concat-stream":"1.5.1",coveralls:"^2.11.8",doctrine:"^1.2.1",documentation:"https://github.com/documentationjs/documentation/archive/bb41619c734e59ef3fbc3648610032efcfdaaace.tar.gz","documentation-theme-utils":"3.0.0",eslint:"^2.5.3","eslint-config-mourner":"^2.0.0",express:"^4.13.4",gl:"^4.0.1",handlebars:"4.0.5","highlight.js":"9.3.0",istanbul:"^0.4.2",lodash:"^4.13.1","mapbox-gl-test-suite":"mapbox/mapbox-gl-test-suite#6d3bcff5d51f6acea41230ffabad6bebdea49fa3",nyc:"^6.1.1",remark:"4.2.2","remark-html":"3.0.0",sinon:"^1.15.4",st:"^1.0.0",tap:"^5.7.0",through:"^2.3.7","unist-util-visit":"1.1.0",vinyl:"1.1.1","vinyl-fs":"2.4.3",watchify:"^3.2.2"},browserify:{transform:["envify"]},browser:{"./js/util/ajax.js":"./js/util/browser/ajax.js","./js/util/browser.js":"./js/util/browser/browser.js","./js/util/canvas.js":"./js/util/browser/canvas.js","./js/util/dom.js":"./js/util/browser/dom.js","./js/util/dispatcher.js":"./js/util/browser/dispatcher.js"},scripts:{"build-dev":"browserify -d js/mapbox-gl.js --standalone mapboxgl > dist/mapbox-gl-dev.js","build-docs":"documentation build --github --format html -c documentation.yml --theme ./docs/_theme --output docs/api/","build-min":"browserify js/mapbox-gl.js --debug --transform unassertify --plugin [minifyify --map mapbox-gl.js.map --output dist/mapbox-gl.js.map] --standalone mapboxgl > dist/mapbox-gl.js","download-bench-data":"[ -f ./bench/data/naturalearth-land.json ] || (mkdir -p ./bench/data && curl -s https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_50m_land.geojson > ./bench/data/naturalearth-land.json)",lint:"eslint js test bench",prepublish:'[ -z "$BUILDPACK_DIR" ] || npm run build-docs',"start-docs":"npm run build-min && npm run build-docs && jekyll serve -w",start:"npm run download-bench-data && node server.js","test-suite":"node test/render.test.js && node test/query.test.js # update ci.sh if test invocation changes",test:"npm run lint && npm run build-min && tap --reporter dot test/js/*/*.js # update ci.sh if test invocation changes"}}},{}]},{},[14])(14)})}).call(e,n(54).Buffer,function(){return this}())},function(t,e,n){var r,o,s,a,a;(function(n){"use strict";var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(n){if("object"==u(e)&&"undefined"!=typeof t)t.exports=n();else{o=[],r=n,s="function"==typeof r?r.apply(e,o):r,!(void 0!==s&&(t.exports=s))}}(function(){var t;return function t(e,n,r){function o(s,u){if(!n[s]){if(!e[s]){var l="function"==typeof a&&a;if(!u&&l)return a(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var p=n[s]={exports:{}};e[s][0].call(p.exports,function(t){var n=e[s][1][t];return o(n?n:t)},p,p.exports,t,e,n,r)}return n[s].exports}for(var i="function"==typeof a&&a,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e){e.exports={isolines:t("turf-isolines"),merge:t("turf-merge"),convex:t("turf-convex"),within:t("turf-within"),concave:t("turf-concave"),count:t("turf-count"),erase:t("turf-erase"),variance:t("turf-variance"),deviation:t("turf-deviation"),median:t("turf-median"),min:t("turf-min"),max:t("turf-max"),aggregate:t("turf-aggregate"),flip:t("turf-flip"),simplify:t("turf-simplify"),sum:t("turf-sum"),average:t("turf-average"),bezier:t("turf-bezier"),tag:t("turf-tag"),size:t("turf-size"),sample:t("turf-sample"),jenks:t("turf-jenks"),quantile:t("turf-quantile"),envelope:t("turf-envelope"),square:t("turf-square"),midpoint:t("turf-midpoint"),buffer:t("turf-buffer"),center:t("turf-center"),centroid:t("turf-centroid"),combine:t("turf-combine"),distance:t("turf-distance"),explode:t("turf-explode"),extent:t("turf-extent"),bboxPolygon:t("turf-bbox-polygon"),featurecollection:t("turf-featurecollection"),filter:t("turf-filter"),inside:t("turf-inside"),intersect:t("turf-intersect"),linestring:t("turf-linestring"),nearest:t("turf-nearest"),planepoint:t("turf-planepoint"),point:t("turf-point"),polygon:t("turf-polygon"),random:t("turf-random"),reclass:t("turf-reclass"),remove:t("turf-remove"),tin:t("turf-tin"),union:t("turf-union"),bearing:t("turf-bearing"),destination:t("turf-destination"),kinks:t("turf-kinks"),pointOnSurface:t("turf-point-on-surface"),area:t("turf-area"),along:t("turf-along"),lineDistance:t("turf-line-distance"),lineSlice:t("turf-line-slice"),pointOnLine:t("turf-point-on-line"),pointGrid:t("turf-point-grid"),squareGrid:t("turf-square-grid"),triangleGrid:t("turf-triangle-grid"),hexGrid:t("turf-hex-grid")}},{"turf-aggregate":6,"turf-along":7,"turf-area":8,"turf-average":11,"turf-bbox-polygon":12,"turf-bearing":13,"turf-bezier":14,"turf-buffer":16,"turf-center":21,"turf-centroid":22,"turf-combine":24,"turf-concave":25,"turf-convex":26,"turf-count":56,"turf-destination":57,"turf-deviation":58,"turf-distance":60,"turf-envelope":62,"turf-erase":63,"turf-explode":68,"turf-extent":70,"turf-featurecollection":72,"turf-filter":73,"turf-flip":74,"turf-hex-grid":75,"turf-inside":76,"turf-intersect":77,"turf-isolines":83,"turf-jenks":85,"turf-kinks":87,"turf-line-distance":88,"turf-line-slice":89,"turf-linestring":90,"turf-max":91,"turf-median":92,"turf-merge":93,"turf-midpoint":95,"turf-min":96,"turf-nearest":97,"turf-planepoint":98,"turf-point":102,"turf-point-grid":99,"turf-point-on-line":100,"turf-point-on-surface":101,"turf-polygon":103,"turf-quantile":104,"turf-random":106,"turf-reclass":108,"turf-remove":109,"turf-sample":110,"turf-simplify":111,"turf-size":113,"turf-square":115,"turf-square-grid":114,"turf-sum":116,"turf-tag":117,"turf-tin":118,"turf-triangle-grid":119,"turf-union":120,"turf-variance":125,"turf-within":127}],2:[function(t,e,n){function r(t,e,n){if(!(this instanceof r))return new r(t,e,n);var o,i="undefined"==typeof t?"undefined":u(t);if("number"===i)o=+t;else if("string"===i)o=r.byteLength(t,e);else{if("object"!==i||null===t)throw new TypeError("must start with number, buffer, array or string");"Buffer"===t.type&&F(t.data)&&(t=t.data),o=+t.length}if(o>k)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+k.toString(16)+" bytes");0>o?o=0:o>>>=0;var s=this;r.TYPED_ARRAY_SUPPORT?s=r._augment(new Uint8Array(o)):(s.length=o,s._isBuffer=!0);var a;if(r.TYPED_ARRAY_SUPPORT&&"number"==typeof t.byteLength)s._set(t);else if(M(t))if(r.isBuffer(t))for(a=0;o>a;a++)s[a]=t.readUInt8(a);else for(a=0;o>a;a++)s[a]=(t[a]%256+256)%256;else if("string"===i)s.write(t,0,e);else if("number"===i&&!r.TYPED_ARRAY_SUPPORT&&!n)for(a=0;o>a;a++)s[a]=0;return o>0&&o<=r.poolSize&&(s.parent=B),s}function o(t,e,n){if(!(this instanceof o))return new o(t,e,n);var i=new r(t,e,n);return delete i.parent,i}function i(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r),r>o&&(r=o)):r=o;var i=e.length;if(i%2!==0)throw new Error("Invalid hex string");r>i/2&&(r=i/2);for(var s=0;r>s;s++){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");t[n+s]=a}return s}function s(t,e,n,r){var o=R(L(e,t.length-n),t,n,r);return o}function a(t,e,n,r){var o=R(P(e),t,n,r);return o}function l(t,e,n,r){return a(t,e,n,r)}function c(t,e,n,r){var o=R(N(e),t,n,r);return o}function p(t,e,n,r){var o=R(T(e,t.length-n),t,n,r);return o}function h(t,e,n){return D.fromByteArray(0===e&&n===t.length?t:t.slice(e,n))}function d(t,e,n){var r="",o="";n=Math.min(t.length,n);for(var i=e;n>i;i++)t[i]<=127?(r+=A(o)+String.fromCharCode(t[i]),o=""):o+="%"+t[i].toString(16);return r+A(o)}function f(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;n>o;o++)r+=String.fromCharCode(127&t[o]);return r}function g(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;n>o;o++)r+=String.fromCharCode(t[o]);return r}function m(t,e,n){var r=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>r)&&(n=r);for(var o="",i=e;n>i;i++)o+=C(t[i]);return o}function y(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function v(t,e,n){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function x(t,e,n,o,i,s){if(!r.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>i||s>e)throw new RangeError("value is out of bounds");if(n+o>t.length)throw new RangeError("index out of range")}function b(t,e,n,r){0>e&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);i>o;o++)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function j(t,e,n,r){0>e&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);i>o;o++)t[n+o]=e>>>8*(r?o:3-o)&255}function _(t,e,n,r,o,i){if(e>o||i>e)throw new RangeError("value is out of bounds");if(n+r>t.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function E(t,e,n,r,o){return o||_(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),O.write(t,e,n,r,23,4),n+4}function w(t,e,n,r,o){return o||_(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),O.write(t,e,n,r,52,8),n+8}function S(t){if(t=I(t).replace(G,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function I(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function M(t){return F(t)||r.isBuffer(t)||t&&"object"==("undefined"==typeof t?"undefined":u(t))&&"number"==typeof t.length}function C(t){return 16>t?"0"+t.toString(16):t.toString(16)}function L(t,e){e=e||1/0;for(var n,r=t.length,o=null,i=[],s=0;r>s;s++){if(n=t.charCodeAt(s),n>55295&&57344>n){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(56320>n){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=o-55296<<10|n-56320|65536,o=null}else o&&((e-=3)>-1&&i.push(239,191,189),o=null);if(128>n){if((e-=1)<0)break;i.push(n)}else if(2048>n){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(65536>n){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(2097152>n))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function P(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function T(t,e){for(var n,r,o,i=[],s=0;s<t.length&&!((e-=2)<0);s++)n=t.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function N(t){return D.toByteArray(S(t))}function R(t,e,n,r){for(var o=0;r>o&&!(o+n>=e.length||o>=t.length);o++)e[o+n]=t[o];return o}function A(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}var D=t("base64-js"),O=t("ieee754"),F=t("is-array");n.Buffer=r,n.SlowBuffer=o,n.INSPECT_MAX_BYTES=50,r.poolSize=8192;var k=1073741823,B={};r.TYPED_ARRAY_SUPPORT=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(n){return!1}}(),r.isBuffer=function(t){return!(null==t||!t._isBuffer)},r.compare=function(t,e){if(!r.isBuffer(t)||!r.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,o=e.length,i=0,s=Math.min(n,o);s>i&&t[i]===e[i];i++);return i!==s&&(n=t[i],o=e[i]),o>n?-1:n>o?1:0},r.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(t,e){if(!F(t))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===t.length)return new r(0);if(1===t.length)return t[0];var n;if(void 0===e)for(e=0,n=0;n<t.length;n++)e+=t[n].length;var o=new r(e),i=0;for(n=0;n<t.length;n++){var s=t[n];s.copy(o,i),i+=s.length}return o},r.byteLength=function(t,e){var n;switch(t+="",e||"utf8"){case"ascii":case"binary":case"raw":n=t.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*t.length;break;case"hex":n=t.length>>>1;break;case"utf8":case"utf-8":n=L(t).length;break;case"base64":n=N(t).length;break;default:n=t.length}return n},r.prototype.length=void 0,r.prototype.parent=void 0,r.prototype.toString=function(t,e,n){var r=!1;if(e>>>=0,n=void 0===n||1/0===n?this.length:n>>>0,t||(t="utf8"),0>e&&(e=0),n>this.length&&(n=this.length),e>=n)return"";for(;;)switch(t){case"hex":return m(this,e,n);case"utf8":case"utf-8":return d(this,e,n);case"ascii":return f(this,e,n);case"binary":return g(this,e,n);case"base64":return h(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}},r.prototype.equals=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===r.compare(this,t)},r.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},r.prototype.compare=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:r.compare(this,t)},r.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},r.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},r.prototype.write=function(t,e,n,r){if(isFinite(e))isFinite(n)||(r=n,n=void 0);else{var o=r;r=e,e=n,n=o}if(e=Number(e)||0,0>n||0>e||e>this.length)throw new RangeError("attempt to write outside buffer bounds");var u=this.length-e;n?(n=Number(n),n>u&&(n=u)):n=u,r=String(r||"utf8").toLowerCase();var h;switch(r){case"hex":h=i(this,t,e,n);break;case"utf8":case"utf-8":h=s(this,t,e,n);break;case"ascii":h=a(this,t,e,n);break;case"binary":h=l(this,t,e,n);break;case"base64":h=c(this,t,e,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":h=p(this,t,e,n);break;default:throw new TypeError("Unknown encoding: "+r)}return h},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),t>e&&(e=t);var o;if(r.TYPED_ARRAY_SUPPORT)o=r._augment(this.subarray(t,e));else{var i=e-t;o=new r(i,(void 0),(!0));for(var s=0;i>s;s++)o[s]=this[s+t]}return o.length&&(o.parent=this.parent||this),o},r.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||v(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},r.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||v(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},r.prototype.readUInt8=function(t,e){return e||v(t,1,this.length),this[t]},r.prototype.readUInt16LE=function(t,e){return e||v(t,2,this.length),this[t]|this[t+1]<<8},r.prototype.readUInt16BE=function(t,e){return e||v(t,2,this.length),this[t]<<8|this[t+1]},r.prototype.readUInt32LE=function(t,e){return e||v(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},r.prototype.readUInt32BE=function(t,e){return e||v(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},r.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||v(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},r.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||v(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},r.prototype.readInt8=function(t,e){return e||v(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},r.prototype.readInt16LE=function(t,e){e||v(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt16BE=function(t,e){e||v(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt32LE=function(t,e){return e||v(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},r.prototype.readInt32BE=function(t,e){return e||v(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},r.prototype.readFloatLE=function(t,e){return e||v(t,4,this.length),O.read(this,t,!0,23,4)},r.prototype.readFloatBE=function(t,e){return e||v(t,4,this.length),O.read(this,t,!1,23,4)},r.prototype.readDoubleLE=function(t,e){return e||v(t,8,this.length),O.read(this,t,!0,52,8)},r.prototype.readDoubleBE=function(t,e){return e||v(t,8,this.length),O.read(this,t,!1,52,8)},r.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||x(this,t,e,n,Math.pow(2,8*n),0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o>>>0&255;return e+n},r.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||x(this,t,e,n,Math.pow(2,8*n),0);var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i>>>0&255;return e+n},r.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,1,255,0),r.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t,e+1},r.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):b(this,t,e,!0),e+2},r.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):b(this,t,e,!1),e+2},r.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t):j(this,t,e,!0),e+4},r.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):j(this,t,e,!1),e+4},r.prototype.writeIntLE=function(t,e,n,r){t=+t,e>>>=0,r||x(this,t,e,n,Math.pow(2,8*n-1)-1,-Math.pow(2,8*n-1));var o=0,i=1,s=0>t?1:0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=(t/i>>0)-s&255;return e+n},r.prototype.writeIntBE=function(t,e,n,r){t=+t,e>>>=0,r||x(this,t,e,n,Math.pow(2,8*n-1)-1,-Math.pow(2,8*n-1));var o=n-1,i=1,s=0>t?1:0;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=(t/i>>0)-s&255;return e+n},r.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,1,127,-128),r.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=t,e+1},r.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):b(this,t,e,!0),e+2},r.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):b(this,t,e,!1),e+2},r.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,4,2147483647,-2147483648),r.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):j(this,t,e,!0),e+4},r.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):j(this,t,e,!1),e+4},r.prototype.writeFloatLE=function(t,e,n){return E(this,t,e,!0,n)},r.prototype.writeFloatBE=function(t,e,n){return E(this,t,e,!1,n)},r.prototype.writeDoubleLE=function(t,e,n){return w(this,t,e,!0,n)},r.prototype.writeDoubleBE=function(t,e,n){return w(this,t,e,!1,n)},r.prototype.copy=function(t,e,n,o){var i=this;if(n||(n=0),o||0===o||(o=this.length),e>=t.length&&(e=t.length),e||(e=0),o>0&&n>o&&(o=n),o===n)return 0;if(0===t.length||0===i.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>n||n>=i.length)throw new RangeError("sourceStart out of bounds");if(0>o)throw new RangeError("sourceEnd out of bounds");
o>this.length&&(o=this.length),t.length-e<o-n&&(o=t.length-e+n);var s=o-n;if(1e3>s||!r.TYPED_ARRAY_SUPPORT)for(var a=0;s>a;a++)t[a+e]=this[a+n];else t._set(this.subarray(n,n+s),e);return s},r.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),e>n)throw new RangeError("end < start");if(n!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof t)for(r=e;n>r;r++)this[r]=t;else{var o=L(t.toString()),i=o.length;for(r=e;n>r;r++)this[r]=o[r%i]}return this}},r.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(r.TYPED_ARRAY_SUPPORT)return new r(this).buffer;for(var t=new Uint8Array(this.length),e=0,n=t.length;n>e;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var z=r.prototype;r._augment=function(t){return t.constructor=r,t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=z.get,t.set=z.set,t.write=z.write,t.toString=z.toString,t.toLocaleString=z.toString,t.toJSON=z.toJSON,t.equals=z.equals,t.compare=z.compare,t.copy=z.copy,t.slice=z.slice,t.readUIntLE=z.readUIntLE,t.readUIntBE=z.readUIntBE,t.readUInt8=z.readUInt8,t.readUInt16LE=z.readUInt16LE,t.readUInt16BE=z.readUInt16BE,t.readUInt32LE=z.readUInt32LE,t.readUInt32BE=z.readUInt32BE,t.readIntLE=z.readIntLE,t.readIntBE=z.readIntBE,t.readInt8=z.readInt8,t.readInt16LE=z.readInt16LE,t.readInt16BE=z.readInt16BE,t.readInt32LE=z.readInt32LE,t.readInt32BE=z.readInt32BE,t.readFloatLE=z.readFloatLE,t.readFloatBE=z.readFloatBE,t.readDoubleLE=z.readDoubleLE,t.readDoubleBE=z.readDoubleBE,t.writeUInt8=z.writeUInt8,t.writeUIntLE=z.writeUIntLE,t.writeUIntBE=z.writeUIntBE,t.writeUInt16LE=z.writeUInt16LE,t.writeUInt16BE=z.writeUInt16BE,t.writeUInt32LE=z.writeUInt32LE,t.writeUInt32BE=z.writeUInt32BE,t.writeIntLE=z.writeIntLE,t.writeIntBE=z.writeIntBE,t.writeInt8=z.writeInt8,t.writeInt16LE=z.writeInt16LE,t.writeInt16BE=z.writeInt16BE,t.writeInt32LE=z.writeInt32LE,t.writeInt32BE=z.writeInt32BE,t.writeFloatLE=z.writeFloatLE,t.writeFloatBE=z.writeFloatBE,t.writeDoubleLE=z.writeDoubleLE,t.writeDoubleBE=z.writeDoubleBE,t.fill=z.fill,t.inspect=z.inspect,t.toArrayBuffer=z.toArrayBuffer,t};var G=/[^+\/0-9A-z\-]/g},{"base64-js":3,ieee754:4,"is-array":5}],3:[function(t,e,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){function e(t){var e=t.charCodeAt(0);return e===s||e===p?62:e===a||e===h?63:u>e?-1:u+10>e?e-u+26+26:c+26>e?e-c:l+26>e?e-l+26:void 0}function n(t){function n(t){l[p++]=t}var r,o,s,a,u,l;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=t.length;u="="===t.charAt(c-2)?2:"="===t.charAt(c-1)?1:0,l=new i(3*t.length/4-u),s=u>0?t.length-4:t.length;var p=0;for(r=0,o=0;s>r;r+=4,o+=3)a=e(t.charAt(r))<<18|e(t.charAt(r+1))<<12|e(t.charAt(r+2))<<6|e(t.charAt(r+3)),n((16711680&a)>>16),n((65280&a)>>8),n(255&a);return 2===u?(a=e(t.charAt(r))<<2|e(t.charAt(r+1))>>4,n(255&a)):1===u&&(a=e(t.charAt(r))<<10|e(t.charAt(r+1))<<4|e(t.charAt(r+2))>>2,n(a>>8&255),n(255&a)),l}function o(t){function e(t){return r.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var o,i,s,a=t.length%3,u="";for(o=0,s=t.length-a;s>o;o+=3)i=(t[o]<<16)+(t[o+1]<<8)+t[o+2],u+=n(i);switch(a){case 1:i=t[t.length-1],u+=e(i>>2),u+=e(i<<4&63),u+="==";break;case 2:i=(t[t.length-2]<<8)+t[t.length-1],u+=e(i>>10),u+=e(i>>4&63),u+=e(i<<2&63),u+="="}return u}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),u="0".charCodeAt(0),l="a".charCodeAt(0),c="A".charCodeAt(0),p="-".charCodeAt(0),h="_".charCodeAt(0);t.toByteArray=n,t.fromByteArray=o}("undefined"==typeof n?this.base64js={}:n)},{}],4:[function(t,e,n){n.read=function(t,e,n,r,o){var i,s,a=8*o-r-1,u=(1<<a)-1,l=u>>1,c=-7,p=n?o-1:0,h=n?-1:1,d=t[e+p];for(p+=h,i=d&(1<<-c)-1,d>>=-c,c+=a;c>0;i=256*i+t[e+p],p+=h,c-=8);for(s=i&(1<<-c)-1,i>>=-c,c+=r;c>0;s=256*s+t[e+p],p+=h,c-=8);if(0===i)i=1-l;else{if(i===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),i-=l}return(d?-1:1)*s*Math.pow(2,i-r)},n.write=function(t,e,n,r,o,i){var s,a,u,l=8*i-o-1,c=(1<<l)-1,p=c>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,f=r?1:-1,g=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+p>=1?h/u:h*Math.pow(2,1-p),e*u>=2&&(s++,u/=2),s+p>=c?(a=0,s=c):s+p>=1?(a=(e*u-1)*Math.pow(2,o),s+=p):(a=e*Math.pow(2,p-1)*Math.pow(2,o),s=0));o>=8;t[n+d]=255&a,d+=f,a/=256,o-=8);for(s=s<<o|a,l+=o;l>0;t[n+d]=255&s,d+=f,s/=256,l-=8);t[n+d-f]|=128*g}},{}],5:[function(t,e){var n=Array.isArray,r=Object.prototype.toString;e.exports=n||function(t){return!!t&&"[object Array]"==r.call(t)}},{}],6:[function(t,e){function n(t){return"average"===t||"sum"===t||"median"===t||"min"===t||"max"===t||"deviation"===t||"variance"===t||"count"===t}var r=t("turf-average"),o=t("turf-sum"),i=t("turf-median"),s=t("turf-min"),a=t("turf-max"),u=t("turf-deviation"),l=t("turf-variance"),c=t("turf-count"),p={};p.average=r,p.sum=o,p.median=i,p.min=s,p.max=a,p.deviation=u,p.variance=l,p.count=c,e.exports=function(t,e,r){for(var o=0,i=r.length;i>o;o++){var s=r[o],a=s.aggregation;if(!n(a))throw new Error('"'+a+'" is not a recognized aggregation operation.');t="count"===a?p[a](t,e,s.outField):p[a](t,e,s.inField,s.outField)}return t}},{"turf-average":11,"turf-count":56,"turf-deviation":58,"turf-max":91,"turf-median":92,"turf-min":96,"turf-sum":116,"turf-variance":125}],7:[function(t,e){var n=t("turf-distance"),r=t("turf-point"),o=t("turf-bearing"),i=t("turf-destination");e.exports=function(t,e,s){var a;if("Feature"===t.type)a=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");a=t.geometry.coordinates}for(var u=0,l=0;l<a.length&&!(e>=u&&l===a.length-1);l++){if(u>=e){var c=e-u;if(c){var p=o(r(a[l]),r(a[l-1]))-180,h=i(r(a[l]),c,p,s);return h}return r(a[l])}u+=n(r(a[l]),r(a[l+1]),s)}return r(a[a.length-1])}},{"turf-bearing":13,"turf-destination":57,"turf-distance":60,"turf-point":102}],8:[function(t,e){var n=t("geojson-area").geometry;e.exports=function(t){if("FeatureCollection"===t.type){for(var e=0,r=0;e<t.features.length;e++)t.features[e].geometry&&(r+=n(t.features[e].geometry));return r}return n("Feature"===t.type?t.geometry:t)}},{"geojson-area":9}],9:[function(t,e){function n(t){var e,o=0;switch(t.type){case"Polygon":return r(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)o+=r(t.coordinates[e]);return o;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(e=0;e<t.geometries.length;e++)o+=n(t.geometries[e]);return o}}function r(t){var e=0;if(t&&t.length>0){e+=Math.abs(o(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(o(t[n]))}return e}function o(t){var e=0;if(t.length>2){for(var n,r,o=0;o<t.length-1;o++)n=t[o],r=t[o+1],e+=i(r[0]-n[0])*(2+Math.sin(i(n[1]))+Math.sin(i(r[1])));e=e*s.RADIUS*s.RADIUS/2}return e}function i(t){return t*Math.PI/180}var s=t("wgs84");e.exports.geometry=n,e.exports.ring=o},{wgs84:10}],10:[function(t,e){e.exports.RADIUS=6378137,e.exports.FLATTENING=1/298.257223563,e.exports.POLAR_RADIUS=6356752.3142},{}],11:[function(t,e){function n(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e/t.length}var r=t("turf-inside");e.exports=function(t,e,o,i){return t.features.forEach(function(t){t.properties||(t.properties={});var s=[];e.features.forEach(function(e){r(e,t)&&s.push(e.properties[o])}),t.properties[i]=n(s)}),t}},{"turf-inside":76}],12:[function(t,e){var n=t("turf-polygon");e.exports=function(t){var e=[t[0],t[1]],r=[t[0],t[3]],o=[t[2],t[3]],i=[t[2],t[1]],s=n([[e,i,o,r,e]]);return s}},{"turf-polygon":103}],13:[function(t,e){function n(t){return t*Math.PI/180}function r(t){return 180*t/Math.PI}e.exports=function(t,e){var o=t.geometry.coordinates,i=e.geometry.coordinates,s=n(o[0]),a=n(i[0]),u=n(o[1]),l=n(i[1]),c=Math.sin(a-s)*Math.cos(l),p=Math.cos(u)*Math.sin(l)-Math.sin(u)*Math.cos(l)*Math.cos(a-s),h=r(Math.atan2(c,p));return h}},{}],14:[function(t,e){var n=t("turf-linestring"),r=t("./spline.js");e.exports=function(t,e,o){var i=n([]);i.properties=t.properties;for(var s=t.geometry.coordinates.map(function(t){return{x:t[0],y:t[1]}}),a=new r({points:s,duration:e,sharpness:o}),u=0;u<a.duration;u+=10){var l=a.pos(u);Math.floor(u/100)%2===0&&i.geometry.coordinates.push([l.x,l.y])}return i}},{"./spline.js":15,"turf-linestring":90}],15:[function(t,e){var n=function t(e){this.points=e.points||[],this.duration=e.duration||1e4,this.sharpness=e.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=e.stepLength||60,this.length=this.points.length,this.delay=0;for(var n=0;n<this.length;n++)this.points[n].z=this.points[n].z||0;for(var n=0;n<this.length-1;n++){var t=this.points[n],r=this.points[n+1];this.centers.push({x:(t.x+r.x)/2,y:(t.y+r.y)/2,z:(t.z+r.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var n=0;n<this.centers.length-1;n++){var t=this.centers[n],r=this.centers[n+1],o=this.points[n+1].x-(this.centers[n].x+this.centers[n+1].x)/2,i=this.points[n+1].y-(this.centers[n].y+this.centers[n+1].y)/2,s=this.points[n+1].z-(this.centers[n].y+this.centers[n+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[n+1].x+this.sharpness*(this.centers[n].x+o),y:(1-this.sharpness)*this.points[n+1].y+this.sharpness*(this.centers[n].y+i),z:(1-this.sharpness)*this.points[n+1].z+this.sharpness*(this.centers[n].z+s)},{x:(1-this.sharpness)*this.points[n+1].x+this.sharpness*(this.centers[n+1].x+o),y:(1-this.sharpness)*this.points[n+1].y+this.sharpness*(this.centers[n+1].y+i),z:(1-this.sharpness)*this.points[n+1].z+this.sharpness*(this.centers[n+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};n.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var o=this.pos(r),i=Math.sqrt((o.x-n.x)*(o.x-n.x)+(o.y-n.y)*(o.y-n.y)+(o.z-n.z)*(o.z-n.z));i>t&&(e.push(r),n=o)}return e},n.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},n.prototype.pos=function(t){function e(t,e,n,r,o){var i=function(t){var e=t*t,n=e*t;return[n,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]},s=i(t),a={x:o.x*s[0]+r.x*s[1]+n.x*s[2]+e.x*s[3],y:o.y*s[0]+r.y*s[1]+n.y*s[2]+e.y*s[3],z:o.z*s[0]+r.z*s[1]+n.z*s[2]+e.z*s[3]};return a}var n=t-this.delay;0>n&&(n=0),n>this.duration&&(n=this.duration-1);var r=n/this.duration;if(r>=1)return this.points[this.length-1];var o=Math.floor((this.points.length-1)*r),i=(this.length-1)*r-o;return e(i,this.points[o],this.controls[o][1],this.controls[o+1][0],this.points[o+1])},e.exports=n},{}],16:[function(t,e){var n=t("turf-featurecollection"),r=t("turf-polygon"),o=t("turf-combine"),i=t("jsts");e.exports=function(t,e,n){var r;switch(n){case"miles":e/=69.047;break;case"feet":e/=364568;break;case"kilometers":e/=111.12;break;case"meters":e/=111120;break;case"degrees":}if("FeatureCollection"===t.type){var i=o(t);return i.properties={},r=s(i,e)}return r=s(t,e)};var s=function t(e,o){var s=new i.io.GeoJSONReader,t=s.read(JSON.stringify(e.geometry)),a=t.buffer(o),u=new i.io.GeoJSONParser;return a=u.write(a),"MultiPolygon"===a.type?(a={type:"Feature",geometry:a,properties:{}},a=n([a])):a=n([r(a.coordinates)]),a}},{jsts:17,"turf-combine":24,"turf-featurecollection":72,"turf-polygon":103}],17:[function(t,e){t("javascript.util");var n=t("./lib/jsts");e.exports=n},{"./lib/jsts":18,"javascript.util":20}],18:[function(t,e){jsts={version:"0.15.0",algorithm:{distance:{},locate:{}},error:{},geom:{util:{}},geomgraph:{index:{}},index:{bintree:{},chain:{},kdtree:{},quadtree:{},strtree:{}},io:{},noding:{snapround:{}},operation:{buffer:{},distance:{},overlay:{snap:{}},polygonize:{},predicate:{},relate:{},union:{},valid:{}},planargraph:{},simplify:{},triangulate:{quadedge:{}},util:{}},"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),jsts.abstractFunc=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.error={},jsts.error.IllegalArgumentError=function(t){this.name="IllegalArgumentError",this.message=t},jsts.error.IllegalArgumentError.prototype=new Error,jsts.error.TopologyError=function(t,e){this.name="TopologyError",this.message=e?t+" [ "+e+" ]":t},jsts.error.TopologyError.prototype=new Error,jsts.error.AbstractMethodInvocationError=function(){this.name="AbstractMethodInvocationError",this.message="Abstract method called, should be implemented in subclass."},jsts.error.AbstractMethodInvocationError.prototype=new Error,jsts.error.NotImplementedError=function(){this.name="NotImplementedError",this.message="This method has not yet been implemented."},jsts.error.NotImplementedError.prototype=new Error,jsts.error.NotRepresentableError=function(t){this.name="NotRepresentableError",this.message=t},jsts.error.NotRepresentableError.prototype=new Error,jsts.error.LocateFailureError=function(t){this.name="LocateFailureError",this.message=t},jsts.error.LocateFailureError.prototype=new Error,"undefined"!=typeof e&&(e.exports=jsts),jsts.geom.GeometryFilter=function(){},jsts.geom.GeometryFilter.prototype.filter=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.util.PolygonExtracter=function(t){this.comps=t},jsts.geom.util.PolygonExtracter.prototype=new jsts.geom.GeometryFilter,jsts.geom.util.PolygonExtracter.prototype.comps=null,jsts.geom.util.PolygonExtracter.getPolygons=function(t,e){return void 0===e&&(e=[]),t instanceof jsts.geom.Polygon?e.push(t):t instanceof jsts.geom.GeometryCollection&&t.apply(new jsts.geom.util.PolygonExtracter(e)),e},jsts.geom.util.PolygonExtracter.prototype.filter=function(t){t instanceof jsts.geom.Polygon&&this.comps.push(t)},jsts.io.WKTParser=function(t){this.geometryFactory=t||new jsts.geom.GeometryFactory,this.regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/}},jsts.io.WKTParser.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var o=this.regExes.typeStr.exec(t);if(-1!==t.search("EMPTY")&&(o=this.regExes.emptyTypeStr.exec(t),o[2]=void 0),o&&(n=o[1].toLowerCase(),r=o[2],this.parse[n]&&(e=this.parse[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},jsts.io.WKTParser.prototype.write=function(t){return this.extractGeometry(t)},jsts.io.WKTParser.prototype.extractGeometry=function(t){var e=t.CLASS_NAME.split(".")[2].toLowerCase();if(!this.extract[e])return null;var n,r=e.toUpperCase();return n=t.isEmpty()?r+" EMPTY":r+"("+this.extract[e].apply(this,[t])+")"},jsts.io.WKTParser.prototype.extract={coordinate:function(t){return t.x+" "+t.y},point:function(t){return t.coordinate.x+" "+t.coordinate.y},multipoint:function(t){for(var e=[],n=0,r=t.geometries.length;r>n;++n)e.push("("+this.extract.point.apply(this,[t.geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t.points.length;r>n;++n)e.push(this.extract.coordinate.apply(this,[t.points[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t.geometries.length;r>n;++n)e.push("("+this.extract.linestring.apply(this,[t.geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+this.extract.linestring.apply(this,[t.shell])+")");for(var n=0,r=t.holes.length;r>n;++n)e.push("("+this.extract.linestring.apply(this,[t.holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t.geometries.length;r>n;++n)e.push("("+this.extract.polygon.apply(this,[t.geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t.geometries.length;r>n;++n)e.push(this.extractGeometry.apply(this,[t.geometries[n]]));return e.join(",")}},jsts.io.WKTParser.prototype.parse={point:function(t){if(void 0===t)return this.geometryFactory.createPoint(null);var e=t.trim().split(this.regExes.spaces);return this.geometryFactory.createPoint(new jsts.geom.Coordinate(e[0],e[1]))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint(null);for(var e,n=t.trim().split(","),r=[],o=0,i=n.length;i>o;++o)e=n[o].replace(this.regExes.trimParens,"$1"),r.push(this.parse.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString(null);for(var e,n=t.trim().split(","),r=[],o=0,i=n.length;i>o;++o)e=n[o].trim().split(this.regExes.spaces),r.push(new jsts.geom.Coordinate(e[0],e[1]));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing(null);for(var e,n=t.trim().split(","),r=[],o=0,i=n.length;i>o;++o)e=n[o].trim().split(this.regExes.spaces),r.push(new jsts.geom.Coordinate(e[0],e[1]));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString(null);for(var e,n=t.trim().split(this.regExes.parenComma),r=[],o=0,i=n.length;i>o;++o)e=n[o].replace(this.regExes.trimParens,"$1"),r.push(this.parse.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon(null);for(var e,n,r,o,i=t.trim().split(this.regExes.parenComma),s=[],a=0,u=i.length;u>a;++a)e=i[a].replace(this.regExes.trimParens,"$1"),n=this.parse.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n.points),0===a?o=r:s.push(r);return this.geometryFactory.createPolygon(o,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon(null);for(var e,n=t.trim().split(this.regExes.doubleParenComma),r=[],o=0,i=n.length;i>o;++o)e=n[o].replace(this.regExes.trimParens,"$1"),r.push(this.parse.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection(null);t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var e=t.trim().split("|"),n=[],r=0,o=e.length;o>r;++r)n.push(jsts.io.WKTParser.prototype.read.apply(this,[e[r]]));return this.geometryFactory.createGeometryCollection(n)}},jsts.index.ItemVisitor=function(){},jsts.index.ItemVisitor.prototype.visitItem=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.algorithm.CGAlgorithms=function(){},jsts.algorithm.CGAlgorithms.CLOCKWISE=-1,jsts.algorithm.CGAlgorithms.RIGHT=jsts.algorithm.CGAlgorithms.CLOCKWISE,jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE=1,jsts.algorithm.CGAlgorithms.LEFT=jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE,jsts.algorithm.CGAlgorithms.COLLINEAR=0,jsts.algorithm.CGAlgorithms.STRAIGHT=jsts.algorithm.CGAlgorithms.COLLINEAR,jsts.algorithm.CGAlgorithms.orientationIndex=function(t,e,n){var r,o,i,s;return r=e.x-t.x,o=e.y-t.y,i=n.x-e.x,s=n.y-e.y,jsts.algorithm.RobustDeterminant.signOfDet2x2(r,o,i,s)},jsts.algorithm.CGAlgorithms.isPointInRing=function(t,e){return jsts.algorithm.CGAlgorithms.locatePointInRing(t,e)!==jsts.geom.Location.EXTERIOR},jsts.algorithm.CGAlgorithms.locatePointInRing=function(t,e){return jsts.algorithm.RayCrossingCounter.locatePointInRing(t,e)},jsts.algorithm.CGAlgorithms.isOnLine=function(t,e){var n,r,o,i,s;for(n=new jsts.algorithm.RobustLineIntersector,r=1,o=e.length;o>r;r++)if(i=e[r-1],s=e[r],n.computeIntersection(t,i,s),n.hasIntersection())return!0;return!1},jsts.algorithm.CGAlgorithms.isCCW=function(t){var e,n,r,o,i,s,a,u,l,c,p;if(e=t.length-1,3>e)throw new jsts.IllegalArgumentError("Ring has fewer than 3 points, so orientation cannot be determined");for(n=t[0],r=0,l=1;e>=l;l++)o=t[l],o.y>n.y&&(n=o,r=l);i=r;do i-=1,0>i&&(i=e);while(t[i].equals2D(n)&&i!==r);s=r;do s=(s+1)%e;while(t[s].equals2D(n)&&s!==r);return a=t[i],u=t[s],!(a.equals2D(n)||u.equals2D(n)||a.equals2D(u))&&(c=jsts.algorithm.CGAlgorithms.computeOrientation(a,n,u),p=!1,p=0===c?a.x>u.x:c>0)},jsts.algorithm.CGAlgorithms.computeOrientation=function(t,e,n){return jsts.algorithm.CGAlgorithms.orientationIndex(t,e,n)},jsts.algorithm.CGAlgorithms.distancePointLine=function(t,e,n){if(e instanceof jsts.geom.Coordinate||jsts.algorithm.CGAlgorithms.distancePointLine2.apply(this,arguments),e.x===n.x&&e.y===n.y)return t.distance(e);var r,o;return r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)),0>=r?t.distance(e):r>=1?t.distance(n):(o=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)),Math.abs(o)*Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)))},jsts.algorithm.CGAlgorithms.distancePointLinePerpendicular=function(t,e,n){var r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y));return Math.abs(r)*Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y))},jsts.algorithm.CGAlgorithms.distancePointLine2=function(t,e){var n,r,o,i;if(0===e.length)throw new jsts.error.IllegalArgumentError("Line array must contain at least one vertex");for(n=t.distance(e[0]),r=0,o=e.length-1;o>r;r++)i=jsts.algorithm.CGAlgorithms.distancePointLine(t,e[r],e[r+1]),n>i&&(n=i);return n},jsts.algorithm.CGAlgorithms.distanceLineLine=function(t,e,n,r){if(t.equals(e))return jsts.algorithm.CGAlgorithms.distancePointLine(t,n,r);if(n.equals(r))return jsts.algorithm.CGAlgorithms.distancePointLine(r,t,e);var o,i,s,a,u,l;return o=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),i=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x),s=(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y),a=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x),0===i||0===a?Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(t,n,r),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(e,n,r),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(n,t,e),jsts.algorithm.CGAlgorithms.distancePointLine(r,t,e)))):(u=s/a,l=o/i,0>l||l>1||0>u||u>1?Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(t,n,r),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(e,n,r),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(n,t,e),jsts.algorithm.CGAlgorithms.distancePointLine(r,t,e)))):0)},jsts.algorithm.CGAlgorithms.signedArea=function(t){if(t.length<3)return 0;var e,n,r,o,i,s,a;for(e=0,n=0,r=t.length-1;r>n;n++)o=t[n].x,i=t[n].y,s=t[n+1].x,a=t[n+1].y,e+=(o+s)*(a-i);return-e/2},jsts.algorithm.CGAlgorithms.signedArea=function(t){var e,n,r,o,i,s,a,u;if(e=t.length,3>e)return 0;for(n=0,r=t[0],o=r.x,i=r.y,s=1;e>s;s++)r=t[s],a=r.x,u=r.y,n+=(o+a)*(u-i),o=a,i=u;return-n/2},jsts.algorithm.CGAlgorithms.computeLength=function(t){var e,n,r,o,i,s,a,u,l,c,p=t.length;if(1>=p)return 0;for(e=0,u=t[0],n=u.x,r=u.y,l=1,c=p,l;p>l;l++)u=t[l],o=u.x,i=u.y,s=o-n,a=i-r,e+=Math.sqrt(s*s+a*a),n=o,r=i;return e},jsts.algorithm.CGAlgorithms.length=function(){},jsts.algorithm.Angle=function(){},jsts.algorithm.Angle.PI_TIMES_2=2*Math.PI,jsts.algorithm.Angle.PI_OVER_2=Math.PI/2,jsts.algorithm.Angle.PI_OVER_4=Math.PI/4,jsts.algorithm.Angle.COUNTERCLOCKWISE=jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE,jsts.algorithm.Angle.CLOCKWISE=jsts.algorithm.CGAlgorithms.CLOCKWISE,jsts.algorithm.Angle.NONE=jsts.algorithm.CGAlgorithms.COLLINEAR,jsts.algorithm.Angle.toDegrees=function(t){return 180*t/Math.PI},jsts.algorithm.Angle.toRadians=function(t){return t*Math.PI/180},jsts.algorithm.Angle.angle=function(){return 1===arguments.length?jsts.algorithm.Angle.angleFromOrigo(arguments[0]):jsts.algorithm.Angle.angleBetweenCoords(arguments[0],arguments[1])},jsts.algorithm.Angle.angleBetweenCoords=function(t,e){var n,r;return n=e.x-t.x,r=e.y-t.y,Math.atan2(r,n)},jsts.algorithm.Angle.angleFromOrigo=function(t){return Math.atan2(t.y,t.x)},jsts.algorithm.Angle.isAcute=function(t,e,n){var r,o,i,s,a;return r=t.x-e.x,o=t.y-e.y,i=n.x-e.x,s=n.y-e.y,a=r*i+o*s,a>0},jsts.algorithm.Angle.isObtuse=function(t,e,n){var r,o,i,s,a;return r=t.x-e.x,o=t.y-e.y,i=n.x-e.x,s=n.y-e.y,a=r*i+o*s,0>a},jsts.algorithm.Angle.angleBetween=function(t,e,n){var r,o;return r=jsts.algorithm.Angle.angle(e,t),o=jsts.algorithm.Angle.angle(e,n),jsts.algorithm.Angle.diff(r,o)},jsts.algorithm.Angle.angleBetweenOriented=function(t,e,n){var r,o,i;return r=jsts.algorithm.Angle.angle(e,t),o=jsts.algorithm.Angle.angle(e,n),i=o-r,i<=-Math.PI?i+jsts.algorithm.Angle.PI_TIMES_2:i>Math.PI?i-jsts.algorithm.Angle.PI_TIMES_2:i},jsts.algorithm.Angle.interiorAngle=function(t,e,n){var r,o;return r=jsts.algorithm.Angle.angle(e,t),o=jsts.algorithm.Angle.angle(e,n),Math.abs(o-r)},jsts.algorithm.Angle.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?jsts.algorithm.Angle.COUNTERCLOCKWISE:0>n?jsts.algorithm.Angle.CLOCKWISE:jsts.algorithm.Angle.NONE},jsts.algorithm.Angle.normalize=function(t){for(;t>Math.PI;)t-=jsts.algorithm.Angle.PI_TIMES_2;for(;t<=-Math.PI;)t+=jsts.algorithm.Angle.PI_TIMES_2;return t},jsts.algorithm.Angle.normalizePositive=function(t){if(0>t){for(;0>t;)t+=jsts.algorithm.Angle.PI_TIMES_2;t>=jsts.algorithm.Angle.PI_TIMES_2&&(t=0)}else{for(;t>=jsts.algorithm.Angle.PI_TIMES_2;)t-=jsts.algorithm.Angle.PI_TIMES_2;0>t&&(t=0)}return t},jsts.algorithm.Angle.diff=function(t,e){var n;return n=e>t?e-t:t-e,n>Math.PI&&(n=2*Math.PI-n),n},jsts.geom.GeometryComponentFilter=function(){},jsts.geom.GeometryComponentFilter.prototype.filter=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.util.LinearComponentExtracter=function(t,e){this.lines=t,this.isForcedToLineString=e},jsts.geom.util.LinearComponentExtracter.prototype=new jsts.geom.GeometryComponentFilter,jsts.geom.util.LinearComponentExtracter.prototype.lines=null,jsts.geom.util.LinearComponentExtracter.prototype.isForcedToLineString=!1,jsts.geom.util.LinearComponentExtracter.getLines=function(t,e){if(1==arguments.length)return jsts.geom.util.LinearComponentExtracter.getLines5.apply(this,arguments);if(2==arguments.length&&"boolean"==typeof e)return jsts.geom.util.LinearComponentExtracter.getLines6.apply(this,arguments);if(2==arguments.length&&t instanceof jsts.geom.Geometry)return jsts.geom.util.LinearComponentExtracter.getLines3.apply(this,arguments);if(3==arguments.length&&t instanceof jsts.geom.Geometry)return jsts.geom.util.LinearComponentExtracter.getLines4.apply(this,arguments);if(3==arguments.length)return jsts.geom.util.LinearComponentExtracter.getLines2.apply(this,arguments);for(var n=0;n<t.length;n++){var r=t[n];jsts.geom.util.LinearComponentExtracter.getLines3(r,e)}return e},jsts.geom.util.LinearComponentExtracter.getLines2=function(t,e,n){for(var r=0;r<t.length;r++){var o=t[r];jsts.geom.util.LinearComponentExtracter.getLines4(o,e,n)}return e},jsts.geom.util.LinearComponentExtracter.getLines3=function(t,e){return t instanceof LineString?e.add(t):t.apply(new jsts.geom.util.LinearComponentExtracter(e)),e},jsts.geom.util.LinearComponentExtracter.getLines4=function(t,e,n){return t.apply(new jsts.geom.util.LinearComponentExtracter(e,n)),e},jsts.geom.util.LinearComponentExtracter.getLines5=function(t){return jsts.geom.util.LinearComponentExtracter.getLines6(t,!1)},jsts.geom.util.LinearComponentExtracter.getLines6=function(t,e){var n=[];return t.apply(new jsts.geom.util.LinearComponentExtracter(n,e)),n},jsts.geom.util.LinearComponentExtracter.prototype.setForceToLineString=function(t){this.isForcedToLineString=t},jsts.geom.util.LinearComponentExtracter.prototype.filter=function(t){if(this.isForcedToLineString&&t instanceof jsts.geom.LinearRing){var e=t.getFactory().createLineString(t.getCoordinateSequence());return void this.lines.push(e)}(t instanceof jsts.geom.LineString||t instanceof jsts.geom.LinearRing)&&this.lines.push(t)},jsts.geom.Location=function(){},jsts.geom.Location.INTERIOR=0,jsts.geom.Location.BOUNDARY=1,jsts.geom.Location.EXTERIOR=2,jsts.geom.Location.NONE=-1,jsts.geom.Location.toLocationSymbol=function(t){switch(t){case jsts.geom.Location.EXTERIOR:return"e";case jsts.geom.Location.BOUNDARY:return"b";case jsts.geom.Location.INTERIOR:return"i";case jsts.geom.Location.NONE:return"-"}throw new jsts.IllegalArgumentError("Unknown location value: "+t)},function(){jsts.io.GeoJSONReader=function(t){this.geometryFactory=t||new jsts.geom.GeometryFactory,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new jsts.io.GeoJSONParser(this.geometryFactory)},jsts.io.GeoJSONReader.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===jsts.geom.PrecisionModel.FIXED&&this.reducePrecision(e),e},jsts.io.GeoJSONReader.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;n>e;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;n>e;e++)this.reducePrecision(t.geometries[e])}}(),jsts.geom.Geometry=function(t){this.factory=t},jsts.geom.Geometry.prototype.envelope=null,jsts.geom.Geometry.prototype.factory=null,jsts.geom.Geometry.prototype.getGeometryType=function(){return"Geometry"},jsts.geom.Geometry.hasNonEmptyElements=function(t){var e;for(e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},jsts.geom.Geometry.hasNullElements=function(t){var e;for(e=0;e<t.length;e++)if(null===t[e])return!0;return!1},jsts.geom.Geometry.prototype.getFactory=function(){return(null===this.factory||void 0===this.factory)&&(this.factory=new jsts.geom.GeometryFactory),this.factory},jsts.geom.Geometry.prototype.getNumGeometries=function(){return 1},jsts.geom.Geometry.prototype.getGeometryN=function(){return this},jsts.geom.Geometry.prototype.getPrecisionModel=function(){return this.getFactory().getPrecisionModel()},jsts.geom.Geometry.prototype.getCoordinate=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.getCoordinates=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.getNumPoints=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.isSimple=function(){this.checkNotGeometryCollection(this);var t=new jsts.operation.IsSimpleOp(this);return t.isSimple()},jsts.geom.Geometry.prototype.isValid=function(){var t=new jsts.operation.valid.IsValidOp(this);return t.isValid()},jsts.geom.Geometry.prototype.isEmpty=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.distance=function(t){return jsts.operation.distance.DistanceOp.distance(this,t)},jsts.geom.Geometry.prototype.isWithinDistance=function(t,e){var n=this.getEnvelopeInternal().distance(t.getEnvelopeInternal());return!(n>e)&&DistanceOp.isWithinDistance(this,t,e)},jsts.geom.Geometry.prototype.isRectangle=function(){return!1},jsts.geom.Geometry.prototype.getArea=function(){return 0},jsts.geom.Geometry.prototype.getLength=function(){return 0},jsts.geom.Geometry.prototype.getCentroid=function(){if(this.isEmpty())return null;var t,e=null,n=this.getDimension();return 0===n?(t=new jsts.algorithm.CentroidPoint,t.add(this),e=t.getCentroid()):1===n?(t=new jsts.algorithm.CentroidLine,t.add(this),e=t.getCentroid()):(t=new jsts.algorithm.CentroidArea,t.add(this),e=t.getCentroid()),this.createPointFromInternalCoord(e,this)},jsts.geom.Geometry.prototype.getInteriorPoint=function(){var t,e=null,n=this.getDimension();return 0===n?(t=new jsts.algorithm.InteriorPointPoint(this),e=t.getInteriorPoint()):1===n?(t=new jsts.algorithm.InteriorPointLine(this),e=t.getInteriorPoint()):(t=new jsts.algorithm.InteriorPointArea(this),e=t.getInteriorPoint()),this.createPointFromInternalCoord(e,this)},jsts.geom.Geometry.prototype.getDimension=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.getBoundary=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.getBoundaryDimension=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal());
},jsts.geom.Geometry.prototype.getEnvelopeInternal=function(){return null===this.envelope&&(this.envelope=this.computeEnvelopeInternal()),this.envelope},jsts.geom.Geometry.prototype.disjoint=function(t){return!this.intersects(t)},jsts.geom.Geometry.prototype.touches=function(t){return!!this.getEnvelopeInternal().intersects(t.getEnvelopeInternal())&&this.relate(t).isTouches(this.getDimension(),t.getDimension())},jsts.geom.Geometry.prototype.intersects=function(t){return!!this.getEnvelopeInternal().intersects(t.getEnvelopeInternal())&&(this.isRectangle()?jsts.operation.predicate.RectangleIntersects.intersects(this,t):t.isRectangle()?jsts.operation.predicate.RectangleIntersects.intersects(t,this):this.relate(t).isIntersects())},jsts.geom.Geometry.prototype.crosses=function(t){return!!this.getEnvelopeInternal().intersects(t.getEnvelopeInternal())&&this.relate(t).isCrosses(this.getDimension(),t.getDimension())},jsts.geom.Geometry.prototype.within=function(t){return t.contains(this)},jsts.geom.Geometry.prototype.contains=function(t){return!!this.getEnvelopeInternal().contains(t.getEnvelopeInternal())&&(this.isRectangle()?jsts.operation.predicate.RectangleContains.contains(this,t):this.relate(t).isContains())},jsts.geom.Geometry.prototype.overlaps=function(t){return!!this.getEnvelopeInternal().intersects(t.getEnvelopeInternal())&&this.relate(t).isOverlaps(this.getDimension(),t.getDimension())},jsts.geom.Geometry.prototype.covers=function(t){return!!this.getEnvelopeInternal().covers(t.getEnvelopeInternal())&&(!!this.isRectangle()||this.relate(t).isCovers())},jsts.geom.Geometry.prototype.coveredBy=function(t){return t.covers(this)},jsts.geom.Geometry.prototype.relate=function(t,e){return 1===arguments.length?this.relate2.apply(this,arguments):this.relate2(t).matches(e)},jsts.geom.Geometry.prototype.relate2=function(t){return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),jsts.operation.relate.RelateOp.relate(this,t)},jsts.geom.Geometry.prototype.equalsTopo=function(t){return!!this.getEnvelopeInternal().equals(t.getEnvelopeInternal())&&this.relate(t).isEquals(this.getDimension(),t.getDimension())},jsts.geom.Geometry.prototype.equals=function(t){return(t instanceof jsts.geom.Geometry||t instanceof jsts.geom.LinearRing||t instanceof jsts.geom.Polygon||t instanceof jsts.geom.GeometryCollection||t instanceof jsts.geom.MultiPoint||t instanceof jsts.geom.MultiLineString||t instanceof jsts.geom.MultiPolygon)&&this.equalsExact(t)},jsts.geom.Geometry.prototype.buffer=function(t,e,n){var r=new jsts.operation.buffer.BufferParameters(e,n);return jsts.operation.buffer.BufferOp.bufferOp2(this,t,r)},jsts.geom.Geometry.prototype.convexHull=function(){return new jsts.algorithm.ConvexHull(this).getConvexHull()},jsts.geom.Geometry.prototype.intersection=function(t){return this.isEmpty()?this.getFactory().createGeometryCollection(null):t.isEmpty()?this.getFactory().createGeometryCollection(null):(this.isGeometryCollection(this),this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,t,jsts.operation.overlay.OverlayOp.INTERSECTION))},jsts.geom.Geometry.prototype.union=function(t){return 0===arguments.length?jsts.operation.union.UnaryUnionOp.union(this):this.isEmpty()?t.clone():t.isEmpty()?this.clone():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,t,jsts.operation.overlay.OverlayOp.UNION))},jsts.geom.Geometry.prototype.difference=function(t){return this.isEmpty()?this.getFactory().createGeometryCollection(null):t.isEmpty()?this.clone():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,t,jsts.operation.overlay.OverlayOp.DIFFERENCE))},jsts.geom.Geometry.prototype.symDifference=function(t){return this.isEmpty()?t.clone():t.isEmpty()?this.clone():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,t,jsts.operation.overlay.OverlayOp.SYMDIFFERENCE))},jsts.geom.Geometry.prototype.equalsExact=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.equalsNorm=function(t){return null!==t&&void 0!==t&&this.norm().equalsExact(t.norm())},jsts.geom.Geometry.prototype.apply=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.clone=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.normalize=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.norm=function(){var t=this.clone();return t.normalize(),t},jsts.geom.Geometry.prototype.compareTo=function(t){var e=t;return this.getClassSortIndex()!==e.getClassSortIndex()?this.getClassSortIndex()-e.getClassSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)},jsts.geom.Geometry.prototype.isEquivalentClass=function(t){return this instanceof jsts.geom.Point&&t instanceof jsts.geom.Point||(!!(this instanceof jsts.geom.LineString&&t instanceof jsts.geom.LineString|t instanceof jsts.geom.LinearRing)||(!!(this instanceof jsts.geom.LinearRing&&t instanceof jsts.geom.LineString|t instanceof jsts.geom.LinearRing)||(this instanceof jsts.geom.Polygon&&t instanceof jsts.geom.Polygon||(this instanceof jsts.geom.MultiPoint&&t instanceof jsts.geom.MultiPoint||(this instanceof jsts.geom.MultiLineString&&t instanceof jsts.geom.MultiLineString||(this instanceof jsts.geom.MultiPolygon&&t instanceof jsts.geom.MultiPolygon||this instanceof jsts.geom.GeometryCollection&&t instanceof jsts.geom.GeometryCollection))))))},jsts.geom.Geometry.prototype.checkNotGeometryCollection=function(t){if(t.isGeometryCollectionBase())throw new jsts.error.IllegalArgumentError("This method does not support GeometryCollection")},jsts.geom.Geometry.prototype.isGeometryCollection=function(){return this instanceof jsts.geom.GeometryCollection},jsts.geom.Geometry.prototype.isGeometryCollectionBase=function(){return"jsts.geom.GeometryCollection"===this.CLASS_NAME},jsts.geom.Geometry.prototype.computeEnvelopeInternal=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.compareToSameClass=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var o=n.next(),i=r.next(),s=o.compareTo(i);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0},jsts.geom.Geometry.prototype.equal=function(t,e,n){return void 0===n||null===n||0===n?t.equals(e):t.distance(e)<=n},jsts.geom.Geometry.prototype.getClassSortIndex=function(){for(var t=[jsts.geom.Point,jsts.geom.MultiPoint,jsts.geom.LineString,jsts.geom.LinearRing,jsts.geom.MultiLineString,jsts.geom.Polygon,jsts.geom.MultiPolygon,jsts.geom.GeometryCollection],e=0;e<t.length;e++)if(this instanceof t[e])return e;return jsts.util.Assert.shouldNeverReachHere("Class not supported: "+this),-1},jsts.geom.Geometry.prototype.toString=function(){return(new jsts.io.WKTWriter).write(this)},jsts.geom.Geometry.prototype.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},function(){jsts.geom.Coordinate=function(t,e){"number"==typeof t?(this.x=t,this.y=e):t instanceof jsts.geom.Coordinate?(this.x=parseFloat(t.x),this.y=parseFloat(t.y)):void 0===t||null===t?(this.x=0,this.y=0):"string"==typeof t&&(this.x=parseFloat(t),this.y=parseFloat(e))},jsts.geom.Coordinate.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y},jsts.geom.Coordinate.prototype.clone=function(){return new jsts.geom.Coordinate(this.x,this.y)},jsts.geom.Coordinate.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},jsts.geom.Coordinate.prototype.equals2D=function(t){return this.x===t.x&&this.y===t.y},jsts.geom.Coordinate.prototype.equals=function(t){return!(!t instanceof jsts.geom.Coordinate||void 0===t)&&this.equals2D(t)},jsts.geom.Coordinate.prototype.compareTo=function(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0},jsts.geom.Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+")"}}(),jsts.geom.Envelope=function(){jsts.geom.Envelope.prototype.init.apply(this,arguments)},jsts.geom.Envelope.prototype.minx=null,jsts.geom.Envelope.prototype.maxx=null,jsts.geom.Envelope.prototype.miny=null,jsts.geom.Envelope.prototype.maxy=null,jsts.geom.Envelope.prototype.init=function(){"number"==typeof arguments[0]&&4===arguments.length?this.initFromValues(arguments[0],arguments[1],arguments[2],arguments[3]):arguments[0]instanceof jsts.geom.Coordinate&&1===arguments.length?this.initFromCoordinate(arguments[0]):arguments[0]instanceof jsts.geom.Coordinate&&2===arguments.length?this.initFromCoordinates(arguments[0],arguments[1]):arguments[0]instanceof jsts.geom.Envelope&&1===arguments.length?this.initFromEnvelope(arguments[0]):this.setToNull()},jsts.geom.Envelope.prototype.initFromValues=function(t,e,n,r){e>t?(this.minx=t,this.maxx=e):(this.minx=e,this.maxx=t),r>n?(this.miny=n,this.maxy=r):(this.miny=r,this.maxy=n)},jsts.geom.Envelope.prototype.initFromCoordinates=function(t,e){this.initFromValues(t.x,e.x,t.y,e.y)},jsts.geom.Envelope.prototype.initFromCoordinate=function(t){this.initFromValues(t.x,t.x,t.y,t.y)},jsts.geom.Envelope.prototype.initFromEnvelope=function(t){this.minx=t.minx,this.maxx=t.maxx,this.miny=t.miny,this.maxy=t.maxy},jsts.geom.Envelope.prototype.setToNull=function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1},jsts.geom.Envelope.prototype.isNull=function(){return this.maxx<this.minx},jsts.geom.Envelope.prototype.getHeight=function(){return this.isNull()?0:this.maxy-this.miny},jsts.geom.Envelope.prototype.getWidth=function(){return this.isNull()?0:this.maxx-this.minx},jsts.geom.Envelope.prototype.getMinX=function(){return this.minx},jsts.geom.Envelope.prototype.getMaxX=function(){return this.maxx},jsts.geom.Envelope.prototype.getMinY=function(){return this.miny},jsts.geom.Envelope.prototype.getMaxY=function(){return this.maxy},jsts.geom.Envelope.prototype.getArea=function(){return this.getWidth()*this.getHeight()},jsts.geom.Envelope.prototype.expandToInclude=function(){arguments[0]instanceof jsts.geom.Coordinate?this.expandToIncludeCoordinate(arguments[0]):arguments[0]instanceof jsts.geom.Envelope?this.expandToIncludeEnvelope(arguments[0]):this.expandToIncludeValues(arguments[0],arguments[1])},jsts.geom.Envelope.prototype.expandToIncludeCoordinate=function(t){this.expandToIncludeValues(t.x,t.y)},jsts.geom.Envelope.prototype.expandToIncludeValues=function(t,e){this.isNull()?(this.minx=t,this.maxx=t,this.miny=e,this.maxy=e):(t<this.minx&&(this.minx=t),t>this.maxx&&(this.maxx=t),e<this.miny&&(this.miny=e),e>this.maxy&&(this.maxy=e))},jsts.geom.Envelope.prototype.expandToIncludeEnvelope=function(t){t.isNull()||(this.isNull()?(this.minx=t.getMinX(),this.maxx=t.getMaxX(),this.miny=t.getMinY(),this.maxy=t.getMaxY()):(t.minx<this.minx&&(this.minx=t.minx),t.maxx>this.maxx&&(this.maxx=t.maxx),t.miny<this.miny&&(this.miny=t.miny),t.maxy>this.maxy&&(this.maxy=t.maxy)))},jsts.geom.Envelope.prototype.expandBy=function(){1===arguments.length?this.expandByDistance(arguments[0]):this.expandByDistances(arguments[0],arguments[1])},jsts.geom.Envelope.prototype.expandByDistance=function(t){this.expandByDistances(t,t)},jsts.geom.Envelope.prototype.expandByDistances=function(t,e){this.isNull()||(this.minx-=t,this.maxx+=t,this.miny-=e,this.maxy+=e,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull())},jsts.geom.Envelope.prototype.translate=function(t,e){this.isNull()||this.init(this.minx+t,this.maxx+t,this.miny+e,this.maxy+e)},jsts.geom.Envelope.prototype.centre=function(){return this.isNull()?null:new jsts.geom.Coordinate((this.minx+this.maxx)/2,(this.miny+this.maxy)/2)},jsts.geom.Envelope.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new jsts.geom.Envelope;var e=this.minx>t.minx?this.minx:t.minx,n=this.miny>t.miny?this.miny:t.miny,r=this.maxx<t.maxx?this.maxx:t.maxx,o=this.maxy<t.maxy?this.maxy:t.maxy;return new jsts.geom.Envelope(e,r,n,o)},jsts.geom.Envelope.prototype.intersects=function(){return arguments[0]instanceof jsts.geom.Envelope?this.intersectsEnvelope(arguments[0]):arguments[0]instanceof jsts.geom.Coordinate?this.intersectsCoordinate(arguments[0]):this.intersectsValues(arguments[0],arguments[1])},jsts.geom.Envelope.prototype.intersectsEnvelope=function(t){if(this.isNull()||t.isNull())return!1;var e=!(t.minx>this.maxx||t.maxx<this.minx||t.miny>this.maxy||t.maxy<this.miny);return e},jsts.geom.Envelope.prototype.intersectsCoordinate=function(t){return this.intersectsValues(t.x,t.y)},jsts.geom.Envelope.prototype.intersectsValues=function(t,e){return!this.isNull()&&!(t>this.maxx||t<this.minx||e>this.maxy||e<this.miny)},jsts.geom.Envelope.prototype.contains=function(){return arguments[0]instanceof jsts.geom.Envelope?this.containsEnvelope(arguments[0]):arguments[0]instanceof jsts.geom.Coordinate?this.containsCoordinate(arguments[0]):this.containsValues(arguments[0],arguments[1])},jsts.geom.Envelope.prototype.containsEnvelope=function(t){return this.coversEnvelope(t)},jsts.geom.Envelope.prototype.containsCoordinate=function(t){return this.coversCoordinate(t)},jsts.geom.Envelope.prototype.containsValues=function(t,e){return this.coversValues(t,e)},jsts.geom.Envelope.prototype.covers=function(){return arguments[0]instanceof jsts.geom.Envelope?this.coversEnvelope(arguments[0]):arguments[0]instanceof jsts.geom.Coordinate?this.coversCoordinate(arguments[0]):this.coversValues(arguments[0],arguments[1])},jsts.geom.Envelope.prototype.coversValues=function(t,e){return!this.isNull()&&(t>=this.minx&&t<=this.maxx&&e>=this.miny&&e<=this.maxy)},jsts.geom.Envelope.prototype.coversCoordinate=function(t){return this.coversValues(t.x,t.y)},jsts.geom.Envelope.prototype.coversEnvelope=function(t){return!this.isNull()&&!t.isNull()&&(t.minx>=this.minx&&t.maxx<=this.maxx&&t.miny>=this.miny&&t.maxy<=this.maxy)},jsts.geom.Envelope.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this.maxx<t.minx&&(e=t.minx-this.maxx),this.minx>t.maxx&&(e=this.minx-t.maxx);var n=0;return this.maxy<t.miny&&(n=t.miny-this.maxy),this.miny>t.maxy&&(n=this.miny-t.maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},jsts.geom.Envelope.prototype.equals=function(t){return this.isNull()?t.isNull():this.maxx===t.maxx&&this.maxy===t.maxy&&this.minx===t.minx&&this.miny===t.miny},jsts.geom.Envelope.prototype.toString=function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"},jsts.geom.Envelope.intersects=function(t,e,n){if(4===arguments.length)return jsts.geom.Envelope.intersectsEnvelope(arguments[0],arguments[1],arguments[2],arguments[3]);var r=t.x<e.x?t.x:e.x,o=t.x>e.x?t.x:e.x,i=t.y<e.y?t.y:e.y,s=t.y>e.y?t.y:e.y;return n.x>=r&&n.x<=o&&n.y>=i&&n.y<=s},jsts.geom.Envelope.intersectsEnvelope=function(t,e,n,r){var o=Math.min(n.x,r.x),i=Math.max(n.x,r.x),s=Math.min(t.x,e.x),a=Math.max(t.x,e.x);return!(s>i)&&(!(o>a)&&(o=Math.min(n.y,r.y),i=Math.max(n.y,r.y),s=Math.min(t.y,e.y),a=Math.max(t.y,e.y),!(s>i)&&!(o>a)))},jsts.geom.Envelope.prototype.clone=function(){return new jsts.geom.Envelope(this.minx,this.maxx,this.miny,this.maxy)},jsts.geom.util.GeometryCombiner=function(t){this.geomFactory=jsts.geom.util.GeometryCombiner.extractFactory(t),this.inputGeoms=t},jsts.geom.util.GeometryCombiner.combine=function(t){if(arguments.length>1)return this.combine2.apply(this,arguments);var e=new jsts.geom.util.GeometryCombiner(t);return e.combine()},jsts.geom.util.GeometryCombiner.combine2=function(){var t=new javascript.util.ArrayList;Array.prototype.slice.call(arguments).forEach(function(e){t.add(e)});var e=new jsts.geom.util.GeometryCombiner(t);return e.combine()},jsts.geom.util.GeometryCombiner.prototype.geomFactory=null,jsts.geom.util.GeometryCombiner.prototype.skipEmpty=!1,jsts.geom.util.GeometryCombiner.prototype.inputGeoms,jsts.geom.util.GeometryCombiner.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},jsts.geom.util.GeometryCombiner.prototype.combine=function(){var t,e=new javascript.util.ArrayList;for(t=this.inputGeoms.iterator();t.hasNext();){var n=t.next();this.extractElements(n,e)}return 0===e.size()?null!==this.geomFactory?this.geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(e)},jsts.geom.util.GeometryCombiner.prototype.extractElements=function(t,e){if(null!==t)for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this.skipEmpty&&r.isEmpty()||e.add(r)}},jsts.geom.PrecisionModel=function(t){return"number"==typeof t?(this.modelType=jsts.geom.PrecisionModel.FIXED,void(this.scale=t)):(this.modelType=t||jsts.geom.PrecisionModel.FLOATING,void(this.modelType===jsts.geom.PrecisionModel.FIXED&&(this.scale=1)))},jsts.geom.PrecisionModel.FLOATING="FLOATING",jsts.geom.PrecisionModel.FIXED="FIXED",jsts.geom.PrecisionModel.FLOATING_SINGLE="FLOATING_SINGLE",jsts.geom.PrecisionModel.prototype.scale=null,jsts.geom.PrecisionModel.prototype.modelType=null,jsts.geom.PrecisionModel.prototype.isFloating=function(){return this.modelType===jsts.geom.PrecisionModel.FLOATING||this.modelType===jsts.geom.PrecisionModel.FLOATING_SINLGE},jsts.geom.PrecisionModel.prototype.getScale=function(){return this.scale},jsts.geom.PrecisionModel.prototype.getType=function(){return this.modelType},jsts.geom.PrecisionModel.prototype.equals=function(t){return!0},jsts.geom.PrecisionModel.prototype.makePrecise=function(t){return t instanceof jsts.geom.Coordinate?void this.makePrecise2(t):isNaN(t)?t:this.modelType===jsts.geom.PrecisionModel.FIXED?Math.round(t*this.scale)/this.scale:t},jsts.geom.PrecisionModel.prototype.makePrecise2=function(t){this.modelType!==jsts.geom.PrecisionModel.FLOATING&&(t.x=this.makePrecise(t.x),t.y=this.makePrecise(t.y))},jsts.geom.PrecisionModel.prototype.compareTo=function(t){return 0},jsts.geom.CoordinateFilter=function(){},jsts.geom.CoordinateFilter.prototype.filter=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.simplify.DouglasPeuckerLineSimplifier=function(t){this.pts=t,this.seg=new jsts.geom.LineSegment},jsts.simplify.DouglasPeuckerLineSimplifier.prototype.pts=null,jsts.simplify.DouglasPeuckerLineSimplifier.prototype.usePt=null,jsts.simplify.DouglasPeuckerLineSimplifier.prototype.distanceTolerance=null,jsts.simplify.DouglasPeuckerLineSimplifier.simplify=function(t,e){var n=new jsts.simplify.DouglasPeuckerLineSimplifier(t);return n.setDistanceTolerance(e),n.simplify()},jsts.simplify.DouglasPeuckerLineSimplifier.prototype.setDistanceTolerance=function(t){this.distanceTolerance=t},jsts.simplify.DouglasPeuckerLineSimplifier.prototype.simplify=function(){this.usePt=[];for(var t=0;t<this.pts.length;t++)this.usePt[t]=!0;this.simplifySection(0,this.pts.length-1);for(var e=new jsts.geom.CoordinateList,n=0;n<this.pts.length;n++)this.usePt[n]&&e.add(new jsts.geom.Coordinate(this.pts[n]));return e.toCoordinateArray()},jsts.simplify.DouglasPeuckerLineSimplifier.prototype.seg=null,jsts.simplify.DouglasPeuckerLineSimplifier.prototype.simplifySection=function(t,e){if(t+1!=e){this.seg.p0=this.pts[t],this.seg.p1=this.pts[e];for(var n=-1,r=t,o=t+1;e>o;o++){var i=this.seg.distance(this.pts[o]);i>n&&(n=i,r=o)}if(n<=this.distanceTolerance)for(var s=t+1;e>s;s++)this.usePt[s]=!1;else this.simplifySection(t,r),this.simplifySection(r,e)}},jsts.geomgraph.EdgeIntersection=function(t,e,n){this.coord=new jsts.geom.Coordinate(t),this.segmentIndex=e,this.dist=n},jsts.geomgraph.EdgeIntersection.prototype.coord=null,jsts.geomgraph.EdgeIntersection.prototype.segmentIndex=null,jsts.geomgraph.EdgeIntersection.prototype.dist=null,jsts.geomgraph.EdgeIntersection.prototype.getCoordinate=function(){return this.coord},jsts.geomgraph.EdgeIntersection.prototype.getSegmentIndex=function(){return this.segmentIndex},jsts.geomgraph.EdgeIntersection.prototype.getDistance=function(){return this.dist},jsts.geomgraph.EdgeIntersection.prototype.compareTo=function(t){return this.compare(t.segmentIndex,t.dist)},jsts.geomgraph.EdgeIntersection.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},jsts.geomgraph.EdgeIntersection.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},jsts.geomgraph.EdgeIntersection.prototype.toString=function(){return""+this.segmentIndex+this.dist},function(){var t=jsts.geomgraph.EdgeIntersection,e=javascript.util.TreeMap;jsts.geomgraph.EdgeIntersectionList=function(t){this.nodeMap=new e,this.edge=t},jsts.geomgraph.EdgeIntersectionList.prototype.nodeMap=null,jsts.geomgraph.EdgeIntersectionList.prototype.edge=null,jsts.geomgraph.EdgeIntersectionList.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();if(n.coord.equals(t))return!0}return!1},jsts.geomgraph.EdgeIntersectionList.prototype.add=function(e,n,r){var o=new t(e,n,r),i=this.nodeMap.get(o);return null!==i?i:(this.nodeMap.put(o,o),o)},jsts.geomgraph.EdgeIntersectionList.prototype.iterator=function(){return this.nodeMap.values().iterator()},jsts.geomgraph.EdgeIntersectionList.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},jsts.geomgraph.EdgeIntersectionList.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),o=this.createSplitEdge(n,r);t.add(o),n=r}},jsts.geomgraph.EdgeIntersectionList.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],o=e.dist>0||!e.coord.equals2D(r);o||n--;var i=[],s=0;i[s++]=new jsts.geom.Coordinate(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)i[s++]=this.edge.pts[a];return o&&(i[s]=e.coord),new jsts.geomgraph.Edge(i,new jsts.geomgraph.Label(this.edge.label))}}(),function(){var t=function(t){this.message=t};t.prototype=new Error,t.prototype.name="AssertionFailedException",jsts.util.AssertionFailedException=t}(),function(){var t=jsts.util.AssertionFailedException;jsts.util.Assert=function(){},jsts.util.Assert.isTrue=function(e,n){if(!e)throw null===n?new t:new t(n)},jsts.util.Assert.equals=function(e,n,r){if(!n.equals(e))throw new t("Expected "+e+" but encountered "+n+(null!=r?": "+r:""))},jsts.util.Assert.shouldNeverReachHere=function(e){throw new t("Should never reach here"+(null!=e?": "+e:""))}}(),function(){var t=jsts.geom.Location,e=jsts.util.Assert,n=javascript.util.ArrayList;jsts.operation.relate.RelateComputer=function(t){this.li=new jsts.algorithm.RobustLineIntersector,this.ptLocator=new jsts.algorithm.PointLocator,this.nodes=new jsts.geomgraph.NodeMap(new jsts.operation.relate.RelateNodeFactory),this.isolatedEdges=new n,this.arg=t},jsts.operation.relate.RelateComputer.prototype.li=null,jsts.operation.relate.RelateComputer.prototype.ptLocator=null,jsts.operation.relate.RelateComputer.prototype.arg=null,jsts.operation.relate.RelateComputer.prototype.nodes=null,jsts.operation.relate.RelateComputer.prototype.im=null,jsts.operation.relate.RelateComputer.prototype.isolatedEdges=null,jsts.operation.relate.RelateComputer.prototype.invalidPoint=null,jsts.operation.relate.RelateComputer.prototype.computeIM=function(){var e=new jsts.geom.IntersectionMatrix;if(e.set(t.EXTERIOR,t.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(e),e;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var n=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(n,e);var r=new jsts.operation.relate.EdgeEndBuilder,o=r.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(o);var i=r.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(i),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(e),e},jsts.operation.relate.RelateComputer.prototype.insertEdgeEnds=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},jsts.operation.relate.RelateComputer.prototype.computeProperIntersectionIM=function(t,e){var n=this.arg[0].getGeometry().getDimension(),r=this.arg[1].getGeometry().getDimension(),o=t.hasProperIntersection(),i=t.hasProperInteriorIntersection();2===n&&2===r?o&&e.setAtLeast("212101212"):2===n&&1===r?(o&&e.setAtLeast("FFF0FFFF2"),i&&e.setAtLeast("1FFFFF1FF")):1===n&&2===r?(o&&e.setAtLeast("F0FFFFFF2"),i&&e.setAtLeast("1F1FFFFFF")):1===n&&1===r&&i&&e.setAtLeast("0FFFFFFFF")},jsts.operation.relate.RelateComputer.prototype.copyNodesAndLabels=function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next(),r=this.nodes.addNode(n.getCoordinate());r.setLabel(t,n.getLabel().getLocation(t))}},jsts.operation.relate.RelateComputer.prototype.computeIntersectionNodes=function(e){for(var n=this.arg[e].getEdgeIterator();n.hasNext();)for(var r=n.next(),o=r.getLabel().getLocation(e),i=r.getEdgeIntersectionList().iterator();i.hasNext();){var s=i.next(),a=this.nodes.addNode(s.coord);o===t.BOUNDARY?a.setLabelBoundary(e):a.getLabel().isNull(e)&&a.setLabel(e,t.INTERIOR)}},jsts.operation.relate.RelateComputer.prototype.labelIntersectionNodes=function(e){for(var n=this.arg[e].getEdgeIterator();n.hasNext();)for(var r=n.next(),o=r.getLabel().getLocation(e),i=r.getEdgeIntersectionList().iterator();i.hasNext();){var s=i.next(),a=this.nodes.find(s.coord);a.getLabel().isNull(e)&&(o===t.BOUNDARY?a.setLabelBoundary(e):a.setLabel(e,t.INTERIOR))}},jsts.operation.relate.RelateComputer.prototype.computeDisjointIM=function(e){var n=this.arg[0].getGeometry();n.isEmpty()||(e.set(t.INTERIOR,t.EXTERIOR,n.getDimension()),e.set(t.BOUNDARY,t.EXTERIOR,n.getBoundaryDimension()));var r=this.arg[1].getGeometry();r.isEmpty()||(e.set(t.EXTERIOR,t.INTERIOR,r.getDimension()),e.set(t.EXTERIOR,t.BOUNDARY,r.getBoundaryDimension()))},jsts.operation.relate.RelateComputer.prototype.labelNodeEdges=function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().computeLabelling(this.arg)}},jsts.operation.relate.RelateComputer.prototype.updateIM=function(t){for(var e=this.isolatedEdges.iterator();e.hasNext();){var n=e.next();n.updateIM(t)}for(var r=this.nodes.iterator();r.hasNext();){var o=r.next();o.updateIM(t),o.updateIMFromEdges(t)}},jsts.operation.relate.RelateComputer.prototype.labelIsolatedEdges=function(t,e){for(var n=this.arg[t].getEdgeIterator();n.hasNext();){var r=n.next();r.isIsolated()&&(this.labelIsolatedEdge(r,e,this.arg[e].getGeometry()),this.isolatedEdges.add(r))}},jsts.operation.relate.RelateComputer.prototype.labelIsolatedEdge=function(e,n,r){if(r.getDimension()>0){var o=this.ptLocator.locate(e.getCoordinate(),r);e.getLabel().setAllLocations(n,o)}else e.getLabel().setAllLocations(n,t.EXTERIOR)},jsts.operation.relate.RelateComputer.prototype.labelIsolatedNodes=function(){for(var t=this.nodes.iterator();t.hasNext();){var n=t.next(),r=n.getLabel();e.isTrue(r.getGeometryCount()>0,"node with empty label found"),n.isIsolated()&&(r.isNull(0)?this.labelIsolatedNode(n,0):this.labelIsolatedNode(n,1))}},jsts.operation.relate.RelateComputer.prototype.labelIsolatedNode=function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setAllLocations(e,n)}}(),function(){var t=jsts.util.Assert;jsts.geomgraph.GraphComponent=function(t){this.label=t},jsts.geomgraph.GraphComponent.prototype.label=null,jsts.geomgraph.GraphComponent.prototype._isInResult=!1,jsts.geomgraph.GraphComponent.prototype._isCovered=!1,jsts.geomgraph.GraphComponent.prototype._isCoveredSet=!1,jsts.geomgraph.GraphComponent.prototype._isVisited=!1,jsts.geomgraph.GraphComponent.prototype.getLabel=function(){return this.label},jsts.geomgraph.GraphComponent.prototype.setLabel=function(t){return 2===arguments.length?void this.setLabel2.apply(this,arguments):void(this.label=t)},jsts.geomgraph.GraphComponent.prototype.setInResult=function(t){this._isInResult=t},jsts.geomgraph.GraphComponent.prototype.isInResult=function(){return this._isInResult},jsts.geomgraph.GraphComponent.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},jsts.geomgraph.GraphComponent.prototype.isCovered=function(){return this._isCovered},jsts.geomgraph.GraphComponent.prototype.isCoveredSet=function(){return this._isCoveredSet},jsts.geomgraph.GraphComponent.prototype.isVisited=function(){return this._isVisited},jsts.geomgraph.GraphComponent.prototype.setVisited=function(t){this._isVisited=t},jsts.geomgraph.GraphComponent.prototype.getCoordinate=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.GraphComponent.prototype.computeIM=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.GraphComponent.prototype.isIsolated=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.GraphComponent.prototype.updateIM=function(e){t.isTrue(this.label.getGeometryCount()>=2,"found partial label"),this.computeIM(e)}}(),jsts.geomgraph.Node=function(t,e){this.coord=t,this.edges=e,this.label=new jsts.geomgraph.Label(0,jsts.geom.Location.NONE)},jsts.geomgraph.Node.prototype=new jsts.geomgraph.GraphComponent,jsts.geomgraph.Node.prototype.coord=null,jsts.geomgraph.Node.prototype.edges=null,jsts.geomgraph.Node.prototype.isIsolated=function(){return 1==this.label.getGeometryCount()},jsts.geomgraph.Node.prototype.setLabel2=function(t,e){null===this.label?this.label=new jsts.geomgraph.Label(t,e):this.label.setLocation(t,e)},jsts.geomgraph.Node.prototype.setLabelBoundary=function(t){var e=jsts.geom.Location.NONE;null!==this.label&&(e=this.label.getLocation(t));var n;switch(e){case jsts.geom.Location.BOUNDARY:n=jsts.geom.Location.INTERIOR;break;case jsts.geom.Location.INTERIOR:n=jsts.geom.Location.BOUNDARY;break;default:n=jsts.geom.Location.BOUNDARY}this.label.setLocation(t,n)},jsts.geomgraph.Node.prototype.add=function(t){this.edges.insert(t),t.setNode(this)},jsts.geomgraph.Node.prototype.getCoordinate=function(){return this.coord},jsts.geomgraph.Node.prototype.getEdges=function(){return this.edges},jsts.geomgraph.Node.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){var e=t.next();if(e.getEdge().isInResult())return!0}return!1},jsts.geom.Point=function(t,e){this.factory=e,void 0!==t&&(this.coordinate=t)},jsts.geom.Point.prototype=new jsts.geom.Geometry,jsts.geom.Point.constructor=jsts.geom.Point,jsts.geom.Point.CLASS_NAME="jsts.geom.Point",jsts.geom.Point.prototype.coordinate=null,jsts.geom.Point.prototype.getX=function(){return this.coordinate.x},jsts.geom.Point.prototype.getY=function(){return this.coordinate.y},jsts.geom.Point.prototype.getCoordinate=function(){return this.coordinate},jsts.geom.Point.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.coordinate]},jsts.geom.Point.prototype.getCoordinateSequence=function(){return this.isEmpty()?[]:[this.coordinate]},jsts.geom.Point.prototype.isEmpty=function(){return null===this.coordinate},jsts.geom.Point.prototype.equalsExact=function(t,e){return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.equal(t.getCoordinate(),this.getCoordinate(),e))},jsts.geom.Point.prototype.getNumPoints=function(){return this.isEmpty()?0:1},jsts.geom.Point.prototype.isSimple=function(){return!0},jsts.geom.Point.prototype.getBoundary=function(){return new jsts.geom.GeometryCollection(null)},jsts.geom.Point.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new jsts.geom.Envelope:new jsts.geom.Envelope(this.coordinate)},jsts.geom.Point.prototype.apply=function(t){
if(t instanceof jsts.geom.GeometryFilter||t instanceof jsts.geom.GeometryComponentFilter)t.filter(this);else if(t instanceof jsts.geom.CoordinateFilter){if(this.isEmpty())return;t.filter(this.getCoordinate())}},jsts.geom.Point.prototype.clone=function(){return new jsts.geom.Point(this.coordinate.clone(),this.factory)},jsts.geom.Point.prototype.getDimension=function(){return 0},jsts.geom.Point.prototype.getBoundaryDimension=function(){return jsts.geom.Dimension.FALSE},jsts.geom.Point.prototype.reverse=function(){return this.clone()},jsts.geom.Point.prototype.isValid=function(){return!!jsts.operation.valid.IsValidOp.isValid(this.getCoordinate())},jsts.geom.Point.prototype.normalize=function(){},jsts.geom.Point.prototype.compareToSameClass=function(t){var e=t;return this.getCoordinate().compareTo(e.getCoordinate())},jsts.geom.Point.prototype.getGeometryType=function(){return"Point"},jsts.geom.Point.prototype.hashCode=function(){return"Point_"+this.coordinate.hashCode()},jsts.geom.Point.prototype.CLASS_NAME="jsts.geom.Point",jsts.geom.Dimension=function(){},jsts.geom.Dimension.P=0,jsts.geom.Dimension.L=1,jsts.geom.Dimension.A=2,jsts.geom.Dimension.FALSE=-1,jsts.geom.Dimension.TRUE=-2,jsts.geom.Dimension.DONTCARE=-3,jsts.geom.Dimension.toDimensionSymbol=function(t){switch(t){case jsts.geom.Dimension.FALSE:return"F";case jsts.geom.Dimension.TRUE:return"T";case jsts.geom.Dimension.DONTCARE:return"*";case jsts.geom.Dimension.P:return"0";case jsts.geom.Dimension.L:return"1";case jsts.geom.Dimension.A:return"2"}throw new jsts.IllegalArgumentError("Unknown dimension value: "+t)},jsts.geom.Dimension.toDimensionValue=function(t){switch(t.toUpperCase()){case"F":return jsts.geom.Dimension.FALSE;case"T":return jsts.geom.Dimension.TRUE;case"*":return jsts.geom.Dimension.DONTCARE;case"0":return jsts.geom.Dimension.P;case"1":return jsts.geom.Dimension.L;case"2":return jsts.geom.Dimension.A}throw new jsts.error.IllegalArgumentError("Unknown dimension symbol: "+t)},function(){var t=jsts.geom.Dimension;jsts.geom.LineString=function(t,e){this.factory=e,this.points=t||[]},jsts.geom.LineString.prototype=new jsts.geom.Geometry,jsts.geom.LineString.constructor=jsts.geom.LineString,jsts.geom.LineString.prototype.points=null,jsts.geom.LineString.prototype.getCoordinates=function(){return this.points},jsts.geom.LineString.prototype.getCoordinateSequence=function(){return this.points},jsts.geom.LineString.prototype.getCoordinateN=function(t){return this.points[t]},jsts.geom.LineString.prototype.getCoordinate=function(){return this.isEmpty()?null:this.getCoordinateN(0)},jsts.geom.LineString.prototype.getDimension=function(){return 1},jsts.geom.LineString.prototype.getBoundaryDimension=function(){return this.isClosed()?t.FALSE:0},jsts.geom.LineString.prototype.isEmpty=function(){return 0===this.points.length},jsts.geom.LineString.prototype.getNumPoints=function(){return this.points.length},jsts.geom.LineString.prototype.getPointN=function(t){return this.getFactory().createPoint(this.points[t])},jsts.geom.LineString.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},jsts.geom.LineString.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},jsts.geom.LineString.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.points.length-1))},jsts.geom.LineString.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},jsts.geom.LineString.prototype.getGeometryType=function(){return"LineString"},jsts.geom.LineString.prototype.getLength=function(){return jsts.algorithm.CGAlgorithms.computeLength(this.points)},jsts.geom.LineString.prototype.getBoundary=function(){return new jsts.operation.BoundaryOp(this).getBoundary()},jsts.geom.LineString.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new jsts.geom.Envelope;var t=new jsts.geom.Envelope;return this.points.forEach(function(e){t.expandToInclude(e)}),t},jsts.geom.LineString.prototype.equalsExact=function(t,e){return!!this.isEquivalentClass(t)&&(this.points.length===t.points.length&&(!(!this.isEmpty()||!t.isEmpty())||this.points.reduce(function(n,r,o){return n&&jsts.geom.Geometry.prototype.equal(r,t.points[o],e)})))},jsts.geom.LineString.prototype.isEquivalentClass=function(t){return t instanceof jsts.geom.LineString},jsts.geom.LineString.prototype.compareToSameClass=function(t){for(var e=t,n=0,r=this.points.length,o=0,i=e.points.length;r>n&&i>o;){var s=this.points[n].compareTo(e.points[o]);if(0!==s)return s;n++,o++}return r>n?1:i>o?-1:0},jsts.geom.LineString.prototype.apply=function(t){if(t instanceof jsts.geom.GeometryFilter||t instanceof jsts.geom.GeometryComponentFilter)t.filter(this);else if(t instanceof jsts.geom.CoordinateFilter)for(var e=0,n=this.points.length;n>e;e++)t.filter(this.points[e]);else t instanceof jsts.geom.CoordinateSequenceFilter&&this.apply2.apply(this,arguments)},jsts.geom.LineString.prototype.apply2=function(t){if(0!==this.points.length){for(var e=0;e<this.points.length&&(t.filter(this.points,e),!t.isDone());e++);t.isGeometryChanged()}},jsts.geom.LineString.prototype.clone=function(){for(var t=[],e=0,n=this.points.length;n>e;e++)t.push(this.points[e].clone());return this.factory.createLineString(t)},jsts.geom.LineString.prototype.normalize=function(){var t,e,n,r,o,i;for(i=this.points.length,e=parseInt(i/2),t=0;e>t;t++)if(n=i-1-t,r=this.points[t],o=this.points[n],!r.equals(o))return void(r.compareTo(o)>0&&this.points.reverse())},jsts.geom.LineString.prototype.CLASS_NAME="jsts.geom.LineString"}(),function(){jsts.geom.Polygon=function(t,e,n){this.shell=t||n.createLinearRing(null),this.holes=e||[],this.factory=n},jsts.geom.Polygon.prototype=new jsts.geom.Geometry,jsts.geom.Polygon.constructor=jsts.geom.Polygon,jsts.geom.Polygon.prototype.getCoordinate=function(){return this.shell.getCoordinate()},jsts.geom.Polygon.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=[],e=-1,n=this.shell.getCoordinates(),r=0;r<n.length;r++)e++,t[e]=n[r];for(var o=0;o<this.holes.length;o++)for(var i=this.holes[o].getCoordinates(),s=0;s<i.length;s++)e++,t[e]=i[s];return t},jsts.geom.Polygon.prototype.getNumPoints=function(){for(var t=this.shell.getNumPoints(),e=0;e<this.holes.length;e++)t+=this.holes[e].getNumPoints();return t},jsts.geom.Polygon.prototype.isEmpty=function(){return this.shell.isEmpty()},jsts.geom.Polygon.prototype.isRectangle=function(){if(0!=this.getNumInteriorRing())return!1;if(null==this.shell)return!1;if(5!=this.shell.getNumPoints())return!1;for(var t=this.shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;5>n;n++){var r=t[n].x;if(r!=e.getMinX()&&r!=e.getMaxX())return!1;var o=t[n].y;if(o!=e.getMinY()&&o!=e.getMaxY())return!1}for(var i=t[0].x,s=t[0].y,n=1;4>=n;n++){var r=t[n].x,o=t[n].y,a=r!=i,u=o!=s;if(a==u)return!1;i=r,s=o}return!0},jsts.geom.Polygon.prototype.getExteriorRing=function(){return this.shell},jsts.geom.Polygon.prototype.getInteriorRingN=function(t){return this.holes[t]},jsts.geom.Polygon.prototype.getNumInteriorRing=function(){return this.holes.length},jsts.geom.Polygon.prototype.getArea=function(){var t=0;t+=Math.abs(jsts.algorithm.CGAlgorithms.signedArea(this.shell.getCoordinateSequence()));for(var e=0;e<this.holes.length;e++)t-=Math.abs(jsts.algorithm.CGAlgorithms.signedArea(this.holes[e].getCoordinateSequence()));return t},jsts.geom.Polygon.prototype.getLength=function(){var t=0;t+=this.shell.getLength();for(var e=0;e<this.holes.length;e++)t+=this.holes[e].getLength();return t},jsts.geom.Polygon.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString(null);var t=[];t[0]=this.shell.clone();for(var e=0,n=this.holes.length;n>e;e++)t[e+1]=this.holes[e].clone();return t.length<=1?t[0]:this.getFactory().createMultiLineString(t)},jsts.geom.Polygon.prototype.computeEnvelopeInternal=function(){return this.shell.getEnvelopeInternal()},jsts.geom.Polygon.prototype.getDimension=function(){return 2},jsts.geom.Polygon.prototype.getBoundaryDimension=function(){return 1},jsts.geom.Polygon.prototype.equalsExact=function(t,e){if(!this.isEquivalentClass(t))return!1;if(this.isEmpty()&&t.isEmpty())return!0;if(this.isEmpty()!==t.isEmpty())return!1;if(!this.shell.equalsExact(t.shell,e))return!1;if(this.holes.length!==t.holes.length)return!1;if(this.holes.length!==t.holes.length)return!1;for(var n=0;n<this.holes.length;n++)if(!this.holes[n].equalsExact(t.holes[n],e))return!1;return!0},jsts.geom.Polygon.prototype.compareToSameClass=function(t){return this.shell.compareToSameClass(t.shell)},jsts.geom.Polygon.prototype.apply=function(t){if(t instanceof jsts.geom.GeometryComponentFilter){t.filter(this),this.shell.apply(t);for(var e=0,n=this.holes.length;n>e;e++)this.holes[e].apply(t)}else if(t instanceof jsts.geom.GeometryFilter)t.filter(this);else if(t instanceof jsts.geom.CoordinateFilter){this.shell.apply(t);for(var e=0,n=this.holes.length;n>e;e++)this.holes[e].apply(t)}else t instanceof jsts.geom.CoordinateSequenceFilter&&this.apply2.apply(this,arguments)},jsts.geom.Polygon.prototype.apply2=function(t){if(this.shell.apply(t),!t.isDone())for(var e=0;e<this.holes.length&&(this.holes[e].apply(t),!t.isDone());e++);t.isGeometryChanged()},jsts.geom.Polygon.prototype.clone=function(){for(var t=[],e=0,n=this.holes.length;n>e;e++)t.push(this.holes[e].clone());return this.factory.createPolygon(this.shell.clone(),t)},jsts.geom.Polygon.prototype.normalize=function(){this.normalize2(this.shell,!0);for(var t=0,e=this.holes.length;e>t;t++)this.normalize2(this.holes[t],!1);this.holes.sort()},jsts.geom.Polygon.prototype.normalize2=function(t,e){if(!t.isEmpty()){var n=t.points.slice(0,t.points.length-1),r=jsts.geom.CoordinateArrays.minCoordinate(t.points);jsts.geom.CoordinateArrays.scroll(n,r),t.points=n.concat(),t.points[n.length]=n[0],jsts.algorithm.CGAlgorithms.isCCW(t.points)===e&&t.points.reverse()}},jsts.geom.Polygon.prototype.getGeometryType=function(){return"Polygon"},jsts.geom.Polygon.prototype.CLASS_NAME="jsts.geom.Polygon"}(),function(){var t=jsts.geom.Geometry,e=javascript.util.TreeSet,n=javascript.util.Arrays;jsts.geom.GeometryCollection=function(t,e){this.geometries=t||[],this.factory=e},jsts.geom.GeometryCollection.prototype=new t,jsts.geom.GeometryCollection.constructor=jsts.geom.GeometryCollection,jsts.geom.GeometryCollection.prototype.isEmpty=function(){for(var t=0,e=this.geometries.length;e>t;t++){var n=this.getGeometryN(t);if(!n.isEmpty())return!1}return!0},jsts.geom.GeometryCollection.prototype.getArea=function(){for(var t=0,e=0,n=this.geometries.length;n>e;e++)t+=this.getGeometryN(e).getArea();return t},jsts.geom.GeometryCollection.prototype.getLength=function(){for(var t=0,e=0,n=this.geometries.length;n>e;e++)t+=this.getGeometryN(e).getLength();return t},jsts.geom.GeometryCollection.prototype.getCoordinate=function(){return this.isEmpty()?null:this.getGeometryN(0).getCoordinate()},jsts.geom.GeometryCollection.prototype.getCoordinates=function(){for(var t=[],e=-1,n=0,r=this.geometries.length;r>n;n++)for(var o=this.getGeometryN(n),i=o.getCoordinates(),s=0;s<i.length;s++)e++,t[e]=i[s];return t},jsts.geom.GeometryCollection.prototype.getNumGeometries=function(){return this.geometries.length},jsts.geom.GeometryCollection.prototype.getGeometryN=function(t){var e=this.geometries[t];return e instanceof jsts.geom.Coordinate&&(e=new jsts.geom.Point(e)),e},jsts.geom.GeometryCollection.prototype.getNumPoints=function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getNumPoints();return t},jsts.geom.GeometryCollection.prototype.equalsExact=function(t,e){if(!this.isEquivalentClass(t))return!1;if(this.geometries.length!==t.geometries.length)return!1;for(var n=0,r=this.geometries.length;r>n;n++){var o=this.getGeometryN(n);if(!o.equalsExact(t.getGeometryN(n),e))return!1}return!0},jsts.geom.GeometryCollection.prototype.clone=function(){for(var t=[],e=0,n=this.geometries.length;n>e;e++)t.push(this.geometries[e].clone());return this.factory.createGeometryCollection(t)},jsts.geom.GeometryCollection.prototype.normalize=function(){for(var t=0,e=this.geometries.length;e>t;t++)this.getGeometryN(t).normalize();this.geometries.sort()},jsts.geom.GeometryCollection.prototype.compareToSameClass=function(t){var r=new e(n.asList(this.geometries)),o=new e(n.asList(t.geometries));return this.compare(r,o)},jsts.geom.GeometryCollection.prototype.apply=function(t){if(t instanceof jsts.geom.GeometryFilter||t instanceof jsts.geom.GeometryComponentFilter){t.filter(this);for(var e=0,n=this.geometries.length;n>e;e++)this.getGeometryN(e).apply(t)}else if(t instanceof jsts.geom.CoordinateFilter)for(var e=0,n=this.geometries.length;n>e;e++)this.getGeometryN(e).apply(t);else t instanceof jsts.geom.CoordinateSequenceFilter&&this.apply2.apply(this,arguments)},jsts.geom.GeometryCollection.prototype.apply2=function(t){if(0!=this.geometries.length){for(var e=0;e<this.geometries.length&&(this.geometries[e].apply(t),!t.isDone());e++);t.isGeometryChanged()}},jsts.geom.GeometryCollection.prototype.getDimension=function(){for(var t=jsts.geom.Dimension.FALSE,e=0,n=this.geometries.length;n>e;e++){var r=this.getGeometryN(e);t=Math.max(t,r.getDimension())}return t},jsts.geom.GeometryCollection.prototype.computeEnvelopeInternal=function(){for(var t=new jsts.geom.Envelope,e=0,n=this.geometries.length;n>e;e++){var r=this.getGeometryN(e);t.expandToInclude(r.getEnvelopeInternal())}return t},jsts.geom.GeometryCollection.prototype.CLASS_NAME="jsts.geom.GeometryCollection"}(),jsts.algorithm.Centroid=function(t){this.areaBasePt=null,this.triangleCent3=new jsts.geom.Coordinate,this.areasum2=0,this.cg3=new jsts.geom.Coordinate,this.lineCentSum=new jsts.geom.Coordinate,this.totalLength=0,this.ptCount=0,this.ptCentSum=new jsts.geom.Coordinate,this.add(t)},jsts.algorithm.Centroid.getCentroid=function(t){var e=new jsts.algorithm.Centroid(t);return e.getCentroid()},jsts.algorithm.Centroid.centroid3=function(t,e,n,r){r.x=t.x+e.x+n.x,r.y=t.y+e.y+n.y},jsts.algorithm.Centroid.area2=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)},jsts.algorithm.Centroid.prototype.add=function(t){if(!t.isEmpty())if(t instanceof jsts.geom.Point)this.addPoint(t.getCoordinate());else if(t instanceof jsts.geom.LineString)this.addLineSegments(t.getCoordinates());else if(t instanceof jsts.geom.Polygon)this.addPolygon(t);else if(t instanceof jsts.geom.GeometryCollection)for(var e=0;e<t.getNumGeometries();e++)this.add(t.getGeometryN(e))},jsts.algorithm.Centroid.prototype.getCentroid=function(){var t=new jsts.geom.Coordinate;if(Math.abs(this.areasum2)>0)t.x=this.cg3.x/3/this.areasum2,t.y=this.cg3.y/3/this.areasum2;else if(this.totalLength>0)t.x=this.lineCentSum.x/this.totalLength,t.y=this.lineCentSum.y/this.totalLength;else{if(!(this.ptCount>0))return null;t.x=this.ptCentSum.x/this.ptCount,t.y=this.ptCentSum.y/this.ptCount}return t},jsts.algorithm.Centroid.prototype.setBasePoint=function(t){null===this.areaBasePt&&(this.areaBasePt=t)},jsts.algorithm.Centroid.prototype.addPolygon=function(t){this.addShell(t.getExteriorRing().getCoordinates());for(var e=0;e<t.getNumInteriorRing();e++)this.addHole(t.getInteriorRingN(e).getCoordinates())},jsts.algorithm.Centroid.prototype.addShell=function(t){t.length>0&&this.setBasePoint(t[0]);for(var e=!jsts.algorithm.CGAlgorithms.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},jsts.algorithm.Centroid.prototype.addHole=function(t){for(var e=jsts.algorithm.CGAlgorithms.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},jsts.algorithm.Centroid.prototype.addTriangle=function(t,e,n,r){var o=r?1:-1;jsts.algorithm.Centroid.centroid3(t,e,n,this.triangleCent3);var i=jsts.algorithm.Centroid.area2(t,e,n);this.cg3.x+=o*i*this.triangleCent3.x,this.cg3.y+=o*i*this.triangleCent3.y,this.areasum2+=o*i},jsts.algorithm.Centroid.prototype.addLineSegments=function(t){for(var e=0,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);if(0!==r){e+=r;var o=(t[n].x+t[n+1].x)/2;this.lineCentSum.x+=r*o;var i=(t[n].y+t[n+1].y)/2;this.lineCentSum.y+=r*i}}this.totalLength+=e,0===e&&t.length>0&&this.addPoint(t[0])},jsts.algorithm.Centroid.prototype.addPoint=function(t){this.ptCount+=1,this.ptCentSum.x+=t.x,this.ptCentSum.y+=t.y},function(){var t=function(t){this.deList=new javascript.util.ArrayList,this.factory=t};t.findEdgeRingContaining=function(t,e){for(var n=t.getRing(),r=n.getEnvelopeInternal(),o=n.getCoordinateN(0),i=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getRing(),c=l.getEnvelopeInternal();null!=i&&(s=i.getRing().getEnvelopeInternal());var p=!1;c.equals(r)||(o=jsts.geom.CoordinateArrays.ptNotInList(n.getCoordinates(),l.getCoordinates()),c.contains(r)&&jsts.algorithm.CGAlgorithms.isPointInRing(o,l.getCoordinates())&&(p=!0),p&&(null==i||s.contains(c))&&(i=u))}return i},t.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(!isInList(r,e))return r}return null},t.isInList=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return!0;return!1},t.prototype.factory=null,t.prototype.deList=null,t.prototype.ring=null,t.prototype.ringPts=null,t.prototype.holes=null,t.prototype.add=function(t){this.deList.add(t)},t.prototype.isHole=function(){var t=this.getRing();return jsts.algorithm.CGAlgorithms.isCCW(t.getCoordinates())},t.prototype.addHole=function(t){null==this.holes&&(this.holes=new javascript.util.ArrayList),this.holes.add(t)},t.prototype.getPolygon=function(){var t=null;if(null!=this.holes){t=[];for(var e=0;e<this.holes.size();e++)t[e]=this.holes.get(e)}var n=this.factory.createPolygon(this.ring,t);return n},t.prototype.isValid=function(){return this.getCoordinates(),!(this.ringPts.length<=3)&&(this.getRing(),this.ring.isValid())},t.prototype.getCoordinates=function(){if(null==this.ringPts){for(var e=new jsts.geom.CoordinateList,n=this.deList.iterator();n.hasNext();){var r=n.next(),o=r.getEdge();t.addEdge(o.getLine().getCoordinates(),r.getEdgeDirection(),e)}this.ringPts=e.toCoordinateArray()}return this.ringPts},t.prototype.getLineString=function(){return this.getCoordinates(),this.factory.createLineString(this.ringPts)},t.prototype.getRing=function(){if(null!=this.ring)return this.ring;this.getCoordinates(),this.ringPts.length<3&&console.log(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(t){console.log(this.ringPts)}return this.ring},t.addEdge=function(t,e,n){if(e)for(var r=0;r<t.length;r++)n.add(t[r],!1);else for(var r=t.length-1;r>=0;r--)n.add(t[r],!1)},jsts.operation.polygonize.EdgeRing=t}(),function(){var t=function(){};t.setVisited=function(t,e){for(;t.hasNext();){var n=t.next();n.setVisited(e)}},t.setMarked=function(t,e){for(;t.hasNext();){var n=t.next();n.setMarked(e)}},t.getComponentWithVisitedState=function(t,e){for(;t.hasNext();){var n=t.next();if(n.isVisited()==e)return n}return null},t.prototype._isMarked=!1,t.prototype._isVisited=!1,t.prototype.data,t.prototype.isVisited=function(){return this._isVisited},t.prototype.setVisited=function(t){this._isVisited=t},t.prototype.isMarked=function(){return this._isMarked},t.prototype.setMarked=function(t){this._isMarked=t},t.prototype.setContext=function(t){this.data=t},t.prototype.getContext=function(){return data},t.prototype.setData=function(t){this.data=t},t.prototype.getData=function(){return data},t.prototype.isRemoved=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.planargraph.GraphComponent=t}(),function(){var t=jsts.planargraph.GraphComponent,e=function(t,e){void 0!==t&&this.setDirectedEdges(t,e)};e.prototype=new t,e.prototype.dirEdge=null,e.prototype.setDirectedEdges=function(t,e){this.dirEdge=[t,e],t.setEdge(this),e.setEdge(this),t.setSym(e),e.setSym(t),t.getFromNode().addOutEdge(t),e.getFromNode().addOutEdge(e)},e.prototype.getDirEdge=function(t){return t instanceof jsts.planargraph.Node&&this.getDirEdge2(t),this.dirEdge[t]},e.prototype.getDirEdge2=function(t){return this.dirEdge[0].getFromNode()==t?this.dirEdge[0]:this.dirEdge[1].getFromNode()==t?this.dirEdge[1]:null},e.prototype.getOppositeNode=function(t){return this.dirEdge[0].getFromNode()==t?this.dirEdge[0].getToNode():this.dirEdge[1].getFromNode()==t?this.dirEdge[1].getToNode():null},e.prototype.remove=function(){this.dirEdge=null},e.prototype.isRemoved=function(){return null==dirEdge},jsts.planargraph.Edge=e}(),jsts.operation.polygonize.PolygonizeEdge=function(t){this.line=t},jsts.operation.polygonize.PolygonizeEdge.prototype=new jsts.planargraph.Edge,jsts.operation.polygonize.PolygonizeEdge.prototype.line=null,jsts.operation.polygonize.PolygonizeEdge.prototype.getLine=function(){return this.line},function(){var t=javascript.util.ArrayList,e=jsts.planargraph.GraphComponent,n=function(t,e,n,r){if(void 0!==t){this.from=t,this.to=e,this.edgeDirection=r,this.p0=t.getCoordinate(),this.p1=n;var o=this.p1.x-this.p0.x,i=this.p1.y-this.p0.y;this.quadrant=jsts.geomgraph.Quadrant.quadrant(o,i),this.angle=Math.atan2(i,o)}};n.prototype=new e,n.toEdges=function(e){for(var n=new t,r=e.iterator();r.hasNext();)n.add(r.next().parentEdge);return n},n.prototype.parentEdge=null,n.prototype.from=null,n.prototype.to=null,n.prototype.p0=null,n.prototype.p1=null,n.prototype.sym=null,n.prototype.edgeDirection=null,n.prototype.quadrant=null,n.prototype.angle=null,n.prototype.getEdge=function(){return this.parentEdge},n.prototype.setEdge=function(t){this.parentEdge=t},n.prototype.getQuadrant=function(){return this.quadrant},n.prototype.getDirectionPt=function(){return this.p1},n.prototype.getEdgeDirection=function(){return this.edgeDirection},n.prototype.getFromNode=function(){return this.from},n.prototype.getToNode=function(){return this.to},n.prototype.getCoordinate=function(){return this.from.getCoordinate()},n.prototype.getAngle=function(){return this.angle},n.prototype.getSym=function(){return this.sym},n.prototype.setSym=function(t){this.sym=t},n.prototype.remove=function(){this.sym=null,this.parentEdge=null},n.prototype.isRemoved=function(){return null==this.parentEdge},n.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},n.prototype.compareDirection=function(t){return this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:jsts.algorithm.CGAlgorithms.computeOrientation(t.p0,t.p1,this.p1)},jsts.planargraph.DirectedEdge=n}(),function(){var t=jsts.planargraph.DirectedEdge,e=function(){t.apply(this,arguments)};e.prototype=new t,e.prototype.edgeRing=null,e.prototype.next=null,e.prototype.label=-1,e.prototype.getLabel=function(){return this.label},e.prototype.setLabel=function(t){this.label=t},e.prototype.getNext=function(){return this.next},e.prototype.setNext=function(t){this.next=t},e.prototype.isInRing=function(){return null!=this.edgeRing},e.prototype.setRing=function(t){this.edgeRing=t},jsts.operation.polygonize.PolygonizeDirectedEdge=e}(),function(){var t=javascript.util.ArrayList,e=function(){this.outEdges=new t};e.prototype.outEdges=null,e.prototype.sorted=!1,e.prototype.add=function(t){this.outEdges.add(t),this.sorted=!1},e.prototype.remove=function(t){this.outEdges.remove(t)},e.prototype.iterator=function(){return this.sortEdges(),this.outEdges.iterator()},e.prototype.getDegree=function(){return this.outEdges.size()},e.prototype.getCoordinate=function(){var t=iterator();if(!t.hasNext())return null;var e=t.next();return e.getCoordinate()},e.prototype.getEdges=function(){return this.sortEdges(),this.outEdges},e.prototype.sortEdges=function(){if(!this.sorted){var t=this.outEdges.toArray();t.sort(function(t,e){return t.compareTo(e)}),this.outEdges=javascript.util.Arrays.asList(t),this.sorted=!0}},e.prototype.getIndex=function(t){if(t instanceof jsts.planargraph.DirectedEdge)return this.getIndex2(t);if("number"==typeof t)return this.getIndex3(t);this.sortEdges();for(var e=0;e<this.outEdges.size();e++){var n=this.outEdges.get(e);if(n.getEdge()==t)return e}return-1},e.prototype.getIndex2=function(t){this.sortEdges();for(var e=0;e<this.outEdges.size();e++){var n=this.outEdges.get(e);if(n==t)return e}return-1},e.prototype.getIndex3=function(t){var e=toInt(t%this.outEdges.size());return 0>e&&(e+=this.outEdges.size()),e},e.prototype.getNextEdge=function(t){var e=this.getIndex(t);return this.outEdges.get(getIndex(e+1))},e.prototype.getNextCWEdge=function(t){var e=this.getIndex(t);return this.outEdges.get(getIndex(e-1))},jsts.planargraph.DirectedEdgeStar=e}(),function(){var t=jsts.planargraph.GraphComponent,e=jsts.planargraph.DirectedEdgeStar,n=function(t,n){this.pt=t,this.deStar=n||new e};n.prototype=new t,n.getEdgesBetween=function(t,e){var n=DirectedEdge.toEdges(t.getOutEdges().getEdges()),r=new javascript.util.HashSet(n),o=DirectedEdge.toEdges(e.getOutEdges().getEdges());return r.retainAll(o),r},n.prototype.pt=null,n.prototype.deStar=null,n.prototype.getCoordinate=function(){return this.pt},n.prototype.addOutEdge=function(t){this.deStar.add(t)},n.prototype.getOutEdges=function(){return this.deStar},n.prototype.getDegree=function(){return this.deStar.getDegree()},n.prototype.getIndex=function(t){return this.deStar.getIndex(t)},n.prototype.remove=function(t){return void 0===t?this.remove2():void this.deStar.remove(t)},n.prototype.remove2=function(){this.pt=null},n.prototype.isRemoved=function(){return null==this.pt},jsts.planargraph.Node=n}(),function(){var t=function(){this.nodeMap=new javascript.util.TreeMap};t.prototype.nodeMap=null,t.prototype.add=function(t){return this.nodeMap.put(t.getCoordinate(),t),t},t.prototype.remove=function(t){return this.nodeMap.remove(t)},t.prototype.find=function(t){return this.nodeMap.get(t)},t.prototype.iterator=function(){return this.nodeMap.values().iterator()},t.prototype.values=function(){return this.nodeMap.values()},jsts.planargraph.NodeMap=t}(),function(){var t=javascript.util.ArrayList,e=function(){this.edges=new javascript.util.HashSet,this.dirEdges=new javascript.util.HashSet,this.nodeMap=new jsts.planargraph.NodeMap};e.prototype.edges=null,e.prototype.dirEdges=null,e.prototype.nodeMap=null,e.prototype.findNode=function(t){return this.nodeMap.find(t)},e.prototype.add=function(t){return t instanceof jsts.planargraph.Edge?this.add2(t):t instanceof jsts.planargraph.DirectedEdge?this.add3(t):void this.nodeMap.add(t)},e.prototype.add2=function(t){this.edges.add(t),this.add(t.getDirEdge(0)),this.add(t.getDirEdge(1))},e.prototype.add3=function(t){this.dirEdges.add(t)},e.prototype.nodeIterator=function(){return this.nodeMap.iterator()},e.prototype.contains=function(t){return t instanceof jsts.planargraph.DirectedEdge?this.contains2(t):this.edges.contains(t)},e.prototype.contains2=function(t){return this.dirEdges.contains(t)},e.prototype.getNodes=function(){return this.nodeMap.values()},e.prototype.dirEdgeIterator=function(){return this.dirEdges.iterator()},e.prototype.edgeIterator=function(){return this.edges.iterator()},e.prototype.getEdges=function(){return this.edges},e.prototype.remove=function(t){return t instanceof jsts.planargraph.DirectedEdge?this.remove2(t):(this.remove(t.getDirEdge(0)),this.remove(t.getDirEdge(1)),this.edges.remove(t),void this.edge.remove())},e.prototype.remove2=function(t){if(t instanceof jsts.planargraph.Node)return this.remove3(t);var e=t.getSym();null!=e&&e.setSym(null),t.getFromNode().remove(t),t.remove(),this.dirEdges.remove(t)},e.prototype.remove3=function(t){for(var e=t.getOutEdges().getEdges(),n=e.iterator();n.hasNext();){var r=n.next(),o=r.getSym();null!=o&&this.remove(o),this.dirEdges.remove(r);var i=r.getEdge();null!=i&&this.edges.remove(i)}this.nodeMap.remove(t.getCoordinate()),t.remove()},e.prototype.findNodesOfDegree=function(e){for(var n=new t,r=this.nodeIterator();r.hasNext();){var o=r.next();o.getDegree()==e&&n.add(o)}return n},jsts.planargraph.PlanarGraph=e}(),function(){var t=javascript.util.ArrayList,e=javascript.util.Stack,n=javascript.util.HashSet,r=jsts.util.Assert,o=jsts.operation.polygonize.EdgeRing,i=jsts.operation.polygonize.PolygonizeEdge,s=jsts.operation.polygonize.PolygonizeDirectedEdge,a=jsts.planargraph.PlanarGraph,u=jsts.planargraph.Node,l=function(t){a.apply(this),this.factory=t};l.prototype=new a,l.getDegreeNonDeleted=function(t){for(var e=t.getOutEdges().getEdges(),n=0,r=e.iterator();r.hasNext();){var o=r.next();o.isMarked()||n++}return n},l.getDegree=function(t,e){for(var n=t.getOutEdges().getEdges(),r=0,o=n.iterator();o.hasNext();){var i=o.next();i.getLabel()==e&&r++}return r},l.deleteAllEdges=function(t){for(var e=t.getOutEdges().getEdges(),n=e.iterator();n.hasNext();){var r=n.next();r.setMarked(!0);var o=r.getSym();null!=o&&o.setMarked(!0)}},l.prototype.factory=null,l.prototype.addEdge=function(t){if(!t.isEmpty()){var e=jsts.geom.CoordinateArrays.removeRepeatedPoints(t.getCoordinates());if(!(e.length<2)){var n=e[0],r=e[e.length-1],o=this.getNode(n),a=this.getNode(r),u=new s(o,a,e[1],(!0)),l=new s(a,o,e[e.length-2],(!1)),c=new i(t);c.setDirectedEdges(u,l),this.add(c)}}},l.prototype.getNode=function(t){var e=this.findNode(t);return null==e&&(e=new u(t),this.add(e)),e},l.prototype.computeNextCWEdges=function(){for(var t=this.nodeIterator();t.hasNext();){var e=t.next();l.computeNextCWEdges(e)}},l.prototype.convertMaximalToMinimalEdgeRings=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel(),o=l.findIntersectionNodes(n,r);if(null!=o)for(var i=o.iterator();i.hasNext();){var s=i.next();l.computeNextCCWEdges(s,r)}}},l.findIntersectionNodes=function(e,n){var o=e,i=null;do{var s=o.getFromNode();l.getDegree(s,n)>1&&(null==i&&(i=new t),i.add(s)),o=o.getNext(),r.isTrue(null!=o,"found null DE in ring"),r.isTrue(o==e||!o.isInRing(),"found DE already in ring")}while(o!=e);return i},l.prototype.getEdgeRings=function(){this.computeNextCWEdges(),l.label(this.dirEdges,-1);var e=l.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(e);for(var n=new t,r=this.dirEdges.iterator();r.hasNext();){var o=r.next();if(!o.isMarked()&&!o.isInRing()){var i=this.findEdgeRing(o);n.add(i)}}return n},l.findLabeledEdgeRings=function(e){for(var n=new t,r=1,o=e.iterator();o.hasNext();){var i=o.next();if(!(i.isMarked()||i.getLabel()>=0)){n.add(i);var s=l.findDirEdgesInRing(i);l.label(s,r),r++}}return n},l.prototype.deleteCutEdges=function(){this.computeNextCWEdges(),l.findLabeledEdgeRings(this.dirEdges);for(var e=new t,n=this.dirEdges.iterator();n.hasNext();){var r=n.next();if(!r.isMarked()){var o=r.getSym();if(r.getLabel()==o.getLabel()){r.setMarked(!0),o.setMarked(!0);var i=r.getEdge();e.add(i.getLine())}}}return e},l.label=function(t,e){for(var n=t.iterator();n.hasNext();){var r=n.next();r.setLabel(e)}},l.computeNextCWEdges=function(t){for(var e=t.getOutEdges(),n=null,r=null,o=e.getEdges().iterator();o.hasNext();){var i=o.next();if(!i.isMarked()){if(null==n&&(n=i),null!=r){var s=r.getSym();s.setNext(i)}r=i}}if(null!=r){var s=r.getSym();s.setNext(n)}},l.computeNextCCWEdges=function(t,e){for(var n=t.getOutEdges(),o=null,i=null,s=n.getEdges(),a=s.size()-1;a>=0;a--){var u=s.get(a),l=u.getSym(),c=null;u.getLabel()==e&&(c=u);var p=null;l.getLabel()==e&&(p=l),(null!=c||null!=p)&&(null!=p&&(i=p),null!=c&&(null!=i&&(i.setNext(c),i=null),null==o&&(o=c)))}null!=i&&(r.isTrue(null!=o),i.setNext(o))},l.findDirEdgesInRing=function(e){var n=e,o=new t;do o.add(n),n=n.getNext(),r.isTrue(null!=n,"found null DE in ring"),r.isTrue(n==e||!n.isInRing(),"found DE already in ring");while(n!=e);return o},l.prototype.findEdgeRing=function(t){var e=t,n=new o(this.factory);do n.add(e),e.setRing(n),e=e.getNext(),r.isTrue(null!=e,"found null DE in ring"),r.isTrue(e==t||!e.isInRing(),"found DE already in ring");while(e!=t);return n},l.prototype.deleteDangles=function(){for(var t=this.findNodesOfDegree(1),r=new n,o=new e,i=t.iterator();i.hasNext();)o.push(i.next());for(;!o.isEmpty();){var s=o.pop();l.deleteAllEdges(s);for(var a=s.getOutEdges().getEdges(),i=a.iterator();i.hasNext();){var u=i.next();u.setMarked(!0);var c=u.getSym();null!=c&&c.setMarked(!0);var p=u.getEdge();r.add(p.getLine());var h=u.getToNode();
1==l.getDegreeNonDeleted(h)&&o.push(h)}}return r},l.prototype.computeDepthParity=function(){for(;;){var t=null;if(null==t)return;this.computeDepthParity(t)}},l.prototype.computeDepthParity=function(){},jsts.operation.polygonize.PolygonizeGraph=l}(),jsts.index.strtree.Interval=function(){var t;return 1===arguments.length?(t=arguments[0],jsts.index.strtree.Interval(t.min,t.max)):void(2===arguments.length&&(jsts.util.Assert.isTrue(this.min<=this.max),this.min=arguments[0],this.max=arguments[1]))},jsts.index.strtree.Interval.prototype.min=null,jsts.index.strtree.Interval.prototype.max=null,jsts.index.strtree.Interval.prototype.getCentre=function(){return(this.min+this.max)/2},jsts.index.strtree.Interval.prototype.expandToInclude=function(t){return this.max=Math.max(this.max,t.max),this.min=Math.min(this.min,t.min),this},jsts.index.strtree.Interval.prototype.intersects=function(t){return!(t.min>this.max||t.max<this.min)},jsts.index.strtree.Interval.prototype.equals=function(t){return t instanceof jsts.index.strtree.Interval&&(other=t,this.min===other.min&&this.max===other.max)},jsts.geom.GeometryFactory=function(t){this.precisionModel=t||new jsts.geom.PrecisionModel},jsts.geom.GeometryFactory.prototype.precisionModel=null,jsts.geom.GeometryFactory.prototype.getPrecisionModel=function(){return this.precisionModel},jsts.geom.GeometryFactory.prototype.createPoint=function(t){var e=new jsts.geom.Point(t,this);return e},jsts.geom.GeometryFactory.prototype.createLineString=function(t){var e=new jsts.geom.LineString(t,this);return e},jsts.geom.GeometryFactory.prototype.createLinearRing=function(t){var e=new jsts.geom.LinearRing(t,this);return e},jsts.geom.GeometryFactory.prototype.createPolygon=function(t,e){var n=new jsts.geom.Polygon(t,e,this);return n},jsts.geom.GeometryFactory.prototype.createMultiPoint=function(t){if(t&&t[0]instanceof jsts.geom.Coordinate){var e,n=[];for(e=0;e<t.length;e++)n.push(this.createPoint(t[e]));t=n}return new jsts.geom.MultiPoint(t,this)},jsts.geom.GeometryFactory.prototype.createMultiLineString=function(t){return new jsts.geom.MultiLineString(t,this)},jsts.geom.GeometryFactory.prototype.createMultiPolygon=function(t){return new jsts.geom.MultiPolygon(t,this)},jsts.geom.GeometryFactory.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,o=t.iterator();o.hasNext();){var i=o.next(),s=i.CLASS_NAME;null===e&&(e=s),s!==e&&(n=!0),i.isGeometryCollectionBase()&&(r=!0)}if(null===e)return this.createGeometryCollection(null);if(n||r)return this.createGeometryCollection(t.toArray());var a=t.get(0),u=t.size()>1;if(u){if(a instanceof jsts.geom.Polygon)return this.createMultiPolygon(t.toArray());if(a instanceof jsts.geom.LineString)return this.createMultiLineString(t.toArray());if(a instanceof jsts.geom.Point)return this.createMultiPoint(t.toArray());jsts.util.Assert.shouldNeverReachHere("Unhandled class: "+a)}return a},jsts.geom.GeometryFactory.prototype.createGeometryCollection=function(t){return new jsts.geom.GeometryCollection(t,this)},jsts.geom.GeometryFactory.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new jsts.geom.Coordinate(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new jsts.geom.Coordinate(t.getMinX(),t.getMinY()),new jsts.geom.Coordinate(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new jsts.geom.Coordinate(t.getMinX(),t.getMinY()),new jsts.geom.Coordinate(t.getMinX(),t.getMaxY()),new jsts.geom.Coordinate(t.getMaxX(),t.getMaxY()),new jsts.geom.Coordinate(t.getMaxX(),t.getMinY()),new jsts.geom.Coordinate(t.getMinX(),t.getMinY())]),null)},jsts.geomgraph.NodeFactory=function(){},jsts.geomgraph.NodeFactory.prototype.createNode=function(t){return new jsts.geomgraph.Node(t,null)},function(){jsts.geomgraph.Position=function(){},jsts.geomgraph.Position.ON=0,jsts.geomgraph.Position.LEFT=1,jsts.geomgraph.Position.RIGHT=2,jsts.geomgraph.Position.opposite=function(t){return t===jsts.geomgraph.Position.LEFT?jsts.geomgraph.Position.RIGHT:t===jsts.geomgraph.Position.RIGHT?jsts.geomgraph.Position.LEFT:t}}(),jsts.geomgraph.TopologyLocation=function(){if(this.location=[],3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];this.init(3),this.location[jsts.geomgraph.Position.ON]=t,this.location[jsts.geomgraph.Position.LEFT]=e,this.location[jsts.geomgraph.Position.RIGHT]=n}else if(arguments[0]instanceof jsts.geomgraph.TopologyLocation){var r=arguments[0];if(this.init(r.location.length),null!=r)for(var o=0;o<this.location.length;o++)this.location[o]=r.location[o]}else if("number"==typeof arguments[0]){var t=arguments[0];this.init(1),this.location[jsts.geomgraph.Position.ON]=t}else if(arguments[0]instanceof Array){var i=arguments[0];this.init(i.length)}},jsts.geomgraph.TopologyLocation.prototype.location=null,jsts.geomgraph.TopologyLocation.prototype.init=function(t){this.location[t-1]=null,this.setAllLocations(jsts.geom.Location.NONE)},jsts.geomgraph.TopologyLocation.prototype.get=function(t){return t<this.location.length?this.location[t]:jsts.geom.Location.NONE},jsts.geomgraph.TopologyLocation.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==jsts.geom.Location.NONE)return!1;return!0},jsts.geomgraph.TopologyLocation.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===jsts.geom.Location.NONE)return!0;return!1},jsts.geomgraph.TopologyLocation.prototype.isEqualOnSide=function(t,e){return this.location[e]==t.location[e]},jsts.geomgraph.TopologyLocation.prototype.isArea=function(){return this.location.length>1},jsts.geomgraph.TopologyLocation.prototype.isLine=function(){return 1===this.location.length},jsts.geomgraph.TopologyLocation.prototype.flip=function(){if(!(this.location.length<=1)){var t=this.location[jsts.geomgraph.Position.LEFT];this.location[jsts.geomgraph.Position.LEFT]=this.location[jsts.geomgraph.Position.RIGHT],this.location[jsts.geomgraph.Position.RIGHT]=t}},jsts.geomgraph.TopologyLocation.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},jsts.geomgraph.TopologyLocation.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===jsts.geom.Location.NONE&&(this.location[e]=t)},jsts.geomgraph.TopologyLocation.prototype.setLocation=function(t,e){void 0!==e?this.location[t]=e:this.setLocation(jsts.geomgraph.Position.ON,t)},jsts.geomgraph.TopologyLocation.prototype.getLocations=function(){return location},jsts.geomgraph.TopologyLocation.prototype.setLocations=function(t,e,n){this.location[jsts.geomgraph.Position.ON]=t,this.location[jsts.geomgraph.Position.LEFT]=e,this.location[jsts.geomgraph.Position.RIGHT]=n},jsts.geomgraph.TopologyLocation.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},jsts.geomgraph.TopologyLocation.prototype.merge=function(t){if(t.location.length>this.location.length){var e=[];e[jsts.geomgraph.Position.ON]=this.location[jsts.geomgraph.Position.ON],e[jsts.geomgraph.Position.LEFT]=jsts.geom.Location.NONE,e[jsts.geomgraph.Position.RIGHT]=jsts.geom.Location.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===jsts.geom.Location.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},jsts.geomgraph.Label=function(){this.elt=[];var t,e,n,r,o;4===arguments.length?(t=arguments[0],e=arguments[1],n=arguments[2],o=arguments[3],this.elt[0]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE,jsts.geom.Location.NONE,jsts.geom.Location.NONE),this.elt[1]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE,jsts.geom.Location.NONE,jsts.geom.Location.NONE),this.elt[t].setLocations(e,n,o)):3===arguments.length?(e=arguments[0],n=arguments[1],o=arguments[2],this.elt[0]=new jsts.geomgraph.TopologyLocation(e,n,o),this.elt[1]=new jsts.geomgraph.TopologyLocation(e,n,o)):2===arguments.length?(t=arguments[0],e=arguments[1],this.elt[0]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE),this.elt[1]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE),this.elt[t].setLocation(e)):arguments[0]instanceof jsts.geomgraph.Label?(r=arguments[0],this.elt[0]=new jsts.geomgraph.TopologyLocation(r.elt[0]),this.elt[1]=new jsts.geomgraph.TopologyLocation(r.elt[1])):"number"==typeof arguments[0]&&(e=arguments[0],this.elt[0]=new jsts.geomgraph.TopologyLocation(e),this.elt[1]=new jsts.geomgraph.TopologyLocation(e))},jsts.geomgraph.Label.toLineLabel=function(t){var e,n=new jsts.geomgraph.Label(jsts.geom.Location.NONE);for(e=0;2>e;e++)n.setLocation(e,t.getLocation(e));return n},jsts.geomgraph.Label.prototype.elt=null,jsts.geomgraph.Label.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},jsts.geomgraph.Label.prototype.getLocation=function(t,e){return 1==arguments.length?this.getLocation2.apply(this,arguments):this.elt[t].get(e)},jsts.geomgraph.Label.prototype.getLocation2=function(t){return this.elt[t].get(jsts.geomgraph.Position.ON)},jsts.geomgraph.Label.prototype.setLocation=function(t,e,n){return 2==arguments.length?void this.setLocation2.apply(this,arguments):void this.elt[t].setLocation(e,n)},jsts.geomgraph.Label.prototype.setLocation2=function(t,e){this.elt[t].setLocation(jsts.geomgraph.Position.ON,e)},jsts.geomgraph.Label.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},jsts.geomgraph.Label.prototype.setAllLocationsIfNull=function(t,e){return 1==arguments.length?void this.setAllLocationsIfNull2.apply(this,arguments):void this.elt[t].setAllLocationsIfNull(e)},jsts.geomgraph.Label.prototype.setAllLocationsIfNull2=function(t){this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)},jsts.geomgraph.Label.prototype.merge=function(t){var e;for(e=0;2>e;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new jsts.geomgraph.TopologyLocation(t.elt[e]):this.elt[e].merge(t.elt[e])},jsts.geomgraph.Label.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},jsts.geomgraph.Label.prototype.isNull=function(t){return this.elt[t].isNull()},jsts.geomgraph.Label.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},jsts.geomgraph.Label.prototype.isArea=function(){return 1==arguments.length?this.isArea2(arguments[0]):this.elt[0].isArea()||this.elt[1].isArea()},jsts.geomgraph.Label.prototype.isArea2=function(t){return this.elt[t].isArea()},jsts.geomgraph.Label.prototype.isLine=function(t){return this.elt[t].isLine()},jsts.geomgraph.Label.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},jsts.geomgraph.Label.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},jsts.geomgraph.Label.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new jsts.geomgraph.TopologyLocation(this.elt[t].location[0]))},jsts.geomgraph.EdgeRing=function(t,e){this.edges=[],this.pts=[],this.holes=[],this.label=new jsts.geomgraph.Label(jsts.geom.Location.NONE),this.geometryFactory=e,t&&(this.computePoints(t),this.computeRing())},jsts.geomgraph.EdgeRing.prototype.startDe=null,jsts.geomgraph.EdgeRing.prototype.maxNodeDegree=-1,jsts.geomgraph.EdgeRing.prototype.edges=null,jsts.geomgraph.EdgeRing.prototype.pts=null,jsts.geomgraph.EdgeRing.prototype.label=null,jsts.geomgraph.EdgeRing.prototype.ring=null,jsts.geomgraph.EdgeRing.prototype._isHole=null,jsts.geomgraph.EdgeRing.prototype.shell=null,jsts.geomgraph.EdgeRing.prototype.holes=null,jsts.geomgraph.EdgeRing.prototype.geometryFactory=null,jsts.geomgraph.EdgeRing.prototype.isIsolated=function(){return 1==this.label.getGeometryCount()},jsts.geomgraph.EdgeRing.prototype.isHole=function(){return this._isHole},jsts.geomgraph.EdgeRing.prototype.getCoordinate=function(t){return this.pts[t]},jsts.geomgraph.EdgeRing.prototype.getLinearRing=function(){return this.ring},jsts.geomgraph.EdgeRing.prototype.getLabel=function(){return this.label},jsts.geomgraph.EdgeRing.prototype.isShell=function(){return null===this.shell},jsts.geomgraph.EdgeRing.prototype.getShell=function(){return this.shell},jsts.geomgraph.EdgeRing.prototype.setShell=function(t){this.shell=t,null!==t&&t.addHole(this)},jsts.geomgraph.EdgeRing.prototype.addHole=function(t){this.holes.push(t)},jsts.geomgraph.EdgeRing.prototype.toPolygon=function(){for(var t=[],e=0;e<this.holes.length;e++)t[e]=this.holes[e].getLinearRing();var n=this.geometryFactory.createPolygon(this.getLinearRing(),t);return n},jsts.geomgraph.EdgeRing.prototype.computeRing=function(){if(null===this.ring){for(var t=[],e=0;e<this.pts.length;e++)t[e]=this.pts[e];this.ring=this.geometryFactory.createLinearRing(t),this._isHole=jsts.algorithm.CGAlgorithms.isCCW(this.ring.getCoordinates())}},jsts.geomgraph.EdgeRing.prototype.getNext=function(){throw new jsts.error.AbstractInvocationError},jsts.geomgraph.EdgeRing.prototype.setEdgeRing=function(){throw new jsts.error.AbstractInvocationError},jsts.geomgraph.EdgeRing.prototype.getEdges=function(){return this.edges},jsts.geomgraph.EdgeRing.prototype.computePoints=function(t){this.startDe=t;var e=t,n=!0;do{if(null===e)throw new jsts.error.TopologyError("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new jsts.error.TopologyError("Directed Edge visited twice during ring-building at "+e.getCoordinate());this.edges.push(e);var r=e.getLabel();jsts.util.Assert.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this.startDe)},jsts.geomgraph.EdgeRing.prototype.getMaxNodeDegree=function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree},jsts.geomgraph.EdgeRing.prototype.computeMaxNodeDegree=function(){this.maxNodeDegree=0;var t=this.startDe;do{var e=t.getNode(),n=e.getEdges().getOutgoingDegree(this);n>this.maxNodeDegree&&(this.maxNodeDegree=n),t=this.getNext(t)}while(t!==this.startDe);this.maxNodeDegree*=2},jsts.geomgraph.EdgeRing.prototype.setInResult=function(){var t=this.startDe;do t.getEdge().setInResult(!0),t=t.getNext();while(t!=this.startDe)},jsts.geomgraph.EdgeRing.prototype.mergeLabel=function(t){this.mergeLabel2(t,0),this.mergeLabel2(t,1)},jsts.geomgraph.EdgeRing.prototype.mergeLabel2=function(t,e){var n=t.getLocation(e,jsts.geomgraph.Position.RIGHT);if(n!=jsts.geom.Location.NONE)return this.label.getLocation(e)===jsts.geom.Location.NONE?void this.label.setLocation(e,n):void 0},jsts.geomgraph.EdgeRing.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var o=1;n&&(o=0);for(var i=o;i<r.length;i++)this.pts.push(r[i])}else{var o=r.length-2;n&&(o=r.length-1);for(var i=o;i>=0;i--)this.pts.push(r[i])}},jsts.geomgraph.EdgeRing.prototype.containsPoint=function(t){var e=this.getLinearRing(),n=e.getEnvelopeInternal();if(!n.contains(t))return!1;if(!jsts.algorithm.CGAlgorithms.isPointInRing(t,e.getCoordinates()))return!1;for(var r=0;r<this.holes.length;r++){var o=this.holes[r];if(o.containsPoint(t))return!1}return!0},function(){jsts.geom.LinearRing=function(){jsts.geom.LineString.apply(this,arguments)},jsts.geom.LinearRing.prototype=new jsts.geom.LineString,jsts.geom.LinearRing.constructor=jsts.geom.LinearRing,jsts.geom.LinearRing.prototype.getBoundaryDimension=function(){return jsts.geom.Dimension.FALSE},jsts.geom.LinearRing.prototype.isSimple=function(){return!0},jsts.geom.LinearRing.prototype.getGeometryType=function(){return"LinearRing"},jsts.geom.LinearRing.MINIMUM_VALID_SIZE=4,jsts.geom.LinearRing.prototype.CLASS_NAME="jsts.geom.LinearRing"}(),jsts.index.strtree.Boundable=function(){},jsts.index.strtree.Boundable.prototype.getBounds=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractNode=function(t){this.level=t,this.childBoundables=[]},jsts.index.strtree.AbstractNode.prototype=new jsts.index.strtree.Boundable,jsts.index.strtree.AbstractNode.constructor=jsts.index.strtree.AbstractNode,jsts.index.strtree.AbstractNode.prototype.childBoundables=null,jsts.index.strtree.AbstractNode.prototype.bounds=null,jsts.index.strtree.AbstractNode.prototype.level=null,jsts.index.strtree.AbstractNode.prototype.getChildBoundables=function(){return this.childBoundables},jsts.index.strtree.AbstractNode.prototype.computeBounds=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractNode.prototype.getBounds=function(){return null===this.bounds&&(this.bounds=this.computeBounds()),this.bounds},jsts.index.strtree.AbstractNode.prototype.getLevel=function(){return this.level},jsts.index.strtree.AbstractNode.prototype.addChildBoundable=function(t){this.childBoundables.push(t)},function(){jsts.noding.Noder=function(){},jsts.noding.Noder.prototype.computeNodes=jsts.abstractFunc,jsts.noding.Noder.prototype.getNodedSubstrings=jsts.abstractFunc}(),function(){var t=jsts.noding.Noder;jsts.noding.SinglePassNoder=function(){},jsts.noding.SinglePassNoder.prototype=new t,jsts.noding.SinglePassNoder.constructor=jsts.noding.SinglePassNoder,jsts.noding.SinglePassNoder.prototype.segInt=null,jsts.noding.SinglePassNoder.prototype.setSegmentIntersector=function(t){this.segInt=t}}(),jsts.index.SpatialIndex=function(){},jsts.index.SpatialIndex.prototype.insert=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.SpatialIndex.prototype.query=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.SpatialIndex.prototype.remove=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractSTRtree=function(t){void 0!==t&&(this.itemBoundables=[],jsts.util.Assert.isTrue(t>1,"Node capacity must be greater than 1"),this.nodeCapacity=t)},jsts.index.strtree.AbstractSTRtree.IntersectsOp=function(){},jsts.index.strtree.AbstractSTRtree.IntersectsOp.prototype.intersects=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractSTRtree.prototype.root=null,jsts.index.strtree.AbstractSTRtree.prototype.built=!1,jsts.index.strtree.AbstractSTRtree.prototype.itemBoundables=null,jsts.index.strtree.AbstractSTRtree.prototype.nodeCapacity=null,jsts.index.strtree.AbstractSTRtree.prototype.build=function(){jsts.util.Assert.isTrue(!this.built),this.root=0===this.itemBoundables.length?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.built=!0},jsts.index.strtree.AbstractSTRtree.prototype.createNode=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractSTRtree.prototype.createParentBoundables=function(t,e){jsts.util.Assert.isTrue(!(0===t.length));var n=[];n.push(this.createNode(e));for(var r=[],o=0;o<t.length;o++)r.push(t[o]);r.sort(this.getComparator());for(var o=0;o<r.length;o++){var i=r[o];this.lastNode(n).getChildBoundables().length===this.getNodeCapacity()&&n.push(this.createNode(e)),this.lastNode(n).addChildBoundable(i)}return n},jsts.index.strtree.AbstractSTRtree.prototype.lastNode=function(t){return t[t.length-1]},jsts.index.strtree.AbstractSTRtree.prototype.compareDoubles=function(t,e){return t>e?1:e>t?-1:0},jsts.index.strtree.AbstractSTRtree.prototype.createHigherLevels=function(t,e){jsts.util.Assert.isTrue(!(0===t.length));var n=this.createParentBoundables(t,e+1);return 1===n.length?n[0]:this.createHigherLevels(n,e+1)},jsts.index.strtree.AbstractSTRtree.prototype.getRoot=function(){return this.built||this.build(),this.root},jsts.index.strtree.AbstractSTRtree.prototype.getNodeCapacity=function(){return this.nodeCapacity},jsts.index.strtree.AbstractSTRtree.prototype.size=function(){return 1===arguments.length?this.size2(arguments[0]):(this.built||this.build(),0===this.itemBoundables.length?0:this.size2(root))},jsts.index.strtree.AbstractSTRtree.prototype.size2=function(t){for(var e=0,n=t.getChildBoundables(),r=0;r<n.length;r++){var o=n[r];o instanceof jsts.index.strtree.AbstractNode?e+=this.size(o):o instanceof jsts.index.strtree.ItemBoundable&&(e+=1)}return e},jsts.index.strtree.AbstractSTRtree.prototype.depth=function(){return 1===arguments.length?this.depth2(arguments[0]):(this.built||this.build(),0===this.itemBoundables.length?0:this.depth2(root))},jsts.index.strtree.AbstractSTRtree.prototype.depth2=function(){for(var t=0,e=node.getChildBoundables(),n=0;n<e.length;n++){var r=e[n];if(r instanceof jsts.index.strtree.AbstractNode){var o=this.depth(r);o>t&&(t=o)}}return t+1},jsts.index.strtree.AbstractSTRtree.prototype.insert=function(t,e){jsts.util.Assert.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.push(new jsts.index.strtree.ItemBoundable(t,e))},jsts.index.strtree.AbstractSTRtree.prototype.query=function(t){arguments.length>1&&this.query2.apply(this,arguments),this.built||this.build();var e=[];return 0===this.itemBoundables.length?(jsts.util.Assert.isTrue(null===this.root.getBounds()),e):(this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.query3(t,this.root,e),e)},jsts.index.strtree.AbstractSTRtree.prototype.query2=function(t,e){arguments.length>2&&this.query3.apply(this,arguments),this.built||this.build(),0===this.itemBoundables.length&&jsts.util.Assert.isTrue(null===this.root.getBounds()),this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.query4(t,this.root,e)},jsts.index.strtree.AbstractSTRtree.prototype.query3=function(t,e,n){arguments[2]instanceof Array||this.query4.apply(this,arguments);for(var r=e.getChildBoundables(),o=0;o<r.length;o++){var i=r[o];this.getIntersectsOp().intersects(i.getBounds(),t)&&(i instanceof jsts.index.strtree.AbstractNode?this.query3(t,i,n):i instanceof jsts.index.strtree.ItemBoundable?n.push(i.getItem()):jsts.util.Assert.shouldNeverReachHere())}},jsts.index.strtree.AbstractSTRtree.prototype.query4=function(t,e,n){for(var r=e.getChildBoundables(),o=0;o<r.length;o++){var i=r[o];this.getIntersectsOp().intersects(i.getBounds(),t)&&(i instanceof jsts.index.strtree.AbstractNode?this.query4(t,i,n):i instanceof jsts.index.strtree.ItemBoundable?n.visitItem(i.getItem()):jsts.util.Assert.shouldNeverReachHere())}},jsts.index.strtree.AbstractSTRtree.prototype.getIntersectsOp=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractSTRtree.prototype.itemsTree=function(){if(1===arguments.length)return this.itemsTree2.apply(this,arguments);this.built||this.build();var t=this.itemsTree2(this.root);return null===t?[]:t},jsts.index.strtree.AbstractSTRtree.prototype.itemsTree2=function(t){for(var e=[],n=t.getChildBoundables(),r=0;r<n.length;r++){var o=n[r];if(o instanceof jsts.index.strtree.AbstractNode){var i=this.itemsTree(o);null!=i&&e.push(i)}else o instanceof jsts.index.strtree.ItemBoundable?e.push(o.getItem()):jsts.util.Assert.shouldNeverReachHere()}return e.length<=0?null:e},jsts.index.strtree.AbstractSTRtree.prototype.remove=function(t,e){return this.built||this.build(),0===this.itemBoundables.length&&jsts.util.Assert.isTrue(null==this.root.getBounds()),!!this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.remove2(t,this.root,e)},jsts.index.strtree.AbstractSTRtree.prototype.remove2=function(t,e,n){var r=this.removeItem(e,n);if(r)return!0;for(var o=null,i=e.getChildBoundables(),s=0;s<i.length;s++){var a=i[s];if(this.getIntersectsOp().intersects(a.getBounds(),t)&&a instanceof jsts.index.strtree.AbstractNode&&(r=this.remove(t,a,n))){o=a;break}}return null!=o&&0===o.getChildBoundables().length&&i.splice(i.indexOf(o),1),r},jsts.index.strtree.AbstractSTRtree.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables(),o=0;o<r.length;o++){var i=r[o];i instanceof jsts.index.strtree.ItemBoundable&&i.getItem()===e&&(n=i)}return null!==n&&(r.splice(r.indexOf(n),1),!0)},jsts.index.strtree.AbstractSTRtree.prototype.boundablesAtLevel=function(t){if(arguments.length>1)return void this.boundablesAtLevel2.apply(this,arguments);var e=[];return this.boundablesAtLevel2(t,this.root,e),e},jsts.index.strtree.AbstractSTRtree.prototype.boundablesAtLevel2=function(t,e,n){if(jsts.util.Assert.isTrue(t>-2),e.getLevel()===t)return void n.add(e);for(var r=node.getChildBoundables(),o=0;o<r.length;o++){var i=r[o];i instanceof jsts.index.strtree.AbstractNode?this.boundablesAtLevel(t,i,n):(jsts.util.Assert.isTrue(i instanceof jsts.index.strtree.ItemBoundable),-1===t&&n.add(i))}},jsts.index.strtree.AbstractSTRtree.prototype.getComparator=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.STRtree=function(t){t=t||jsts.index.strtree.STRtree.DEFAULT_NODE_CAPACITY,jsts.index.strtree.AbstractSTRtree.call(this,t)},jsts.index.strtree.STRtree.prototype=new jsts.index.strtree.AbstractSTRtree,jsts.index.strtree.STRtree.constructor=jsts.index.strtree.STRtree,jsts.index.strtree.STRtree.prototype.xComparator=function(t,e){return jsts.index.strtree.AbstractSTRtree.prototype.compareDoubles(jsts.index.strtree.STRtree.prototype.centreX(t.getBounds()),jsts.index.strtree.STRtree.prototype.centreX(e.getBounds()))},jsts.index.strtree.STRtree.prototype.yComparator=function(t,e){return jsts.index.strtree.AbstractSTRtree.prototype.compareDoubles(jsts.index.strtree.STRtree.prototype.centreY(t.getBounds()),jsts.index.strtree.STRtree.prototype.centreY(e.getBounds()))},jsts.index.strtree.STRtree.prototype.centreX=function(t){return jsts.index.strtree.STRtree.prototype.avg(t.getMinX(),t.getMaxX())},jsts.index.strtree.STRtree.prototype.centreY=function(t){return jsts.index.strtree.STRtree.prototype.avg(t.getMinY(),t.getMaxY())},jsts.index.strtree.STRtree.prototype.avg=function(t,e){return(t+e)/2},jsts.index.strtree.STRtree.prototype.intersectsOp={intersects:function(t,e){return t.intersects(e)}},jsts.index.strtree.STRtree.prototype.createParentBoundables=function(t,e){jsts.util.Assert.isTrue(!(0===t.length));for(var n=Math.ceil(t.length/this.getNodeCapacity()),r=[],o=0;o<t.length;o++)r.push(t[o]);r.sort(this.xComparator);var i=this.verticalSlices(r,Math.ceil(Math.sqrt(n)));return this.createParentBoundablesFromVerticalSlices(i,e)},jsts.index.strtree.STRtree.prototype.createParentBoundablesFromVerticalSlices=function(t,e){jsts.util.Assert.isTrue(t.length>0);for(var n=[],r=0;r<t.length;r++)n=n.concat(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},jsts.index.strtree.STRtree.prototype.createParentBoundablesFromVerticalSlice=function(t,e){return jsts.index.strtree.AbstractSTRtree.prototype.createParentBoundables.call(this,t,e)},jsts.index.strtree.STRtree.prototype.verticalSlices=function(t,e){for(var n,r,o=Math.ceil(t.length/e),i=[],s=0,a=0;e>a;a++)for(i[a]=[],n=0;s<t.length&&o>n;)r=t[s++],i[a].push(r),n++;return i},jsts.index.strtree.STRtree.DEFAULT_NODE_CAPACITY=10,jsts.index.strtree.STRtree.prototype.createNode=function(t){var e=new jsts.index.strtree.AbstractNode(t);return e.computeBounds=function(){for(var t=null,e=this.getChildBoundables(),n=0;n<e.length;n++){var r=e[n];null===t?t=new jsts.geom.Envelope(r.getBounds()):t.expandToInclude(r.getBounds())}return t},e},jsts.index.strtree.STRtree.prototype.getIntersectsOp=function(){return this.intersectsOp},jsts.index.strtree.STRtree.prototype.insert=function(t,e){t.isNull()||jsts.index.strtree.AbstractSTRtree.prototype.insert.call(this,t,e)},jsts.index.strtree.STRtree.prototype.query=function(){return jsts.index.strtree.AbstractSTRtree.prototype.query.apply(this,arguments)},jsts.index.strtree.STRtree.prototype.remove=function(t,e){return jsts.index.strtree.AbstractSTRtree.prototype.remove.call(this,t,e)},jsts.index.strtree.STRtree.prototype.size=function(){return jsts.index.strtree.AbstractSTRtree.prototype.size.call(this)},jsts.index.strtree.STRtree.prototype.depth=function(){return jsts.index.strtree.AbstractSTRtree.prototype.depth.call(this)},jsts.index.strtree.STRtree.prototype.getComparator=function(){return this.yComparator},jsts.index.strtree.STRtree.prototype.nearestNeighbour=function(t){var e=new jsts.index.strtree.BoundablePair(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour4(e)},jsts.index.strtree.STRtree.prototype.nearestNeighbour2=function(t,e,n){var r=new jsts.index.strtree.ItemBoundable(t,e),o=new jsts.index.strtree.BoundablePair(this.getRoot(),r,n);return this.nearestNeighbour4(o)[0]},jsts.index.strtree.STRtree.prototype.nearestNeighbour3=function(t,e){var n=new jsts.index.strtree.BoundablePair(this.getRoot(),t.getRoot(),e);return this.nearestNeighbour4(n)},jsts.index.strtree.STRtree.prototype.nearestNeighbour4=function(t){return this.nearestNeighbour5(t,Double.POSITIVE_INFINITY)},jsts.index.strtree.STRtree.prototype.nearestNeighbour5=function(t,e){var n=e,r=null,o=[];for(o.push(t);!o.isEmpty()&&n>0;){var i=o.pop(),s=i.getDistance();if(s>=n)break;i.isLeaves()?(n=s,r=i):i.expandToQueue(o,n)}return[r.getBoundable(0).getItem(),r.getBoundable(1).getItem()]},jsts.noding.SegmentString=function(){},jsts.noding.SegmentString.prototype.getData=jsts.abstractFunc,jsts.noding.SegmentString.prototype.setData=jsts.abstractFunc,jsts.noding.SegmentString.prototype.size=jsts.abstractFunc,jsts.noding.SegmentString.prototype.getCoordinate=jsts.abstractFunc,jsts.noding.SegmentString.prototype.getCoordinates=jsts.abstractFunc,jsts.noding.SegmentString.prototype.isClosed=jsts.abstractFunc,jsts.noding.NodableSegmentString=function(){},jsts.noding.NodableSegmentString.prototype=new jsts.noding.SegmentString,jsts.noding.NodableSegmentString.prototype.addIntersection=jsts.abstractFunc,jsts.noding.NodedSegmentString=function(t,e){this.nodeList=new jsts.noding.SegmentNodeList(this),this.pts=t,this.data=e},jsts.noding.NodedSegmentString.prototype=new jsts.noding.NodableSegmentString,jsts.noding.NodedSegmentString.constructor=jsts.noding.NodedSegmentString,jsts.noding.NodedSegmentString.getNodedSubstrings=function(t){if(2===arguments.length)return void jsts.noding.NodedSegmentString.getNodedSubstrings2.apply(this,arguments);var e=new javascript.util.ArrayList;return jsts.noding.NodedSegmentString.getNodedSubstrings2(t,e),e},jsts.noding.NodedSegmentString.getNodedSubstrings2=function(t,e){for(var n=t.iterator();n.hasNext();){var r=n.next();r.getNodeList().addSplitEdges(e)}},jsts.noding.NodedSegmentString.prototype.nodeList=null,jsts.noding.NodedSegmentString.prototype.pts=null,jsts.noding.NodedSegmentString.prototype.data=null,jsts.noding.NodedSegmentString.prototype.getData=function(){return this.data},jsts.noding.NodedSegmentString.prototype.setData=function(t){this.data=t},jsts.noding.NodedSegmentString.prototype.getNodeList=function(){return this.nodeList},jsts.noding.NodedSegmentString.prototype.size=function(){return this.pts.length},jsts.noding.NodedSegmentString.prototype.getCoordinate=function(t){return this.pts[t]},jsts.noding.NodedSegmentString.prototype.getCoordinates=function(){return this.pts},jsts.noding.NodedSegmentString.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},jsts.noding.NodedSegmentString.prototype.getSegmentOctant=function(t){return t===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},jsts.noding.NodedSegmentString.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:jsts.noding.Octant.octant(t,e)},jsts.noding.NodedSegmentString.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},jsts.noding.NodedSegmentString.prototype.addIntersection=function(t,e,n,r){if(t instanceof jsts.geom.Coordinate)return void this.addIntersection2.apply(this,arguments);var o=new jsts.geom.Coordinate(t.getIntersection(r));this.addIntersection2(o,e)},jsts.noding.NodedSegmentString.prototype.addIntersection2=function(t,e){this.addIntersectionNode(t,e)},jsts.noding.NodedSegmentString.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this.pts.length){var o=this.pts[r];t.equals2D(o)&&(n=r)}var i=this.nodeList.add(t,n);return i},jsts.noding.NodedSegmentString.prototype.toString=function(){var t=new jsts.geom.GeometryFactory;return(new jsts.io.WKTWriter).write(t.createLineString(this.pts));
},jsts.index.chain.MonotoneChainBuilder=function(){},jsts.index.chain.MonotoneChainBuilder.toIntArray=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e},jsts.index.chain.MonotoneChainBuilder.getChains=function(t){return 2===arguments.length?jsts.index.chain.MonotoneChainBuilder.getChains2.apply(this,arguments):jsts.index.chain.MonotoneChainBuilder.getChains2(t,null)},jsts.index.chain.MonotoneChainBuilder.getChains2=function(t,e){for(var n=[],r=jsts.index.chain.MonotoneChainBuilder.getChainStartIndices(t),o=0;o<r.length-1;o++){var i=new jsts.index.chain.MonotoneChain(t,r[o],r[o+1],e);n.push(i)}return n},jsts.index.chain.MonotoneChainBuilder.getChainStartIndices=function(t){var e=0,n=[];n.push(e);do{var r=jsts.index.chain.MonotoneChainBuilder.findChainEnd(t,e);n.push(r),e=r}while(e<t.length-1);var o=jsts.index.chain.MonotoneChainBuilder.toIntArray(n);return o},jsts.index.chain.MonotoneChainBuilder.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=jsts.geomgraph.Quadrant.quadrant(t[n],t[n+1]),o=e+1;o<t.length;){if(!t[o-1].equals2D(t[o])){var i=jsts.geomgraph.Quadrant.quadrant(t[o-1],t[o]);if(i!==r)break}o++}return o-1},jsts.algorithm.LineIntersector=function(){this.inputLines=[[],[]],this.intPt=[null,null],this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=jsts.algorithm.LineIntersector.NO_INTERSECTION},jsts.algorithm.LineIntersector.NO_INTERSECTION=0,jsts.algorithm.LineIntersector.POINT_INTERSECTION=1,jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION=2,jsts.algorithm.LineIntersector.prototype.setPrecisionModel=function(t){this.precisionModel=t},jsts.algorithm.LineIntersector.prototype.getEndpoint=function(t,e){return this.inputLines[t][e]},jsts.algorithm.LineIntersector.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),o=Math.abs(n.y-e.y),i=-1;if(t.equals(e))i=0;else if(t.equals(n))i=r>o?r:o;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);i=r>o?s:a,0!==i||t.equals(e)||(i=Math.max(s,a))}if(0===i&&!t.equals(e))throw new jsts.error.IllegalArgumentError("Bad distance calculation");return i},jsts.algorithm.LineIntersector.nonRobustComputeEdgeDistance=function(t,e){var n=t.x-e.x,r=t.y-e.y,o=Math.sqrt(n*n+r*r);if(0!==o||t.equals(e))throw new jsts.error.IllegalArgumentError("Invalid distance calculation");return o},jsts.algorithm.LineIntersector.prototype.result=null,jsts.algorithm.LineIntersector.prototype.inputLines=null,jsts.algorithm.LineIntersector.prototype.intPt=null,jsts.algorithm.LineIntersector.prototype.intLineIndex=null,jsts.algorithm.LineIntersector.prototype._isProper=null,jsts.algorithm.LineIntersector.prototype.pa=null,jsts.algorithm.LineIntersector.prototype.pb=null,jsts.algorithm.LineIntersector.prototype.precisionModel=null,jsts.algorithm.LineIntersector.prototype.computeIntersection=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.algorithm.LineIntersector.prototype.isCollinear=function(){return this.result===jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION},jsts.algorithm.LineIntersector.prototype.computeIntersection=function(t,e,n,r){this.inputLines[0][0]=t,this.inputLines[0][1]=e,this.inputLines[1][0]=n,this.inputLines[1][1]=r,this.result=this.computeIntersect(t,e,n,r)},jsts.algorithm.LineIntersector.prototype.computeIntersect=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.algorithm.LineIntersector.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},jsts.algorithm.LineIntersector.prototype.hasIntersection=function(){return this.result!==jsts.algorithm.LineIntersector.NO_INTERSECTION},jsts.algorithm.LineIntersector.prototype.getIntersectionNum=function(){return this.result},jsts.algorithm.LineIntersector.prototype.getIntersection=function(t){return this.intPt[t]},jsts.algorithm.LineIntersector.prototype.computeIntLineIndex=function(){null===this.intLineIndex&&(this.intLineIndex=[[],[]],this.computeIntLineIndex(0),this.computeIntLineIndex(1))},jsts.algorithm.LineIntersector.prototype.isIntersection=function(t){var e;for(e=0;e<this.result;e++)if(this.intPt[e].equals2D(t))return!0;return!1},jsts.algorithm.LineIntersector.prototype.isInteriorIntersection=function(){return 1===arguments.length?this.isInteriorIntersection2.apply(this,arguments):!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1)},jsts.algorithm.LineIntersector.prototype.isInteriorIntersection2=function(t){var e;for(e=0;e<this.result;e++)if(!this.intPt[e].equals2D(this.inputLines[t][0])&&!this.intPt[e].equals2D(this.inputLines[t][1]))return!0;return!1},jsts.algorithm.LineIntersector.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},jsts.algorithm.LineIntersector.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this.intPt[intLineIndex[t][e]]},jsts.algorithm.LineIntersector.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this.intLineIndex[t][e]},jsts.algorithm.LineIntersector.prototype.computeIntLineIndex=function(t){var e=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);e>n?(this.intLineIndex[t][0]=0,this.intLineIndex[t][1]=1):(this.intLineIndex[t][0]=1,this.intLineIndex[t][1]=0)},jsts.algorithm.LineIntersector.prototype.getEdgeDistance=function(t,e){var n=jsts.algorithm.LineIntersector.computeEdgeDistance(this.intPt[e],this.inputLines[t][0],this.inputLines[t][1]);return n},jsts.algorithm.RobustLineIntersector=function(){jsts.algorithm.RobustLineIntersector.prototype.constructor.call(this)},jsts.algorithm.RobustLineIntersector.prototype=new jsts.algorithm.LineIntersector,jsts.algorithm.RobustLineIntersector.prototype.computeIntersection=function(t,e,n){return 4===arguments.length?void jsts.algorithm.LineIntersector.prototype.computeIntersection.apply(this,arguments):(this._isProper=!1,jsts.geom.Envelope.intersects(e,n,t)&&0===jsts.algorithm.CGAlgorithms.orientationIndex(e,n,t)&&0===jsts.algorithm.CGAlgorithms.orientationIndex(n,e,t)?(this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),void(this.result=jsts.algorithm.LineIntersector.POINT_INTERSECTION)):void(this.result=jsts.algorithm.LineIntersector.NO_INTERSECTION))},jsts.algorithm.RobustLineIntersector.prototype.computeIntersect=function(t,e,n,r){if(this._isProper=!1,!jsts.geom.Envelope.intersects(t,e,n,r))return jsts.algorithm.LineIntersector.NO_INTERSECTION;var o=jsts.algorithm.CGAlgorithms.orientationIndex(t,e,n),i=jsts.algorithm.CGAlgorithms.orientationIndex(t,e,r);if(o>0&&i>0||0>o&&0>i)return jsts.algorithm.LineIntersector.NO_INTERSECTION;var s=jsts.algorithm.CGAlgorithms.orientationIndex(n,r,t),a=jsts.algorithm.CGAlgorithms.orientationIndex(n,r,e);if(s>0&&a>0||0>s&&0>a)return jsts.algorithm.LineIntersector.NO_INTERSECTION;var u=0===o&&0===i&&0===s&&0===a;return u?this.computeCollinearIntersection(t,e,n,r):(0===o||0===i||0===s||0===a?(this._isProper=!1,t.equals2D(n)||t.equals2D(r)?this.intPt[0]=t:e.equals2D(n)||e.equals2D(r)?this.intPt[0]=e:0===o?this.intPt[0]=new jsts.geom.Coordinate(n):0===i?this.intPt[0]=new jsts.geom.Coordinate(r):0===s?this.intPt[0]=new jsts.geom.Coordinate(t):0===a&&(this.intPt[0]=new jsts.geom.Coordinate(e))):(this._isProper=!0,this.intPt[0]=this.intersection(t,e,n,r)),jsts.algorithm.LineIntersector.POINT_INTERSECTION)},jsts.algorithm.RobustLineIntersector.prototype.computeCollinearIntersection=function(t,e,n,r){var o=jsts.geom.Envelope.intersects(t,e,n),i=jsts.geom.Envelope.intersects(t,e,r),s=jsts.geom.Envelope.intersects(n,r,t),a=jsts.geom.Envelope.intersects(n,r,e);return o&&i?(this.intPt[0]=n,this.intPt[1]=r,jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION):s&&a?(this.intPt[0]=t,this.intPt[1]=e,jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION):o&&s?(this.intPt[0]=n,this.intPt[1]=t,!n.equals(t)||i||a?jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION:jsts.algorithm.LineIntersector.POINT_INTERSECTION):o&&a?(this.intPt[0]=n,this.intPt[1]=e,!n.equals(e)||i||s?jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION:jsts.algorithm.LineIntersector.POINT_INTERSECTION):i&&s?(this.intPt[0]=r,this.intPt[1]=t,!r.equals(t)||o||a?jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION:jsts.algorithm.LineIntersector.POINT_INTERSECTION):i&&a?(this.intPt[0]=r,this.intPt[1]=e,!r.equals(e)||o||s?jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION:jsts.algorithm.LineIntersector.POINT_INTERSECTION):jsts.algorithm.LineIntersector.NO_INTERSECTION},jsts.algorithm.RobustLineIntersector.prototype.intersection=function(t,e,n,r){var o=this.intersectionWithNormalization(t,e,n,r);return this.isInSegmentEnvelopes(o)||(o=jsts.algorithm.CentralEndpointIntersector.getIntersection(t,e,n,r)),null!==this.precisionModel&&this.precisionModel.makePrecise(o),o},jsts.algorithm.RobustLineIntersector.prototype.intersectionWithNormalization=function(t,e,n,r){var o=new jsts.geom.Coordinate(t),i=new jsts.geom.Coordinate(e),s=new jsts.geom.Coordinate(n),a=new jsts.geom.Coordinate(r),u=new jsts.geom.Coordinate;this.normalizeToEnvCentre(o,i,s,a,u);var l=this.safeHCoordinateIntersection(o,i,s,a);return l.x+=u.x,l.y+=u.y,l},jsts.algorithm.RobustLineIntersector.prototype.safeHCoordinateIntersection=function(t,e,n,r){var o=null;try{o=jsts.algorithm.HCoordinate.intersection(t,e,n,r)}catch(i){if(!(i instanceof jsts.error.NotRepresentableError))throw i;o=jsts.algorithm.CentralEndpointIntersector.getIntersection(t,e,n,r)}return o},jsts.algorithm.RobustLineIntersector.prototype.normalizeToMinimum=function(t,e,n,r,o){o.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),o.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=o.x,t.y-=o.y,e.x-=o.x,e.y-=o.y,n.x-=o.x,n.y-=o.y,r.x-=o.x,r.y-=o.y},jsts.algorithm.RobustLineIntersector.prototype.normalizeToEnvCentre=function(t,e,n,r,o){var i=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,p=n.x>r.x?n.x:r.x,h=n.y>r.y?n.y:r.y,d=i>l?i:l,f=p>a?a:p,g=s>c?s:c,m=h>u?u:h,y=(d+f)/2,v=(g+m)/2;o.x=y,o.y=v,t.x-=o.x,t.y-=o.y,e.x-=o.x,e.y-=o.y,n.x-=o.x,n.y-=o.y,r.x-=o.x,r.y-=o.y},jsts.algorithm.RobustLineIntersector.prototype.smallestInAbsValue=function(t,e,n,r){var o=t,i=Math.abs(o);return Math.abs(e)<i&&(o=e,i=Math.abs(e)),Math.abs(n)<i&&(o=n,i=Math.abs(n)),Math.abs(r)<i&&(o=r),o},jsts.algorithm.RobustLineIntersector.prototype.isInSegmentEnvelopes=function(t){var e=new jsts.geom.Envelope(this.inputLines[0][0],this.inputLines[0][1]),n=new jsts.geom.Envelope(this.inputLines[1][0],this.inputLines[1][1]);return e.contains(t)&&n.contains(t)},jsts.algorithm.HCoordinate=function(){this.x=0,this.y=0,this.w=1,1===arguments.length?this.initFrom1Coordinate(arguments[0]):2===arguments.length&&arguments[0]instanceof jsts.geom.Coordinate?this.initFrom2Coordinates(arguments[0],arguments[1]):2===arguments.length&&arguments[0]instanceof jsts.algorithm.HCoordinate?this.initFrom2HCoordinates(arguments[0],arguments[1]):2===arguments.length?this.initFromXY(arguments[0],arguments[1]):3===arguments.length?this.initFromXYW(arguments[0],arguments[1],arguments[2]):4===arguments.length&&this.initFromXYW(arguments[0],arguments[1],arguments[2],arguments[3])},jsts.algorithm.HCoordinate.intersection=function(t,e,n,r){var o,i,s,a,u,l,c,p,h,d,f;if(o=t.y-e.y,i=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,c=i*l-u*s,p=a*s-o*l,h=o*u-a*i,d=c/h,f=p/h,!isFinite(d)||!isFinite(f))throw new jsts.error.NotRepresentableError;return new jsts.geom.Coordinate(d,f)},jsts.algorithm.HCoordinate.prototype.initFrom1Coordinate=function(t){this.x=t.x,this.y=t.y,this.w=1},jsts.algorithm.HCoordinate.prototype.initFrom2Coordinates=function(t,e){this.x=t.y-e.y,this.y=e.x-t.x,this.w=t.x*e.y-e.x*t.y},jsts.algorithm.HCoordinate.prototype.initFrom2HCoordinates=function(t,e){this.x=t.y*e.w-e.y*t.w,this.y=e.x*t.w-t.x*e.w,this.w=t.x*e.y-e.x*t.y},jsts.algorithm.HCoordinate.prototype.initFromXYW=function(t,e,n){this.x=t,this.y=e,this.w=n},jsts.algorithm.HCoordinate.prototype.initFromXY=function(t,e){this.x=t,this.y=e,this.w=1},jsts.algorithm.HCoordinate.prototype.initFrom4Coordinates=function(t,e,n,r){var o,i,s,a,u,l;o=t.y-e.y,i=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,this.x=i*l-u*s,this.y=a*s-o*l,this.w=o*u-a*i},jsts.algorithm.HCoordinate.prototype.getX=function(){var t=this.x/this.w;if(!isFinite(t))throw new jsts.error.NotRepresentableError;return t},jsts.algorithm.HCoordinate.prototype.getY=function(){var t=this.y/this.w;if(!isFinite(t))throw new jsts.error.NotRepresentableError;return t},jsts.algorithm.HCoordinate.prototype.getCoordinate=function(){var t=new jsts.geom.Coordinate;return t.x=this.getX(),t.y=this.getY(),t},jsts.geom.LineSegment=function(){0===arguments.length?(this.p0=new jsts.geom.Coordinate,this.p1=new jsts.geom.Coordinate):1===arguments.length?(this.p0=arguments[0].p0,this.p1=arguments[0].p1):2===arguments.length?(this.p0=arguments[0],this.p1=arguments[1]):4===arguments.length&&(this.p0=new jsts.geom.Coordinate(arguments[0],arguments[1]),this.p1=new jsts.geom.Coordinate(arguments[2],arguments[3]))},jsts.geom.LineSegment.prototype.p0=null,jsts.geom.LineSegment.prototype.p1=null,jsts.geom.LineSegment.midPoint=function(t,e){return new jsts.geom.Coordinate((t.x+e.x)/2,(t.y+e.y)/2)},jsts.geom.LineSegment.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},jsts.geom.LineSegment.prototype.getLength=function(){return this.p0.distance(this.p1)},jsts.geom.LineSegment.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},jsts.geom.LineSegment.prototype.isVertical=function(){return this.p0.x===this.p1.x},jsts.geom.LineSegment.prototype.orientationIndex=function(t){return t instanceof jsts.geom.LineSegment?this.orientationIndex1(t):t instanceof jsts.geom.Coordinate?this.orientationIndex2(t):void 0},jsts.geom.LineSegment.prototype.orientationIndex1=function(t){var e=jsts.algorithm.CGAlgorithms.orientationIndex(this.p0,this.p1,t.p0),n=jsts.algorithm.CGAlgorithms.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0?Math.max(e,n):0>=e&&0>=n?Math.max(e,n):0},jsts.geom.LineSegment.prototype.orientationIndex2=function(t){return jsts.algorithm.CGAlgorithms.orientationIndex(this.p0,this.p1,t)},jsts.geom.LineSegment.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},jsts.geom.LineSegment.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},jsts.geom.LineSegment.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},jsts.geom.LineSegment.prototype.midPoint=function(){return jsts.geom.LineSegment.midPoint(this.p0,this.p1)},jsts.geom.LineSegment.prototype.distance=function(t){return t instanceof jsts.geom.LineSegment?this.distance1(t):t instanceof jsts.geom.Coordinate?this.distance2(t):void 0},jsts.geom.LineSegment.prototype.distance1=function(t){return jsts.algorithm.CGAlgorithms.distanceLineLine(this.p0,this.p1,t.p0,t.p1)},jsts.geom.LineSegment.prototype.distance2=function(t){return jsts.algorithm.CGAlgorithms.distancePointLine(t,this.p0,this.p1)},jsts.geom.LineSegment.prototype.pointAlong=function(t){var e=new jsts.geom.Coordinate;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},jsts.geom.LineSegment.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),o=this.p1.x-this.p0.x,i=this.p1.y-this.p0.y,s=Math.sqrt(o*o+i*i),a=0,u=0;if(0!==e){if(0>=s)throw"Cannot compute offset from zero-length line segment";a=e*o/s,u=e*i/s}var l=n-u,c=r+a,p=new jsts.geom.Coordinate(l,c);return p},jsts.geom.LineSegment.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n,o=((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r;return o},jsts.geom.LineSegment.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return 0>e?e=0:(e>1||isNaN(e))&&(e=1),e},jsts.geom.LineSegment.prototype.project=function(t){return t instanceof jsts.geom.Coordinate?this.project1(t):t instanceof jsts.geom.LineSegment?this.project2(t):void 0},jsts.geom.LineSegment.prototype.project1=function(t){if(t.equals(this.p0)||t.equals(this.p1))return new jsts.geom.Coordinate(t);var e=this.projectionFactor(t),n=new jsts.geom.Coordinate;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n},jsts.geom.LineSegment.prototype.project2=function(t){var e=this.projectionFactor(t.p0),n=this.projectionFactor(t.p1);if(e>=1&&n>=1)return null;if(0>=e&&0>=n)return null;var r=this.project(t.p0);0>e&&(r=p0),e>1&&(r=p1);var o=this.project(t.p1);return 0>n&&(o=p0),n>1&&(o=p1),new jsts.geom.LineSegment(r,o)},jsts.geom.LineSegment.prototype.closestPoint=function(t){var e=this.projectionFactor(t);if(e>0&&1>e)return this.project(t);var n=this.p0.distance(t),r=this.p1.distance(t);return r>n?this.p0:this.p1},jsts.geom.LineSegment.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n,r=[],o=Number.MAX_VALUE,i=this.closestPoint(t.p0);o=i.distance(t.p0),r[0]=i,r[1]=t.p0;var s=this.closestPoint(t.p1);n=s.distance(t.p1),o>n&&(o=n,r[0]=s,r[1]=t.p1);var a=t.closestPoint(this.p0);n=a.distance(this.p0),o>n&&(o=n,r[0]=this.p0,r[1]=a);var u=t.closestPoint(this.p1);return n=u.distance(this.p1),o>n&&(o=n,r[0]=this.p1,r[1]=u),r},jsts.geom.LineSegment.prototype.intersection=function(t){var e=new jsts.algorithm.RobustLineIntersector;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},jsts.geom.LineSegment.prototype.setCoordinates=function(t){return t instanceof jsts.geom.Coordinate?void this.setCoordinates2.apply(this,arguments):void this.setCoordinates2(t.p0,t.p1)},jsts.geom.LineSegment.prototype.setCoordinates2=function(t,e){this.p0.x=t.x,this.p0.y=t.y,this.p1.x=e.x,this.p1.y=e.y},jsts.geom.LineSegment.prototype.distancePerpendicular=function(t){return jsts.algorithm.CGAlgorithms.distancePointLinePerpendicular(t,this.p0,this.p1)},jsts.geom.LineSegment.prototype.lineIntersection=function(t){try{var e=jsts.algorithm.HCoordinate.intersection(this.p0,this.p1,t.p0,t.p1);return e}catch(n){}return null},jsts.geom.LineSegment.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},jsts.geom.LineSegment.prototype.equals=function(t){return t instanceof jsts.geom.LineSegment&&(this.p0.equals(t.p0)&&this.p1.equals(t.p1))},jsts.geom.LineSegment.prototype.compareTo=function(t){var e=this.p0.compareTo(t.p0);return 0!==e?e:this.p1.compareTo(t.p1)},jsts.geom.LineSegment.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)},jsts.geom.LineSegment.prototype.toString=function(){return"LINESTRING("+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},jsts.index.chain.MonotoneChainOverlapAction=function(){this.tempEnv1=new jsts.geom.Envelope,this.tempEnv2=new jsts.geom.Envelope,this.overlapSeg1=new jsts.geom.LineSegment,this.overlapSeg2=new jsts.geom.LineSegment},jsts.index.chain.MonotoneChainOverlapAction.prototype.tempEnv1=null,jsts.index.chain.MonotoneChainOverlapAction.prototype.tempEnv2=null,jsts.index.chain.MonotoneChainOverlapAction.prototype.overlapSeg1=null,jsts.index.chain.MonotoneChainOverlapAction.prototype.overlapSeg2=null,jsts.index.chain.MonotoneChainOverlapAction.prototype.overlap=function(t,e,n,r){this.mc1.getLineSegment(e,this.overlapSeg1),this.mc2.getLineSegment(r,this.overlapSeg2),this.overlap2(this.overlapSeg1,this.overlapSeg2)},jsts.index.chain.MonotoneChainOverlapAction.prototype.overlap2=function(){},function(){var t=jsts.index.chain.MonotoneChainOverlapAction,e=jsts.noding.SinglePassNoder,n=jsts.index.strtree.STRtree,r=jsts.noding.NodedSegmentString,o=jsts.index.chain.MonotoneChainBuilder,i=function(t){this.si=t};i.prototype=new t,i.constructor=i,i.prototype.si=null,i.prototype.overlap=function(t,e,n,r){var o=t.getContext(),i=n.getContext();this.si.processIntersections(o,e,i,r)},jsts.noding.MCIndexNoder=function(){this.monoChains=[],this.index=new n},jsts.noding.MCIndexNoder.prototype=new e,jsts.noding.MCIndexNoder.constructor=jsts.noding.MCIndexNoder,jsts.noding.MCIndexNoder.prototype.monoChains=null,jsts.noding.MCIndexNoder.prototype.index=null,jsts.noding.MCIndexNoder.prototype.idCounter=0,jsts.noding.MCIndexNoder.prototype.nodedSegStrings=null,jsts.noding.MCIndexNoder.prototype.nOverlaps=0,jsts.noding.MCIndexNoder.prototype.getMonotoneChains=function(){return this.monoChains},jsts.noding.MCIndexNoder.prototype.getIndex=function(){return this.index},jsts.noding.MCIndexNoder.prototype.getNodedSubstrings=function(){return r.getNodedSubstrings(this.nodedSegStrings)},jsts.noding.MCIndexNoder.prototype.computeNodes=function(t){this.nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},jsts.noding.MCIndexNoder.prototype.intersectChains=function(){for(var t=new i(this.segInt),e=0;e<this.monoChains.length;e++)for(var n=this.monoChains[e],r=this.index.query(n.getEnvelope()),o=0;o<r.length;o++){var s=r[o];if(s.getId()>n.getId()&&(n.computeOverlaps(s,t),this.nOverlaps++),this.segInt.isDone())return}},jsts.noding.MCIndexNoder.prototype.add=function(t){for(var e=o.getChains(t.getCoordinates(),t),n=0;n<e.length;n++){var r=e[n];r.setId(this.idCounter++),this.index.insert(r.getEnvelope(),r),this.monoChains.push(r)}}}(),jsts.simplify.LineSegmentIndex=function(){this.index=new jsts.index.quadtree.Quadtree},jsts.simplify.LineSegmentIndex.prototype.index=null,jsts.simplify.LineSegmentIndex.prototype.add=function(t){if(t instanceof jsts.geom.LineSegment)return void this.add2(t);for(var e=t.getSegments(),n=0;n<e.length;n++){var r=e[n];this.add2(r)}},jsts.simplify.LineSegmentIndex.prototype.add2=function(t){this.index.insert(new jsts.geom.Envelope(t.p0,t.p1),t)},jsts.simplify.LineSegmentIndex.prototype.remove=function(t){this.index.remove(new jsts.geom.Envelope(t.p0,t.p1),t)},jsts.simplify.LineSegmentIndex.prototype.query=function(t){var e=new jsts.geom.Envelope(t.p0,t.p1),n=new jsts.simplify.LineSegmentIndex.LineSegmentVisitor(t);this.index.query(e,n);var r=n.getItems();return r},jsts.simplify.LineSegmentIndex.LineSegmentVisitor=function(t){this.items=[],this.querySeg=t},jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype=new jsts.index.ItemVisitor,jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.querySeg=null,jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.items=null,jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.visitItem=function(t){var e=t;jsts.geom.Envelope.intersects(e.p0,e.p1,this.querySeg.p0,this.querySeg.p1)&&this.items.push(t)},jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.getItems=function(){return this.items},jsts.geomgraph.EdgeEndStar=function(){this.edgeMap=new javascript.util.TreeMap,this.edgeList=null,this.ptInAreaLocation=[jsts.geom.Location.NONE,jsts.geom.Location.NONE]},jsts.geomgraph.EdgeEndStar.prototype.edgeMap=null,jsts.geomgraph.EdgeEndStar.prototype.edgeList=null,jsts.geomgraph.EdgeEndStar.prototype.ptInAreaLocation=null,jsts.geomgraph.EdgeEndStar.prototype.insert=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.EdgeEndStar.prototype.insertEdgeEnd=function(t,e){this.edgeMap.put(t,e),this.edgeList=null},jsts.geomgraph.EdgeEndStar.prototype.getCoordinate=function(){var t=this.iterator();if(!t.hasNext())return null;var e=t.next();return e.getCoordinate()},jsts.geomgraph.EdgeEndStar.prototype.getDegree=function(){return this.edgeMap.size()},jsts.geomgraph.EdgeEndStar.prototype.iterator=function(){return this.getEdges().iterator()},jsts.geomgraph.EdgeEndStar.prototype.getEdges=function(){return null===this.edgeList&&(this.edgeList=new javascript.util.ArrayList(this.edgeMap.values())),this.edgeList},jsts.geomgraph.EdgeEndStar.prototype.getNextCW=function(t){this.getEdges();var e=this.edgeList.indexOf(t),n=e-1;return 0===e&&(n=this.edgeList.length-1),this.edgeList[n]},jsts.geomgraph.EdgeEndStar.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next(),o=r.getLabel(),i=0;2>i;i++)o.isLine(i)&&o.getLocation(i)===jsts.geom.Location.BOUNDARY&&(e[i]=!0);for(var n=this.iterator();n.hasNext();)for(var r=n.next(),o=r.getLabel(),i=0;2>i;i++)if(o.isAnyNull(i)){var s=jsts.geom.Location.NONE;if(e[i])s=jsts.geom.Location.EXTERIOR;else{var a=r.getCoordinate();s=this.getLocation(i,a,t)}o.setAllLocationsIfNull(i,s)}},jsts.geomgraph.EdgeEndStar.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.computeLabel(t)}},jsts.geomgraph.EdgeEndStar.prototype.getLocation=function(t,e,n){return this.ptInAreaLocation[t]===jsts.geom.Location.NONE&&(this.ptInAreaLocation[t]=jsts.algorithm.locate.SimplePointInAreaLocator.locate(e,n[t].getGeometry())),this.ptInAreaLocation[t]},jsts.geomgraph.EdgeEndStar.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},jsts.geomgraph.EdgeEndStar.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel(),o=r.getLocation(t,jsts.geomgraph.Position.LEFT);jsts.util.Assert.isTrue(o!=jsts.geom.Location.NONE,"Found unlabelled area edge");for(var i=o,s=this.iterator();s.hasNext();){var a=s.next(),u=a.getLabel();jsts.util.Assert.isTrue(u.isArea(t),"Found non-area edge");var l=u.getLocation(t,jsts.geomgraph.Position.LEFT),c=u.getLocation(t,jsts.geomgraph.Position.RIGHT);if(l===c)return!1;if(c!==i)return!1;i=l}return!0},jsts.geomgraph.EdgeEndStar.prototype.propagateSideLabels=function(t){for(var e=jsts.geom.Location.NONE,n=this.iterator();n.hasNext();){var r=n.next(),o=r.getLabel();o.isArea(t)&&o.getLocation(t,jsts.geomgraph.Position.LEFT)!==jsts.geom.Location.NONE&&(e=o.getLocation(t,jsts.geomgraph.Position.LEFT))}if(e!==jsts.geom.Location.NONE)for(var i=e,n=this.iterator();n.hasNext();){var r=n.next(),o=r.getLabel();if(o.getLocation(t,jsts.geomgraph.Position.ON)===jsts.geom.Location.NONE&&o.setLocation(t,jsts.geomgraph.Position.ON,i),o.isArea(t)){var s=o.getLocation(t,jsts.geomgraph.Position.LEFT),a=o.getLocation(t,jsts.geomgraph.Position.RIGHT);if(a!==jsts.geom.Location.NONE){if(a!==i)throw new jsts.error.TopologyError("side location conflict",r.getCoordinate());s===jsts.geom.Location.NONE&&jsts.util.Assert.shouldNeverReachHere("found single null side (at "+r.getCoordinate()+")"),i=s}else jsts.util.Assert.isTrue(o.getLocation(t,jsts.geomgraph.Position.LEFT)===jsts.geom.Location.NONE,"found single null side"),o.setLocation(t,jsts.geomgraph.Position.RIGHT,i),o.setLocation(t,jsts.geomgraph.Position.LEFT,i)}}},jsts.geomgraph.EdgeEndStar.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this.edgeList.size();e++){var n=this.edgeList.get(e);if(n===t)return e}return-1},jsts.operation.relate.EdgeEndBundleStar=function(){jsts.geomgraph.EdgeEndStar.apply(this,arguments)},jsts.operation.relate.EdgeEndBundleStar.prototype=new jsts.geomgraph.EdgeEndStar,jsts.operation.relate.EdgeEndBundleStar.prototype.insert=function(t){var e=this.edgeMap.get(t);null===e?(e=new jsts.operation.relate.EdgeEndBundle(t),this.insertEdgeEnd(t,e)):e.insert(t)},jsts.operation.relate.EdgeEndBundleStar.prototype.updateIM=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.updateIM(t)}},jsts.index.ArrayListVisitor=function(){this.items=[]},jsts.index.ArrayListVisitor.prototype.visitItem=function(t){this.items.push(t)},jsts.index.ArrayListVisitor.prototype.getItems=function(){return this.items},jsts.algorithm.distance.DistanceToPoint=function(){},jsts.algorithm.distance.DistanceToPoint.computeDistance=function(t,e,n){if(t instanceof jsts.geom.LineString)jsts.algorithm.distance.DistanceToPoint.computeDistance2(t,e,n);else if(t instanceof jsts.geom.Polygon)jsts.algorithm.distance.DistanceToPoint.computeDistance4(t,e,n);else if(t instanceof jsts.geom.GeometryCollection)for(var r=t,o=0;o<r.getNumGeometries();o++){var i=r.getGeometryN(o);jsts.algorithm.distance.DistanceToPoint.computeDistance(i,e,n)}else n.setMinimum(t.getCoordinate(),e)},jsts.algorithm.distance.DistanceToPoint.computeDistance2=function(t,e,n){for(var r=new jsts.geom.LineSegment,o=t.getCoordinates(),i=0;i<o.length-1;i++){r.setCoordinates(o[i],o[i+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}},jsts.algorithm.distance.DistanceToPoint.computeDistance3=function(t,e,n){var r=t.closestPoint(e);n.setMinimum(r,e)},jsts.algorithm.distance.DistanceToPoint.computeDistance4=function(t,e,n){jsts.algorithm.distance.DistanceToPoint.computeDistance2(t.getExteriorRing(),e,n);for(var r=0;r<t.getNumInteriorRing();r++)jsts.algorithm.distance.DistanceToPoint.computeDistance2(t.getInteriorRingN(r),e,n)},jsts.index.strtree.ItemBoundable=function(t,e){this.bounds=t,this.item=e},jsts.index.strtree.ItemBoundable.prototype=new jsts.index.strtree.Boundable,jsts.index.strtree.ItemBoundable.constructor=jsts.index.strtree.ItemBoundable,jsts.index.strtree.ItemBoundable.prototype.bounds=null,jsts.index.strtree.ItemBoundable.prototype.item=null,jsts.index.strtree.ItemBoundable.prototype.getBounds=function(){return this.bounds},jsts.index.strtree.ItemBoundable.prototype.getItem=function(){return this.item},function(){var t=javascript.util.ArrayList,e=javascript.util.TreeMap;jsts.geomgraph.EdgeList=function(){this.edges=new t,this.ocaMap=new e},jsts.geomgraph.EdgeList.prototype.edges=null,jsts.geomgraph.EdgeList.prototype.ocaMap=null,jsts.geomgraph.EdgeList.prototype.add=function(t){this.edges.add(t);var e=new jsts.noding.OrientedCoordinateArray(t.getCoordinates());this.ocaMap.put(e,t)},jsts.geomgraph.EdgeList.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},jsts.geomgraph.EdgeList.prototype.getEdges=function(){return this.edges},jsts.geomgraph.EdgeList.prototype.findEqualEdge=function(t){var e=new jsts.noding.OrientedCoordinateArray(t.getCoordinates()),n=this.ocaMap.get(e);return n},jsts.geomgraph.EdgeList.prototype.getEdges=function(){return this.edges},jsts.geomgraph.EdgeList.prototype.iterator=function(){return this.edges.iterator()},jsts.geomgraph.EdgeList.prototype.get=function(t){return this.edges.get(t)},jsts.geomgraph.EdgeList.prototype.findEdgeIndex=function(t){for(var e=0;e<this.edges.size();e++)if(this.edges.get(e).equals(t))return e;return-1}}(),jsts.operation.IsSimpleOp=function(t){this.geom=t},jsts.operation.IsSimpleOp.prototype.geom=null,jsts.operation.IsSimpleOp.prototype.isClosedEndpointsInInterior=!0,jsts.operation.IsSimpleOp.prototype.nonSimpleLocation=null,jsts.operation.IsSimpleOp.prototype.IsSimpleOp=function(t){this.geom=t},jsts.operation.IsSimpleOp.prototype.isSimple=function(){return this.nonSimpleLocation=null,this.geom instanceof jsts.geom.LineString?this.isSimpleLinearGeometry(this.geom):this.geom instanceof jsts.geom.MultiLineString?this.isSimpleLinearGeometry(this.geom):!(this.geom instanceof jsts.geom.MultiPoint)||this.isSimpleMultiPoint(this.geom)},jsts.operation.IsSimpleOp.prototype.isSimpleMultiPoint=function(t){if(t.isEmpty())return!0;for(var e=[],n=0;n<t.getNumGeometries();n++){for(var r=t.getGeometryN(n),o=r.getCoordinate(),i=0;i<e.length;i++){var s=e[i];if(o.equals2D(s))return this.nonSimpleLocation=o,!1}e.push(o)}return!0},jsts.operation.IsSimpleOp.prototype.isSimpleLinearGeometry=function(t){if(t.isEmpty())return!0;var e=new jsts.geomgraph.GeometryGraph(0,t),n=new jsts.algorithm.RobustLineIntersector,r=e.computeSelfNodes(n,!0);return!r.hasIntersection()||(r.hasProperIntersection()?(this.nonSimpleLocation=r.getProperIntersectionPoint(),!1):!this.hasNonEndpointIntersection(e)&&(!this.isClosedEndpointsInInterior||!this.hasClosedEndpointIntersection(e)))},jsts.operation.IsSimpleOp.prototype.hasNonEndpointIntersection=function(t){for(var e=t.getEdgeIterator();e.hasNext();)for(var n=e.next(),r=n.getMaximumSegmentIndex(),o=n.getEdgeIntersectionList().iterator();o.hasNext();){
var i=o.next();if(!i.isEndPoint(r))return this.nonSimpleLocation=i.getCoordinate(),!0}return!1},jsts.operation.IsSimpleOp.prototype.hasClosedEndpointIntersection=function(t){for(var e=new javascript.util.TreeMap,n=t.getEdgeIterator();n.hasNext();){var r=n.next(),o=(r.getMaximumSegmentIndex(),r.isClosed()),i=r.getCoordinate(0);this.addEndpoint(e,i,o);var s=r.getCoordinate(r.getNumPoints()-1);this.addEndpoint(e,s,o)}for(var n=e.values().iterator();n.hasNext();){var a=n.next();if(a.isClosed&&2!=a.degree)return this.nonSimpleLocation=a.getCoordinate(),!0}return!1},jsts.operation.IsSimpleOp.EndpointInfo=function(t){this.pt=t,this.isClosed=!1,this.degree=0},jsts.operation.IsSimpleOp.EndpointInfo.prototype.pt=null,jsts.operation.IsSimpleOp.EndpointInfo.prototype.isClosed=null,jsts.operation.IsSimpleOp.EndpointInfo.prototype.degree=null,jsts.operation.IsSimpleOp.EndpointInfo.prototype.getCoordinate=function(){return this.pt},jsts.operation.IsSimpleOp.EndpointInfo.prototype.addEndpoint=function(t){this.degree++,this.isClosed=this.isClosed||t},jsts.operation.IsSimpleOp.prototype.addEndpoint=function(t,e,n){var r=t.get(e);null===r&&(r=new jsts.operation.IsSimpleOp.EndpointInfo(e),t.put(e,r)),r.addEndpoint(n)},function(){var t=function(){this.snapTolerance=0,this.seg=new jsts.geom.LineSegment,this.allowSnappingToSourceVertices=!1,this.isClosed=!1,this.srcPts=[],arguments[0]instanceof jsts.geom.LineString?this.initFromLine.apply(this,arguments):this.initFromPoints.apply(this,arguments)};t.prototype.initFromLine=function(t,e){this.initFromPoints(t.getCoordinates(),e)},t.prototype.initFromPoints=function(t,e){this.srcPts=t,this.isClosed=this.calcIsClosed(t),this.snapTolerance=e},t.prototype.setAllowSnappingToSourceVertices=function(t){this.allowSnappingToSourceVertices=t},t.prototype.calcIsClosed=function(t){return!(t.length<=1)&&t[0].equals(t[t.length-1])},t.prototype.snapTo=function(t){var e=new jsts.geom.CoordinateList(this.srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},t.prototype.snapVertices=function(t,e){var n,r,o=this.isClosed?t.size()-1:t.size(),i=0;for(i;o>i;i++)n=t.get(i),r=this.findSnapForVertex(n,e),null!==r&&(t.set(i,new jsts.geom.Coordinate(r)),0===i&&this.isClosed&&t.set(t.size()-1,new jsts.geom.Coordinate(r)))},t.prototype.findSnapForVertex=function(t,e){var n=0,r=e.length;for(n=0;r>n;n++){if(t.equals(e[n]))return null;if(t.distance(e[n])<this.snapTolerance)return e[n]}return null},t.prototype.snapSegments=function(t,e){if(0!==e.length){var n,r,o,i=e.length;for(e.length>1&&e[0].equals2D(e[e.length-1])&&(i=e.length-1),n=0;i>n;n++)r=e[n],o=this.findSegmentIndexToSnap(r,t),o>=0&&t.add(o+1,new jsts.geom.Coordinate(r),!1)}},t.prototype.findSegmentIndexToSnap=function(t,e){var n,r=Number.MAX_VALUE,o=-1,i=0;for(i;i<e.size()-1;i++){if(this.seg.p0=e.get(i),this.seg.p1=e.get(i+1),this.seg.p0.equals(t)||this.seg.p1.equals(t)){if(this.allowSnappingToSourceVertices)continue;return-1}n=this.seg.distance(t),n<this.snapTolerance&&r>n&&(r=n,o=i)}return o},jsts.operation.overlay.snap.LineStringSnapper=t}(),function(){var t=javascript.util.ArrayList,e=jsts.geom.GeometryComponentFilter,n=jsts.geom.LineString,r=jsts.operation.polygonize.EdgeRing,o=jsts.operation.polygonize.PolygonizeGraph,i=function(){var r=this,o=function(){};o.prototype=new e,o.prototype.filter=function(t){t instanceof n&&r.add(t)},this.lineStringAdder=new o,this.dangles=new t,this.cutEdges=new t,this.invalidRingLines=new t};i.prototype.lineStringAdder=null,i.prototype.graph=null,i.prototype.dangles=null,i.prototype.cutEdges=null,i.prototype.invalidRingLines=null,i.prototype.holeList=null,i.prototype.shellList=null,i.prototype.polyList=null,i.prototype.add=function(t){if(t instanceof jsts.geom.LineString)return this.add3(t);if(t instanceof jsts.geom.Geometry)return this.add2(t);for(var e=t.iterator();e.hasNext();){var n=e.next();this.add2(n)}},i.prototype.add2=function(t){t.apply(this.lineStringAdder)},i.prototype.add3=function(t){null==this.graph&&(this.graph=new o(t.getFactory())),this.graph.addEdge(t)},i.prototype.getPolygons=function(){return this.polygonize(),this.polyList},i.prototype.getDangles=function(){return this.polygonize(),this.dangles},i.prototype.getCutEdges=function(){return this.polygonize(),this.cutEdges},i.prototype.getInvalidRingLines=function(){return this.polygonize(),this.invalidRingLines},i.prototype.polygonize=function(){if(null==this.polyList&&(this.polyList=new t,null!=this.graph)){this.dangles=this.graph.deleteDangles(),this.cutEdges=this.graph.deleteCutEdges();var e=this.graph.getEdgeRings(),n=new t;this.invalidRingLines=new t,this.findValidRings(e,n,this.invalidRingLines),this.findShellsAndHoles(n),i.assignHolesToShells(this.holeList,this.shellList),this.polyList=new t;for(var r=this.shellList.iterator();r.hasNext();){var o=r.next();this.polyList.add(o.getPolygon())}}},i.prototype.findValidRings=function(t,e,n){for(var r=t.iterator();r.hasNext();){var o=r.next();o.isValid()?e.add(o):n.add(o.getLineString())}},i.prototype.findShellsAndHoles=function(e){this.holeList=new t,this.shellList=new t;for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()?this.holeList.add(r):this.shellList.add(r)}},i.assignHolesToShells=function(t,e){for(var n=t.iterator();n.hasNext();){var r=n.next();i.assignHoleToShell(r,e)}},i.assignHoleToShell=function(t,e){var n=r.findEdgeRingContaining(t,e);null!=n&&n.addHole(t.getRing())},jsts.operation.polygonize.Polygonizer=i}(),function(){var t=javascript.util.ArrayList,e=function(){};e.prototype.inputGeom=null,e.prototype.factory=null,e.prototype.pruneEmptyGeometry=!0,e.prototype.preserveGeometryCollectionType=!0,e.prototype.preserveCollections=!1,e.prototype.reserveType=!1,e.prototype.getInputGeometry=function(){return this.inputGeom},e.prototype.transform=function(t){if(this.inputGeom=t,this.factory=t.getFactory(),t instanceof jsts.geom.Point)return this.transformPoint(t,null);if(t instanceof jsts.geom.MultiPoint)return this.transformMultiPoint(t,null);if(t instanceof jsts.geom.LinearRing)return this.transformLinearRing(t,null);if(t instanceof jsts.geom.LineString)return this.transformLineString(t,null);if(t instanceof jsts.geom.MultiLineString)return this.transformMultiLineString(t,null);if(t instanceof jsts.geom.Polygon)return this.transformPolygon(t,null);if(t instanceof jsts.geom.MultiPolygon)return this.transformMultiPolygon(t,null);if(t instanceof jsts.geom.GeometryCollection)return this.transformGeometryCollection(t,null);throw new jsts.error.IllegalArgumentException("Unknown Geometry subtype: "+t.getClass().getName())},e.prototype.createCoordinateSequence=function(t){return this.factory.getCoordinateSequenceFactory().create(t)},e.prototype.copy=function(t){return t.clone()},e.prototype.transformCoordinates=function(t){return this.copy(t)},e.prototype.transformPoint=function(t){return this.factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},e.prototype.transformMultiPoint=function(e){for(var n=new t,r=0;r<e.getNumGeometries();r++){var o=this.transformPoint(e.getGeometryN(r),e);null!=o&&(o.isEmpty()||n.add(o))}return this.factory.buildGeometry(n)},e.prototype.transformLinearRing=function(t){var e=this.transformCoordinates(t.getCoordinateSequence(),t),n=e.length;return n>0&&4>n&&!this.preserveType?this.factory.createLineString(e):this.factory.createLinearRing(e)},e.prototype.transformLineString=function(t){return this.factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},e.prototype.transformMultiLineString=function(e){for(var n=new t,r=0;r<e.getNumGeometries();r++){var o=this.transformLineString(e.getGeometryN(r),e);null!=o&&(o.isEmpty()||n.add(o))}return this.factory.buildGeometry(n)},e.prototype.transformPolygon=function(e){var n=!0,r=this.transformLinearRing(e.getExteriorRing(),e);null!=r&&r instanceof jsts.geom.LinearRing&&!r.isEmpty()||(n=!1);for(var o=new t,i=0;i<e.getNumInteriorRing();i++){var s=this.transformLinearRing(e.getInteriorRingN(i),e);null==s||s.isEmpty()||(s instanceof jsts.geom.LinearRing||(n=!1),o.add(s))}if(n)return this.factory.createPolygon(r,o.toArray());var a=new t;return null!=r&&a.add(r),a.addAll(o),this.factory.buildGeometry(a)},e.prototype.transformMultiPolygon=function(e){for(var n=new t,r=0;r<e.getNumGeometries();r++){var o=this.transformPolygon(e.getGeometryN(r),e);null!=o&&(o.isEmpty()||n.add(o))}return this.factory.buildGeometry(n)},e.prototype.transformGeometryCollection=function(e){for(var n=new t,r=0;r<e.getNumGeometries();r++){var o=this.transform(e.getGeometryN(r));null!=o&&(this.pruneEmptyGeometry&&o.isEmpty()||n.add(o))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection(GeometryFactory.toGeometryArray(n)):this.factory.buildGeometry(n)},jsts.geom.util.GeometryTransformer=e}(),function(){var t=jsts.operation.overlay.snap.LineStringSnapper,e=jsts.geom.PrecisionModel,n=javascript.util.TreeSet,r=function(t,e,n){this.snapTolerance=t,this.snapPts=e,this.isSelfSnap=n||!1};r.prototype=new jsts.geom.util.GeometryTransformer,r.prototype.snapTolerance=null,r.prototype.snapPts=null,r.prototype.isSelfSnap=!1,r.prototype.transformCoordinates=function(t){var e=t,n=this.snapLine(e,this.snapPts);return n},r.prototype.snapLine=function(e,n){var r=new t(e,this.snapTolerance);return r.setAllowSnappingToSourceVertices(this.isSelfSnap),r.snapTo(n)};var o=function(t){this.srcGeom=t};o.SNAP_PRECISION_FACTOR=1e-9,o.computeOverlaySnapTolerance=function(t){if(2===arguments.length)return o.computeOverlaySnapTolerance2.apply(this,arguments);var n=this.computeSizeBasedSnapTolerance(t),r=t.getPrecisionModel();if(r.getType()==e.FIXED){var i=1/r.getScale()*2/1.415;i>n&&(n=i)}return n},o.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal(),n=Math.min(e.getHeight(),e.getWidth()),r=n*o.SNAP_PRECISION_FACTOR;return r},o.computeOverlaySnapTolerance2=function(t,e){return Math.min(this.computeOverlaySnapTolerance(t),this.computeOverlaySnapTolerance(e))},o.snap=function(t,e,n){var r=[],i=new o(t);r[0]=i.snapTo(e,n);var s=new o(e);return r[1]=s.snapTo(r[0],n),r},o.snapToSelf=function(t,e,n){var r=new o(t);return r.snapToSelf(e,n)},o.prototype.srcGeom=null,o.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t),o=new r(e,n);return o.transform(this.srcGeom)},o.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(srcGeom),o=new r(t,n,(!0)),i=o.transform(srcGeom),s=i;return e&&s instanceof Polygonal&&(s=i.buffer(0)),s},o.prototype.extractTargetCoordinates=function(t){for(var e=new n,r=t.getCoordinates(),o=0;o<r.length;o++)e.add(r[o]);return e.toArray()},o.prototype.computeSnapTolerance=function(t){var e=this.computeMinimumSegmentLength(t),n=e/10;return n},o.prototype.computeMinimumSegmentLength=function(t){for(var e=Number.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);e>r&&(e=r)}return e},jsts.operation.overlay.snap.GeometrySnapper=o}(),jsts.algorithm.PointLocator=function(t){this.boundaryRule=t?t:jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE},jsts.algorithm.PointLocator.prototype.boundaryRule=null,jsts.algorithm.PointLocator.prototype.isIn=null,jsts.algorithm.PointLocator.prototype.numBoundaries=null,jsts.algorithm.PointLocator.prototype.intersects=function(t,e){return this.locate(t,e)!==jsts.geom.Location.EXTERIOR},jsts.algorithm.PointLocator.prototype.locate=function(t,e){return e.isEmpty()?jsts.geom.Location.EXTERIOR:e instanceof jsts.geom.Point?this.locate2(t,e):e instanceof jsts.geom.LineString?this.locate3(t,e):e instanceof jsts.geom.Polygon?this.locate4(t,e):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(t,e),this.boundaryRule.isInBoundary(this.numBoundaries)?jsts.geom.Location.BOUNDARY:this.numBoundaries>0||this.isIn?jsts.geom.Location.INTERIOR:jsts.geom.Location.EXTERIOR)},jsts.algorithm.PointLocator.prototype.computeLocation=function(t,e){if(e instanceof jsts.geom.Point||e instanceof jsts.geom.LineString||e instanceof jsts.geom.Polygon)this.updateLocationInfo(this.locate(t,e));else if(e instanceof jsts.geom.MultiLineString)for(var n=e,r=0;r<n.getNumGeometries();r++){var o=n.getGeometryN(r);this.updateLocationInfo(this.locate(t,o))}else if(e instanceof jsts.geom.MultiPolygon)for(var i=e,r=0;r<i.getNumGeometries();r++){var s=i.getGeometryN(r);this.updateLocationInfo(this.locate(t,s))}else if(e instanceof jsts.geom.MultiPoint||e instanceof jsts.geom.GeometryCollection)for(var r=0;r<e.getNumGeometries();r++){var a=e.getGeometryN(r);a!==e&&this.computeLocation(t,a)}},jsts.algorithm.PointLocator.prototype.updateLocationInfo=function(t){t===jsts.geom.Location.INTERIOR&&(this.isIn=!0),t===jsts.geom.Location.BOUNDARY&&this.numBoundaries++},jsts.algorithm.PointLocator.prototype.locate2=function(t,e){var n=e.getCoordinate();return n.equals2D(t)?jsts.geom.Location.INTERIOR:jsts.geom.Location.EXTERIOR},jsts.algorithm.PointLocator.prototype.locate3=function(t,e){if(!e.getEnvelopeInternal().intersects(t))return jsts.geom.Location.EXTERIOR;var n=e.getCoordinates();return e.isClosed()||!t.equals(n[0])&&!t.equals(n[n.length-1])?jsts.algorithm.CGAlgorithms.isOnLine(t,n)?jsts.geom.Location.INTERIOR:jsts.geom.Location.EXTERIOR:jsts.geom.Location.BOUNDARY},jsts.algorithm.PointLocator.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?jsts.algorithm.CGAlgorithms.locatePointInRing(t,e.getCoordinates()):jsts.geom.Location.EXTERIOR},jsts.algorithm.PointLocator.prototype.locate4=function(t,e){if(e.isEmpty())return jsts.geom.Location.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===jsts.geom.Location.EXTERIOR)return jsts.geom.Location.EXTERIOR;if(r===jsts.geom.Location.BOUNDARY)return jsts.geom.Location.BOUNDARY;for(var o=0;o<e.getNumInteriorRing();o++){var i=e.getInteriorRingN(o),s=this.locateInPolygonRing(t,i);if(s===jsts.geom.Location.INTERIOR)return jsts.geom.Location.EXTERIOR;if(s===jsts.geom.Location.BOUNDARY)return jsts.geom.Location.BOUNDARY}return jsts.geom.Location.INTERIOR},function(){var t=jsts.geom.Location,e=javascript.util.ArrayList,n=javascript.util.TreeMap;jsts.geomgraph.NodeMap=function(t){this.nodeMap=new n,this.nodeFact=t},jsts.geomgraph.NodeMap.prototype.nodeMap=null,jsts.geomgraph.NodeMap.prototype.nodeFact=null,jsts.geomgraph.NodeMap.prototype.addNode=function(t){var e,n;if(t instanceof jsts.geom.Coordinate)return n=t,e=this.nodeMap.get(n),null===e&&(e=this.nodeFact.createNode(n),this.nodeMap.put(n,e)),e;if(t instanceof jsts.geomgraph.Node){var r=t;return n=r.getCoordinate(),e=this.nodeMap.get(n),null===e?(this.nodeMap.put(n,r),r):(e.mergeLabel(r),e)}},jsts.geomgraph.NodeMap.prototype.add=function(t){var e=t.getCoordinate(),n=this.addNode(e);n.add(t)},jsts.geomgraph.NodeMap.prototype.find=function(t){return this.nodeMap.get(t)},jsts.geomgraph.NodeMap.prototype.values=function(){return this.nodeMap.values()},jsts.geomgraph.NodeMap.prototype.iterator=function(){return this.values().iterator()},jsts.geomgraph.NodeMap.prototype.getBoundaryNodes=function(n){for(var r=new e,o=this.iterator();o.hasNext();){var i=o.next();i.getLabel().getLocation(n)===t.BOUNDARY&&r.add(i)}return r}}(),function(){var t=javascript.util.ArrayList;jsts.geomgraph.PlanarGraph=function(e){this.edges=new t,this.edgeEndList=new t,this.nodes=new jsts.geomgraph.NodeMap(e||new jsts.geomgraph.NodeFactory)},jsts.geomgraph.PlanarGraph.prototype.edges=null,jsts.geomgraph.PlanarGraph.prototype.nodes=null,jsts.geomgraph.PlanarGraph.prototype.edgeEndList=null,jsts.geomgraph.PlanarGraph.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.getEdges().linkResultDirectedEdges()}},jsts.geomgraph.PlanarGraph.prototype.getEdgeIterator=function(){return this.edges.iterator()},jsts.geomgraph.PlanarGraph.prototype.getEdgeEnds=function(){return this.edgeEndList},jsts.geomgraph.PlanarGraph.prototype.isBoundaryNode=function(t,e){var n=this.nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===jsts.geom.Location.BOUNDARY},jsts.geomgraph.PlanarGraph.prototype.insertEdge=function(t){this.edges.add(t)},jsts.geomgraph.PlanarGraph.prototype.add=function(t){this.nodes.add(t),this.edgeEndList.add(t)},jsts.geomgraph.PlanarGraph.prototype.getNodeIterator=function(){return this.nodes.iterator()},jsts.geomgraph.PlanarGraph.prototype.getNodes=function(){return this.nodes.values()},jsts.geomgraph.PlanarGraph.prototype.addNode=function(t){return this.nodes.addNode(t)},jsts.geomgraph.PlanarGraph.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.edges.add(n);var r=new jsts.geomgraph.DirectedEdge(n,(!0)),o=new jsts.geomgraph.DirectedEdge(n,(!1));r.setSym(o),o.setSym(r),this.add(r),this.add(o)}},jsts.geomgraph.PlanarGraph.prototype.linkResultDirectedEdges=function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().linkResultDirectedEdges()}},jsts.geomgraph.PlanarGraph.prototype.findEdgeInSameDirection=function(t,e){var n,r,o=0,i=this.edges.size();for(o;i>o;o++){if(n=this.edges.get(o),r=n.getCoordinates(),this.matchInSameDirection(t,e,r[0],r[1]))return n;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return n}return null},jsts.geomgraph.PlanarGraph.prototype.matchInSameDirection=function(t,e,n,r){return!(!t.equals(n)||jsts.algorithm.CGAlgorithms.computeOrientation(t,e,r)!==jsts.algorithm.CGAlgorithms.COLLINEAR||jsts.geomgraph.Quadrant.quadrant(t,e)!==jsts.geomgraph.Quadrant.quadrant(n,r))},jsts.geomgraph.PlanarGraph.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null}}(),jsts.noding.SegmentIntersector=function(){},jsts.noding.SegmentIntersector.prototype.processIntersections=jsts.abstractFunc,jsts.noding.SegmentIntersector.prototype.isDone=jsts.abstractFunc,function(){var t=jsts.noding.SegmentIntersector,e=javascript.util.ArrayList;jsts.noding.InteriorIntersectionFinder=function(t){this.li=t,this.intersections=new e,this.interiorIntersection=null},jsts.noding.InteriorIntersectionFinder.prototype=new t,jsts.noding.InteriorIntersectionFinder.constructor=jsts.noding.InteriorIntersectionFinder,jsts.noding.InteriorIntersectionFinder.prototype.findAllIntersections=!1,jsts.noding.InteriorIntersectionFinder.prototype.isCheckEndSegmentsOnly=!1,jsts.noding.InteriorIntersectionFinder.prototype.li=null,jsts.noding.InteriorIntersectionFinder.prototype.interiorIntersection=null,jsts.noding.InteriorIntersectionFinder.prototype.intSegments=null,jsts.noding.InteriorIntersectionFinder.prototype.intersections=null,jsts.noding.InteriorIntersectionFinder.prototype.setFindAllIntersections=function(t){this.findAllIntersections=t},jsts.noding.InteriorIntersectionFinder.prototype.getIntersections=function(){return intersections},jsts.noding.InteriorIntersectionFinder.prototype.setCheckEndSegmentsOnly=function(t){this.isCheckEndSegmentsOnly=t},jsts.noding.InteriorIntersectionFinder.prototype.hasIntersection=function(){return null!=this.interiorIntersection},jsts.noding.InteriorIntersectionFinder.prototype.getInteriorIntersection=function(){return this.interiorIntersection},jsts.noding.InteriorIntersectionFinder.prototype.getIntersectionSegments=function(){return this.intSegments},jsts.noding.InteriorIntersectionFinder.prototype.processIntersections=function(t,e,n,r){if(!this.hasIntersection()&&(t!=n||e!=r)){if(this.isCheckEndSegmentsOnly){var o=this.isEndSegment(t,e)||isEndSegment(n,r);if(!o)return}var i=t.getCoordinates()[e],s=t.getCoordinates()[e+1],a=n.getCoordinates()[r],u=n.getCoordinates()[r+1];this.li.computeIntersection(i,s,a,u),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=[],this.intSegments[0]=i,this.intSegments[1]=s,this.intSegments[2]=a,this.intSegments[3]=u,this.interiorIntersection=this.li.getIntersection(0),this.intersections.add(this.interiorIntersection))}},jsts.noding.InteriorIntersectionFinder.prototype.isEndSegment=function(t,e){return 0==e||e>=t.size()-2},jsts.noding.InteriorIntersectionFinder.prototype.isDone=function(){return!this.findAllIntersections&&null!=this.interiorIntersection}}(),function(){var t=jsts.algorithm.RobustLineIntersector,e=jsts.noding.InteriorIntersectionFinder,n=jsts.noding.MCIndexNoder;jsts.noding.FastNodingValidator=function(e){this.li=new t,this.segStrings=e},jsts.noding.FastNodingValidator.prototype.li=null,jsts.noding.FastNodingValidator.prototype.segStrings=null,jsts.noding.FastNodingValidator.prototype.findAllIntersections=!1,jsts.noding.FastNodingValidator.prototype.segInt=null,jsts.noding.FastNodingValidator.prototype._isValid=!0,jsts.noding.FastNodingValidator.prototype.setFindAllIntersections=function(t){this.findAllIntersections=t},jsts.noding.FastNodingValidator.prototype.getIntersections=function(){return segInt.getIntersections()},jsts.noding.FastNodingValidator.prototype.isValid=function(){return this.execute(),this._isValid},jsts.noding.FastNodingValidator.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+jsts.io.WKTWriter.toLineString(t[0],t[1])+" and "+jsts.io.WKTWriter.toLineString(t[2],t[3])},jsts.noding.FastNodingValidator.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new jsts.error.TopologyError(this.getErrorMessage(),this.segInt.getInteriorIntersection())},jsts.noding.FastNodingValidator.prototype.execute=function(){null==this.segInt&&this.checkInteriorIntersections()},jsts.noding.FastNodingValidator.prototype.checkInteriorIntersections=function(){this._isValid=!0,this.segInt=new e(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var t=new n;return t.setSegmentIntersector(this.segInt),t.computeNodes(this.segStrings),this.segInt.hasIntersection()?void(this._isValid=!1):void 0}}(),function(){jsts.noding.BasicSegmentString=function(t,e){this.pts=t,this.data=e},jsts.noding.BasicSegmentString.prototype=new jsts.noding.SegmentString,jsts.noding.BasicSegmentString.prototype.pts=null,jsts.noding.BasicSegmentString.prototype.data=null,jsts.noding.BasicSegmentString.prototype.getData=function(){return this.data},jsts.noding.BasicSegmentString.prototype.setData=function(t){this.data=t},jsts.noding.BasicSegmentString.prototype.size=function(){return this.pts.length},jsts.noding.BasicSegmentString.prototype.getCoordinate=function(t){return this.pts[t]},jsts.noding.BasicSegmentString.prototype.getCoordinates=function(){return this.pts},jsts.noding.BasicSegmentString.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},jsts.noding.BasicSegmentString.prototype.getSegmentOctant=function(t){return t==this.pts.length-1?-1:jsts.noding.Octant.octant(this.getCoordinate(t),this.getCoordinate(t+1))}}(),function(){var t=jsts.noding.FastNodingValidator,e=jsts.noding.BasicSegmentString,n=javascript.util.ArrayList;jsts.geomgraph.EdgeNodingValidator=function(e){this.nv=new t(jsts.geomgraph.EdgeNodingValidator.toSegmentStrings(e))},jsts.geomgraph.EdgeNodingValidator.checkValid=function(t){var e=new jsts.geomgraph.EdgeNodingValidator(t);e.checkValid()},jsts.geomgraph.EdgeNodingValidator.toSegmentStrings=function(t){for(var r=new n,o=t.iterator();o.hasNext();){var i=o.next();r.add(new e(i.getCoordinates(),i))}return r},jsts.geomgraph.EdgeNodingValidator.prototype.nv=null,jsts.geomgraph.EdgeNodingValidator.prototype.checkValid=function(){this.nv.checkValid()}}(),jsts.operation.GeometryGraphOperation=function(t,e,n){if(this.li=new jsts.algorithm.RobustLineIntersector,this.arg=[],void 0!==t){if(void 0===e)return this.setComputationPrecision(t.getPrecisionModel()),void(this.arg[0]=new jsts.geomgraph.GeometryGraph(0,t));n=n||jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE,this.setComputationPrecision(t.getPrecisionModel().compareTo(e.getPrecisionModel())>=0?t.getPrecisionModel():e.getPrecisionModel()),this.arg[0]=new jsts.geomgraph.GeometryGraph(0,t,n),this.arg[1]=new jsts.geomgraph.GeometryGraph(1,e,n)}},jsts.operation.GeometryGraphOperation.prototype.li=null,jsts.operation.GeometryGraphOperation.prototype.resultPrecisionModel=null,jsts.operation.GeometryGraphOperation.prototype.arg=null,jsts.operation.GeometryGraphOperation.prototype.getArgGeometry=function(t){return arg[t].getGeometry()},jsts.operation.GeometryGraphOperation.prototype.setComputationPrecision=function(t){this.resultPrecisionModel=t,this.li.setPrecisionModel(this.resultPrecisionModel)},jsts.operation.overlay.OverlayNodeFactory=function(){},jsts.operation.overlay.OverlayNodeFactory.prototype=new jsts.geomgraph.NodeFactory,jsts.operation.overlay.OverlayNodeFactory.constructor=jsts.operation.overlay.OverlayNodeFactory,jsts.operation.overlay.OverlayNodeFactory.prototype.createNode=function(t){return new jsts.geomgraph.Node(t,new jsts.geomgraph.DirectedEdgeStar)},jsts.operation.overlay.PolygonBuilder=function(t){this.shellList=[],this.geometryFactory=t},jsts.operation.overlay.PolygonBuilder.prototype.geometryFactory=null,jsts.operation.overlay.PolygonBuilder.prototype.shellList=null,jsts.operation.overlay.PolygonBuilder.prototype.add=function(t){return 2===arguments.length?void this.add2.apply(this,arguments):void this.add2(t.getEdgeEnds(),t.getNodes())},jsts.operation.overlay.PolygonBuilder.prototype.add2=function(t,e){jsts.geomgraph.PlanarGraph.linkResultDirectedEdges(e);var n=this.buildMaximalEdgeRings(t),r=[],o=this.buildMinimalEdgeRings(n,this.shellList,r);this.sortShellsAndHoles(o,this.shellList,r),this.placeFreeHoles(this.shellList,r)},jsts.operation.overlay.PolygonBuilder.prototype.getPolygons=function(){var t=this.computePolygons(this.shellList);return t},jsts.operation.overlay.PolygonBuilder.prototype.buildMaximalEdgeRings=function(t){for(var e=[],n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null==r.getEdgeRing()){var o=new jsts.operation.overlay.MaximalEdgeRing(r,this.geometryFactory);e.push(o),o.setInResult()}}return e},jsts.operation.overlay.PolygonBuilder.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=[],o=0;o<t.length;o++){var i=t[o];if(i.getMaxNodeDegree()>2){i.linkDirectedEdgesForMinimalEdgeRings();var s=i.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.push(a)):n=n.concat(s)}else r.push(i)}return r},jsts.operation.overlay.PolygonBuilder.prototype.findShell=function(t){for(var e=0,n=null,r=0;r<t.length;r++){var o=t[r];o.isHole()||(n=o,e++)}return jsts.util.Assert.isTrue(1>=e,"found two shells in MinimalEdgeRing list"),n},jsts.operation.overlay.PolygonBuilder.prototype.placePolygonHoles=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.isHole()&&r.setShell(t)}},jsts.operation.overlay.PolygonBuilder.prototype.sortShellsAndHoles=function(t,e,n){for(var r=0;r<t.length;r++){var o=t[r];o.isHole()?n.push(o):e.push(o)}},jsts.operation.overlay.PolygonBuilder.prototype.placeFreeHoles=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(null==r.getShell()){var o=this.findEdgeRingContaining(r,t);if(null===o)throw new jsts.error.TopologyError("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(o)}}},jsts.operation.overlay.PolygonBuilder.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),o=n.getCoordinateN(0),i=null,s=null,a=0;a<e.length;a++){var u=e[a],l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==i&&(s=i.getLinearRing().getEnvelopeInternal());var p=!1;c.contains(r)&&jsts.algorithm.CGAlgorithms.isPointInRing(o,l.getCoordinates())&&(p=!0),p&&(null==i||s.contains(c))&&(i=u)}return i},jsts.operation.overlay.PolygonBuilder.prototype.computePolygons=function(t){for(var e=new javascript.util.ArrayList,n=0;n<t.length;n++){var r=t[n],o=r.toPolygon(this.geometryFactory);e.add(o)}return e},jsts.operation.overlay.PolygonBuilder.prototype.containsPoint=function(t){for(var e=0;e<this.shellList.length;e++){var n=this.shellList[e];if(n.containsPoint(t))return!0}return!1},function(){var t=jsts.util.Assert,e=javascript.util.ArrayList,n=function(t,n,r){this.lineEdgesList=new e,this.resultLineList=new e,this.op=t,this.geometryFactory=n,this.ptLocator=r};n.prototype.op=null,n.prototype.geometryFactory=null,n.prototype.ptLocator=null,n.prototype.lineEdgesList=null,n.prototype.resultLineList=null,n.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this.resultLineList},n.prototype.findCoveredLineEdges=function(){for(var t=this.op.getGraph().getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().findCoveredLineEdges()}for(var n=this.op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next(),o=r.getEdge();if(r.isLineEdge()&&!o.isCoveredSet()){var i=this.op.isCoveredByA(r.getCoordinate());o.setCovered(i)}}},n.prototype.collectLines=function(t){for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this.lineEdgesList),this.collectBoundaryTouchEdge(n,t,this.lineEdgesList)}},n.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),o=t.getEdge();t.isLineEdge()&&(t.isVisited()||!jsts.operation.overlay.OverlayOp.isResultOfOp(r,e)||o.isCovered()||(n.add(o),t.setVisitedEdge(!0)))},n.prototype.collectBoundaryTouchEdge=function(e,n,r){var o=e.getLabel();e.isLineEdge()||e.isVisited()||e.isInteriorAreaEdge()||e.getEdge().isInResult()||(t.isTrue(!(e.isInResult()||e.getSym().isInResult())||!e.getEdge().isInResult()),jsts.operation.overlay.OverlayOp.isResultOfOp(o,n)&&n===jsts.operation.overlay.OverlayOp.INTERSECTION&&(r.add(e.getEdge()),e.setVisitedEdge(!0)))},n.prototype.buildLines=function(){for(var t=this.lineEdgesList.iterator();t.hasNext();){var e=t.next(),n=(e.getLabel(),this.geometryFactory.createLineString(e.getCoordinates()));this.resultLineList.add(n),e.setInResult(!0)}},n.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},n.prototype.labelIsolatedLine=function(t,e){var n=ptLocator.locate(t.getCoordinate(),op.getArgGeometry(e));t.getLabel().setLocation(e,n)},jsts.operation.overlay.LineBuilder=n}(),function(){var t=javascript.util.ArrayList,e=function(e,n){this.resultPointList=new t,this.op=e,this.geometryFactory=n};e.prototype.op=null,e.prototype.geometryFactory=null,e.prototype.resultPointList=null,e.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this.resultPointList},e.prototype.extractNonCoveredResultNodes=function(t){for(var e=this.op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==jsts.operation.overlay.OverlayOp.INTERSECTION)){var r=n.getLabel();jsts.operation.overlay.OverlayOp.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},e.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this.op.isCoveredByLA(e)){var n=this.geometryFactory.createPoint(e);this.resultPointList.add(n)}},jsts.operation.overlay.PointBuilder=e}(),function(){var t=jsts.algorithm.PointLocator,e=jsts.geom.Location,n=jsts.geomgraph.EdgeList,r=jsts.geomgraph.Label,o=jsts.geomgraph.PlanarGraph,i=jsts.geomgraph.Position,s=jsts.geomgraph.EdgeNodingValidator,a=jsts.operation.GeometryGraphOperation,u=jsts.operation.overlay.OverlayNodeFactory,l=jsts.operation.overlay.PolygonBuilder,c=jsts.operation.overlay.LineBuilder,p=jsts.operation.overlay.PointBuilder,h=jsts.util.Assert,d=javascript.util.ArrayList;jsts.operation.overlay.OverlayOp=function(e,r){this.ptLocator=new t,this.edgeList=new n,this.resultPolyList=new d,this.resultLineList=new d,this.resultPointList=new d,a.call(this,e,r),this.graph=new o(new u),this.geomFact=e.getFactory()},jsts.operation.overlay.OverlayOp.prototype=new a,jsts.operation.overlay.OverlayOp.constructor=jsts.operation.overlay.OverlayOp,jsts.operation.overlay.OverlayOp.INTERSECTION=1,jsts.operation.overlay.OverlayOp.UNION=2,
jsts.operation.overlay.OverlayOp.DIFFERENCE=3,jsts.operation.overlay.OverlayOp.SYMDIFFERENCE=4,jsts.operation.overlay.OverlayOp.overlayOp=function(t,e,n){var r=new jsts.operation.overlay.OverlayOp(t,e),o=r.getResultGeometry(n);return o},jsts.operation.overlay.OverlayOp.isResultOfOp=function(t,e){if(3===arguments.length)return jsts.operation.overlay.OverlayOp.isResultOfOp2.apply(this,arguments);var n=t.getLocation(0),r=t.getLocation(1);return jsts.operation.overlay.OverlayOp.isResultOfOp2(n,r,e)},jsts.operation.overlay.OverlayOp.isResultOfOp2=function(t,n,r){switch(t==e.BOUNDARY&&(t=e.INTERIOR),n==e.BOUNDARY&&(n=e.INTERIOR),r){case jsts.operation.overlay.OverlayOp.INTERSECTION:return t==e.INTERIOR&&n==e.INTERIOR;case jsts.operation.overlay.OverlayOp.UNION:return t==e.INTERIOR||n==e.INTERIOR;case jsts.operation.overlay.OverlayOp.DIFFERENCE:return t==e.INTERIOR&&n!=e.INTERIOR;case jsts.operation.overlay.OverlayOp.SYMDIFFERENCE:return t==e.INTERIOR&&n!=e.INTERIOR||t!=e.INTERIOR&&n==e.INTERIOR}return!1},jsts.operation.overlay.OverlayOp.prototype.ptLocator=null,jsts.operation.overlay.OverlayOp.prototype.geomFact=null,jsts.operation.overlay.OverlayOp.prototype.resultGeom=null,jsts.operation.overlay.OverlayOp.prototype.graph=null,jsts.operation.overlay.OverlayOp.prototype.edgeList=null,jsts.operation.overlay.OverlayOp.prototype.resultPolyList=null,jsts.operation.overlay.OverlayOp.prototype.resultLineList=null,jsts.operation.overlay.OverlayOp.prototype.resultPointList=null,jsts.operation.overlay.OverlayOp.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this.resultGeom},jsts.operation.overlay.OverlayOp.prototype.getGraph=function(){return this.graph},jsts.operation.overlay.OverlayOp.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var e=new d;this.arg[0].computeSplitEdges(e),this.arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),s.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new l(this.geomFact);n.add(this.graph),this.resultPolyList=n.getPolygons();var r=new c(this,this.geomFact,this.ptLocator);this.resultLineList=r.build(t);var o=new p(this,this.geomFact,this.ptLocator);this.resultPointList=o.build(t),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,t)},jsts.operation.overlay.OverlayOp.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},jsts.operation.overlay.OverlayOp.prototype.insertUniqueEdge=function(t){var e=this.edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),o=t.getLabel();e.isPointwiseEqual(t)||(o=new r(t.getLabel()),o.flip());var i=e.getDepth();i.isNull()&&i.add(n),i.add(o),n.merge(o)}else this.edgeList.add(t)},jsts.operation.overlay.OverlayOp.prototype.computeLabelsFromDepths=function(){for(var t=this.edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var o=0;2>o;o++)n.isNull(o)||!n.isArea()||r.isNull(o)||(0==r.getDelta(o)?n.toLine(o):(h.isTrue(!r.isNull(o,i.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(o,i.LEFT,r.getLocation(o,i.LEFT)),h.isTrue(!r.isNull(o,i.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(o,i.RIGHT,r.getLocation(o,i.RIGHT))))}}},jsts.operation.overlay.OverlayOp.prototype.replaceCollapsedEdges=function(){for(var t=new d,e=this.edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this.edgeList.addAll(t)},jsts.operation.overlay.OverlayOp.prototype.copyPoints=function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next(),r=this.graph.addNode(n.getCoordinate());r.setLabel(t,n.getLabel().getLocation(t))}},jsts.operation.overlay.OverlayOp.prototype.computeLabelling=function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().computeLabelling(this.arg)}this.mergeSymLabels(),this.updateNodeLabelling()},jsts.operation.overlay.OverlayOp.prototype.mergeSymLabels=function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().mergeSymLabels()}},jsts.operation.overlay.OverlayOp.prototype.updateNodeLabelling=function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},jsts.operation.overlay.OverlayOp.prototype.labelIncompleteNodes=function(){for(var t=0,e=this.graph.getNodes().iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(t++,r.isNull(0)?this.labelIncompleteNode(n,0):this.labelIncompleteNode(n,1)),n.getEdges().updateLabelling(r)}},jsts.operation.overlay.OverlayOp.prototype.labelIncompleteNode=function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setLocation(e,n)},jsts.operation.overlay.OverlayOp.prototype.findResultAreaEdges=function(t){for(var e=this.graph.getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getLabel();r.isArea()&&!n.isInteriorAreaEdge()&&jsts.operation.overlay.OverlayOp.isResultOfOp(r.getLocation(0,i.RIGHT),r.getLocation(1,i.RIGHT),t)&&n.setInResult(!0)}},jsts.operation.overlay.OverlayOp.prototype.cancelDuplicateResultEdges=function(){for(var t=this.graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},jsts.operation.overlay.OverlayOp.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this.resultLineList)||!!this.isCovered(t,this.resultPolyList)},jsts.operation.overlay.OverlayOp.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this.resultPolyList)},jsts.operation.overlay.OverlayOp.prototype.isCovered=function(t,n){for(var r=n.iterator();r.hasNext();){var o=r.next(),i=this.ptLocator.locate(t,o);if(i!=e.EXTERIOR)return!0}return!1},jsts.operation.overlay.OverlayOp.prototype.computeGeometry=function(t,e,n){var r=new d;return r.addAll(t),r.addAll(e),r.addAll(n),this.geomFact.buildGeometry(r)},jsts.operation.overlay.OverlayOp.prototype.createEmptyResult=function(t){var e=null;switch(resultDimension(t,this.arg[0].getGeometry(),this.arg[1].getGeometry())){case-1:e=geomFact.createGeometryCollection();break;case 0:e=geomFact.createPoint(null);break;case 1:e=geomFact.createLineString(null);break;case 2:e=geomFact.createPolygon(null,null)}return e},jsts.operation.overlay.OverlayOp.prototype.resultDimension=function(t,e,n){var r=e.getDimension(),o=n.getDimension(),i=-1;switch(t){case jsts.operation.overlay.OverlayOp.INTERSECTION:i=Math.min(r,o);break;case jsts.operation.overlay.OverlayOp.UNION:i=Math.max(r,o);break;case jsts.operation.overlay.OverlayOp.DIFFERENCE:i=r;break;case jsts.operation.overlay.OverlayOp.SYMDIFFERENCE:i=Math.max(r,o)}return i}}(),function(){var t=jsts.operation.overlay.OverlayOp,e=jsts.operation.overlay.snap.GeometrySnapper,n=function(t,e){this.geom=[],this.geom[0]=t,this.geom[1]=e,this.computeSnapTolerance()};n.overlayOp=function(t,e,r){var o=new n(t,e);return o.getResultGeometry(r)},n.intersection=function(e,n){return this.overlayOp(e,n,t.INTERSECTION)},n.union=function(e,n){return this.overlayOp(e,n,t.UNION)},n.difference=function(e,n){return overlayOp(e,n,t.DIFFERENCE)},n.symDifference=function(e,n){return overlayOp(e,n,t.SYMDIFFERENCE)},n.prototype.geom=null,n.prototype.snapTolerance=null,n.prototype.computeSnapTolerance=function(){this.snapTolerance=e.computeOverlaySnapTolerance(this.geom[0],this.geom[1])},n.prototype.getResultGeometry=function(e){var n=this.snap(this.geom),r=t.overlayOp(n[0],n[1],e);return this.prepareResult(r)},n.prototype.selfSnap=function(t){var n=new e(t),r=n.snapTo(t,this.snapTolerance);return r},n.prototype.snap=function(t){var n=t,r=e.snap(n[0],n[1],this.snapTolerance);return r},n.prototype.prepareResult=function(t){return t},n.prototype.cbr=null,n.prototype.removeCommonBits=function(){this.cbr=new jsts.precision.CommonBitsRemover,this.cbr.add(this.geom[0]),this.cbr.add(this.geom[1]);var t=[];return t[0]=cbr.removeCommonBits(this.geom[0].clone()),t[1]=cbr.removeCommonBits(this.geom[1].clone()),t},jsts.operation.overlay.snap.SnapOverlayOp=n}(),jsts.geomgraph.index.EdgeSetIntersector=function(){},jsts.geomgraph.index.EdgeSetIntersector.prototype.computeIntersections=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.index.EdgeSetIntersector.prototype.computeIntersections2=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.index.SimpleMCSweepLineIntersector=function(){this.events=[]},jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype=new jsts.geomgraph.index.EdgeSetIntersector,jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.events=null,jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.nOverlaps=0,jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.computeIntersections=function(t,e,n){return e instanceof javascript.util.List?void this.computeIntersections2.apply(this,arguments):(n?this.addList2(t,null):this.addList(t),void this.computeIntersections3(e))},jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.computeIntersections2=function(t,e,n){this.addList2(t,t),this.addList2(e,e),this.computeIntersections3(n)},jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.add=function(t,e){if(t instanceof javascript.util.List)return void this.addList.apply(this,arguments);for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),o=0;o<r.length-1;o++){var i=new jsts.geomgraph.index.MonotoneChain(n,o),s=new jsts.geomgraph.index.SweepLineEvent(n.getMinX(o),i,e);this.events.push(s),this.events.push(new jsts.geomgraph.index.SweepLineEvent(n.getMaxX(o),s))}},jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.addList=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.add(n,n)}},jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.addList2=function(t,e){for(var n=t.iterator();n.hasNext();){var r=n.next();this.add(r,e)}},jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.prepareEvents=function(){this.events.sort(function(t,e){return t.compareTo(e)});for(var t=0;t<this.events.length;t++){var e=this.events[t];e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.computeIntersections3=function(t){this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.length;e++){var n=this.events[e];n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t)}},jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype.processOverlaps=function(t,e,n,r){for(var o=n.getObject(),i=t;e>i;i++){var s=this.events[i];if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(o.computeIntersections(a,r),this.nOverlaps++)}}},jsts.algorithm.locate.SimplePointInAreaLocator=function(t){this.geom=t},jsts.algorithm.locate.SimplePointInAreaLocator.locate=function(t,e){return e.isEmpty()?jsts.geom.Location.EXTERIOR:jsts.algorithm.locate.SimplePointInAreaLocator.containsPoint(t,e)?jsts.geom.Location.INTERIOR:jsts.geom.Location.EXTERIOR},jsts.algorithm.locate.SimplePointInAreaLocator.containsPoint=function(t,e){if(e instanceof jsts.geom.Polygon)return jsts.algorithm.locate.SimplePointInAreaLocator.containsPointInPolygon(t,e);if(e instanceof jsts.geom.GeometryCollection||e instanceof jsts.geom.MultiPoint||e instanceof jsts.geom.MultiLineString||e instanceof jsts.geom.MultiPolygon)for(var n=0;n<e.geometries.length;n++){var r=e.geometries[n];if(r!==e&&jsts.algorithm.locate.SimplePointInAreaLocator.containsPoint(t,r))return!0}return!1},jsts.algorithm.locate.SimplePointInAreaLocator.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!jsts.algorithm.locate.SimplePointInAreaLocator.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var o=e.getInteriorRingN(r);if(jsts.algorithm.locate.SimplePointInAreaLocator.isPointInRing(t,o))return!1}return!0},jsts.algorithm.locate.SimplePointInAreaLocator.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&jsts.algorithm.CGAlgorithms.isPointInRing(t,e.getCoordinates())},jsts.algorithm.locate.SimplePointInAreaLocator.prototype.geom=null,jsts.algorithm.locate.SimplePointInAreaLocator.prototype.locate=function(t){return jsts.algorithm.locate.SimplePointInAreaLocator.locate(t,geom)},function(){var t=jsts.geom.Location,e=jsts.geomgraph.Position,n=jsts.geomgraph.EdgeEndStar,r=jsts.util.Assert;jsts.geomgraph.DirectedEdgeStar=function(){jsts.geomgraph.EdgeEndStar.call(this)},jsts.geomgraph.DirectedEdgeStar.prototype=new n,jsts.geomgraph.DirectedEdgeStar.constructor=jsts.geomgraph.DirectedEdgeStar,jsts.geomgraph.DirectedEdgeStar.prototype.resultAreaEdgeList=null,jsts.geomgraph.DirectedEdgeStar.prototype.label=null,jsts.geomgraph.DirectedEdgeStar.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},jsts.geomgraph.DirectedEdgeStar.prototype.getLabel=function(){return this.label},jsts.geomgraph.DirectedEdgeStar.prototype.getOutgoingDegree=function(){for(var t=0,e=this.iterator();e.hasNext();){var n=e.next();n.isInResult()&&t++}return t},jsts.geomgraph.DirectedEdgeStar.prototype.getOutgoingDegree=function(t){for(var e=0,n=this.iterator();n.hasNext();){var r=n.next();r.getEdgeRing()===t&&e++}return e},jsts.geomgraph.DirectedEdgeStar.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(1>e)return null;var n=t.get(0);if(1==e)return n;var o=t.get(e-1),i=n.getQuadrant(),s=o.getQuadrant();return jsts.geomgraph.Quadrant.isNorthern(i)&&jsts.geomgraph.Quadrant.isNorthern(s)?n:jsts.geomgraph.Quadrant.isNorthern(i)||jsts.geomgraph.Quadrant.isNorthern(s)?0!=n.getDy()?n:0!=o.getDy()?o:(r.shouldNeverReachHere("found two horizontal edges incident on node"),null):o},jsts.geomgraph.DirectedEdgeStar.prototype.computeLabelling=function(e){n.prototype.computeLabelling.call(this,e),this.label=new jsts.geomgraph.Label(t.NONE);for(var r=this.iterator();r.hasNext();)for(var o=r.next(),i=o.getEdge(),s=i.getLabel(),a=0;2>a;a++){var u=s.getLocation(a);(u===t.INTERIOR||u===t.BOUNDARY)&&this.label.setLocation(a,t.INTERIOR)}},jsts.geomgraph.DirectedEdgeStar.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();n.merge(e.getSym().getLabel())}},jsts.geomgraph.DirectedEdgeStar.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();r.setAllLocationsIfNull(0,t.getLocation(0)),r.setAllLocationsIfNull(1,t.getLocation(1))}},jsts.geomgraph.DirectedEdgeStar.prototype.getResultAreaEdges=function(){if(null!==this.resultAreaEdgeList)return this.resultAreaEdgeList;this.resultAreaEdgeList=new javascript.util.ArrayList;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this.resultAreaEdgeList.add(e)}return this.resultAreaEdgeList},jsts.geomgraph.DirectedEdgeStar.prototype.SCANNING_FOR_INCOMING=1,jsts.geomgraph.DirectedEdgeStar.prototype.LINKING_TO_OUTGOING=2,jsts.geomgraph.DirectedEdgeStar.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this.SCANNING_FOR_INCOMING,o=0;o<this.resultAreaEdgeList.size();o++){var i=this.resultAreaEdgeList.get(o),s=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this.SCANNING_FOR_INCOMING:if(!s.isInResult())continue;e=s,n=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this.SCANNING_FOR_INCOMING}}if(n===this.LINKING_TO_OUTGOING){if(null===t)throw new jsts.error.TopologyError("no outgoing dirEdge found",this.getCoordinate());r.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},jsts.geomgraph.DirectedEdgeStar.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,o=this.SCANNING_FOR_INCOMING,i=this.resultAreaEdgeList.size()-1;i>=0;i--){var s=this.resultAreaEdgeList.get(i),a=s.getSym();switch(null===e&&s.getEdgeRing()===t&&(e=s),o){case this.SCANNING_FOR_INCOMING:if(a.getEdgeRing()!=t)continue;n=a,o=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(s.getEdgeRing()!==t)continue;n.setNextMin(s),o=this.SCANNING_FOR_INCOMING}}o===this.LINKING_TO_OUTGOING&&(r.isTrue(null!==e,"found null for first outgoing dirEdge"),r.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},jsts.geomgraph.DirectedEdgeStar.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this.edgeList.size()-1;n>=0;n--){var r=this.edgeList.get(n),o=r.getSym();null===e&&(e=o),null!==t&&o.setNext(t),t=r}e.setNext(t)},jsts.geomgraph.DirectedEdgeStar.prototype.findCoveredLineEdges=function(){for(var e=t.NONE,n=this.iterator();n.hasNext();){var r=n.next(),o=r.getSym();if(!r.isLineEdge()){if(r.isInResult()){e=t.INTERIOR;break}if(o.isInResult()){e=t.EXTERIOR;break}}}if(e!==t.NONE)for(var i=e,n=this.iterator();n.hasNext();){var r=n.next(),o=r.getSym();r.isLineEdge()?r.getEdge().setCovered(i===t.INTERIOR):(r.isInResult()&&(i=t.EXTERIOR),o.isInResult()&&(i=t.INTERIOR))}},jsts.geomgraph.DirectedEdgeStar.prototype.computeDepths=function(t){if(2===arguments.length)return void this.computeDepths2.apply(this,arguments);var n=this.findIndex(t),r=(t.getLabel(),t.getDepth(e.LEFT)),o=t.getDepth(e.RIGHT),i=this.computeDepths2(n+1,this.edgeList.size(),r),s=this.computeDepths2(0,n,i);if(s!=o)throw new jsts.error.TopologyError("depth mismatch at "+t.getCoordinate())},jsts.geomgraph.DirectedEdgeStar.prototype.computeDepths2=function(t,n,r){for(var o=r,i=t;n>i;i++){var s=this.edgeList.get(i);s.getLabel(),s.setEdgeDepths(e.RIGHT,o),o=s.getDepth(e.LEFT)}return o}}(),jsts.algorithm.CentroidLine=function(){this.centSum=new jsts.geom.Coordinate},jsts.algorithm.CentroidLine.prototype.centSum=null,jsts.algorithm.CentroidLine.prototype.totalLength=0,jsts.algorithm.CentroidLine.prototype.add=function(t){if(t instanceof Array)return void this.add2.apply(this,arguments);if(t instanceof jsts.geom.LineString)this.add(t.getCoordinates());else if(t instanceof jsts.geom.Polygon){var e=t;this.add(e.getExteriorRing().getCoordinates());for(var n=0;n<e.getNumInteriorRing();n++)this.add(e.getInteriorRingN(n).getCoordinates())}else if(t instanceof jsts.geom.GeometryCollection||t instanceof jsts.geom.MultiPoint||t instanceof jsts.geom.MultiLineString||t instanceof jsts.geom.MultiPolygon)for(var r=t,n=0;n<r.getNumGeometries();n++)this.add(r.getGeometryN(n))},jsts.algorithm.CentroidLine.prototype.getCentroid=function(){var t=new jsts.geom.Coordinate;return t.x=this.centSum.x/this.totalLength,t.y=this.centSum.y/this.totalLength,t},jsts.algorithm.CentroidLine.prototype.add2=function(t){for(var e=0;e<t.length-1;e++){var n=t[e].distance(t[e+1]);this.totalLength+=n;var r=(t[e].x+t[e+1].x)/2;this.centSum.x+=n*r;var o=(t[e].y+t[e+1].y)/2;this.centSum.y+=n*o}},jsts.index.IntervalSize=function(){},jsts.index.IntervalSize.MIN_BINARY_EXPONENT=-50,jsts.index.IntervalSize.isZeroWidth=function(t,e){var n=e-t;if(0===n)return!0;var r,o,i;return r=Math.max(Math.abs(t),Math.abs(e)),o=n/r,i=jsts.index.DoubleBits.exponent(o),i<=jsts.index.IntervalSize.MIN_BINARY_EXPONENT},jsts.geomgraph.index.SimpleEdgeSetIntersector=function(){},jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype=new jsts.geomgraph.index.EdgeSetIntersector,jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.nOverlaps=0,jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.computeIntersections=function(t,e,n){if(e instanceof javascript.util.List)return void this.computeIntersections2.apply(this,arguments);this.nOverlaps=0;for(var r=t.iterator();r.hasNext();)for(var o=r.next(),i=t.iterator();i.hasNext();){var s=i.next();(n||o!=s)&&this.computeIntersects(o,s,e)}},jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.computeIntersections2=function(t,e,n){this.nOverlaps=0;for(var r=t.iterator();r.hasNext();)for(var o=r.next(),i=e.iterator();i.hasNext();){var s=i.next();this.computeIntersects(o,s,n)}},jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.computeIntersects=function(t,e,n){var r,o,i=t.getCoordinates(),s=e.getCoordinates();for(r=0;r<i.length-1;r++)for(o=0;o<s.length-1;o++)n.addIntersections(t,r,e,o)},jsts.geomgraph.Edge=function(t,e){this.pts=t,this.label=e,this.eiList=new jsts.geomgraph.EdgeIntersectionList(this),this.depth=new jsts.geomgraph.Depth},jsts.geomgraph.Edge.prototype=new jsts.geomgraph.GraphComponent,jsts.geomgraph.Edge.constructor=jsts.geomgraph.Edge,jsts.geomgraph.Edge.updateIM=function(t,e){e.setAtLeastIfValid(t.getLocation(0,jsts.geomgraph.Position.ON),t.getLocation(1,jsts.geomgraph.Position.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,jsts.geomgraph.Position.LEFT),t.getLocation(1,jsts.geomgraph.Position.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,jsts.geomgraph.Position.RIGHT),t.getLocation(1,jsts.geomgraph.Position.RIGHT),2))},jsts.geomgraph.Edge.prototype.pts=null,jsts.geomgraph.Edge.prototype.env=null,jsts.geomgraph.Edge.prototype.name=null,jsts.geomgraph.Edge.prototype.mce=null,jsts.geomgraph.Edge.prototype._isIsolated=!0,jsts.geomgraph.Edge.prototype.depth=null,jsts.geomgraph.Edge.prototype.depthDelta=0,jsts.geomgraph.Edge.prototype.eiList=null,jsts.geomgraph.Edge.prototype.getNumPoints=function(){return this.pts.length},jsts.geomgraph.Edge.prototype.getEnvelope=function(){if(null===this.env){this.env=new jsts.geom.Envelope;for(var t=0;t<this.pts.length;t++)this.env.expandToInclude(pts[t])}return env},jsts.geomgraph.Edge.prototype.getDepth=function(){return this.depth},jsts.geomgraph.Edge.prototype.getDepthDelta=function(){return this.depthDelta},jsts.geomgraph.Edge.prototype.setDepthDelta=function(t){this.depthDelta=t},jsts.geomgraph.Edge.prototype.getCoordinates=function(){return this.pts},jsts.geomgraph.Edge.prototype.getCoordinate=function(t){return void 0===t?this.pts.length>0?this.pts[0]:null:this.pts[t]},jsts.geomgraph.Edge.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},jsts.geomgraph.Edge.prototype.setIsolated=function(t){this._isIsolated=t},jsts.geomgraph.Edge.prototype.isIsolated=function(){return this._isIsolated},jsts.geomgraph.Edge.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},jsts.geomgraph.Edge.prototype.addIntersection=function(t,e,n,r){var o=new jsts.geom.Coordinate(t.getIntersection(r)),i=e,s=t.getEdgeDistance(n,r),a=i+1;if(a<this.pts.length){var u=this.pts[a];o.equals2D(u)&&(i=a,s=0)}this.eiList.add(o,i,s)},jsts.geomgraph.Edge.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},jsts.geomgraph.Edge.prototype.getEdgeIntersectionList=function(){return this.eiList},jsts.geomgraph.Edge.prototype.getMonotoneChainEdge=function(){return null==this.mce&&(this.mce=new jsts.geomgraph.index.MonotoneChainEdge(this)),this.mce},jsts.geomgraph.Edge.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},jsts.geomgraph.Edge.prototype.isCollapsed=function(){return!!this.label.isArea()&&(3==this.pts.length&&!!this.pts[0].equals(this.pts[2]))},jsts.geomgraph.Edge.prototype.getCollapsedEdge=function(){var t=[];t[0]=this.pts[0],t[1]=this.pts[1];var e=new jsts.geomgraph.Edge(t,jsts.geomgraph.Label.toLineLabel(this.label));return e},jsts.geomgraph.Edge.prototype.computeIM=function(t){jsts.geomgraph.Edge.updateIM(this.label,t)},jsts.geomgraph.Edge.prototype.isPointwiseEqual=function(t){if(this.pts.length!=t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},jsts.noding.Octant=function(){throw jsts.error.AbstractMethodInvocationError()},jsts.noding.Octant.octant=function(t,e){if(t instanceof jsts.geom.Coordinate)return jsts.noding.Octant.octant2.apply(this,arguments);if(0===t&&0===e)throw new jsts.error.IllegalArgumentError("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5},jsts.noding.Octant.octant2=function(t,e){var n=e.x-t.x,r=e.y-t.y;if(0===n&&0===r)throw new jsts.error.IllegalArgumentError("Cannot compute the octant for two identical points "+t);return jsts.noding.Octant.octant(n,r)},jsts.operation.union.UnionInteracting=function(t,e){this.g0=t,this.g1=e,this.geomFactory=t.getFactory(),this.interacts0=[],this.interacts1=[]},jsts.operation.union.UnionInteracting.union=function(t,e){var n=new jsts.operation.union.UnionInteracting(t,e);return n.union()},jsts.operation.union.UnionInteracting.prototype.geomFactory=null,jsts.operation.union.UnionInteracting.prototype.g0=null,jsts.operation.union.UnionInteracting.prototype.g1=null,jsts.operation.union.UnionInteracting.prototype.interacts0=null,jsts.operation.union.UnionInteracting.prototype.interacts1=null,jsts.operation.union.UnionInteracting.prototype.union=function(){this.computeInteracting();var t=this.extractElements(this.g0,this.interacts0,!0),e=this.extractElements(this.g1,this.interacts1,!0);t.isEmpty()||e.isEmpty();var n=in0.union(e),r=this.extractElements(this.g0,this.interacts0,!1),o=this.extractElements(this.g1,this.interacts1,!1),i=jsts.geom.util.GeometryCombiner.combine(n,r,o);return i},jsts.operation.union.UnionInteracting.prototype.bufferUnion=function(t,e){var n=t.getFactory(),r=n.createGeometryCollection([t,e]),o=r.buffer(0);return o},jsts.operation.union.UnionInteracting.prototype.computeInteracting=function(t){if(t){for(var e=!1,n=0,r=g1.getNumGeometries();r>n;n++){var o=this.g1.getGeometryN(n),i=o.getEnvelopeInternal().intersects(t.getEnvelopeInternal());i&&(this.interacts1[n]=!0,e=!0)}return e}for(var n=0,r=this.g0.getNumGeometries();r>n;n++){var s=this.g0.getGeometryN(n);this.interacts0[n]=this.computeInteracting(s)}},jsts.operation.union.UnionInteracting.prototype.extractElements=function(t,e,n){for(var r=[],o=0,i=t.getNumGeometries();i>o;o++){var s=t.getGeometryN(o);e[o]===n&&r.push(s)}return this.geomFactory.buildGeometry(r)},jsts.triangulate.quadedge.TrianglePredicate=function(){},jsts.triangulate.quadedge.TrianglePredicate.isInCircleNonRobust=function(t,e,n,r){var o=(t.x*t.x+t.y*t.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(e,n,r)-(e.x*e.x+e.y*e.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(t,n,r)+(n.x*n.x+n.y*n.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(t,e,r)-(r.x*r.x+r.y*r.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(t,e,n)>0;return o},jsts.triangulate.quadedge.TrianglePredicate.isInCircleNormalized=function(t,e,n,r){var o,i,s,a,u,l,c,p,h,d,f,g,m;return o=t.x-r.x,i=t.y-r.y,s=e.x-r.x,a=e.y-r.y,u=n.x-r.x,l=n.y-r.y,c=o*a-s*i,p=s*l-u*a,h=u*i-o*l,d=o*o+i*i,f=s*s+a*a,g=u*u+l*l,m=d*p+f*h+g*c,m>0},jsts.triangulate.quadedge.TrianglePredicate.triArea=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)},jsts.triangulate.quadedge.TrianglePredicate.isInCircleRobust=function(t,e,n,r){return jsts.triangulate.quadedge.TrianglePredicate.isInCircleNormalized(t,e,n,r)},jsts.triangulate.quadedge.TrianglePredicate.isInCircleDDSlow=function(t,e,n,r){var o,i,s,a,u,l,c,p,h,d,f,g,m,y;return o=jsts.math.DD.valueOf(r.x),i=jsts.math.DD.valueOf(r.y),s=jsts.math.DD.valueOf(t.x),a=jsts.math.DD.valueOf(t.y),u=jsts.math.DD.valueOf(e.x),l=jsts.math.DD.valueOf(e.y),c=jsts.math.DD.valueOf(n.x),p=jsts.math.DD.valueOf(n.y),h=s.multiply(s).add(a.multiply(a)).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(u,l,c,p,o,i)),d=u.multiply(u).add(l.multiply(l)).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(s,a,c,p,o,i)),f=c.multiply(c).add(p.multiply(p)).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(s,a,u,l,o,i)),g=o.multiply(o).add(i.multiply(i)).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(s,a,u,l,c,p)),m=h.subtract(d).add(f).subtract(g),y=m.doubleValue()>0},jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow=function(t,e,n,r,o,i){return n.subtract(t).multiply(i.subtract(e)).subtract(r.subtract(e).multiply(o.subtract(t)))},jsts.triangulate.quadedge.TrianglePredicate.isInCircleDDFast=function(t,e,n,r){var o,i,s,a,u,l;return o=jsts.math.DD.sqr(t.x).selfAdd(jsts.math.DD.sqr(t.y)).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(e,n,r)),i=jsts.math.DD.sqr(e.x).selfAdd(jsts.math.DD.sqr(e.y)).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(t,n,r)),s=jsts.math.DD.sqr(n.x).selfAdd(jsts.math.DD.sqr(n.y)).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(t,e,r)),a=jsts.math.DD.sqr(r.x).selfAdd(jsts.math.DD.sqr(r.y)).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(t,e,n)),u=o.selfSubtract(i).selfAdd(s).selfSubtract(a),l=u.doubleValue()>0},jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast=function(t,e,n){var r,o;return r=jsts.math.DD.valueOf(e.x).selfSubtract(t.x).selfMultiply(jsts.math.DD.valueOf(n.y).selfSubtract(t.y)),o=jsts.math.DD.valueOf(e.y).selSubtract(t.y).selfMultiply(jsts.math.DD.valueOf(n.x).selfSubtract(t.x)),r.selfSubtract(o)},jsts.triangulate.quadedge.TrianglePredicate.isInCircleDDNormalized=function(t,e,n,r){var o,i,s,a,u,l,c,p,h,d,f,g,m,y;return o=jsts.math.DD.valueOf(t.x).selfSubtract(r.x),i=jsts.math.DD.valueOf(t.y).selfSubtract(r.y),s=jsts.math.DD.valueOf(e.x).selfSubtract(r.x),s=jsts.math.DD.valueOf(e.y).selfSubtract(r.y),u=jsts.math.DD.valueOf(n.x).selfSubtract(r.x),u=jsts.math.DD.valueOf(n.y).selfSubtract(r.y),c=o.multiply(a).selfSubtract(s.multiply(i)),p=s.multiply(l).selfSubtract(u.multiply(a)),h=u.multiply(i).selfSubtract(o.multiply(l)),d=o.multiply(o).selfAdd(i.multiply(i)),f=s.multiply(s).selfAdd(a.multiply(a)),g=u.multiply(u).selfAdd(l.multiply(l)),m=d.selfMultiply(p).selfAdd(f.selfMultiply(h)).selfAdd(g.selfMultiply(c)),y=m.doubleValue()>0},jsts.triangulate.quadedge.TrianglePredicate.isInCircleCC=function(t,e,n,r){var o,i,s;return o=jsts.geom.Triangle.circumcentre(t,e,n),i=t.distance(o),s=r.distance(o)-i,0>=s},jsts.operation.union.PointGeometryUnion=function(t,e){this.pointGeom=t,this.otherGeom=e,this.geomFact=e.getFactory()},jsts.operation.union.PointGeometryUnion.union=function(t,e){var n=new jsts.operation.union.PointGeometryUnion(t,e);return n.union()},jsts.operation.union.PointGeometryUnion.prototype.pointGeom=null,jsts.operation.union.PointGeometryUnion.prototype.otherGeom=null,jsts.operation.union.PointGeometryUnion.prototype.geomFact=null,jsts.operation.union.PointGeometryUnion.prototype.union=function(){for(var t=new jsts.algorithm.PointLocator,e=[],n=0,r=this.pointGeom.getNumGeometries();r>n;n++){var o=this.pointGeom.getGeometryN(n),i=o.getCoordinate(),s=t.locate(i,this.otherGeom);if(s===jsts.geom.Location.EXTERIOR){for(var a=!0,u=e.length;n--;)if(e[u].equals(i)){a=!1;break}a&&e.push(i)}}if(e.sort(function(t,e){return t.compareTo(e)}),0===e.length)return this.otherGeom;var l=null,c=jsts.geom.CoordinateArrays.toCoordinateArray(e);return l=1===c.length?this.geomFact.createPoint(c[0]):this.geomFact.createMultiPoint(c),jsts.geom.util.GeometryCombiner.combine(l,this.otherGeom)},jsts.noding.IntersectionFinderAdder=function(t){this.li=t,this.interiorIntersections=new javascript.util.ArrayList},jsts.noding.IntersectionFinderAdder.prototype=new jsts.noding.SegmentIntersector,jsts.noding.IntersectionFinderAdder.constructor=jsts.noding.IntersectionFinderAdder,jsts.noding.IntersectionFinderAdder.prototype.li=null,jsts.noding.IntersectionFinderAdder.prototype.interiorIntersections=null,jsts.noding.IntersectionFinderAdder.prototype.getInteriorIntersections=function(){return this.interiorIntersections},jsts.noding.IntersectionFinderAdder.prototype.processIntersections=function(t,e,n,r){if(t!==n||e!==r){var o=t.getCoordinates()[e],i=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];
if(this.li.computeIntersection(o,i,s,a),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var u=0;u<this.li.getIntersectionNum();u++)this.interiorIntersections.add(this.li.getIntersection(u));t.addIntersections(this.li,e,0),n.addIntersections(this.li,r,1)}}},jsts.noding.IntersectionFinderAdder.prototype.isDone=function(){return!1},jsts.noding.snapround.MCIndexSnapRounder=function(t){this.pm=t,this.li=new jsts.algorithm.RobustLineIntersector,this.li.setPrecisionModel(t),this.scaleFactor=t.getScale()},jsts.noding.snapround.MCIndexSnapRounder.prototype=new jsts.noding.Noder,jsts.noding.snapround.MCIndexSnapRounder.constructor=jsts.noding.snapround.MCIndexSnapRounder,jsts.noding.snapround.MCIndexSnapRounder.prototype.pm=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.li=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.scaleFactor=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.noder=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.pointSnapper=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.nodedSegStrings=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.getNodedSubstrings=function(){return jsts.noding.NodedSegmentString.getNodedSubstrings(this.nodedSegStrings)},jsts.noding.snapround.MCIndexSnapRounder.prototype.computeNodes=function(t){this.nodedSegStrings=t,this.noder=new jsts.noding.MCIndexNoder,this.pointSnapper=new jsts.noding.snapround.MCIndexPointSnapper(this.noder.getIndex()),this.snapRound(t,this.li)},jsts.noding.snapround.MCIndexSnapRounder.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},jsts.noding.snapround.MCIndexSnapRounder.prototype.findInteriorIntersections=function(t,e){var n=new jsts.noding.IntersectionFinderAdder(e);return this.noder.setSegmentIntersector(n),this.noder.computeNodes(t),n.getInteriorIntersections()},jsts.noding.snapround.MCIndexSnapRounder.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new jsts.noding.snapround.HotPixel(n,this.scaleFactor,this.li);this.pointSnapper.snap(r)}},jsts.noding.snapround.MCIndexSnapRounder.prototype.computeVertexSnaps=function(t){if(t instanceof jsts.noding.NodedSegmentString)return void this.computeVertexSnaps2.apply(this,arguments);for(var e=t.iterator();e.hasNext();){var n=e.next();this.computeVertexSnaps(n)}},jsts.noding.snapround.MCIndexSnapRounder.prototype.computeVertexSnaps2=function(t){for(var e=t.getCoordinates(),n=0;n<e.length-1;n++){var r=new jsts.noding.snapround.HotPixel(e[n],this.scaleFactor,this.li),o=this.pointSnapper.snap(r,t,n);o&&t.addIntersection(e[n],n)}},jsts.operation.valid.ConnectedInteriorTester=function(t){this.geomGraph=t,this.geometryFactory=new jsts.geom.GeometryFactory,this.disconnectedRingcoord=null},jsts.operation.valid.ConnectedInteriorTester.findDifferentPoint=function(t,e){var n=0,r=t.length;for(n;r>n;n++)if(!t[n].equals(e))return t[n];return null},jsts.operation.valid.ConnectedInteriorTester.prototype.getCoordinate=function(){return this.disconnectedRingcoord},jsts.operation.valid.ConnectedInteriorTester.prototype.isInteriorsConnected=function(){var t=new javascript.util.ArrayList;this.geomGraph.computeSplitEdges(t);var e=new jsts.geomgraph.PlanarGraph(new jsts.operation.overlay.OverlayNodeFactory);e.addEdges(t),this.setInteriorEdgesInResult(e),e.linkResultDirectedEdges();var n=this.buildEdgeRings(e.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),e),!this.hasUnvisitedShellEdge(n)},jsts.operation.valid.ConnectedInteriorTester.prototype.setInteriorEdgesInResult=function(t){for(var e,n=t.getEdgeEnds().iterator();n.hasNext();)e=n.next(),e.getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR&&e.setInResult(!0)},jsts.operation.valid.ConnectedInteriorTester.prototype.buildEdgeRings=function(t){for(var e=new javascript.util.ArrayList,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&null==r.getEdgeRing()){var o=new jsts.operation.overlay.MaximalEdgeRing(r,this.geometryFactory);o.linkDirectedEdgesForMinimalEdgeRings();var i=o.buildMinimalRings(),s=0,a=i.length;for(s;a>s;s++)e.add(i[s])}}return e},jsts.operation.valid.ConnectedInteriorTester.prototype.visitShellInteriors=function(t,e){if(t instanceof jsts.geom.Polygon){var n=t;this.visitInteriorRing(n.getExteriorRing(),e)}if(t instanceof jsts.geom.MultiPolygon)for(var r=t,o=0;o<r.getNumGeometries();o++){var n=r.getGeometryN(o);this.visitInteriorRing(n.getExteriorRing(),e)}},jsts.operation.valid.ConnectedInteriorTester.prototype.visitInteriorRing=function(t,e){var n=t.getCoordinates(),r=n[0],o=jsts.operation.valid.ConnectedInteriorTester.findDifferentPoint(n,r),i=e.findEdgeInSameDirection(r,o),s=e.findEdgeEnd(i),a=null;s.getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR?a=s:s.getSym().getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR&&(a=s.getSym()),this.visitLinkedDirectedEdges(a)},jsts.operation.valid.ConnectedInteriorTester.prototype.visitLinkedDirectedEdges=function(t){var e=t,n=t;do n.setVisited(!0),n=n.getNext();while(n!=e)},jsts.operation.valid.ConnectedInteriorTester.prototype.hasUnvisitedShellEdge=function(t){for(var e=0;e<t.size();e++){var n=t.get(e);if(!n.isHole()){var r=n.getEdges(),o=r[0];if(o.getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR)for(var i=0;i<r.length;i++)if(o=r[i],!o.isVisited())return disconnectedRingcoord=o.getCoordinate(),!0}}return!1},jsts.algorithm.InteriorPointLine=function(t){this.centroid,this.minDistance=Number.MAX_VALUE,this.interiorPoint=null,this.centroid=t.getCentroid().getCoordinate(),this.addInterior(t),null==this.interiorPoint&&this.addEndpoints(t)},jsts.algorithm.InteriorPointLine.prototype.getInteriorPoint=function(){return this.interiorPoint},jsts.algorithm.InteriorPointLine.prototype.addInterior=function(t){if(t instanceof jsts.geom.LineString)this.addInteriorCoord(t.getCoordinates());else if(t instanceof jsts.geom.GeometryCollection)for(var e=0;e<t.getNumGeometries();e++)this.addInterior(t.getGeometryN(e))},jsts.algorithm.InteriorPointLine.prototype.addInteriorCoord=function(t){for(var e=1;e<t.length-1;e++)this.add(t[e])},jsts.algorithm.InteriorPointLine.prototype.addEndpoints=function(t){if(t instanceof jsts.geom.LineString)this.addEndpointsCoord(t.getCoordinates());else if(t instanceof jsts.geom.GeometryCollection)for(var e=0;e<t.getNumGeometries();e++)this.addEndpoints(t.getGeometryN(e))},jsts.algorithm.InteriorPointLine.prototype.addEndpointsCoord=function(t){this.add(t[0]),this.add(t[t.length-1])},jsts.algorithm.InteriorPointLine.prototype.add=function(t){var e=t.distance(this.centroid);e<this.minDistance&&(this.interiorPoint=new jsts.geom.Coordinate(t),this.minDistance=e)},jsts.index.chain.MonotoneChainSelectAction=function(){this.tempEnv1=new jsts.geom.Envelope,this.selectedSegment=new jsts.geom.LineSegment},jsts.index.chain.MonotoneChainSelectAction.prototype.tempEnv1=null,jsts.index.chain.MonotoneChainSelectAction.prototype.selectedSegment=null,jsts.index.chain.MonotoneChainSelectAction.prototype.select=function(t,e){t.getLineSegment(e,this.selectedSegment),this.select2(this.selectedSegment)},jsts.index.chain.MonotoneChainSelectAction.prototype.select2=function(){},jsts.algorithm.MCPointInRing=function(t){this.ring=t,this.tree=null,this.crossings=0,this.interval=new jsts.index.bintree.Interval,this.buildIndex()},jsts.algorithm.MCPointInRing.MCSelecter=function(t,e){this.parent=e,this.p=t},jsts.algorithm.MCPointInRing.MCSelecter.prototype=new jsts.index.chain.MonotoneChainSelectAction,jsts.algorithm.MCPointInRing.MCSelecter.prototype.constructor=jsts.algorithm.MCPointInRing.MCSelecter,jsts.algorithm.MCPointInRing.MCSelecter.prototype.select2=function(t){this.parent.testLineSegment.apply(this.parent,[this.p,t])},jsts.algorithm.MCPointInRing.prototype.buildIndex=function(){this.tree=new jsts.index.bintree.Bintree;for(var t=jsts.geom.CoordinateArrays.removeRepeatedPoints(this.ring.getCoordinates()),e=jsts.index.chain.MonotoneChainBuilder.getChains(t),n=0;n<e.length;n++){var r=e[n],o=r.getEnvelope();this.interval.min=o.getMinY(),this.interval.max=o.getMaxY(),this.tree.insert(this.interval,r)}},jsts.algorithm.MCPointInRing.prototype.isInside=function(t){this.crossings=0;var e=new jsts.geom.Envelope((-Number.MAX_VALUE),Number.MAX_VALUE,t.y,t.y);this.interval.min=t.y,this.interval.max=t.y;for(var n=this.tree.query(this.interval),r=new jsts.algorithm.MCPointInRing.MCSelecter(t,this),o=n.iterator();o.hasNext();){var i=o.next();this.testMonotoneChain(e,r,i)}return this.crossings%2==1},jsts.algorithm.MCPointInRing.prototype.testMonotoneChain=function(t,e,n){n.select(t,e)},jsts.algorithm.MCPointInRing.prototype.testLineSegment=function(t,e){var n,r,o,i,s,a,u;a=e.p0,u=e.p1,r=a.x-t.x,o=a.y-t.y,i=u.x-t.x,s=u.y-t.y,(o>0&&0>=s||s>0&&0>=o)&&(n=jsts.algorithm.RobustDeterminant.signOfDet2x2(r,o,i,s)/(s-o),n>0&&this.crossings++)},jsts.operation.valid.TopologyValidationError=function(t,e){this.errorType=t,this.pt=null,null!=e&&(this.pt=e.clone())},jsts.operation.valid.TopologyValidationError.HOLE_OUTSIDE_SHELL=2,jsts.operation.valid.TopologyValidationError.NESTED_HOLES=3,jsts.operation.valid.TopologyValidationError.DISCONNECTED_INTERIOR=4,jsts.operation.valid.TopologyValidationError.SELF_INTERSECTION=5,jsts.operation.valid.TopologyValidationError.RING_SELF_INTERSECTION=6,jsts.operation.valid.TopologyValidationError.NESTED_SHELLS=7,jsts.operation.valid.TopologyValidationError.DUPLICATE_RINGS=8,jsts.operation.valid.TopologyValidationError.TOO_FEW_POINTS=9,jsts.operation.valid.TopologyValidationError.INVALID_COORDINATE=10,jsts.operation.valid.TopologyValidationError.RING_NOT_CLOSED=11,jsts.operation.valid.TopologyValidationError.prototype.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],jsts.operation.valid.TopologyValidationError.prototype.getCoordinate=function(){return this.pt},jsts.operation.valid.TopologyValidationError.prototype.getErrorType=function(){return this.errorType},jsts.operation.valid.TopologyValidationError.prototype.getMessage=function(){return this.errMsg[this.errorType]},jsts.operation.valid.TopologyValidationError.prototype.toString=function(){var t="";return null!=this.pt?(t=" at or near point "+this.pt,this.getMessage()+t):t},function(){jsts.geom.MultiPolygon=function(t,e){this.geometries=t||[],this.factory=e},jsts.geom.MultiPolygon.prototype=new jsts.geom.GeometryCollection,jsts.geom.MultiPolygon.constructor=jsts.geom.MultiPolygon,jsts.geom.MultiPolygon.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString(null);for(var t=[],e=0;e<this.geometries.length;e++)for(var n=this.geometries[e],r=n.getBoundary(),o=0;o<r.getNumGeometries();o++)t.push(r.getGeometryN(o));return this.getFactory().createMultiLineString(t)},jsts.geom.MultiPolygon.prototype.equalsExact=function(t,e){return!!this.isEquivalentClass(t)&&jsts.geom.GeometryCollection.prototype.equalsExact.call(this,t,e)},jsts.geom.MultiPolygon.prototype.CLASS_NAME="jsts.geom.MultiPolygon"}(),jsts.geom.CoordinateSequenceFilter=function(){},jsts.geom.CoordinateSequenceFilter.prototype.filter=jsts.abstractFunc,jsts.geom.CoordinateSequenceFilter.prototype.isDone=jsts.abstractFunc,jsts.geom.CoordinateSequenceFilter.prototype.isGeometryChanged=jsts.abstractFunc,function(){var t=function t(){if(this.min=0,this.max=0,1===arguments.length){var t=arguments[0];this.init(t.min,t.max)}else 2===arguments.length&&this.init(arguments[0],arguments[1])};t.prototype.init=function(t,e){this.min=t,this.max=e,t>e&&(this.min=e,this.max=t)},t.prototype.getMin=function(){return this.min},t.prototype.getMax=function(){return this.max},t.prototype.getWidth=function(){return this.max-this.min},t.prototype.expandToInclude=function(t){t.max>this.max&&(this.max=t.max),t.min<this.min&&(this.min=t.min)},t.prototype.overlaps=function(){return 1===arguments.length?this.overlapsInterval.apply(this,arguments):this.overlapsMinMax.apply(this,arguments)},t.prototype.overlapsInterval=function(t){return this.overlaps(t.min,t.max)},t.prototype.overlapsMinMax=function(t,e){return!(this.min>e||this.max<t)},t.prototype.contains=function(){var t;return arguments[0]instanceof jsts.index.bintree.Interval?(t=arguments[0],this.containsMinMax(t.min,t.max)):1===arguments.length?this.containsPoint(arguments[0]):this.containsMinMax(arguments[0],arguments[1])},t.prototype.containsMinMax=function(t,e){return t>=this.min&&e<=this.max},t.prototype.containsPoint=function(t){return t>=this.min&&t<=this.max},jsts.index.bintree.Interval=t}(),jsts.index.DoubleBits=function(){},jsts.index.DoubleBits.powerOf2=function(t){return Math.pow(2,t)},jsts.index.DoubleBits.exponent=function(t){return jsts.index.DoubleBits.CVTFWD(64,t)-1023},jsts.index.DoubleBits.CVTFWD=function(t,e){var n,r,o,i,s="",a={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}},u={32:8,64:11}[t];if(i||(n=0>e||0>1/e,isFinite(e)||(i=a[t],n&&(i.d+=1<<t/4-1),r=Math.pow(2,u)-1,o=0)),!i){for(r={32:127,64:1023}[t],o=Math.abs(e);o>=2;)r++,o/=2;for(;1>o&&r>0;)r--,o*=2;0>=r&&(o/=2,s="Zero or Denormal"),32===t&&r>254&&(s="Too big for Single",i={d:n?255:127,c:128,b:0,a:0},r=Math.pow(2,u)-1,o=0)}return r},function(){var t=jsts.index.DoubleBits,e=jsts.index.bintree.Interval,n=function(t){this.pt=0,this.level=0,this.computeKey(t)};n.computeLevel=function(e){var n,r=e.getWidth();return n=t.exponent(r)+1},n.prototype.getPoint=function(){return this.pt},n.prototype.getLevel=function(){return this.level},n.prototype.getInterval=function(){return this.interval},n.prototype.computeKey=function(t){for(this.level=n.computeLevel(t),this.interval=new e,this.computeInterval(this.level,t);!this.interval.contains(t);)this.level+=1,this.computeInterval(this.level,t)},n.prototype.computeInterval=function(e,n){var r=t.powerOf2(e);this.pt=Math.floor(n.getMin()/r)*r,this.interval.init(this.pt,this.pt+r)},jsts.index.bintree.Key=n}(),jsts.operation.buffer.SubgraphDepthLocater=function(t){this.subgraphs=[],this.seg=new jsts.geom.LineSegment,this.subgraphs=t},jsts.operation.buffer.SubgraphDepthLocater.prototype.subgraphs=null,jsts.operation.buffer.SubgraphDepthLocater.prototype.seg=null,jsts.operation.buffer.SubgraphDepthLocater.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);if(0===e.length)return 0;e.sort();var n=e[0];return n.leftDepth},jsts.operation.buffer.SubgraphDepthLocater.prototype.findStabbedSegments=function(t){if(3===arguments.length)return void this.findStabbedSegments2.apply(this,arguments);for(var e=[],n=0;n<this.subgraphs.length;n++){var r=this.subgraphs[n],o=r.getEnvelope();t.y<o.getMinY()||t.y>o.getMaxY()||this.findStabbedSegments2(t,r.getDirectedEdges(),e)}return e},jsts.operation.buffer.SubgraphDepthLocater.prototype.findStabbedSegments2=function(t,e,n){if(arguments[1]instanceof jsts.geomgraph.DirectedEdge)return void this.findStabbedSegments3(t,e,n);for(var r=e.iterator();r.hasNext();){var o=r.next();o.isForward()&&this.findStabbedSegments3(t,o,n)}},jsts.operation.buffer.SubgraphDepthLocater.prototype.findStabbedSegments3=function(t,e,n){for(var r=e.getEdge().getCoordinates(),o=0;o<r.length-1;o++){this.seg.p0=r[o],this.seg.p1=r[o+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse();var i=Math.max(this.seg.p0.x,this.seg.p1.x);if(!(i<t.x||this.seg.isHorizontal()||t.y<this.seg.p0.y||t.y>this.seg.p1.y||jsts.algorithm.CGAlgorithms.computeOrientation(this.seg.p0,this.seg.p1,t)===jsts.algorithm.CGAlgorithms.RIGHT)){var s=e.getDepth(jsts.geomgraph.Position.LEFT);this.seg.p0.equals(r[o])||(s=e.getDepth(jsts.geomgraph.Position.RIGHT));var a=new jsts.operation.buffer.SubgraphDepthLocater.DepthSegment(this.seg,s);n.push(a)}}},jsts.operation.buffer.SubgraphDepthLocater.DepthSegment=function(t,e){this.upwardSeg=new jsts.geom.LineSegment(t),this.leftDepth=e},jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.upwardSeg=null,jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.leftDepth=null,jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.compareTo=function(t){var e=t,n=this.upwardSeg.orientationIndex(e.upwardSeg);return 0===n&&(n=-1*e.upwardSeg.orientationIndex(upwardSeg)),0!==n?n:this.compareX(this.upwardSeg,e.upwardSeg)},jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},jsts.noding.snapround.HotPixel=function(t,e,n){this.corner=[],this.originalPt=t,this.pt=t,this.scaleFactor=e,this.li=n,1!==this.scaleFactor&&(this.pt=new jsts.geom.Coordinate(this.scale(t.x),this.scale(t.y)),this.p0Scaled=new jsts.geom.Coordinate,this.p1Scaled=new jsts.geom.Coordinate),this.initCorners(this.pt)},jsts.noding.snapround.HotPixel.prototype.li=null,jsts.noding.snapround.HotPixel.prototype.pt=null,jsts.noding.snapround.HotPixel.prototype.originalPt=null,jsts.noding.snapround.HotPixel.prototype.ptScaled=null,jsts.noding.snapround.HotPixel.prototype.p0Scaled=null,jsts.noding.snapround.HotPixel.prototype.p1Scaled=null,jsts.noding.snapround.HotPixel.prototype.scaleFactor=void 0,jsts.noding.snapround.HotPixel.prototype.minx=void 0,jsts.noding.snapround.HotPixel.prototype.maxx=void 0,jsts.noding.snapround.HotPixel.prototype.miny=void 0,jsts.noding.snapround.HotPixel.prototype.maxy=void 0,jsts.noding.snapround.HotPixel.prototype.corner=null,jsts.noding.snapround.HotPixel.prototype.safeEnv=null,jsts.noding.snapround.HotPixel.prototype.getCoordinate=function(){return this.originalPt},jsts.noding.snapround.HotPixel.SAFE_ENV_EXPANSION_FACTOR=.75,jsts.noding.snapround.HotPixel.prototype.getSafeEnvelope=function(){if(null===this.safeEnv){var t=jsts.noding.snapround.HotPixel.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new jsts.geom.Envelope(this.originalPt.x-t,this.originalPt.x+t,this.originalPt.y-t,this.originalPt.y+t)}return this.safeEnv},jsts.noding.snapround.HotPixel.prototype.initCorners=function(t){var e=.5;this.minx=t.x-e,this.maxx=t.x+e,this.miny=t.y-e,this.maxy=t.y+e,this.corner[0]=new jsts.geom.Coordinate(this.maxx,this.maxy),this.corner[1]=new jsts.geom.Coordinate(this.minx,this.maxy),this.corner[2]=new jsts.geom.Coordinate(this.minx,this.miny),this.corner[3]=new jsts.geom.Coordinate(this.maxx,this.miny)},jsts.noding.snapround.HotPixel.prototype.scale=function(t){return Math.round(t*this.scaleFactor)},jsts.noding.snapround.HotPixel.prototype.intersects=function(t,e){return 1===this.scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this.p0Scaled),this.copyScaled(e,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))},jsts.noding.snapround.HotPixel.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},jsts.noding.snapround.HotPixel.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),o=Math.min(t.y,e.y),i=Math.max(t.y,e.y),s=this.maxx<n||this.minx>r||this.maxy<o||this.miny>i;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return jsts.util.Assert.isTrue(!(s&&a),"Found bad envelope test"),a},jsts.noding.snapround.HotPixel.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!this.li.isProper()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),!!this.li.isProper()||(this.li.hasIntersection()&&(n=!0),this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),!!this.li.isProper()||(this.li.hasIntersection()&&(r=!0),this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),!!this.li.isProper()||(!(!n||!r)||(!!t.equals(this.pt)||!!e.equals(this.pt))))))},jsts.noding.snapround.HotPixel.prototype.intersectsPixelClosure=function(t,e){return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),!!this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),!!this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),!!this.li.hasIntersection())))},jsts.noding.snapround.HotPixel.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},jsts.operation.buffer.BufferInputLineSimplifier=function(t){this.inputLine=t},jsts.operation.buffer.BufferInputLineSimplifier.simplify=function(t,e){var n=new jsts.operation.buffer.BufferInputLineSimplifier(t);return n.simplify(e)},jsts.operation.buffer.BufferInputLineSimplifier.INIT=0,jsts.operation.buffer.BufferInputLineSimplifier.DELETE=1,jsts.operation.buffer.BufferInputLineSimplifier.KEEP=1,jsts.operation.buffer.BufferInputLineSimplifier.prototype.inputLine=null,jsts.operation.buffer.BufferInputLineSimplifier.prototype.distanceTol=null,jsts.operation.buffer.BufferInputLineSimplifier.prototype.isDeleted=null,jsts.operation.buffer.BufferInputLineSimplifier.prototype.angleOrientation=jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE,jsts.operation.buffer.BufferInputLineSimplifier.prototype.simplify=function(t){this.distanceTol=Math.abs(t),0>t&&(this.angleOrientation=jsts.algorithm.CGAlgorithms.CLOCKWISE),this.isDeleted=[],this.isDeleted.length=this.inputLine.length;var e=!1;do e=this.deleteShallowConcavities();while(e);return this.collapseLine()},jsts.operation.buffer.BufferInputLineSimplifier.prototype.deleteShallowConcavities=function(){for(var t=1,e=(this.inputLine.length-1,this.findNextNonDeletedIndex(t)),n=this.findNextNonDeletedIndex(e),r=!1;n<this.inputLine.length;){var o=!1;this.isDeletable(t,e,n,this.distanceTol)&&(this.isDeleted[e]=jsts.operation.buffer.BufferInputLineSimplifier.DELETE,o=!0,r=!0),t=o?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},jsts.operation.buffer.BufferInputLineSimplifier.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this.inputLine.length&&this.isDeleted[e]===jsts.operation.buffer.BufferInputLineSimplifier.DELETE;)e++;return e},jsts.operation.buffer.BufferInputLineSimplifier.prototype.collapseLine=function(){for(var t=[],e=0;e<this.inputLine.length;e++)this.isDeleted[e]!==jsts.operation.buffer.BufferInputLineSimplifier.DELETE&&t.push(this.inputLine[e]);return t},jsts.operation.buffer.BufferInputLineSimplifier.prototype.isDeletable=function(t,e,n,r){var o=this.inputLine[t],i=this.inputLine[e],s=this.inputLine[n];return!(!this.isConcave(o,i,s)||!this.isShallow(o,i,s,r))&&this.isShallowSampled(o,i,t,n,r)},jsts.operation.buffer.BufferInputLineSimplifier.prototype.isShallowConcavity=function(t,e,n,r){var o=jsts.algorithm.CGAlgorithms.computeOrientation(t,e,n),i=o===this.angleOrientation;if(!i)return!1;var s=jsts.algorithm.CGAlgorithms.distancePointLine(e,t,n);return r>s},jsts.operation.buffer.BufferInputLineSimplifier.NUM_PTS_TO_CHECK=10,jsts.operation.buffer.BufferInputLineSimplifier.prototype.isShallowSampled=function(t,e,n,r,o){var i=parseInt((r-n)/jsts.operation.buffer.BufferInputLineSimplifier.NUM_PTS_TO_CHECK);0>=i&&(i=1);for(var s=n;r>s;s+=i)if(!this.isShallow(t,e,this.inputLine[s],o))return!1;return!0},jsts.operation.buffer.BufferInputLineSimplifier.prototype.isShallow=function(t,e,n,r){var o=jsts.algorithm.CGAlgorithms.distancePointLine(e,t,n);return r>o},jsts.operation.buffer.BufferInputLineSimplifier.prototype.isConcave=function(t,e,n){var r=jsts.algorithm.CGAlgorithms.computeOrientation(t,e,n),o=r===this.angleOrientation;return o},jsts.geomgraph.index.SweepLineEvent=function(t,e,n){return e instanceof jsts.geomgraph.index.SweepLineEvent?(this.eventType=jsts.geomgraph.index.SweepLineEvent.DELETE,this.xValue=t,void(this.insertEvent=e)):(this.eventType=jsts.geomgraph.index.SweepLineEvent.INSERT,this.label=n,this.xValue=t,void(this.obj=e))},jsts.geomgraph.index.SweepLineEvent.INSERT=1,jsts.geomgraph.index.SweepLineEvent.DELETE=2,jsts.geomgraph.index.SweepLineEvent.prototype.label=null,jsts.geomgraph.index.SweepLineEvent.prototype.xValue=null,jsts.geomgraph.index.SweepLineEvent.prototype.eventType=null,jsts.geomgraph.index.SweepLineEvent.prototype.insertEvent=null,jsts.geomgraph.index.SweepLineEvent.prototype.deleteEventIndex=null,jsts.geomgraph.index.SweepLineEvent.prototype.obj=null,jsts.geomgraph.index.SweepLineEvent.prototype.isInsert=function(){return this.eventType==jsts.geomgraph.index.SweepLineEvent.INSERT},jsts.geomgraph.index.SweepLineEvent.prototype.isDelete=function(){return this.eventType==jsts.geomgraph.index.SweepLineEvent.DELETE},jsts.geomgraph.index.SweepLineEvent.prototype.getInsertEvent=function(){return this.insertEvent},jsts.geomgraph.index.SweepLineEvent.prototype.getDeleteEventIndex=function(){return this.deleteEventIndex},jsts.geomgraph.index.SweepLineEvent.prototype.setDeleteEventIndex=function(t){this.deleteEventIndex=t},jsts.geomgraph.index.SweepLineEvent.prototype.getObject=function(){return this.obj},jsts.geomgraph.index.SweepLineEvent.prototype.isSameLabel=function(t){return null!=this.label&&this.label==t.label},jsts.geomgraph.index.SweepLineEvent.prototype.compareTo=function(t){return this.xValue<t.xValue?-1:this.xValue>t.xValue?1:this.eventType<t.eventType?-1:this.eventType>t.eventType?1:0},jsts.geom.CoordinateList=function(t,e){this.array=[],e=void 0===e||e,void 0!==t&&this.add(t,e)},jsts.geom.CoordinateList.prototype=new javascript.util.ArrayList,jsts.geom.CoordinateList.prototype.iterator=null,jsts.geom.CoordinateList.prototype.remove=null,jsts.geom.CoordinateList.prototype.get=function(t){return this.array[t]},jsts.geom.CoordinateList.prototype.set=function(t,e){var n=this.array[t];return this.array[t]=e,n},jsts.geom.CoordinateList.prototype.size=function(){return this.array.length},jsts.geom.CoordinateList.prototype.add=function(){return arguments.length>1?this.addCoordinates.apply(this,arguments):this.array.push(arguments[0])},jsts.geom.CoordinateList.prototype.addCoordinates=function(t,e,n){if(t instanceof jsts.geom.Coordinate)return this.addCoordinate.apply(this,arguments);if("number"==typeof t)return this.insertCoordinate.apply(this,arguments);if(n=n||!0)for(var r=0;r<t.length;r++)this.addCoordinate(t[r],e);else for(var r=t.length-1;r>=0;r--)this.addCoordinate(t[r],e);return!0},jsts.geom.CoordinateList.prototype.addCoordinate=function(t,e){if(!e&&this.size()>=1){var n=this.get(this.size()-1);if(n.equals2D(t))return}this.add(t)},jsts.geom.CoordinateList.prototype.insertCoordinate=function(t,e,n){if(!n){var r=t>0?t-1:-1;if(-1!==r&&this.get(r).equals2D(e))return;var o=t<this.size()-1?t+1:-1;if(-1!==o&&this.get(o).equals2D(e))return}this.array.splice(t,0,e)},jsts.geom.CoordinateList.prototype.closeRing=function(){this.size()>0&&this.addCoordinate(new jsts.geom.Coordinate(this.get(0)),!1)},jsts.geom.CoordinateList.prototype.toArray=function(){return this.array},jsts.geom.CoordinateList.prototype.toCoordinateArray=function(){return this.array},jsts.operation.buffer.OffsetSegmentGenerator=function(t,e,n){this.seg0=new jsts.geom.LineSegment,this.seg1=new jsts.geom.LineSegment,this.offset0=new jsts.geom.LineSegment,this.offset1=new jsts.geom.LineSegment,this.precisionModel=t,this.bufParams=e,this.li=new jsts.algorithm.RobustLineIntersector,this.filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),this.bufParams.getQuadrantSegments()>=8&&this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_ROUND&&(this.closingSegLengthFactor=jsts.operation.buffer.OffsetSegmentGenerator.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)},jsts.operation.buffer.OffsetSegmentGenerator.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,jsts.operation.buffer.OffsetSegmentGenerator.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,jsts.operation.buffer.OffsetSegmentGenerator.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,jsts.operation.buffer.OffsetSegmentGenerator.MAX_CLOSING_SEG_LEN_FACTOR=80,jsts.operation.buffer.OffsetSegmentGenerator.prototype.maxCurveSegmentError=0,jsts.operation.buffer.OffsetSegmentGenerator.prototype.filletAngleQuantum=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.closingSegLengthFactor=1,jsts.operation.buffer.OffsetSegmentGenerator.prototype.segList=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.distance=0,jsts.operation.buffer.OffsetSegmentGenerator.prototype.precisionModel=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.bufParams=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.li=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.s0=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.s1=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.s2=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.seg0=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.seg1=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.offset0=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.offset1=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.side=0,jsts.operation.buffer.OffsetSegmentGenerator.prototype.hasNarrowConcaveAngle=!1,jsts.operation.buffer.OffsetSegmentGenerator.prototype.hasNarrowConcaveAngle=function(){return this.hasNarrowConcaveAngle},jsts.operation.buffer.OffsetSegmentGenerator.prototype.init=function(t){this.distance=t,this.maxCurveSegmentError=this.distance*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new jsts.operation.buffer.OffsetSegmentString,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(this.distance*jsts.operation.buffer.OffsetSegmentGenerator.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.initSideSegments=function(t,e,n){this.s1=t,this.s2=e,this.side=n,this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.getCoordinates=function(){return this.segList.getCoordinates()},jsts.operation.buffer.OffsetSegmentGenerator.prototype.closeRing=function(){this.segList.closeRing()},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addSegments=function(t,e){this.segList.addPts(t,e)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addFirstSegment=function(){this.segList.addPt(this.offset1.p0)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addLastSegment=function(){this.segList.addPt(this.offset1.p1)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addNextSegment=function(t,e){if(this.s0=this.s1,this.s1=this.s2,this.s2=t,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),!this.s1.equals(this.s2)){var n=jsts.algorithm.CGAlgorithms.computeOrientation(this.s0,this.s1,this.s2),r=n===jsts.algorithm.CGAlgorithms.CLOCKWISE&&this.side===jsts.geomgraph.Position.LEFT||n===jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE&&this.side===jsts.geomgraph.Position.RIGHT;0==n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)}},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addCollinear=function(t){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2);var e=this.li.getIntersectionNum();e>=2&&(this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_BEVEL||this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_MITRE?(t&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFillet(this.s1,this.offset0.p1,this.offset1.p0,jsts.algorithm.CGAlgorithms.CLOCKWISE,this.distance))},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addOutsideTurn=function(t,e){return this.offset0.p1.distance(this.offset1.p0)<this.distance*jsts.operation.buffer.OffsetSegmentGenerator.OFFSET_SEGMENT_SEPARATION_FACTOR?void this.segList.addPt(this.offset0.p1):void(this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(e&&this.segList.addPt(this.offset0.p1),
this.addFillet(this.s1,this.offset0.p1,this.offset1.p0,t,this.distance),this.segList.addPt(this.offset1.p0)))},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addInsideTurn=function(){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this.hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*jsts.operation.buffer.OffsetSegmentGenerator.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),this.closingSegLengthFactor>0){var t=new jsts.geom.Coordinate((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(t);var e=new jsts.geom.Coordinate((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(e)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}},jsts.operation.buffer.OffsetSegmentGenerator.prototype.computeOffsetSegment=function(t,e,n,r){var o=e===jsts.geomgraph.Position.LEFT?1:-1,i=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(i*i+s*s),u=o*n*i/a,l=o*n*s/a;r.p0.x=t.p0.x-l,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-l,r.p1.y=t.p1.y+u},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addLineEndCap=function(t,e){var n=new jsts.geom.LineSegment(t,e),r=new jsts.geom.LineSegment;this.computeOffsetSegment(n,jsts.geomgraph.Position.LEFT,this.distance,r);var o=new jsts.geom.LineSegment;this.computeOffsetSegment(n,jsts.geomgraph.Position.RIGHT,this.distance,o);var i=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,i);switch(this.bufParams.getEndCapStyle()){case jsts.operation.buffer.BufferParameters.CAP_ROUND:this.segList.addPt(r.p1),this.addFillet(e,a+Math.PI/2,a-Math.PI/2,jsts.algorithm.CGAlgorithms.CLOCKWISE,this.distance),this.segList.addPt(o.p1);break;case jsts.operation.buffer.BufferParameters.CAP_FLAT:this.segList.addPt(r.p1),this.segList.addPt(o.p1);break;case jsts.operation.buffer.BufferParameters.CAP_SQUARE:var u=new jsts.geom.Coordinate;u.x=Math.abs(this.distance)*Math.cos(a),u.y=Math.abs(this.distance)*Math.sin(a);var l=new jsts.geom.Coordinate(r.p1.x+u.x,r.p1.y+u.y),c=new jsts.geom.Coordinate(o.p1.x+u.x,o.p1.y+u.y);this.segList.addPt(l),this.segList.addPt(c)}},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addMitreJoin=function(t,e,n,r){var o=!0,i=null;try{i=jsts.algorithm.HCoordinate.intersection(e.p0,e.p1,n.p0,n.p1);var s=0>=r?1:i.distance(t)/Math.abs(r);s>this.bufParams.getMitreLimit()&&(this.isMitreWithinLimit=!1)}catch(a){a instanceof jsts.error.NotRepresentableError&&(i=new jsts.geom.Coordinate(0,0),this.isMitreWithinLimit=!1)}o?this.segList.addPt(i):this.addLimitedMitreJoin(e,n,r,bufParams.getMitreLimit())},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addLimitedMitreJoin=function(t,e,n,r){var o=this.seg0.p1,i=jsts.algorithm.Angle.angle(o,this.seg0.p0),s=(jsts.algorithm.Angle.angle(o,this.seg1.p1),jsts.algorithm.Angle.angleBetweenOriented(this.seg0.p0,o,this.seg1.p1)),a=s/2,u=jsts.algorithm.Angle.normalize(i+a),l=jsts.algorithm.Angle.normalize(u+Math.PI),c=r*n,p=c*Math.abs(Math.sin(a)),h=n-p,d=o.x+c*Math.cos(l),f=o.y+c*Math.sin(l),g=new jsts.geom.Coordinate(d,f),m=new jsts.geom.LineSegment(o,g),y=m.pointAlongOffset(1,h),v=m.pointAlongOffset(1,-h);this.side==jsts.geomgraph.Position.LEFT?(this.segList.addPt(y),this.segList.addPt(v)):(this.segList.addPt(v),this.segList.addPt(y))},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addBevelJoin=function(t,e){this.segList.addPt(t.p1),this.segList.addPt(e.p0)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addFillet=function(t,e,n,r,o){if(!(n instanceof jsts.geom.Coordinate))return void this.addFillet2.apply(this,arguments);var i=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,i),u=n.x-t.x,l=n.y-t.y,c=Math.atan2(l,u);r===jsts.algorithm.CGAlgorithms.CLOCKWISE?c>=a&&(a+=2*Math.PI):a>=c&&(a-=2*Math.PI),this.segList.addPt(e),this.addFillet(t,a,c,r,o),this.segList.addPt(n)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addFillet2=function(t,e,n,r,o){var i=r===jsts.algorithm.CGAlgorithms.CLOCKWISE?-1:1,s=Math.abs(e-n),a=parseInt(s/this.filletAngleQuantum+.5);if(!(1>a)){var u,l;u=0,l=s/a;for(var c=u,p=new jsts.geom.Coordinate;s>c;){var h=e+i*c;p.x=t.x+o*Math.cos(h),p.y=t.y+o*Math.sin(h),this.segList.addPt(p),c+=l}}},jsts.operation.buffer.OffsetSegmentGenerator.prototype.createCircle=function(t){var e=new jsts.geom.Coordinate(t.x+this.distance,t.y);this.segList.addPt(e),this.addFillet(t,0,2*Math.PI,-1,this.distance),this.segList.closeRing()},jsts.operation.buffer.OffsetSegmentGenerator.prototype.createSquare=function(t){this.segList.addPt(new jsts.geom.Coordinate(t.x+distance,t.y+distance)),this.segList.addPt(new jsts.geom.Coordinate(t.x+distance,t.y-distance)),this.segList.addPt(new jsts.geom.Coordinate(t.x-distance,t.y-distance)),this.segList.addPt(new jsts.geom.Coordinate(t.x-distance,t.y+distance)),this.segList.closeRing()},jsts.operation.overlay.MaximalEdgeRing=function(t,e){jsts.geomgraph.EdgeRing.call(this,t,e)},jsts.operation.overlay.MaximalEdgeRing.prototype=new jsts.geomgraph.EdgeRing,jsts.operation.overlay.MaximalEdgeRing.constructor=jsts.operation.overlay.MaximalEdgeRing,jsts.operation.overlay.MaximalEdgeRing.prototype.getNext=function(t){return t.getNext()},jsts.operation.overlay.MaximalEdgeRing.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},jsts.operation.overlay.MaximalEdgeRing.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this.startDe;do{var e=t.getNode();e.getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!=this.startDe)},jsts.operation.overlay.MaximalEdgeRing.prototype.buildMinimalRings=function(){var t=[],e=this.startDe;do{if(null===e.getMinEdgeRing()){var n=new jsts.operation.overlay.MinimalEdgeRing(e,this.geometryFactory);t.push(n)}e=e.getNext()}while(e!=this.startDe);return t},jsts.algorithm.CentroidPoint=function(){this.centSum=new jsts.geom.Coordinate},jsts.algorithm.CentroidPoint.prototype.ptCount=0,jsts.algorithm.CentroidPoint.prototype.centSum=null,jsts.algorithm.CentroidPoint.prototype.add=function(t){if(t instanceof jsts.geom.Point)this.add2(t.getCoordinate());else if(t instanceof jsts.geom.GeometryCollection||t instanceof jsts.geom.MultiPoint||t instanceof jsts.geom.MultiLineString||t instanceof jsts.geom.MultiPolygon)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))},jsts.algorithm.CentroidPoint.prototype.add2=function(t){this.ptCount+=1,this.centSum.x+=t.x,this.centSum.y+=t.y},jsts.algorithm.CentroidPoint.prototype.getCentroid=function(){var t=new jsts.geom.Coordinate;return t.x=this.centSum.x/this.ptCount,t.y=this.centSum.y/this.ptCount,t},jsts.operation.distance.ConnectedElementLocationFilter=function(t){this.locations=t},jsts.operation.distance.ConnectedElementLocationFilter.prototype=new jsts.geom.GeometryFilter,jsts.operation.distance.ConnectedElementLocationFilter.prototype.locations=null,jsts.operation.distance.ConnectedElementLocationFilter.getLocations=function(t){var e=[];return t.apply(new jsts.operation.distance.ConnectedElementLocationFilter(e)),e},jsts.operation.distance.ConnectedElementLocationFilter.prototype.filter=function(t){(t instanceof jsts.geom.Point||t instanceof jsts.geom.LineString||t instanceof jsts.geom.Polygon)&&this.locations.push(new jsts.operation.distance.GeometryLocation(t,0,t.getCoordinate()))},jsts.geomgraph.index.MonotoneChainEdge=function(t){this.e=t,this.pts=t.getCoordinates();var e=new jsts.geomgraph.index.MonotoneChainIndexer;this.startIndex=e.getChainStartIndices(this.pts)},jsts.geomgraph.index.MonotoneChainEdge.prototype.e=null,jsts.geomgraph.index.MonotoneChainEdge.prototype.pts=null,jsts.geomgraph.index.MonotoneChainEdge.prototype.startIndex=null,jsts.geomgraph.index.MonotoneChainEdge.prototype.env1=new jsts.geom.Envelope,jsts.geomgraph.index.MonotoneChainEdge.prototype.env2=new jsts.geom.Envelope,jsts.geomgraph.index.MonotoneChainEdge.prototype.getCoordinates=function(){return this.pts},jsts.geomgraph.index.MonotoneChainEdge.prototype.getStartIndexes=function(){return this.startIndex},jsts.geomgraph.index.MonotoneChainEdge.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return n>e?e:n},jsts.geomgraph.index.MonotoneChainEdge.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},jsts.geomgraph.index.MonotoneChainEdge.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},jsts.geomgraph.index.MonotoneChainEdge.prototype.computeIntersectsForChain=function(t,e,n,r){this.computeIntersectsForChain2(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)},jsts.geomgraph.index.MonotoneChainEdge.prototype.computeIntersectsForChain2=function(t,e,n,r,o,i){var s=this.pts[t],a=this.pts[e],u=n.pts[r],l=n.pts[o];if(e-t==1&&o-r==1)return void i.addIntersections(this.e,t,n.e,r);if(this.env1.init(s,a),this.env2.init(u,l),this.env1.intersects(this.env2)){var c=Math.floor((t+e)/2),p=Math.floor((r+o)/2);c>t&&(p>r&&this.computeIntersectsForChain2(t,c,n,r,p,i),o>p&&this.computeIntersectsForChain2(t,c,n,p,o,i)),e>c&&(p>r&&this.computeIntersectsForChain2(c,e,n,r,p,i),o>p&&this.computeIntersectsForChain2(c,e,n,p,o,i))}},function(){var t=javascript.util.ArrayList;jsts.operation.relate.EdgeEndBuilder=function(){},jsts.operation.relate.EdgeEndBuilder.prototype.computeEdgeEnds=function(e){if(2==arguments.length)return void this.computeEdgeEnds2.apply(this,arguments);for(var n=new t,r=e;r.hasNext();){var o=r.next();this.computeEdgeEnds2(o,n)}return n},jsts.operation.relate.EdgeEndBuilder.prototype.computeEdgeEnds2=function(t,e){var n=t.getEdgeIntersectionList();n.addEndpoints();var r=n.iterator(),o=null,i=null;if(r.hasNext()){var s=r.next();do o=i,i=s,s=null,r.hasNext()&&(s=r.next()),null!==i&&(this.createEdgeEndForPrev(t,e,i,o),this.createEdgeEndForNext(t,e,i,s));while(null!==i)}},jsts.operation.relate.EdgeEndBuilder.prototype.createEdgeEndForPrev=function(t,e,n,r){var o=n.segmentIndex;if(0===n.dist){if(0===o)return;o--}var i=t.getCoordinate(o);null!==r&&r.segmentIndex>=o&&(i=r.coord);var s=new jsts.geomgraph.Label(t.getLabel());s.flip();var a=new jsts.geomgraph.EdgeEnd(t,n.coord,i,s);e.add(a)},jsts.operation.relate.EdgeEndBuilder.prototype.createEdgeEndForNext=function(t,e,n,r){var o=n.segmentIndex+1;if(!(o>=t.getNumPoints()&&null===r)){var i=t.getCoordinate(o);null!==r&&r.segmentIndex===n.segmentIndex&&(i=r.coord);var s=new jsts.geomgraph.EdgeEnd(t,n.coord,i,new jsts.geomgraph.Label(t.getLabel()));e.add(s)}}}(),function(){var t=javascript.util.ArrayList,e=javascript.util.TreeSet,n=jsts.geom.CoordinateFilter;jsts.util.UniqueCoordinateArrayFilter=function(){this.treeSet=new e,this.list=new t},jsts.util.UniqueCoordinateArrayFilter.prototype=new n,jsts.util.UniqueCoordinateArrayFilter.prototype.treeSet=null,jsts.util.UniqueCoordinateArrayFilter.prototype.list=null,jsts.util.UniqueCoordinateArrayFilter.prototype.getCoordinates=function(){return this.list.toArray()},jsts.util.UniqueCoordinateArrayFilter.prototype.filter=function(t){this.treeSet.contains(t)||(this.list.add(t),this.treeSet.add(t))}}(),function(){var t=jsts.algorithm.CGAlgorithms,e=jsts.util.UniqueCoordinateArrayFilter,n=jsts.util.Assert,r=javascript.util.Stack,o=javascript.util.ArrayList,i=javascript.util.Arrays,s=function(t){this.origin=t};s.prototype.origin=null,s.prototype.compare=function(t,e){var n=t,r=e;return s.polarCompare(this.origin,n,r)},s.polarCompare=function(e,n,r){var o=n.x-e.x,i=n.y-e.y,s=r.x-e.x,a=r.y-e.y,u=t.computeOrientation(e,n,r);if(u==t.COUNTERCLOCKWISE)return 1;if(u==t.CLOCKWISE)return-1;var l=o*o+i*i,c=s*s+a*a;return c>l?-1:l>c?1:0},jsts.algorithm.ConvexHull=function(){if(1===arguments.length){var t=arguments[0];this.inputPts=jsts.algorithm.ConvexHull.extractCoordinates(t),this.geomFactory=t.getFactory()}else this.pts=arguments[0],this.geomFactory=arguments[1]},jsts.algorithm.ConvexHull.prototype.geomFactory=null,jsts.algorithm.ConvexHull.prototype.inputPts=null,jsts.algorithm.ConvexHull.extractCoordinates=function(t){var n=new e;return t.apply(n),n.getCoordinates()},jsts.algorithm.ConvexHull.prototype.getConvexHull=function(){if(0==this.inputPts.length)return this.geomFactory.createGeometryCollection(null);if(1==this.inputPts.length)return this.geomFactory.createPoint(this.inputPts[0]);if(2==this.inputPts.length)return this.geomFactory.createLineString(this.inputPts);var t=this.inputPts;this.inputPts.length>50&&(t=this.reduce(this.inputPts));var e=this.preSort(t),n=this.grahamScan(e),r=n.toArray();return this.lineOrPolygon(r)},jsts.algorithm.ConvexHull.prototype.reduce=function(e){var n=this.computeOctRing(e);if(null==n)return this.inputPts;for(var r=new javascript.util.TreeSet,o=0;o<n.length;o++)r.add(n[o]);for(var o=0;o<e.length;o++)t.isPointInRing(e[o],n)||r.add(e[o]);var i=r.toArray();return i.length<3?this.padArray3(i):i},jsts.algorithm.ConvexHull.prototype.padArray3=function(t){for(var e=[],n=0;n<e.length;n++)e[n]=n<t.length?t[n]:t[0];return e},jsts.algorithm.ConvexHull.prototype.preSort=function(t){for(var e,n=1;n<t.length;n++)(t[n].y<t[0].y||t[n].y==t[0].y&&t[n].x<t[0].x)&&(e=t[0],t[0]=t[n],t[n]=e);return i.sort(t,1,t.length,new s(t[0])),t},jsts.algorithm.ConvexHull.prototype.grahamScan=function(e){var n,o=new r;n=o.push(e[0]),n=o.push(e[1]),n=o.push(e[2]);for(var i=3;i<e.length;i++){for(n=o.pop();!o.empty()&&t.computeOrientation(o.peek(),n,e[i])>0;)n=o.pop();n=o.push(n),n=o.push(e[i])}return n=o.push(e[0]),o},jsts.algorithm.ConvexHull.prototype.isBetween=function(e,n,r){if(0!==t.computeOrientation(e,n,r))return!1;if(e.x!=r.x){if(e.x<=n.x&&n.x<=r.x)return!0;if(r.x<=n.x&&n.x<=e.x)return!0}if(e.y!=r.y){if(e.y<=n.y&&n.y<=r.y)return!0;if(r.y<=n.y&&n.y<=e.y)return!0}return!1},jsts.algorithm.ConvexHull.prototype.computeOctRing=function(t){var e=this.computeOctPts(t),n=new jsts.geom.CoordinateList;return n.add(e,!1),n.size()<3?null:(n.closeRing(),n.toCoordinateArray())},jsts.algorithm.ConvexHull.prototype.computeOctPts=function(t){for(var e=[],n=0;8>n;n++)e[n]=t[0];for(var r=1;r<t.length;r++)t[r].x<e[0].x&&(e[0]=t[r]),t[r].x-t[r].y<e[1].x-e[1].y&&(e[1]=t[r]),t[r].y>e[2].y&&(e[2]=t[r]),t[r].x+t[r].y>e[3].x+e[3].y&&(e[3]=t[r]),t[r].x>e[4].x&&(e[4]=t[r]),t[r].x-t[r].y>e[5].x-e[5].y&&(e[5]=t[r]),t[r].y<e[6].y&&(e[6]=t[r]),t[r].x+t[r].y<e[7].x+e[7].y&&(e[7]=t[r]);return e},jsts.algorithm.ConvexHull.prototype.lineOrPolygon=function(t){if(t=this.cleanRing(t),3==t.length)return this.geomFactory.createLineString([t[0],t[1]]);var e=this.geomFactory.createLinearRing(t);return this.geomFactory.createPolygon(e,null)},jsts.algorithm.ConvexHull.prototype.cleanRing=function(t){n.equals(t[0],t[t.length-1]);for(var e=new o,r=null,i=0;i<=t.length-2;i++){var s=t[i],a=t[i+1];s.equals(a)||null!=r&&this.isBetween(r,s,a)||(e.add(s),r=s)}e.add(t[t.length-1]);var u=[];return e.toArray(u)}}(),jsts.algorithm.MinimumDiameter=function(t,e){this.convexHullPts=null,this.minBaseSeg=new jsts.geom.LineSegment,this.minWidthPt=null,this.minPtIndex=0,this.minWidth=0,jsts.algorithm.MinimumDiameter.inputGeom=t,jsts.algorithm.MinimumDiameter.isConvex=e||!1},jsts.algorithm.MinimumDiameter.inputGeom=null,jsts.algorithm.MinimumDiameter.isConvex=!1,jsts.algorithm.MinimumDiameter.nextIndex=function(t,e){return e++,e>=t.length&&(e=0),e},jsts.algorithm.MinimumDiameter.computeC=function(t,e,n){return t*n.y-e*n.x},jsts.algorithm.MinimumDiameter.computeSegmentForLine=function(t,e,n){var r,o;return Math.abs(e)>Math.abs(t)?(r=new jsts.geom.Coordinate(0,n/e),o=new jsts.geom.Coordinate(1,n/e-t/e)):(r=new jsts.geom.Coordinate(n/t,0),o=new jsts.geom.Coordinate(n/t-e/t,1)),new jsts.geom.LineSegment(r,o)},jsts.algorithm.MinimumDiameter.prototype.getLength=function(){return this.computeMinimumDiameter(),this.minWidth},jsts.algorithm.MinimumDiameter.prototype.getWidthCoordinate=function(){return this.computeMinimumDiameter(),this.minWidthPt},jsts.algorithm.MinimumDiameter.prototype.getSupportingSegment=function(){this.computeMinimumDiameter();var t=[this.minBaseSeg.p0,this.minBaseSeg.p1];return jsts.algorithm.MinimumDiameter.inputGeom.getFactory().createLineString(t)},jsts.algorithm.MinimumDiameter.prototype.getDiameter=function(){if(this.computeMinimumDiameter(),null===this.minWidthPt)return jsts.algorithm.MinimumDiameter.inputGeom.getFactory().createLineString(null);var t=this.minBaseSeg.project(this.minWidthPt);return jsts.algorithm.MinimumDiameter.inputGeom.getFactory().createLineString([t,this.minWidthPt])},jsts.algorithm.MinimumDiameter.prototype.computeMinimumDiameter=function(){if(null===this.minWidthPt)if(jsts.algorithm.MinimumDiameter.isConvex)this.computeWidthConvex(jsts.algorithm.MinimumDiameter.inputGeom);else{var t=new jsts.algorithm.ConvexHull(jsts.algorithm.MinimumDiameter.inputGeom).getConvexHull();this.computeWidthConvex(t)}},jsts.algorithm.MinimumDiameter.prototype.computeWidthConvex=function(t){this.convexHullPts=t instanceof jsts.geom.Polygon?t.getExteriorRing().getCoordinates():t.getCoordinates(),0===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=null,this.minBaseSeg=null):1===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[0]):2===this.convexHullPts.length||3===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[1]):this.computeConvexRingMinDiameter(this.convexHullPts)},jsts.algorithm.MinimumDiameter.prototype.computeConvexRingMinDiameter=function(t){this.minWidth=Number.MAX_VALUE;for(var e=1,n=new jsts.geom.LineSegment,r=0;r<t.length-1;r++)n.p0=t[r],n.p1=t[r+1],e=this.findMaxPerpDistance(t,n,e)},jsts.algorithm.MinimumDiameter.prototype.findMaxPerpDistance=function(t,e,n){for(var r=e.distancePerpendicular(t[n]),o=r,i=n,s=i;o>=r;)r=o,i=s,s=jsts.algorithm.MinimumDiameter.nextIndex(t,i),o=e.distancePerpendicular(t[s]);return r<this.minWidth&&(this.minPtIndex=i,this.minWidth=r,this.minWidthPt=t[this.minPtIndex],this.minBaseSeg=new jsts.geom.LineSegment(e)),i},jsts.algorithm.MinimumDiameter.prototype.getMinimumRectangle=function(){if(this.computeMinimumDiameter(),0===this.minWidth)return this.minBaseSeg.p0.equals2D(this.minBaseSeg.p1)?jsts.algorithm.MinimumDiameter.inputGeom.getFactory().createPoint(this.minBaseSeg.p0):this.minBaseSeg.toGeometry(jsts.algorithm.MinimumDiameter.inputGeom.getFactory());for(var t=this.minBaseSeg.p1.x-this.minBaseSeg.p0.x,e=this.minBaseSeg.p1.y-this.minBaseSeg.p0.y,n=Number.MAX_VALUE,r=-Number.MAX_VALUE,o=Number.MAX_VALUE,i=-Number.MAX_VALUE,s=0;s<this.convexHullPts.length;s++){var a=jsts.algorithm.MinimumDiameter.computeC(t,e,this.convexHullPts[s]);a>r&&(r=a),n>a&&(n=a);var u=jsts.algorithm.MinimumDiameter.computeC(-e,t,this.convexHullPts[s]);u>i&&(i=u),o>u&&(o=u)}var l=jsts.algorithm.MinimumDiameter.computeSegmentForLine(-t,-e,i),c=jsts.algorithm.MinimumDiameter.computeSegmentForLine(-t,-e,o),p=jsts.algorithm.MinimumDiameter.computeSegmentForLine(-e,t,r),h=jsts.algorithm.MinimumDiameter.computeSegmentForLine(-e,t,n),d=p.lineIntersection(l),f=h.lineIntersection(l),g=h.lineIntersection(c),m=p.lineIntersection(c),y=jsts.algorithm.MinimumDiameter.inputGeom.getFactory().createLinearRing([d,f,g,m,d]);return jsts.algorithm.MinimumDiameter.inputGeom.getFactory().createPolygon(y,null)},function(){jsts.io.GeoJSONParser=function(t){this.geometryFactory=t||new jsts.geom.GeometryFactory,this.geometryTypes=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"]},jsts.io.GeoJSONParser.prototype.read=function(t){var e;e="string"==typeof t?JSON.parse(t):t;var n=e.type;if(!this.parse[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!=this.geometryTypes.indexOf(n)?this.parse[n].apply(this,[e.coordinates]):"GeometryCollection"===n?this.parse[n].apply(this,[e.geometries]):this.parse[n].apply(this,[e])},jsts.io.GeoJSONParser.prototype.parse={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!this.parse[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new jsts.geom.Coordinate(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new jsts.geom.Coordinate(t[0],t[1]),new jsts.geom.Coordinate(t[2],t[1]),new jsts.geom.Coordinate(t[2],t[3]),new jsts.geom.Coordinate(t[0],t[3]),new jsts.geom.Coordinate(t[0],t[1])])},Point:function(t){var e=new jsts.geom.Coordinate(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(this.parse.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=this.parse.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(this.parse.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=this.parse.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],o=1;o<t.length;++o){var i=t[o],s=this.parse.coordinates.apply(this,[i]),a=this.geometryFactory.createLinearRing(s);r.push(a)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.parse.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},jsts.io.GeoJSONParser.prototype.write=function(t){var e=t.CLASS_NAME.slice(10);if(!this.extract[e])throw new Error("Geometry is not supported");return this.extract[e].apply(this,[t])},jsts.io.GeoJSONParser.prototype.extract={coordinate:function(t){return[t.x,t.y]},Point:function(t){var e=this.extract.coordinate.apply(this,[t.coordinate]);return{type:"Point",coordinates:e}},MultiPoint:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var r=t.geometries[n],o=this.extract.Point.apply(this,[r]);e.push(o.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=0;n<t.points.length;++n){var r=t.points[n];e.push(this.extract.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var r=t.geometries[n],o=this.extract.LineString.apply(this,[r]);e.push(o.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=this.extract.LineString.apply(this,[t.shell]);e.push(n.coordinates);for(var r=0;r<t.holes.length;++r){var o=t.holes[r],i=this.extract.LineString.apply(this,[o]);e.push(i.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var r=t.geometries[n],o=this.extract.Polygon.apply(this,[r]);e.push(o.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var r=t.geometries[n],o=r.CLASS_NAME.slice(10);e.push(this.extract[o].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}}}(),jsts.triangulate.quadedge.Vertex=function(){1===arguments.length?this.initFromCoordinate(arguments[0]):this.initFromXY(arguments[0],arguments[1])},jsts.triangulate.quadedge.Vertex.LEFT=0,jsts.triangulate.quadedge.Vertex.RIGHT=1,jsts.triangulate.quadedge.Vertex.BEYOND=2,jsts.triangulate.quadedge.Vertex.BEHIND=3,jsts.triangulate.quadedge.Vertex.BETWEEN=4,jsts.triangulate.quadedge.Vertex.ORIGIN=5,jsts.triangulate.quadedge.Vertex.DESTINATION=6,jsts.triangulate.quadedge.Vertex.prototype.initFromXY=function(t,e){this.p=new jsts.geom.Coordinate(t,e)},jsts.triangulate.quadedge.Vertex.prototype.initFromCoordinate=function(t){this.p=new jsts.geom.Coordinate(t)},jsts.triangulate.quadedge.Vertex.prototype.getX=function(){return this.p.x},jsts.triangulate.quadedge.Vertex.prototype.getY=function(){return this.p.y},jsts.triangulate.quadedge.Vertex.prototype.getZ=function(){return this.p.z},jsts.triangulate.quadedge.Vertex.prototype.setZ=function(t){this.p.z=t},jsts.triangulate.quadedge.Vertex.prototype.getCoordinate=function(){return this.p},jsts.triangulate.quadedge.Vertex.prototype.toString=function(){return"POINT ("+this.p.x+" "+this.p.y+")"},jsts.triangulate.quadedge.Vertex.prototype.equals=function(){return 1===arguments.length?this.equalsExact(arguments[0]):this.equalsWithTolerance(arguments[0],arguments[1])},jsts.triangulate.quadedge.Vertex.prototype.equalsExact=function(t){return this.p.x===t.getX()&&this.p.y===t.getY()},jsts.triangulate.quadedge.Vertex.prototype.equalsWithTolerance=function(t,e){return this.p.distance(t.getCoordinate())<e},jsts.triangulate.quadedge.Vertex.prototype.classify=function(t,e){var n,r,o,i;return n=this,r=e.sub(t),o=n.sub(t),i=r.crossProduct(o),i>0?jsts.triangulate.quadedge.Vertex.LEFT:0>i?jsts.triangulate.quadedge.Vertex.RIGHT:r.getX()*o.getX()<0||r.getY()*o.getY()<0?jsts.triangulate.quadedge.Vertex.BEHIND:r.magn()<o.magn()?jsts.triangulate.quadedge.Vertex.BEYOND:t.equals(n)?jsts.triangulate.quadedge.Vertex.ORIGIN:e.equals(n)?jsts.triangulate.quadedge.Vertex.DESTINATION:jsts.triangulate.quadedge.Vertex.BETWEEN},jsts.triangulate.quadedge.Vertex.prototype.crossProduct=function(t){return this.p.x*t.getY()-this.p.y*t.getX()},jsts.triangulate.quadedge.Vertex.prototype.dot=function(t){return this.p.x*t.getX()+this.p.y*t.getY()},jsts.triangulate.quadedge.Vertex.prototype.times=function(t){return new jsts.triangulate.quadedge.Vertex(t*this.p.x,t*this.p.y)},jsts.triangulate.quadedge.Vertex.prototype.sum=function(t){return new jsts.triangulate.quadedge.Vertex(this.p.x+t.getX(),this.p.y+t.getY())},jsts.triangulate.quadedge.Vertex.prototype.sub=function(t){return new jsts.triangulate.quadedge.Vertex(this.p.x-t.getX(),this.p.y-t.getY())},jsts.triangulate.quadedge.Vertex.prototype.magn=function(){return Math.sqrt(this.p.x*this.p.x+this.p.y*this.p.y)},jsts.triangulate.quadedge.Vertex.prototype.cross=function(){return new Vertex(this.p.y,(-this.p.x))},jsts.triangulate.quadedge.Vertex.prototype.isInCircle=function(t,e,n){return jsts.triangulate.quadedge.TrianglePredicate.isInCircleRobust(t.p,e.p,n.p,this.p)},jsts.triangulate.quadedge.Vertex.prototype.isCCW=function(t,e){return(t.p.x-this.p.x)*(e.p.y-this.p.y)-(t.p.y-this.p.y)*(e.p.x-this.p.x)>0},jsts.triangulate.quadedge.Vertex.prototype.rightOf=function(t){return this.isCCW(t.dest(),t.orig())},jsts.triangulate.quadedge.Vertex.prototype.leftOf=function(t){return this.isCCW(t.orig(),t.dest())},jsts.triangulate.quadedge.Vertex.prototype.bisector=function(t,e){var n,r,o,i;return n=e.getX()-t.getX(),r=e.getY()-t.getY(),o=new jsts.algorithm.HCoordinate(t.getX()+n/2,t.getY()+r/2,1),i=new jsts.algorithm.HCoordinate(t.getX()-r+n/2,t.getY()+n+r/2,1),new jsts.algorithm.HCoordinate(o,i)},jsts.triangulate.quadedge.Vertex.prototype.distance=function(t,e){return t.p.distance(e.p)},jsts.triangulate.quadedge.Vertex.prototype.circumRadiusRatio=function(t,e){var n,r,o,i;return n=this.circleCenter(t,e),r=this.distance(n,t),o=this.distance(this,t),i=this.distance(t,e),o>i&&(o=i),i=this.distance(e,this),o>i&&(o=i),r/o},jsts.triangulate.quadedge.Vertex.prototype.midPoint=function(t){var e,n;return e=(this.p.x+t.getX())/2,n=(this.p.y+t.getY())/2,new jsts.triangulate.quadedge.Vertex(e,n)},jsts.triangulate.quadedge.Vertex.prototype.circleCenter=function(t,e){var n,r,o,i,s;n=new jsts.triangulate.quadedge.Vertex(this.getX(),this.getY()),r=this.bisector(n,t),o=this.bisector(t,e),i=new jsts.algorithm.HCoordinate(r,o),s=null;try{s=new jsts.triangulate.quadedge.Vertex(i.getX(),i.getY())}catch(a){}return s},jsts.operation.valid.IsValidOp=function(t){this.parentGeometry=t,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null},jsts.operation.valid.IsValidOp.isValid=function(t){if(arguments[0]instanceof jsts.geom.Coordinate)return!isNaN(t.x)&&(!(!isFinite(t.x)&&!isNaN(t.x))&&(!isNaN(t.y)&&!(!isFinite(t.y)&&!isNaN(t.y))));var e=new jsts.operation.valid.IsValidOp(t);return e.isValid()},jsts.operation.valid.IsValidOp.findPtNotNode=function(t,e,n){for(var r=n.findEdge(e),o=r.getEdgeIntersectionList(),i=0;i<t.length;i++){var s=t[i];if(!o.isIntersection(s))return s}return null},jsts.operation.valid.IsValidOp.prototype.setSelfTouchingRingFormingHoleValid=function(t){this.isSelfTouchingRingFormingHoleValid=t},jsts.operation.valid.IsValidOp.prototype.isValid=function(){return this.checkValid(this.parentGeometry),null==this.validErr},jsts.operation.valid.IsValidOp.prototype.getValidationError=function(){return this.checkValid(this.parentGeometry),this.validErr},jsts.operation.valid.IsValidOp.prototype.checkValid=function(t){if(this.validErr=null,!t.isEmpty())if(t instanceof jsts.geom.Point)this.checkValidPoint(t);else if(t instanceof jsts.geom.MultiPoint)this.checkValidMultiPoint(t);else if(t instanceof jsts.geom.LinearRing)this.checkValidLinearRing(t);else if(t instanceof jsts.geom.LineString)this.checkValidLineString(t);else if(t instanceof jsts.geom.Polygon)this.checkValidPolygon(t);else if(t instanceof jsts.geom.MultiPolygon)this.checkValidMultiPolygon(t);else{if(!(t instanceof jsts.geom.GeometryCollection))throw t.constructor;this.checkValidGeometryCollection(t)}},jsts.operation.valid.IsValidOp.prototype.checkValidPoint=function(t){this.checkInvalidCoordinates(t.getCoordinates())},jsts.operation.valid.IsValidOp.prototype.checkValidMultiPoint=function(t){this.checkInvalidCoordinates(t.getCoordinates())},jsts.operation.valid.IsValidOp.prototype.checkValidLineString=function(t){if(this.checkInvalidCoordinates(t.getCoordinates()),null==this.validErr){var e=new jsts.geomgraph.GeometryGraph(0,t);this.checkTooFewPoints(e)}},jsts.operation.valid.IsValidOp.prototype.checkValidLinearRing=function(t){if(this.checkInvalidCoordinates(t.getCoordinates()),null==this.validErr&&(this.checkClosedRing(t),null==this.validErr)){var e=new jsts.geomgraph.GeometryGraph(0,t);if(this.checkTooFewPoints(e),null==this.validErr){var n=new jsts.algorithm.RobustLineIntersector;e.computeSelfNodes(n,!0),this.checkNoSelfIntersectingRings(e)}}},jsts.operation.valid.IsValidOp.prototype.checkValidPolygon=function(t){if(this.checkInvalidCoordinates(t),null==this.validErr&&(this.checkClosedRings(t),null==this.validErr)){var e=new jsts.geomgraph.GeometryGraph(0,t);this.checkTooFewPoints(e),null==this.validErr&&(this.checkConsistentArea(e),null==this.validErr&&(this.isSelfTouchingRingFormingHoleValid||(this.checkNoSelfIntersectingRings(e),null==this.validErr))&&(this.checkHolesInShell(t,e),null==this.validErr&&(this.checkHolesNotNested(t,e),null==this.validErr&&this.checkConnectedInteriors(e))))}},jsts.operation.valid.IsValidOp.prototype.checkValidMultiPolygon=function(t){for(var e=t.getNumGeometries(),n=0;e>n;n++){var r=t.getGeometryN(n);if(this.checkInvalidCoordinates(r),null!=this.validErr)return;if(this.checkClosedRings(r),null!=this.validErr)return}var o=new jsts.geomgraph.GeometryGraph(0,t);if(this.checkTooFewPoints(o),null==this.validErr&&(this.checkConsistentArea(o),null==this.validErr&&(this.isSelfTouchingRingFormingHoleValid||(this.checkNoSelfIntersectingRings(o),null==this.validErr)))){for(var n=0;n<t.getNumGeometries();n++){
var r=t.getGeometryN(n);if(this.checkHolesInShell(r,o),null!=this.validErr)return}for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);if(this.checkHolesNotNested(r,o),null!=this.validErr)return}this.checkShellsNotNested(t,o),null==this.validErr&&this.checkConnectedInteriors(o)}},jsts.operation.valid.IsValidOp.prototype.checkValidGeometryCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(this.checkValid(n),null!=this.validErr)return}},jsts.operation.valid.IsValidOp.prototype.checkInvalidCoordinates=function(t){if(t instanceof jsts.geom.Polygon){var e=t;if(this.checkInvalidCoordinates(e.getExteriorRing().getCoordinates()),null!=this.validErr)return;for(var n=0;n<e.getNumInteriorRing();n++)if(this.checkInvalidCoordinates(e.getInteriorRingN(n).getCoordinates()),null!=this.validErr)return}else for(var r=t,n=0;n<r.length;n++)if(!jsts.operation.valid.IsValidOp.isValid(r[n]))return void(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.INVALID_COORDINATE,r[n]))},jsts.operation.valid.IsValidOp.prototype.checkClosedRings=function(t){if(this.checkClosedRing(t.getExteriorRing()),null==this.validErr)for(var e=0;e<t.getNumInteriorRing();e++)if(this.checkClosedRing(t.getInteriorRingN(e)),null!=this.validErr)return},jsts.operation.valid.IsValidOp.prototype.checkClosedRing=function(t){if(!t.isClosed()){var e=null;t.getNumPoints()>=1&&(e=t.getCoordinateN(0)),this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.RING_NOT_CLOSED,e)}},jsts.operation.valid.IsValidOp.prototype.checkTooFewPoints=function(t){return t.hasTooFewPoints?void(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.TOO_FEW_POINTS,t.getInvalidPoint())):void 0},jsts.operation.valid.IsValidOp.prototype.checkConsistentArea=function(t){var e=new jsts.operation.valid.ConsistentAreaTester(t),n=e.isNodeConsistentArea();return n?void(e.hasDuplicateRings()&&(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.DUPLICATE_RINGS,e.getInvalidPoint()))):void(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.SELF_INTERSECTION,e.getInvalidPoint()))},jsts.operation.valid.IsValidOp.prototype.checkNoSelfIntersectingRings=function(t){for(var e=t.getEdgeIterator();e.hasNext();){var n=e.next();if(this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList()),null!=this.validErr)return}},jsts.operation.valid.IsValidOp.prototype.checkNoSelfIntersectingRing=function(t){for(var e=[],n=!0,r=t.iterator();r.hasNext();){var o=r.next();if(n)n=!1;else{if(e.indexOf(o.coord)>=0)return void(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.RING_SELF_INTERSECTION,o.coord));e.push(o.coord)}}},jsts.operation.valid.IsValidOp.prototype.checkHolesInShell=function(t,e){for(var n=t.getExteriorRing(),r=new jsts.algorithm.MCPointInRing(n),o=0;o<t.getNumInteriorRing();o++){var i=t.getInteriorRingN(o),s=jsts.operation.valid.IsValidOp.findPtNotNode(i.getCoordinates(),n,e);if(null==s)return;var a=!r.isInside(s);if(a)return void(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.HOLE_OUTSIDE_SHELL,s))}},jsts.operation.valid.IsValidOp.prototype.checkHolesNotNested=function(t,e){for(var n=new jsts.operation.valid.IndexedNestedRingTester(e),r=0;r<t.getNumInteriorRing();r++){var o=t.getInteriorRingN(r);n.add(o)}var i=n.isNonNested();i||(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.NESTED_HOLES,n.getNestedPoint()))},jsts.operation.valid.IsValidOp.prototype.checkShellsNotNested=function(t,e){for(var n=0;n<t.getNumGeometries();n++)for(var r=t.getGeometryN(n),o=r.getExteriorRing(),i=0;i<t.getNumGeometries();i++)if(n!=i){var s=t.getGeometryN(i);if(this.checkShellNotNested(o,s,e),null!=this.validErr)return}},jsts.operation.valid.IsValidOp.prototype.checkShellNotNested=function(t,e,n){var r=t.getCoordinates(),o=e.getExteriorRing(),i=o.getCoordinates(),s=jsts.operation.valid.IsValidOp.findPtNotNode(r,o,n);if(null!=s){var a=jsts.algorithm.CGAlgorithms.isPointInRing(s,i);if(a){if(e.getNumInteriorRing()<=0)return void(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.NESTED_SHELLS,s));for(var u=null,l=0;l<e.getNumInteriorRing();l++){var c=e.getInteriorRingN(l);if(u=this.checkShellInsideHole(t,c,n),null==u)return}this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.NESTED_SHELLS,u)}}},jsts.operation.valid.IsValidOp.prototype.checkShellInsideHole=function(t,e,n){var r=t.getCoordinates(),o=e.getCoordinates(),i=jsts.operation.valid.IsValidOp.findPtNotNode(r,e,n);if(null!=i){var s=jsts.algorithm.CGAlgorithms.isPointInRing(i,o);if(!s)return i}var a=jsts.operation.valid.IsValidOp.findPtNotNode(o,t,n);if(null!=a){var u=jsts.algorithm.CGAlgorithms.isPointInRing(a,r);return u?a:null}return jsts.util.Assert.shouldNeverReachHere("points in shell and hole appear to be equal"),null},jsts.operation.valid.IsValidOp.prototype.checkConnectedInteriors=function(t){var e=new jsts.operation.valid.ConnectedInteriorTester(t);e.isInteriorsConnected()||(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.DISCONNECTED_INTERIOR,e.getCoordinate()))},jsts.algorithm.RobustDeterminant=function(){},jsts.algorithm.RobustDeterminant.signOfDet2x2=function(t,e,n,r){var o,i,s,a;if(a=0,o=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-o:o:n>0?o:-o;if(0===e||0===n)return r>0?t>0?o:-o:t>0?-o:o;if(e>0?r>0?e>r&&(o=-o,i=t,t=n,n=i,i=e,e=r,r=i):-r>=e?(o=-o,n=-n,r=-r):(i=t,t=-n,n=i,i=e,e=-r,r=i):r>0?r>=-e?(o=-o,t=-t,e=-e):(i=-t,t=n,n=i,i=-e,e=r,r=i):e>=r?(t=-t,e=-e,n=-n,r=-r):(o=-o,i=-t,t=-n,n=i,i=-e,e=-r,r=i),t>0){if(!(n>0))return o;if(t>n)return o}else{if(n>0)return-o;if(!(t>=n))return-o;o=-o,t=-t,n=-n}for(;;){if(a+=1,s=Math.floor(n/t),n-=s*t,r-=s*e,0>r)return-o;if(r>e)return o;if(t>n+n){if(r+r>e)return o}else{if(e>r+r)return-o;n=t-n,r=e-r,o=-o}if(0===r)return 0===n?0:-o;if(0===n)return o;if(s=Math.floor(t/n),t-=s*n,e-=s*r,0>e)return o;if(e>r)return-o;if(n>t+t){if(e+e>r)return-o}else{if(r>e+e)return o;t=n-t,e=r-e,o=-o}if(0===e)return 0===t?0:o;if(0===t)return-o}},jsts.algorithm.RobustDeterminant.orientationIndex=function(t,e,n){var r=e.x-t.x,o=e.y-t.y,i=n.x-e.x,s=n.y-e.y;return jsts.algorithm.RobustDeterminant.signOfDet2x2(r,o,i,s)},jsts.index.quadtree.NodeBase=function(){this.subnode=new Array(4),this.subnode[0]=null,this.subnode[1]=null,this.subnode[2]=null,this.subnode[3]=null,this.items=[]},jsts.index.quadtree.NodeBase.prototype.getSubnodeIndex=function(t,e){var n=-1;return t.getMinX()>=e.x&&(t.getMinY()>=e.y&&(n=3),t.getMaxY()<=e.y&&(n=1)),t.getMaxX()<=e.x&&(t.getMinY()>=e.y&&(n=2),t.getMaxY()<=e.y&&(n=0)),n},jsts.index.quadtree.NodeBase.prototype.getItems=function(){return this.items},jsts.index.quadtree.NodeBase.prototype.hasItems=function(){return this.items.length>0},jsts.index.quadtree.NodeBase.prototype.add=function(t){this.items.push(t)},jsts.index.quadtree.NodeBase.prototype.remove=function(t,e){if(!this.isSearchMatch(t))return!1;var n=!1,r=0;for(r;4>r;r++)if(null!==this.subnode[r]&&(n=this.subnode[r].remove(t,e))){this.subnode[r].isPrunable()&&(this.subnode[r]=null);break}if(n)return n;if(-1!==this.items.indexOf(e)){for(var r=this.items.length-1;r>=0;r--)this.items[r]===e&&this.items.splice(r,1);n=!0}return n},jsts.index.quadtree.NodeBase.prototype.isPrunable=function(){return!(this.hasChildren()||this.hasItems())},jsts.index.quadtree.NodeBase.prototype.hasChildren=function(){var t=0;for(t;4>t;t++)if(null!==this.subnode[t])return!0;return!1},jsts.index.quadtree.NodeBase.prototype.isEmpty=function(){var t=!0;this.items.length>0&&(t=!1);var e=0;for(e;4>e;e++)null!==this.subnode[e]&&(this.subnode[e].isEmpty()||(t=!1));return t},jsts.index.quadtree.NodeBase.prototype.addAllItems=function(t){t=t.concat(this.items);var e=0;for(e;4>e;e++)null!==this.subnode[e]&&(t=this.subnode[e].addAllItems(t));return t},jsts.index.quadtree.NodeBase.prototype.addAllItemsFromOverlapping=function(t,e){if(this.isSearchMatch(t)){e=e.concat(this.items);var n=0;for(n;4>n;n++)null!==this.subnode[n]&&(e=this.subnode[n].addAllItemsFromOverlapping(t,e))}},jsts.index.quadtree.NodeBase.prototype.visit=function(t,e){if(this.isSearchMatch(t)){this.visitItems(t,e);var n=0;for(n;4>n;n++)null!==this.subnode[n]&&this.subnode[n].visit(t,e)}},jsts.index.quadtree.NodeBase.prototype.visitItems=function(t,e){var n=0,r=this.items.length;for(n;r>n;n++)e.visitItem(this.items[n])},jsts.index.quadtree.NodeBase.prototype.depth=function(){var t,e=0,n=0;for(n;4>n;n++)null!==this.subnode[n]&&(t=this.subnode[n].depth(),t>e&&(e=t));return e+1},jsts.index.quadtree.NodeBase.prototype.size=function(){var t=0,e=0;for(e;4>e;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+this.items.length},jsts.index.quadtree.NodeBase.prototype.getNodeCount=function(){var t=0,e=0;for(e;4>e;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+1},jsts.index.quadtree.Node=function(t,e){jsts.index.quadtree.NodeBase.prototype.constructor.apply(this,arguments),this.env=t,this.level=e,this.centre=new jsts.geom.Coordinate,this.centre.x=(t.getMinX()+t.getMaxX())/2,this.centre.y=(t.getMinY()+t.getMaxY())/2},jsts.index.quadtree.Node.prototype=new jsts.index.quadtree.NodeBase,jsts.index.quadtree.Node.createNode=function(t){var e,n;return e=new jsts.index.quadtree.Key(t),n=new jsts.index.quadtree.Node(e.getEnvelope(),e.getLevel())},jsts.index.quadtree.Node.createExpanded=function(t,e){var n,r=new jsts.geom.Envelope(e);return null!==t&&r.expandToInclude(t.env),n=jsts.index.quadtree.Node.createNode(r),null!==t&&n.insertNode(t),n},jsts.index.quadtree.Node.prototype.getEnvelope=function(){return this.env},jsts.index.quadtree.Node.prototype.isSearchMatch=function(t){return this.env.intersects(t)},jsts.index.quadtree.Node.prototype.getNode=function(t){var e,n=this.getSubnodeIndex(t,this.centre);return-1!==n?(e=this.getSubnode(n),e.getNode(t)):this},jsts.index.quadtree.Node.prototype.find=function(t){var e,n=this.getSubnodeIndex(t,this.centre);return-1===n?this:null!==this.subnode[n]?(e=this.subnode[n],e.find(t)):this},jsts.index.quadtree.Node.prototype.insertNode=function(t){var e,n=this.getSubnodeIndex(t.env,this.centre);t.level===this.level-1?this.subnode[n]=t:(e=this.createSubnode(n),e.insertNode(t),this.subnode[n]=e)},jsts.index.quadtree.Node.prototype.getSubnode=function(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},jsts.index.quadtree.Node.prototype.createSubnode=function(t){var e,n,r=0,o=0,i=0,s=0;switch(t){case 0:r=this.env.getMinX(),o=this.centre.x,i=this.env.getMinY(),s=this.centre.y;break;case 1:r=this.centre.x,o=this.env.getMaxX(),i=this.env.getMinY(),s=this.centre.y;break;case 2:r=this.env.getMinX(),o=this.centre.x,i=this.centre.y,s=this.env.getMaxY();break;case 3:r=this.centre.x,o=this.env.getMaxX(),i=this.centre.y,s=this.env.getMaxY()}return e=new jsts.geom.Envelope(r,o,i,s),n=new jsts.index.quadtree.Node(e,this.level-1)},function(){jsts.triangulate.quadedge.QuadEdge=function(){this.rot=null,this.vertex=null,this.next=null,this.data=null};var t=jsts.triangulate.quadedge.QuadEdge;jsts.triangulate.quadedge.QuadEdge.makeEdge=function(e,n){var r,o,i,s,a;return r=new t,o=new t,i=new t,s=new t,r.rot=o,o.rot=i,i.rot=s,s.rot=r,r.setNext(r),o.setNext(s),i.setNext(i),s.setNext(o),a=r,a.setOrig(e),a.setDest(n),a},jsts.triangulate.quadedge.QuadEdge.connect=function(e,n){var r=t.makeEdge(e.dest(),n.orig());return t.splice(r,e.lNext()),t.splice(r.sym(),n),r},jsts.triangulate.quadedge.QuadEdge.splice=function(t,e){var n,r,o,i,s,a;n=t.oNext().rot,r=e.oNext().rot,o=e.oNext(),i=t.oNext(),s=r.oNext(),a=n.oNext(),t.setNext(o),e.setNext(i),n.setNext(s),r.setNext(a)},jsts.triangulate.quadedge.QuadEdge.swap=function(e){var n,r;n=e.oPrev(),r=e.sym().oPrev(),t.splice(e,n),t.splice(e.sym(),r),t.splice(e,n.lNext()),t.splice(e.sym(),r.lNext()),e.setOrig(n.dest()),e.setDest(r.dest())},jsts.triangulate.quadedge.QuadEdge.prototype.getPrimary=function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()},jsts.triangulate.quadedge.QuadEdge.prototype.setData=function(t){this.data=t},jsts.triangulate.quadedge.QuadEdge.prototype.getData=function(){return this.data},jsts.triangulate.quadedge.QuadEdge.prototype.delete_jsts=function(){this.rot=null},jsts.triangulate.quadedge.QuadEdge.prototype.isLive=function(){return null!==this.rot},jsts.triangulate.quadedge.QuadEdge.prototype.setNext=function(t){this.next=t},jsts.triangulate.quadedge.QuadEdge.prototype.invRot=function(){return this.rot.sym()},jsts.triangulate.quadedge.QuadEdge.prototype.sym=function(){return this.rot.rot},jsts.triangulate.quadedge.QuadEdge.prototype.oNext=function(){return this.next},jsts.triangulate.quadedge.QuadEdge.prototype.oPrev=function(){return this.rot.next.rot},jsts.triangulate.quadedge.QuadEdge.prototype.dNext=function(){return this.sym().oNext().sym()},jsts.triangulate.quadedge.QuadEdge.prototype.dPrev=function(){return this.invRot().oNext().invRot()},jsts.triangulate.quadedge.QuadEdge.prototype.lNext=function(){return this.invRot().oNext().rot},jsts.triangulate.quadedge.QuadEdge.prototype.lPrev=function(){return this.next.sym()},jsts.triangulate.quadedge.QuadEdge.prototype.rNext=function(){return this.rot.next.invRot()},jsts.triangulate.quadedge.QuadEdge.prototype.rPrev=function(){return this.sym().oNext()},jsts.triangulate.quadedge.QuadEdge.prototype.setOrig=function(t){this.vertex=t},jsts.triangulate.quadedge.QuadEdge.prototype.setDest=function(t){this.sym().setOrig(t)},jsts.triangulate.quadedge.QuadEdge.prototype.orig=function(){return this.vertex},jsts.triangulate.quadedge.QuadEdge.prototype.dest=function(){return this.sym().orig()},jsts.triangulate.quadedge.QuadEdge.prototype.getLength=function(){return this.orig().getCoordinate().distance(dest().getCoordinate())},jsts.triangulate.quadedge.QuadEdge.prototype.equalsNonOriented=function(t){return!!this.equalsOriented(t)||!!this.equalsOriented(t.sym())},jsts.triangulate.quadedge.QuadEdge.prototype.equalsOriented=function(t){return!(!this.orig().getCoordinate().equals2D(t.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(t.dest().getCoordinate()))},jsts.triangulate.quadedge.QuadEdge.prototype.toLineSegment=function(){return new jsts.geom.LineSegment(this.vertex.getCoordinate(),this.dest().getCoordinate())},jsts.triangulate.quadedge.QuadEdge.prototype.toString=function(){var t,e;return t=this.vertex.getCoordinate(),e=this.dest().getCoordinate(),jsts.io.WKTWriter.toLineString(t,e)}}(),function(){var t=jsts.util.Assert;jsts.geomgraph.EdgeEnd=function(t,e,n,r){this.edge=t,e&&n&&this.init(e,n),r&&(this.label=r||null)},jsts.geomgraph.EdgeEnd.prototype.edge=null,jsts.geomgraph.EdgeEnd.prototype.label=null,jsts.geomgraph.EdgeEnd.prototype.node=null,jsts.geomgraph.EdgeEnd.prototype.p0=null,jsts.geomgraph.EdgeEnd.prototype.p1=null,jsts.geomgraph.EdgeEnd.prototype.dx=null,jsts.geomgraph.EdgeEnd.prototype.dy=null,jsts.geomgraph.EdgeEnd.prototype.quadrant=null,jsts.geomgraph.EdgeEnd.prototype.init=function(e,n){this.p0=e,this.p1=n,this.dx=n.x-e.x,this.dy=n.y-e.y,this.quadrant=jsts.geomgraph.Quadrant.quadrant(this.dx,this.dy),t.isTrue(!(0===this.dx&&0===this.dy),"EdgeEnd with identical endpoints found")},jsts.geomgraph.EdgeEnd.prototype.getEdge=function(){return this.edge},jsts.geomgraph.EdgeEnd.prototype.getLabel=function(){return this.label},jsts.geomgraph.EdgeEnd.prototype.getCoordinate=function(){return this.p0},jsts.geomgraph.EdgeEnd.prototype.getDirectedCoordinate=function(){return this.p1},jsts.geomgraph.EdgeEnd.prototype.getQuadrant=function(){return this.quadrant},jsts.geomgraph.EdgeEnd.prototype.getDx=function(){return this.dx},jsts.geomgraph.EdgeEnd.prototype.getDy=function(){return this.dy},jsts.geomgraph.EdgeEnd.prototype.setNode=function(t){this.node=t},jsts.geomgraph.EdgeEnd.prototype.getNode=function(){return this.node},jsts.geomgraph.EdgeEnd.prototype.compareTo=function(t){return this.compareDirection(t)},jsts.geomgraph.EdgeEnd.prototype.compareDirection=function(t){return this.dx===t.dx&&this.dy===t.dy?0:this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:jsts.algorithm.CGAlgorithms.computeOrientation(t.p0,t.p1,this.p1)},jsts.geomgraph.EdgeEnd.prototype.computeLabel=function(){}}(),jsts.operation.buffer.RightmostEdgeFinder=function(){},jsts.operation.buffer.RightmostEdgeFinder.prototype.minIndex=-1,jsts.operation.buffer.RightmostEdgeFinder.prototype.minCoord=null,jsts.operation.buffer.RightmostEdgeFinder.prototype.minDe=null,jsts.operation.buffer.RightmostEdgeFinder.prototype.orientedDe=null,jsts.operation.buffer.RightmostEdgeFinder.prototype.getEdge=function(){return this.orientedDe},jsts.operation.buffer.RightmostEdgeFinder.prototype.getCoordinate=function(){return this.minCoord},jsts.operation.buffer.RightmostEdgeFinder.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}jsts.util.Assert.isTrue(0!==this.minIndex||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this.minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe;var r=this.getRightmostSide(this.minDe,this.minIndex);r==jsts.geomgraph.Position.LEFT&&(this.orientedDe=this.minDe.getSym())},jsts.operation.buffer.RightmostEdgeFinder.prototype.findRightmostEdgeAtNode=function(){var t=this.minDe.getNode(),e=t.getEdges();this.minDe=e.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)},jsts.operation.buffer.RightmostEdgeFinder.prototype.findRightmostEdgeAtVertex=function(){var t=this.minDe.getEdge().getCoordinates();jsts.util.Assert.isTrue(this.minIndex>0&&this.minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this.minIndex-1],n=t[this.minIndex+1],r=jsts.algorithm.CGAlgorithms.computeOrientation(this.minCoord,n,e),o=!1;e.y<this.minCoord.y&&n.y<this.minCoord.y&&r===jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE?o=!0:e.y>this.minCoord.y&&n.y>this.minCoord.y&&r===jsts.algorithm.CGAlgorithms.CLOCKWISE&&(o=!0),o&&(this.minIndex=this.minIndex-1)},jsts.operation.buffer.RightmostEdgeFinder.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this.minCoord||e[n].x>this.minCoord.x)&&(this.minDe=t,this.minIndex=n,this.minCoord=e[n])},jsts.operation.buffer.RightmostEdgeFinder.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return 0>n&&(n=this.getRightmostSideOfSegment(t,e-1)),0>n&&(this.minCoord=null,this.checkForRightmostCoordinate(t)),n},jsts.operation.buffer.RightmostEdgeFinder.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge(),r=n.getCoordinates();if(0>e||e+1>=r.length)return-1;if(r[e].y==r[e+1].y)return-1;var o=jsts.geomgraph.Position.LEFT;return r[e].y<r[e+1].y&&(o=jsts.geomgraph.Position.RIGHT),o},function(){jsts.triangulate.IncrementalDelaunayTriangulator=function(t){this.subdiv=t,this.isUsingTolerance=t.getTolerance()>0},jsts.triangulate.IncrementalDelaunayTriangulator.prototype.insertSites=function(t){var e,n=0,r=t.length;for(n;r>n;n++)e=t[n],this.insertSite(e)},jsts.triangulate.IncrementalDelaunayTriangulator.prototype.insertSite=function(t){var e,n,r,o;if(e=this.subdiv.locate(t),this.subdiv.isVertexOfEdge(e,t))return e;this.subdiv.isOnEdge(e,t.getCoordinate())&&(e=e.oPrev(),this.subdiv.delete_jsts(e.oNext())),n=this.subdiv.makeEdge(e.orig(),t),jsts.triangulate.quadedge.QuadEdge.splice(n,e),r=n;do n=this.subdiv.connect(e,n.sym()),e=n.oPrev();while(e.lNext()!=r);for(;;)if(o=e.oPrev(),o.dest().rightOf(e)&&t.isInCircle(e.orig(),o.dest(),e.dest()))jsts.triangulate.quadedge.QuadEdge.swap(e),e=e.oPrev();else{if(e.oNext()==r)return n;e=e.oNext().lPrev()}}}(),jsts.algorithm.CentroidArea=function(){this.basePt=null,this.triangleCent3=new jsts.geom.Coordinate,this.centSum=new jsts.geom.Coordinate,this.cg3=new jsts.geom.Coordinate},jsts.algorithm.CentroidArea.prototype.basePt=null,jsts.algorithm.CentroidArea.prototype.triangleCent3=null,jsts.algorithm.CentroidArea.prototype.areasum2=0,jsts.algorithm.CentroidArea.prototype.cg3=null,jsts.algorithm.CentroidArea.prototype.centSum=null,jsts.algorithm.CentroidArea.prototype.totalLength=0,jsts.algorithm.CentroidArea.prototype.add=function(t){if(t instanceof jsts.geom.Polygon){var e=t;this.setBasePoint(e.getExteriorRing().getCoordinateN(0)),this.add3(e)}else if(t instanceof jsts.geom.GeometryCollection||t instanceof jsts.geom.MultiPolygon)for(var n=t,r=0;r<n.getNumGeometries();r++)this.add(n.getGeometryN(r));else t instanceof Array&&this.add2(t)},jsts.algorithm.CentroidArea.prototype.add2=function(t){this.setBasePoint(t[0]),this.addShell(t)},jsts.algorithm.CentroidArea.prototype.getCentroid=function(){var t=new jsts.geom.Coordinate;return Math.abs(this.areasum2)>0?(t.x=this.cg3.x/3/this.areasum2,t.y=this.cg3.y/3/this.areasum2):(t.x=this.centSum.x/this.totalLength,t.y=this.centSum.y/this.totalLength),t},jsts.algorithm.CentroidArea.prototype.setBasePoint=function(t){null==this.basePt&&(this.basePt=t)},jsts.algorithm.CentroidArea.prototype.add3=function(t){this.addShell(t.getExteriorRing().getCoordinates());for(var e=0;e<t.getNumInteriorRing();e++)this.addHole(t.getInteriorRingN(e).getCoordinates())},jsts.algorithm.CentroidArea.prototype.addShell=function(t){for(var e=!jsts.algorithm.CGAlgorithms.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.basePt,t[n],t[n+1],e);this.addLinearSegments(t)},jsts.algorithm.CentroidArea.prototype.addHole=function(t){for(var e=jsts.algorithm.CGAlgorithms.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.basePt,t[n],t[n+1],e);this.addLinearSegments(t)},jsts.algorithm.CentroidArea.prototype.addTriangle=function(t,e,n,r){var o=r?1:-1;jsts.algorithm.CentroidArea.centroid3(t,e,n,this.triangleCent3);var i=jsts.algorithm.CentroidArea.area2(t,e,n);this.cg3.x+=o*i*this.triangleCent3.x,this.cg3.y+=o*i*this.triangleCent3.y,this.areasum2+=o*i},jsts.algorithm.CentroidArea.centroid3=function(t,e,n,r){r.x=t.x+e.x+n.x,r.y=t.y+e.y+n.y},jsts.algorithm.CentroidArea.area2=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)},jsts.algorithm.CentroidArea.prototype.addLinearSegments=function(t){for(var e=0;e<t.length-1;e++){var n=t[e].distance(t[e+1]);this.totalLength+=n;var r=(t[e].x+t[e+1].x)/2;this.centSum.x+=n*r;var o=(t[e].y+t[e+1].y)/2;this.centSum.y+=n*o}},jsts.geomgraph.index.SweepLineSegment=function(t,e){this.edge=t,this.ptIndex=e,this.pts=t.getCoordinates()},jsts.geomgraph.index.SweepLineSegment.prototype.edge=null,jsts.geomgraph.index.SweepLineSegment.prototype.pts=null,jsts.geomgraph.index.SweepLineSegment.prototype.ptIndex=null,jsts.geomgraph.index.SweepLineSegment.prototype.getMinX=function(){var t=this.pts[this.ptIndex].x,e=this.pts[this.ptIndex+1].x;return e>t?t:e},jsts.geomgraph.index.SweepLineSegment.prototype.getMaxX=function(){var t=this.pts[this.ptIndex].x,e=this.pts[this.ptIndex+1].x;return t>e?t:e},jsts.geomgraph.index.SweepLineSegment.prototype.computeIntersections=function(t,e){e.addIntersections(this.edge,this.ptIndex,t.edge,t.ptIndex)},jsts.index.quadtree.Root=function(){jsts.index.quadtree.NodeBase.prototype.constructor.apply(this,arguments),this.origin=new jsts.geom.Coordinate(0,0)},jsts.index.quadtree.Root.prototype=new jsts.index.quadtree.NodeBase,jsts.index.quadtree.Root.prototype.insert=function(t,e){var n=this.getSubnodeIndex(t,this.origin);if(-1===n)return void this.add(e);var r=this.subnode[n];if(null===r||!r.getEnvelope().contains(t)){var o=jsts.index.quadtree.Node.createExpanded(r,t);this.subnode[n]=o}this.insertContained(this.subnode[n],t,e)},jsts.index.quadtree.Root.prototype.insertContained=function(t,e,n){var r,o,i;r=jsts.index.IntervalSize.isZeroWidth(e.getMinX(),e.getMaxX()),o=jsts.index.IntervalSize.isZeroWidth(e.getMinY(),e.getMaxY()),i=r||o?t.find(e):t.getNode(e),i.add(n)},jsts.index.quadtree.Root.prototype.isSearchMatch=function(){return!0},jsts.geomgraph.index.MonotoneChainIndexer=function(){},jsts.geomgraph.index.MonotoneChainIndexer.toIntArray=function(t){for(var e=[],n=t.iterator();n.hasNext();){var r=n.next();e.push(r)}return e},jsts.geomgraph.index.MonotoneChainIndexer.prototype.getChainStartIndices=function(t){var e=0,n=new javascript.util.ArrayList;n.add(e);do{var r=this.findChainEnd(t,e);n.add(r),e=r}while(e<t.length-1);var o=jsts.geomgraph.index.MonotoneChainIndexer.toIntArray(n);return o},jsts.geomgraph.index.MonotoneChainIndexer.prototype.findChainEnd=function(t,e){for(var n=jsts.geomgraph.Quadrant.quadrant(t[e],t[e+1]),r=e+1;r<t.length;){var o=jsts.geomgraph.Quadrant.quadrant(t[r-1],t[r]);if(o!=n)break;r++}return r-1},jsts.noding.IntersectionAdder=function(t){this.li=t},jsts.noding.IntersectionAdder.prototype=new jsts.noding.SegmentIntersector,jsts.noding.IntersectionAdder.constructor=jsts.noding.IntersectionAdder,jsts.noding.IntersectionAdder.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},jsts.noding.IntersectionAdder.prototype._hasIntersection=!1,jsts.noding.IntersectionAdder.prototype.hasProper=!1,jsts.noding.IntersectionAdder.prototype.hasProperInterior=!1,jsts.noding.IntersectionAdder.prototype.hasInterior=!1,jsts.noding.IntersectionAdder.prototype.properIntersectionPoint=null,jsts.noding.IntersectionAdder.prototype.li=null,jsts.noding.IntersectionAdder.prototype.isSelfIntersection=null,jsts.noding.IntersectionAdder.prototype.numIntersections=0,jsts.noding.IntersectionAdder.prototype.numInteriorIntersections=0,jsts.noding.IntersectionAdder.prototype.numProperIntersections=0,jsts.noding.IntersectionAdder.prototype.numTests=0,jsts.noding.IntersectionAdder.prototype.getLineIntersector=function(){return this.li},jsts.noding.IntersectionAdder.prototype.getProperIntersectionPoint=function(){return this.properIntersectionPoint},jsts.noding.IntersectionAdder.prototype.hasIntersection=function(){return this._hasIntersection},jsts.noding.IntersectionAdder.prototype.hasProperIntersection=function(){return this.hasProper},jsts.noding.IntersectionAdder.prototype.hasProperInteriorIntersection=function(){return this.hasProperInterior},jsts.noding.IntersectionAdder.prototype.hasInteriorIntersection=function(){return this.hasInterior},jsts.noding.IntersectionAdder.prototype.isTrivialIntersection=function(t,e,n,r){if(t==n&&1==this.li.getIntersectionNum()){if(jsts.noding.IntersectionAdder.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var o=t.size()-1;if(0===e&&r===o||0===r&&e===o)return!0}}return!1},jsts.noding.IntersectionAdder.prototype.processIntersections=function(t,e,n,r){if(t!==n||e!==r){this.numTests++;var o=t.getCoordinates()[e],i=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this.li.computeIntersection(o,i,s,a),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this.li,e,0),n.addIntersections(this.li,r,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))}},jsts.noding.IntersectionAdder.prototype.isDone=function(){return!1},jsts.operation.union.CascadedPolygonUnion=function(t){this.inputPolys=t},jsts.operation.union.CascadedPolygonUnion.union=function(t){var e=new jsts.operation.union.CascadedPolygonUnion(t);return e.union()},jsts.operation.union.CascadedPolygonUnion.prototype.inputPolys,jsts.operation.union.CascadedPolygonUnion.prototype.geomFactory=null,jsts.operation.union.CascadedPolygonUnion.prototype.STRTREE_NODE_CAPACITY=4,jsts.operation.union.CascadedPolygonUnion.prototype.union=function(){if(0===this.inputPolys.length)return null;this.geomFactory=this.inputPolys[0].getFactory();for(var t=new jsts.index.strtree.STRtree(this.STRTREE_NODE_CAPACITY),e=0,n=this.inputPolys.length;n>e;e++){var r=this.inputPolys[e];t.insert(r.getEnvelopeInternal(),r)}var o=t.itemsTree(),i=this.unionTree(o);return i},jsts.operation.union.CascadedPolygonUnion.prototype.unionTree=function(t){var e=this.reduceToGeometries(t),n=this.binaryUnion(e);return n},jsts.operation.union.CascadedPolygonUnion.prototype.binaryUnion=function(t,e,n){if(e=e||0,n=n||t.length,1>=n-e){var r=this.getGeometry(t,e);return this.unionSafe(r,null)}if(n-e===2)return this.unionSafe(this.getGeometry(t,e),this.getGeometry(t,e+1));var o=parseInt((n+e)/2),r=this.binaryUnion(t,e,o),i=this.binaryUnion(t,o,n);return this.unionSafe(r,i)},jsts.operation.union.CascadedPolygonUnion.prototype.getGeometry=function(t,e){return e>=t.length?null:t[e]},jsts.operation.union.CascadedPolygonUnion.prototype.reduceToGeometries=function(t){for(var e=[],n=0,r=t.length;r>n;n++){var o=t[n],i=null;o instanceof Array?i=this.unionTree(o):o instanceof jsts.geom.Geometry&&(i=o),e.push(i)}return e},jsts.operation.union.CascadedPolygonUnion.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.clone():null===e?t.clone():this.unionOptimized(t,e)},jsts.operation.union.CascadedPolygonUnion.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r)){var o=jsts.geom.util.GeometryCombiner.combine(t,e);return o}if(t.getNumGeometries<=1&&e.getNumGeometries<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},jsts.operation.union.CascadedPolygonUnion.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new javascript.util.ArrayList,o=this.extractByEnvelope(n,t,r),i=this.extractByEnvelope(n,e,r),s=this.unionActual(o,i);r.add(s);var a=jsts.geom.util.GeometryCombiner.combine(r);return a},jsts.operation.union.CascadedPolygonUnion.prototype.extractByEnvelope=function(t,e,n){for(var r=new javascript.util.ArrayList,o=0;o<e.getNumGeometries();o++){var i=e.getGeometryN(o);i.getEnvelopeInternal().intersects(t)?r.add(i):n.add(i)}return this.geomFactory.buildGeometry(r)},jsts.operation.union.CascadedPolygonUnion.prototype.unionActual=function(t,e){return t.union(e)},function(){jsts.geom.MultiPoint=function(t,e){this.geometries=t||[],this.factory=e},jsts.geom.MultiPoint.prototype=new jsts.geom.GeometryCollection,jsts.geom.MultiPoint.constructor=jsts.geom.MultiPoint,jsts.geom.MultiPoint.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},jsts.geom.MultiPoint.prototype.getGeometryN=function(t){return this.geometries[t]},jsts.geom.MultiPoint.prototype.equalsExact=function(t,e){return!!this.isEquivalentClass(t)&&jsts.geom.GeometryCollection.prototype.equalsExact.call(this,t,e)},jsts.geom.MultiPoint.prototype.CLASS_NAME="jsts.geom.MultiPoint"}(),jsts.operation.buffer.OffsetCurveBuilder=function(t,e){this.precisionModel=t,this.bufParams=e},jsts.operation.buffer.OffsetCurveBuilder.prototype.distance=0,jsts.operation.buffer.OffsetCurveBuilder.prototype.precisionModel=null,jsts.operation.buffer.OffsetCurveBuilder.prototype.bufParams=null,jsts.operation.buffer.OffsetCurveBuilder.prototype.getBufferParameters=function(){return this.bufParams},jsts.operation.buffer.OffsetCurveBuilder.prototype.getLineCurve=function(t,e){if(this.distance=e,this.distance<0&&!this.bufParams.isSingleSided())return null;if(0==this.distance)return null;var n=Math.abs(this.distance),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this.bufParams.isSingleSided()){var o=0>e;this.computeSingleSidedBufferCurve(t,o,r)}else this.computeLineBufferCurve(t,r);var i=r.getCoordinates();return i},jsts.operation.buffer.OffsetCurveBuilder.prototype.getRingCurve=function(t,e,n){
if(this.distance=n,t.length<=2)return this.getLineCurve(t,n);if(0==this.distance)return jsts.operation.buffer.OffsetCurveBuilder.copyCoordinates(t);var r=this.getSegGen(this.distance);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},jsts.operation.buffer.OffsetCurveBuilder.prototype.getOffsetCurve=function(t,e){if(this.distance=e,0===this.distance)return null;var n=this.distance<0,r=Math.abs(this.distance),o=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],o):this.computeOffsetCurve(t,n,o);var i=o.getCoordinates();return n&&i.reverse(),i},jsts.operation.buffer.OffsetCurveBuilder.copyCoordinates=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].clone());return e},jsts.operation.buffer.OffsetCurveBuilder.prototype.getSegGen=function(t){return new jsts.operation.buffer.OffsetSegmentGenerator(this.precisionModel,this.bufParams,t)},jsts.operation.buffer.OffsetCurveBuilder.SIMPLIFY_FACTOR=100,jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance=function(t){return t/jsts.operation.buffer.OffsetCurveBuilder.SIMPLIFY_FACTOR},jsts.operation.buffer.OffsetCurveBuilder.prototype.computePointCurve=function(t,e){switch(this.bufParams.getEndCapStyle()){case jsts.operation.buffer.BufferParameters.CAP_ROUND:e.createCircle(t);break;case jsts.operation.buffer.BufferParameters.CAP_SQUARE:e.createSquare(t)}},jsts.operation.buffer.OffsetCurveBuilder.prototype.computeLineBufferCurve=function(t,e){var n=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance),r=jsts.operation.buffer.BufferInputLineSimplifier.simplify(t,n),o=r.length-1;e.initSideSegments(r[0],r[1],jsts.geomgraph.Position.LEFT);for(var i=2;o>=i;i++)e.addNextSegment(r[i],!0);e.addLastSegment(),e.addLineEndCap(r[o-1],r[o]);var s=jsts.operation.buffer.BufferInputLineSimplifier.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],jsts.geomgraph.Position.LEFT);for(var i=a-2;i>=0;i--)e.addNextSegment(s[i],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},jsts.operation.buffer.OffsetCurveBuilder.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance);if(e){n.addSegments(t,!0);var o=jsts.operation.buffer.BufferInputLineSimplifier.simplify(t,-r),i=o.length-1;n.initSideSegments(o[i],o[i-1],jsts.geomgraph.Position.LEFT),n.addFirstSegment();for(var s=i-2;s>=0;s--)n.addNextSegment(o[s],!0)}else{n.addSegments(t,!1);var a=jsts.operation.buffer.BufferInputLineSimplifier.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],jsts.geomgraph.Position.LEFT),n.addFirstSegment();for(var s=2;u>=s;s++)n.addNextSegment(a[s],!0)}n.addLastSegment(),n.closeRing()},jsts.operation.buffer.OffsetCurveBuilder.prototype.computeOffsetCurve=function(t,e,n){var r=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance);if(e){var o=jsts.operation.buffer.BufferInputLineSimplifier.simplify(t,-r),i=o.length-1;n.initSideSegments(o[i],o[i-1],jsts.geomgraph.Position.LEFT),n.addFirstSegment();for(var s=i-2;s>=0;s--)n.addNextSegment(o[s],!0)}else{var a=jsts.operation.buffer.BufferInputLineSimplifier.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],jsts.geomgraph.Position.LEFT),n.addFirstSegment();for(var s=2;u>=s;s++)n.addNextSegment(a[s],!0)}n.addLastSegment()},jsts.operation.buffer.OffsetCurveBuilder.prototype.computeRingBufferCurve=function(t,e,n){var r=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance);e===jsts.geomgraph.Position.RIGHT&&(r=-r);var o=jsts.operation.buffer.BufferInputLineSimplifier.simplify(t,r),i=o.length-1;n.initSideSegments(o[i-1],o[0],e);for(var s=1;i>=s;s++){var a=1!==s;n.addNextSegment(o[s],a)}n.closeRing()},function(){var t=function(t,e,n){this.hotPixel=t,this.parentEdge=e,this.vertexIndex=n};t.prototype=new jsts.index.chain.MonotoneChainSelectAction,t.constructor=t,t.prototype.hotPixel=null,t.prototype.parentEdge=null,t.prototype.vertexIndex=null,t.prototype._isNodeAdded=!1,t.prototype.isNodeAdded=function(){return this._isNodeAdded},t.prototype.select=function(t,e){var n=t.getContext();(null===this.parentEdge||n!==this.parentEdge||e!==this.vertexIndex)&&(this._isNodeAdded=this.hotPixel.addSnappedNode(n,e))},jsts.noding.snapround.MCIndexPointSnapper=function(t){this.index=t},jsts.noding.snapround.MCIndexPointSnapper.prototype.index=null,jsts.noding.snapround.MCIndexPointSnapper.prototype.snap=function(e,n,r){if(1===arguments.length)return void this.snap2.apply(this,arguments);var o=e.getSafeEnvelope(),i=new t(e,n,r);return this.index.query(o,{visitItem:function(t){t.select(o,i)}}),i.isNodeAdded()},jsts.noding.snapround.MCIndexPointSnapper.prototype.snap2=function(t){return this.snap(t,null,-1)}}(),function(){var t=function(){this.items=new javascript.util.ArrayList,this.subnode=[null,null]};t.getSubnodeIndex=function(t,e){var n=-1;return t.min>=e&&(n=1),t.max<=e&&(n=0),n},t.prototype.getItems=function(){return this.items},t.prototype.add=function(t){this.items.add(t)},t.prototype.addAllItems=function(t){t.addAll(this.items);var e=0,n=2;for(e;n>e;e++)null!==this.subnode[e]&&this.subnode[e].addAllItems(t);return t},t.prototype.addAllItemsFromOverlapping=function(t,e){(null===t||this.isSearchMatch(t))&&(e.addAll(this.items),null!==this.subnode[0]&&this.subnode[0].addAllItemsFromOverlapping(t,e),null!==this.subnode[1]&&this.subnode[1].addAllItemsFromOverlapping(t,e))},t.prototype.remove=function(t,e){if(!this.isSearchMatch(t))return!1;var n=!1,r=0,o=2;for(r;o>r;r++)if(null!==this.subnode[r]&&(n=this.subnode[r].remove(t,e))){this.subnode[r].isPrunable()&&(this.subnode[r]=null);break}return n?n:n=this.items.remove(e)},t.prototype.isPrunable=function(){return!(this.hasChildren()||this.hasItems())},t.prototype.hasChildren=function(){var t=0,e=2;for(t;e>t;t++)if(null!==this.subnode[t])return!0;return!1},t.prototype.hasItems=function(){return!this.items.isEmpty()},t.prototype.depth=function(){var t,e=0,n=0,r=2;for(n;r>n;n++)null!==this.subnode[n]&&(t=this.subnode[n].depth(),t>e&&(e=t));return e+1},t.prototype.size=function(){var t=0,e=0,n=2;for(e;n>e;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+this.items.size()},t.prototype.nodeSize=function(){var t=0,e=0,n=2;for(e;n>e;e++)null!==this.subnode[e]&&(t+=this.subnode[e].nodeSize());return t+1},jsts.index.bintree.NodeBase=t}(),function(){var t=jsts.index.bintree.NodeBase,e=jsts.index.bintree.Key,n=jsts.index.bintree.Interval,r=function(t,e){this.items=new javascript.util.ArrayList,this.subnode=[null,null],this.interval=t,this.level=e,this.centre=(t.getMin()+t.getMax())/2};r.prototype=new t,r.constructor=r,r.createNode=function(t){var n,o;return n=new e(t),o=new r(n.getInterval(),n.getLevel())},r.createExpanded=function(t,e){var o,i;return o=new n(e),null!==t&&o.expandToInclude(t.interval),i=r.createNode(o),null!==t&&i.insert(t),i},r.prototype.getInterval=function(){return this.interval},r.prototype.isSearchMatch=function(t){return t.overlaps(this.interval)},r.prototype.getNode=function(e){var n,r=t.getSubnodeIndex(e,this.centre);return-1!=r?(n=this.getSubnode(r),n.getNode(e)):this},r.prototype.find=function(e){var n,r=t.getSubnodeIndex(e,this.centre);return-1===r?this:null!==this.subnode[r]?(n=this.subnode[r],n.find(e)):this},r.prototype.insert=function(e){var n,r=t.getSubnodeIndex(e.interval,this.centre);e.level===this.level-1?this.subnode[r]=e:(n=this.createSubnode(r),n.insert(e),this.subnode[r]=n)},r.prototype.getSubnode=function(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},r.prototype.createSubnode=function(t){var e,o,i,s;switch(e=0,o=0,t){case 0:e=this.interval.getMin(),o=this.centre;break;case 1:e=this.centre,o=this.interval.getMax()}return i=new n(e,o),s=new r(i,this.level-1)},jsts.index.bintree.Node=r}(),function(){var t=jsts.index.bintree.Node,e=jsts.index.bintree.NodeBase,n=function(){this.subnode=[null,null],this.items=new javascript.util.ArrayList};n.prototype=new jsts.index.bintree.NodeBase,n.constructor=n,n.origin=0,n.prototype.insert=function(r,o){var i,s,a=e.getSubnodeIndex(r,n.origin);return-1===a?void this.add(o):(i=this.subnode[a],null!==i&&i.getInterval().contains(r)||(s=t.createExpanded(i,r),this.subnode[a]=s),void this.insertContained(this.subnode[a],r,o))},n.prototype.insertContained=function(t,e,n){var r,o;r=jsts.index.IntervalSize.isZeroWidth(e.getMin(),e.getMax()),o=r?t.find(e):t.getNode(e),o.add(n)},n.prototype.isSearchMatch=function(){return!0},jsts.index.bintree.Root=n}(),jsts.geomgraph.Quadrant=function(){},jsts.geomgraph.Quadrant.NE=0,jsts.geomgraph.Quadrant.NW=1,jsts.geomgraph.Quadrant.SW=2,jsts.geomgraph.Quadrant.SE=3,jsts.geomgraph.Quadrant.quadrant=function(t,e){if(t instanceof jsts.geom.Coordinate)return jsts.geomgraph.Quadrant.quadrant2.apply(this,arguments);if(0===t&&0===e)throw new jsts.error.IllegalArgumentError("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?jsts.geomgraph.Quadrant.NE:jsts.geomgraph.Quadrant.SE:e>=0?jsts.geomgraph.Quadrant.NW:jsts.geomgraph.Quadrant.SW},jsts.geomgraph.Quadrant.quadrant2=function(t,e){if(e.x===t.x&&e.y===t.y)throw new jsts.error.IllegalArgumentError("Cannot compute the quadrant for two identical points "+t);return e.x>=t.x?e.y>=t.y?jsts.geomgraph.Quadrant.NE:jsts.geomgraph.Quadrant.SE:e.y>=t.y?jsts.geomgraph.Quadrant.NW:jsts.geomgraph.Quadrant.SW},jsts.geomgraph.Quadrant.isOpposite=function(t,e){if(t===e)return!1;var n=(t-e+4)%4;return 2===n},jsts.geomgraph.Quadrant.commonHalfPlane=function(t,e){if(t===e)return t;var n=(t-e+4)%4;if(2===n)return-1;var r=e>t?t:e,o=t>e?t:e;return 0===r&&3===o?3:r},jsts.geomgraph.Quadrant.isInHalfPlane=function(t,e){return e===jsts.geomgraph.Quadrant.SE?t===jsts.geomgraph.Quadrant.SE||t===jsts.geomgraph.Quadrant.SW:t===e||t===e+1},jsts.geomgraph.Quadrant.isNorthern=function(t){return t===jsts.geomgraph.Quadrant.NE||t===jsts.geomgraph.Quadrant.NW},jsts.operation.valid.ConsistentAreaTester=function(t){this.geomGraph=t,this.li=new jsts.algorithm.RobustLineIntersector,this.nodeGraph=new jsts.operation.relate.RelateNodeGraph,this.invalidPoint=null},jsts.operation.valid.ConsistentAreaTester.prototype.getInvalidPoint=function(){return this.invalidPoint},jsts.operation.valid.ConsistentAreaTester.prototype.isNodeConsistentArea=function(){var t=this.geomGraph.computeSelfNodes(this.li,!0);return t.hasProperIntersection()?(this.invalidPoint=t.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())},jsts.operation.valid.ConsistentAreaTester.prototype.isNodeEdgeAreaLabelsConsistent=function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();){var e=t.next();if(!e.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=e.getCoordinate().clone(),!1}return!0},jsts.operation.valid.ConsistentAreaTester.prototype.hasDuplicateRings=function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();)for(var e=t.next(),n=e.getEdges().iterator();n.hasNext();){var r=n.next();if(r.getEdgeEnds().length>1)return invalidPoint=r.getEdge().getCoordinate(0),!0}return!1},jsts.operation.relate.RelateNode=function(){jsts.geomgraph.Node.apply(this,arguments)},jsts.operation.relate.RelateNode.prototype=new jsts.geomgraph.Node,jsts.operation.relate.RelateNode.prototype.computeIM=function(t){t.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)},jsts.operation.relate.RelateNode.prototype.updateIMFromEdges=function(t){this.edges.updateIM(t)},function(){var t=jsts.geom.Location,e=jsts.geomgraph.Position,n=jsts.geomgraph.EdgeEnd;jsts.geomgraph.DirectedEdge=function(t,e){if(n.call(this,t),this.depth=[0,-999,-999],this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var r=t.getNumPoints()-1;this.init(t.getCoordinate(r),t.getCoordinate(r-1))}this.computeDirectedLabel()},jsts.geomgraph.DirectedEdge.prototype=new n,jsts.geomgraph.DirectedEdge.constructor=jsts.geomgraph.DirectedEdge,jsts.geomgraph.DirectedEdge.depthFactor=function(e,n){return e===t.EXTERIOR&&n===t.INTERIOR?1:e===t.INTERIOR&&n===t.EXTERIOR?-1:0},jsts.geomgraph.DirectedEdge.prototype._isForward=null,jsts.geomgraph.DirectedEdge.prototype._isInResult=!1,jsts.geomgraph.DirectedEdge.prototype._isVisited=!1,jsts.geomgraph.DirectedEdge.prototype.sym=null,jsts.geomgraph.DirectedEdge.prototype.next=null,jsts.geomgraph.DirectedEdge.prototype.nextMin=null,jsts.geomgraph.DirectedEdge.prototype.edgeRing=null,jsts.geomgraph.DirectedEdge.prototype.minEdgeRing=null,jsts.geomgraph.DirectedEdge.prototype.depth=null,jsts.geomgraph.DirectedEdge.prototype.getEdge=function(){return this.edge},jsts.geomgraph.DirectedEdge.prototype.setInResult=function(t){this._isInResult=t},jsts.geomgraph.DirectedEdge.prototype.isInResult=function(){return this._isInResult},jsts.geomgraph.DirectedEdge.prototype.isVisited=function(){return this._isVisited},jsts.geomgraph.DirectedEdge.prototype.setVisited=function(t){this._isVisited=t},jsts.geomgraph.DirectedEdge.prototype.setEdgeRing=function(t){this.edgeRing=t},jsts.geomgraph.DirectedEdge.prototype.getEdgeRing=function(){return this.edgeRing},jsts.geomgraph.DirectedEdge.prototype.setMinEdgeRing=function(t){this.minEdgeRing=t},jsts.geomgraph.DirectedEdge.prototype.getMinEdgeRing=function(){return this.minEdgeRing},jsts.geomgraph.DirectedEdge.prototype.getDepth=function(t){return this.depth[t]},jsts.geomgraph.DirectedEdge.prototype.setDepth=function(t,e){if(-999!==this.depth[t]&&this.depth[t]!==e)throw new jsts.error.TopologyError("assigned depths do not match",this.getCoordinate());this.depth[t]=e},jsts.geomgraph.DirectedEdge.prototype.getDepthDelta=function(){var t=this.edge.getDepthDelta();return this._isForward||(t=-t),t},jsts.geomgraph.DirectedEdge.prototype.setVisitedEdge=function(t){this.setVisited(t),this.sym.setVisited(t)},jsts.geomgraph.DirectedEdge.prototype.getSym=function(){return this.sym},jsts.geomgraph.DirectedEdge.prototype.isForward=function(){return this._isForward},jsts.geomgraph.DirectedEdge.prototype.setSym=function(t){this.sym=t},jsts.geomgraph.DirectedEdge.prototype.getNext=function(){return this.next},jsts.geomgraph.DirectedEdge.prototype.setNext=function(t){this.next=t},jsts.geomgraph.DirectedEdge.prototype.getNextMin=function(){return this.nextMin},jsts.geomgraph.DirectedEdge.prototype.setNextMin=function(t){this.nextMin=t},jsts.geomgraph.DirectedEdge.prototype.isLineEdge=function(){var e=this.label.isLine(0)||this.label.isLine(1),n=!this.label.isArea(0)||this.label.allPositionsEqual(0,t.EXTERIOR),r=!this.label.isArea(1)||this.label.allPositionsEqual(1,t.EXTERIOR);return e&&n&&r},jsts.geomgraph.DirectedEdge.prototype.isInteriorAreaEdge=function(){for(var n=!0,r=0;2>r;r++)this.label.isArea(r)&&this.label.getLocation(r,e.LEFT)===t.INTERIOR&&this.label.getLocation(r,e.RIGHT)===t.INTERIOR||(n=!1);return n},jsts.geomgraph.DirectedEdge.prototype.computeDirectedLabel=function(){this.label=new jsts.geomgraph.Label(this.edge.getLabel()),this._isForward||this.label.flip()},jsts.geomgraph.DirectedEdge.prototype.setEdgeDepths=function(t,n){var r=this.getEdge().getDepthDelta();this._isForward||(r=-r);var o=1;t===e.LEFT&&(o=-1);var i=e.opposite(t),s=r*o,a=n+s;this.setDepth(t,n),this.setDepth(i,a)}}(),jsts.operation.distance.DistanceOp=function(t,e,n){this.ptLocator=new jsts.algorithm.PointLocator,this.geom=[],this.geom[0]=t,this.geom[1]=e,this.terminateDistance=n},jsts.operation.distance.DistanceOp.prototype.geom=null,jsts.operation.distance.DistanceOp.prototype.terminateDistance=0,jsts.operation.distance.DistanceOp.prototype.ptLocator=null,jsts.operation.distance.DistanceOp.prototype.minDistanceLocation=null,jsts.operation.distance.DistanceOp.prototype.minDistance=Number.MAX_VALUE,jsts.operation.distance.DistanceOp.distance=function(t,e){var n=new jsts.operation.distance.DistanceOp(t,e,0);return n.distance()},jsts.operation.distance.DistanceOp.isWithinDistance=function(t,e,n){var r=new jsts.operation.distance.DistanceOp(t,e,n);return r.distance()<=n},jsts.operation.distance.DistanceOp.nearestPoints=function(t,e){var n=new jsts.operation.distance.DistanceOp(t,e,0);return n.nearestPoints()},jsts.operation.distance.DistanceOp.prototype.distance=function(){if(null===this.geom[0]||null===this.geom[1])throw new jsts.error.IllegalArgumentError("null geometries are not supported");return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)},jsts.operation.distance.DistanceOp.prototype.nearestPoints=function(){this.computeMinDistance();var t=[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()];return t},jsts.operation.distance.DistanceOp.prototype.nearestLocations=function(){return this.computeMinDistance(),this.minDistanceLocation},jsts.operation.distance.DistanceOp.prototype.updateMinDistance=function(t,e){null!==t[0]&&(e?(this.minDistanceLocation[0]=t[1],this.minDistanceLocation[1]=t[0]):(this.minDistanceLocation[0]=t[0],this.minDistanceLocation[1]=t[1]))},jsts.operation.distance.DistanceOp.prototype.computeMinDistance=function(){return arguments.length>0?void this.computeMinDistance2.apply(this,arguments):void(null===this.minDistanceLocation&&(this.minDistanceLocation=[],this.computeContainmentDistance(),this.minDistance<=this.terminateDistance||this.computeFacetDistance()))},jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance=function(){if(2===arguments.length)return void this.computeContainmentDistance2.apply(this,arguments);if(3===arguments.length&&!arguments[0]instanceof jsts.operation.distance.GeometryLocation)return void this.computeContainmentDistance3.apply(this,arguments);if(3===arguments.length)return void this.computeContainmentDistance4.apply(this,arguments);var t=[];this.computeContainmentDistance2(0,t),this.minDistance<=this.terminateDistance||this.computeContainmentDistance2(1,t)},jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance2=function(t,e){var n=1-t,r=jsts.geom.util.PolygonExtracter.getPolygons(this.geom[t]);if(r.length>0){var o=jsts.operation.distance.ConnectedElementLocationFilter.getLocations(this.geom[n]);if(this.computeContainmentDistance3(o,r,e),this.minDistance<=this.terminateDistance)return this.minDistanceLocation[n]=e[0],void(this.minDistanceLocation[t]=e[1])}},jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance3=function(t,e,n){for(var r=0;r<t.length;r++)for(var o=t[r],i=0;i<e.length;i++)if(this.computeContainmentDistance4(o,e[i],n),this.minDistance<=this.terminateDistance)return},jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance4=function(t,e,n){var r=t.getCoordinate();return jsts.geom.Location.EXTERIOR!==this.ptLocator.locate(r,e)?(this.minDistance=0,n[0]=t,void(n[1]=new jsts.operation.distance.GeometryLocation(e,r))):void 0},jsts.operation.distance.DistanceOp.prototype.computeFacetDistance=function(){var t=[],e=jsts.geom.util.LinearComponentExtracter.getLines(this.geom[0]),n=jsts.geom.util.LinearComponentExtracter.getLines(this.geom[1]),r=jsts.geom.util.PointExtracter.getPoints(this.geom[0]),o=jsts.geom.util.PointExtracter.getPoints(this.geom[1]);this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance||(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,o,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance||(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this.minDistance<=this.terminateDistance||(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,o,t),this.updateMinDistance(t,!1))))},jsts.operation.distance.DistanceOp.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.length;r++)for(var o=t[r],i=0;i<e.length;i++){var s=e[i];if(this.computeMinDistance(o,s,n),this.minDistance<=this.terminateDistance)return}},jsts.operation.distance.DistanceOp.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.length;r++)for(var o=t[r],i=0;i<e.length;i++){var s=e[i],a=o.getCoordinate().distance(s.getCoordinate());if(a<this.minDistance&&(this.minDistance=a,n[0]=new jsts.operation.distance.GeometryLocation(o,0,o.getCoordinate()),n[1]=new jsts.operation.distance.GeometryLocation(s,0,s.getCoordinate())),this.minDistance<=this.terminateDistance)return}},jsts.operation.distance.DistanceOp.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.length;r++)for(var o=t[r],i=0;i<e.length;i++){var s=e[i];if(this.computeMinDistance(o,s,n),this.minDistance<=this.terminateDistance)return}},jsts.operation.distance.DistanceOp.prototype.computeMinDistance2=function(t,e,n){if(e instanceof jsts.geom.Point)return void this.computeMinDistance3(t,e,n);if(!(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this.minDistance))for(var r=t.getCoordinates(),o=e.getCoordinates(),i=0;i<r.length-1;i++)for(var s=0;s<o.length-1;s++){var a=jsts.algorithm.CGAlgorithms.distanceLineLine(r[i],r[i+1],o[s],o[s+1]);if(a<this.minDistance){this.minDistance=a;var u=new jsts.geom.LineSegment(r[i],r[i+1]),l=new jsts.geom.LineSegment(o[s],o[s+1]),c=u.closestPoints(l);n[0]=new jsts.operation.distance.GeometryLocation(t,i,c[0]),n[1]=new jsts.operation.distance.GeometryLocation(e,s,c[1])}if(this.minDistance<=this.terminateDistance)return}},jsts.operation.distance.DistanceOp.prototype.computeMinDistance3=function(t,e,n){if(!(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this.minDistance))for(var r=t.getCoordinates(),o=e.getCoordinate(),i=0;i<r.length-1;i++){var s=jsts.algorithm.CGAlgorithms.distancePointLine(o,r[i],r[i+1]);if(s<this.minDistance){this.minDistance=s;var a=new jsts.geom.LineSegment(r[i],r[i+1]),u=a.closestPoint(o);n[0]=new jsts.operation.distance.GeometryLocation(t,i,u),n[1]=new jsts.operation.distance.GeometryLocation(e,0,o)}if(this.minDistance<=this.terminateDistance)return}},jsts.index.strtree.SIRtree=function(t){t=t||10,jsts.index.strtree.AbstractSTRtree.call(this,t)},jsts.index.strtree.SIRtree.prototype=new jsts.index.strtree.AbstractSTRtree,jsts.index.strtree.SIRtree.constructor=jsts.index.strtree.SIRtree,jsts.index.strtree.SIRtree.prototype.comperator={compare:function(t,e){return t.getBounds().getCentre()-e.getBounds().getCentre()}},jsts.index.strtree.SIRtree.prototype.intersectionOp={intersects:function(t,e){return t.intersects(e)}},jsts.index.strtree.SIRtree.prototype.createNode=function(){var t=function(){jsts.index.strtree.AbstractNode.apply(this,arguments)};return t.prototype=new jsts.index.strtree.AbstractNode,t.constructor=t,t.prototype.computeBounds=function(){for(var t,e=null,n=this.getChildBoundables(),r=0,o=n.length;o>r;r++)t=n[r],null===e?e=new jsts.index.strtree.Interval(t.getBounds()):e.expandToInclude(t.getBounds());return e},t},jsts.index.strtree.SIRtree.prototype.insert=function(t,e,n){jsts.index.strtree.AbstractSTRtree.prototype.insert(new jsts.index.strtree.Interval(Math.min(t,e),Math.max(t,e)),n)},jsts.index.strtree.SIRtree.prototype.query=function(t,e){e=e||t,jsts.index.strtree.AbstractSTRtree.prototype.query(new jsts.index.strtree.Interval(Math.min(t,e),Math.max(t,e)))},jsts.index.strtree.SIRtree.prototype.getIntersectsOp=function(){return this.intersectionOp},jsts.index.strtree.SIRtree.prototype.getComparator=function(){return this.comperator},jsts.simplify.DouglasPeuckerSimplifier=function(t){this.inputGeom=t,this.isEnsureValidTopology=!0},jsts.simplify.DouglasPeuckerSimplifier.prototype.inputGeom=null,jsts.simplify.DouglasPeuckerSimplifier.prototype.distanceTolerance=null,jsts.simplify.DouglasPeuckerSimplifier.prototype.isEnsureValidTopology=null,jsts.simplify.DouglasPeuckerSimplifier.simplify=function(t,e){var n=new jsts.simplify.DouglasPeuckerSimplifier(t);return n.setDistanceTolerance(e),n.getResultGeometry()},jsts.simplify.DouglasPeuckerSimplifier.prototype.setDistanceTolerance=function(t){if(0>t)throw"Tolerance must be non-negative";this.distanceTolerance=t},jsts.simplify.DouglasPeuckerSimplifier.prototype.setEnsureValid=function(t){this.isEnsureValidTopology=t},jsts.simplify.DouglasPeuckerSimplifier.prototype.getResultGeometry=function(){return this.inputGeom.isEmpty()?this.inputGeom.clone():new jsts.simplify.DPTransformer(this.distanceTolerance,this.isEnsureValidTopology).transform(this.inputGeom)},function(){jsts.operation.predicate.RectangleContains=function(t){this.rectEnv=t.getEnvelopeInternal()},jsts.operation.predicate.RectangleContains.contains=function(t,e){var n=new jsts.operation.predicate.RectangleContains(t);return n.contains(e)},jsts.operation.predicate.RectangleContains.prototype.rectEnv=null,jsts.operation.predicate.RectangleContains.prototype.contains=function(t){return!!this.rectEnv.contains(t.getEnvelopeInternal())&&!this.isContainedInBoundary(t)},jsts.operation.predicate.RectangleContains.prototype.isContainedInBoundary=function(t){if(t instanceof jsts.geom.Polygon)return!1;if(t instanceof jsts.geom.Point)return this.isPointContainedInBoundary(t.getCoordinate());if(t instanceof jsts.geom.LineString)return this.isLineStringContainedInBoundary(t);for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.isContainedInBoundary(n))return!1}return!0},jsts.operation.predicate.RectangleContains.prototype.isPointContainedInBoundary=function(t){return t.x==this.rectEnv.getMinX()||t.x==this.rectEnv.getMaxX()||t.y==this.rectEnv.getMinY()||t.y==this.rectEnv.getMaxY()},jsts.operation.predicate.RectangleContains.prototype.isLineStringContainedInBoundary=function(t){for(var e=t.getCoordinateSequence(),n=0;n<e.length-1;n++){var r=e[n],o=e[n+1];if(!this.isLineSegmentContainedInBoundary(r,o))return!1}return!0},jsts.operation.predicate.RectangleContains.prototype.isLineSegmentContainedInBoundary=function(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x==e.x){if(t.x==this.rectEnv.getMinX()||t.x==this.rectEnv.getMaxX())return!0}else if(t.y==e.y&&(t.y==this.rectEnv.getMinY()||t.y==this.rectEnv.getMaxY()))return!0;return!1}}(),function(){var t=jsts.geom.Location,e=jsts.geomgraph.Position;jsts.geomgraph.Depth=function(){this.depth=[[],[]];for(var t=0;2>t;t++)for(var e=0;3>e;e++)this.depth[t][e]=jsts.geomgraph.Depth.NULL_VALUE},jsts.geomgraph.Depth.NULL_VALUE=-1,jsts.geomgraph.Depth.depthAtLocation=function(e){return e===t.EXTERIOR?0:e===t.INTERIOR?1:jsts.geomgraph.Depth.NULL_VALUE},jsts.geomgraph.Depth.prototype.depth=null,jsts.geomgraph.Depth.prototype.getDepth=function(t,e){return this.depth[t][e]},jsts.geomgraph.Depth.prototype.setDepth=function(t,e,n){this.depth[t][e]=n},jsts.geomgraph.Depth.prototype.getLocation=function(e,n){return this.depth[e][n]<=0?t.EXTERIOR:t.INTERIOR},jsts.geomgraph.Depth.prototype.add=function(e,n,r){r===t.INTERIOR&&this.depth[e][n]++},jsts.geomgraph.Depth.prototype.isNull=function(){if(arguments.length>0)return this.isNull2.apply(this,arguments);for(var t=0;2>t;t++)for(var e=0;3>e;e++)if(this.depth[t][e]!==jsts.geomgraph.Depth.NULL_VALUE)return!1;return!0},jsts.geomgraph.Depth.prototype.isNull2=function(t){return arguments.length>1?this.isNull3.apply(this,arguments):this.depth[t][1]==jsts.geomgraph.Depth.NULL_VALUE},jsts.geomgraph.Depth.prototype.isNull3=function(t,e){return this.depth[t][e]==jsts.geomgraph.Depth.NULL_VALUE},jsts.geomgraph.Depth.prototype.add=function(e){for(var n=0;2>n;n++)for(var r=1;3>r;r++){var o=e.getLocation(n,r);(o===t.EXTERIOR||o===t.INTERIOR)&&(this.isNull(n,r)?this.depth[n][r]=jsts.geomgraph.Depth.depthAtLocation(o):this.depth[n][r]+=jsts.geomgraph.Depth.depthAtLocation(o))}},jsts.geomgraph.Depth.prototype.getDelta=function(t){return this.depth[t][e.RIGHT]-this.depth[t][e.LEFT]},jsts.geomgraph.Depth.prototype.normalize=function(){for(var t=0;2>t;t++)if(!this.isNull(t)){var e=this.depth[t][1];this.depth[t][2]<e&&(e=this.depth[t][2]),0>e&&(e=0);for(var n=1;3>n;n++){var r=0;this.depth[t][n]>e&&(r=1),this.depth[t][n]=r}}},jsts.geomgraph.Depth.prototype.toString=function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]}}(),jsts.algorithm.BoundaryNodeRule=function(){},jsts.algorithm.BoundaryNodeRule.prototype.isInBoundary=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.algorithm.Mod2BoundaryNodeRule=function(){},jsts.algorithm.Mod2BoundaryNodeRule.prototype=new jsts.algorithm.BoundaryNodeRule,jsts.algorithm.Mod2BoundaryNodeRule.prototype.isInBoundary=function(t){return t%2===1},jsts.algorithm.BoundaryNodeRule.MOD2_BOUNDARY_RULE=new jsts.algorithm.Mod2BoundaryNodeRule,jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE=jsts.algorithm.BoundaryNodeRule.MOD2_BOUNDARY_RULE,jsts.operation.distance.GeometryLocation=function(t,e,n){this.component=t,this.segIndex=e,this.pt=n},jsts.operation.distance.GeometryLocation.INSIDE_AREA=-1,jsts.operation.distance.GeometryLocation.prototype.component=null,jsts.operation.distance.GeometryLocation.prototype.segIndex=null,jsts.operation.distance.GeometryLocation.prototype.pt=null,jsts.operation.distance.GeometryLocation.prototype.getGeometryComponent=function(){return this.component},jsts.operation.distance.GeometryLocation.prototype.getSegmentIndex=function(){return this.segIndex},jsts.operation.distance.GeometryLocation.prototype.getCoordinate=function(){return this.pt},jsts.operation.distance.GeometryLocation.prototype.isInsideArea=function(){return this.segIndex===jsts.operation.distance.GeometryLocation.INSIDE_AREA},jsts.geom.util.PointExtracter=function(t){this.pts=t},jsts.geom.util.PointExtracter.prototype=new jsts.geom.GeometryFilter,jsts.geom.util.PointExtracter.prototype.pts=null,jsts.geom.util.PointExtracter.getPoints=function(t,e){return void 0===e&&(e=[]),t instanceof jsts.geom.Point?e.push(t):(t instanceof jsts.geom.GeometryCollection||t instanceof jsts.geom.MultiPoint||t instanceof jsts.geom.MultiLineString||t instanceof jsts.geom.MultiPolygon)&&t.apply(new jsts.geom.util.PointExtracter(e)),e},jsts.geom.util.PointExtracter.prototype.filter=function(t){t instanceof jsts.geom.Point&&this.pts.push(t)},function(){var t=jsts.geom.Location;jsts.operation.relate.RelateNodeGraph=function(){this.nodes=new jsts.geomgraph.NodeMap(new jsts.operation.relate.RelateNodeFactory)},jsts.operation.relate.RelateNodeGraph.prototype.nodes=null,jsts.operation.relate.RelateNodeGraph.prototype.build=function(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);var e=new jsts.operation.relate.EdgeEndBuilder,n=e.computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(n)},jsts.operation.relate.RelateNodeGraph.prototype.computeIntersectionNodes=function(e,n){for(var r=e.getEdgeIterator();r.hasNext();)for(var o=r.next(),i=o.getLabel().getLocation(n),s=o.getEdgeIntersectionList().iterator();s.hasNext();){var a=s.next(),u=this.nodes.addNode(a.coord);i===t.BOUNDARY?u.setLabelBoundary(n):u.getLabel().isNull(n)&&u.setLabel(n,t.INTERIOR)}},jsts.operation.relate.RelateNodeGraph.prototype.copyNodesAndLabels=function(t,e){for(var n=t.getNodeIterator();n.hasNext();){var r=n.next(),o=this.nodes.addNode(r.getCoordinate());o.setLabel(e,r.getLabel().getLocation(e))}},jsts.operation.relate.RelateNodeGraph.prototype.insertEdgeEnds=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},jsts.operation.relate.RelateNodeGraph.prototype.getNodeIterator=function(){return this.nodes.iterator()}}(),jsts.geomgraph.index.SimpleSweepLineIntersector=function(){},jsts.geomgraph.index.SimpleSweepLineIntersector.prototype=new jsts.geomgraph.index.EdgeSetIntersector,jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.events=[],jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.nOverlaps=null,jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.computeIntersections=function(t,e,n){return e instanceof javascript.util.List?void this.computeIntersections2.apply(this,arguments):(n?this.add(t,null):this.add(t),void this.computeIntersections3(e))},jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.computeIntersections2=function(t,e,n){this.add(t,t),this.add(e,e),this.computeIntersections3(n)},jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.add=function(t,e){
if(t instanceof javascript.util.List)return void this.add2.apply(this,arguments);for(var n=t.getCoordinates(),r=0;r<n.length-1;r++){var o=new jsts.geomgraph.index.SweepLineSegment(t,r),i=new jsts.geomgraph.index.SweepLineEvent(o.getMinX(),o,e);this.events.push(i),this.events.push(new jsts.geomgraph.index.SweepLineEvent(o.getMaxX(),i))}},jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.add2=function(t,e){for(var n=t.iterator();n.hasNext();){var r=n.next();e?this.add(r,e):this.add(r,r)}},jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.prepareEvents=function(){this.events.sort(function(t,e){return t.compareTo(e)});for(var t=0;t<this.events.length;t++){var e=this.events[t];e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.computeIntersections3=function(t){this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.length;e++){var n=this.events[e];n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t)}},jsts.geomgraph.index.SimpleSweepLineIntersector.prototype.processOverlaps=function(t,e,n,r){for(var o=n.getObject(),i=t;e>i;i++){var s=this.events[i];if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(o.computeIntersections(a,r),this.nOverlaps++)}}},jsts.triangulate.VoronoiDiagramBuilder=function(){this.siteCoords=null,this.tolerance=0,this.subdiv=null,this.clipEnv=null,this.diagramEnv=null},jsts.triangulate.VoronoiDiagramBuilder.prototype.setSites=function(){var t=arguments[0];t instanceof jsts.geom.Geometry||t instanceof jsts.geom.Coordinate||t instanceof jsts.geom.Point||t instanceof jsts.geom.MultiPoint||t instanceof jsts.geom.LineString||t instanceof jsts.geom.MultiLineString||t instanceof jsts.geom.LinearRing||t instanceof jsts.geom.Polygon||t instanceof jsts.geom.MultiPolygon?this.setSitesByGeometry(t):this.setSitesByArray(t)},jsts.triangulate.VoronoiDiagramBuilder.prototype.setSitesByGeometry=function(t){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.extractUniqueCoordinates(t)},jsts.triangulate.VoronoiDiagramBuilder.prototype.setSitesByArray=function(t){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.unique(t)},jsts.triangulate.VoronoiDiagramBuilder.prototype.setClipEnvelope=function(t){this.clipEnv=t},jsts.triangulate.VoronoiDiagramBuilder.prototype.setTolerance=function(t){this.tolerance=t},jsts.triangulate.VoronoiDiagramBuilder.prototype.create=function(){if(null===this.subdiv){var t,e,n,r;t=jsts.triangulate.DelaunayTriangulationBuilder.envelope(this.siteCoords),this.diagramEnv=t,e=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight()),this.diagramEnv.expandBy(e),null!==this.clipEnv&&this.diagramEnv.expandToInclude(this.clipEnv),n=jsts.triangulate.DelaunayTriangulationBuilder.toVertices(this.siteCoords),this.subdiv=new jsts.triangulate.quadedge.QuadEdgeSubdivision(t,this.tolerance),r=new jsts.triangulate.IncrementalDelaunayTriangulator(this.subdiv),r.insertSites(n)}},jsts.triangulate.VoronoiDiagramBuilder.prototype.getSubdivision=function(){return this.create(),this.subdiv},jsts.triangulate.VoronoiDiagramBuilder.prototype.getDiagram=function(t){this.create();var e=this.subdiv.getVoronoiDiagram(t);return this.clipGeometryCollection(e,this.diagramEnv)},jsts.triangulate.VoronoiDiagramBuilder.prototype.clipGeometryCollection=function(t,e){var n,r,o,i,s,a;for(n=t.getFactory().toGeometry(e),r=[],o=0,i=t.getNumGeometries(),o;i>o;o++)s=t.getGeometryN(o),a=null,e.contains(s.getEnvelopeInternal())?a=s:e.intersects(s.getEnvelopeInternal())&&(a=n.intersection(s)),null===a||a.isEmpty()||r.push(a);return t.getFactory().createGeometryCollection(r)},jsts.operation.valid.IndexedNestedRingTester=function(t){this.graph=t,this.rings=new javascript.util.ArrayList,this.totalEnv=new jsts.geom.Envelope,this.index=null,this.nestedPt=null},jsts.operation.valid.IndexedNestedRingTester.prototype.getNestedPoint=function(){return this.nestedPt},jsts.operation.valid.IndexedNestedRingTester.prototype.add=function(t){this.rings.add(t),this.totalEnv.expandToInclude(t.getEnvelopeInternal())},jsts.operation.valid.IndexedNestedRingTester.prototype.isNonNested=function(){this.buildIndex();for(var t=0;t<this.rings.size();t++)for(var e=this.rings.get(t),n=e.getCoordinates(),r=this.index.query(e.getEnvelopeInternal()),o=0;o<r.length;o++){var i=r[o],s=i.getCoordinates();if(e!=i&&e.getEnvelopeInternal().intersects(i.getEnvelopeInternal())){var a=jsts.operation.valid.IsValidOp.findPtNotNode(n,i,this.graph);if(null!=a){var u=jsts.algorithm.CGAlgorithms.isPointInRing(a,s);if(u)return this.nestedPt=a,!1}}}return!0},jsts.operation.valid.IndexedNestedRingTester.prototype.buildIndex=function(){this.index=new jsts.index.strtree.STRtree;for(var t=0;t<this.rings.size();t++){var e=this.rings.get(t),n=e.getEnvelopeInternal();this.index.insert(n,e)}},jsts.geomgraph.index.MonotoneChain=function(t,e){this.mce=t,this.chainIndex=e},jsts.geomgraph.index.MonotoneChain.prototype.mce=null,jsts.geomgraph.index.MonotoneChain.prototype.chainIndex=null,jsts.geomgraph.index.MonotoneChain.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},jsts.noding.SegmentNode=function(t,e,n,r){this.segString=t,this.coord=new jsts.geom.Coordinate(e),this.segmentIndex=n,this.segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))},jsts.noding.SegmentNode.prototype.segString=null,jsts.noding.SegmentNode.prototype.coord=null,jsts.noding.SegmentNode.prototype.segmentIndex=null,jsts.noding.SegmentNode.prototype.segmentOctant=null,jsts.noding.SegmentNode.prototype._isInterior=null,jsts.noding.SegmentNode.prototype.getCoordinate=function(){return this.coord},jsts.noding.SegmentNode.prototype.isInterior=function(){return this._isInterior},jsts.noding.SegmentNode.prototype.isEndPoint=function(){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===this.maxSegmentIndex},jsts.noding.SegmentNode.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:jsts.noding.SegmentPointComparator.compare(this.segmentOctant,this.coord,e.coord)},function(){jsts.io.GeoJSONWriter=function(){this.parser=new jsts.io.GeoJSONParser(this.geometryFactory)},jsts.io.GeoJSONWriter.prototype.write=function(t){var e=this.parser.write(t);return e}}(),jsts.io.OpenLayersParser=function(t){this.geometryFactory=t||new jsts.geom.GeometryFactory},jsts.io.OpenLayersParser.prototype.read=function(t){return"OpenLayers.Geometry.Point"===t.CLASS_NAME?this.convertFromPoint(t):"OpenLayers.Geometry.LineString"===t.CLASS_NAME?this.convertFromLineString(t):"OpenLayers.Geometry.LinearRing"===t.CLASS_NAME?this.convertFromLinearRing(t):"OpenLayers.Geometry.Polygon"===t.CLASS_NAME?this.convertFromPolygon(t):"OpenLayers.Geometry.MultiPoint"===t.CLASS_NAME?this.convertFromMultiPoint(t):"OpenLayers.Geometry.MultiLineString"===t.CLASS_NAME?this.convertFromMultiLineString(t):"OpenLayers.Geometry.MultiPolygon"===t.CLASS_NAME?this.convertFromMultiPolygon(t):"OpenLayers.Geometry.Collection"===t.CLASS_NAME?this.convertFromCollection(t):void 0},jsts.io.OpenLayersParser.prototype.convertFromPoint=function(t){return this.geometryFactory.createPoint(new jsts.geom.Coordinate(t.x,t.y))},jsts.io.OpenLayersParser.prototype.convertFromLineString=function(t){var e,n=[];for(e=0;e<t.components.length;e++)n.push(new jsts.geom.Coordinate(t.components[e].x,t.components[e].y));return this.geometryFactory.createLineString(n)},jsts.io.OpenLayersParser.prototype.convertFromLinearRing=function(t){var e,n=[];for(e=0;e<t.components.length;e++)n.push(new jsts.geom.Coordinate(t.components[e].x,t.components[e].y));return this.geometryFactory.createLinearRing(n)},jsts.io.OpenLayersParser.prototype.convertFromPolygon=function(t){var e,n=null,r=[];for(e=0;e<t.components.length;e++){var o=this.convertFromLinearRing(t.components[e]);0===e?n=o:r.push(o)}return this.geometryFactory.createPolygon(n,r)},jsts.io.OpenLayersParser.prototype.convertFromMultiPoint=function(t){var e,n=[];for(e=0;e<t.components.length;e++)n.push(this.convertFromPoint(t.components[e]));return this.geometryFactory.createMultiPoint(n)},jsts.io.OpenLayersParser.prototype.convertFromMultiLineString=function(t){var e,n=[];for(e=0;e<t.components.length;e++)n.push(this.convertFromLineString(t.components[e]));return this.geometryFactory.createMultiLineString(n)},jsts.io.OpenLayersParser.prototype.convertFromMultiPolygon=function(t){var e,n=[];for(e=0;e<t.components.length;e++)n.push(this.convertFromPolygon(t.components[e]));return this.geometryFactory.createMultiPolygon(n)},jsts.io.OpenLayersParser.prototype.convertFromCollection=function(t){var e,n=[];for(e=0;e<t.components.length;e++)n.push(this.read(t.components[e]));return this.geometryFactory.createGeometryCollection(n)},jsts.io.OpenLayersParser.prototype.write=function(t){return"jsts.geom.Point"===t.CLASS_NAME?this.convertToPoint(t.coordinate):"jsts.geom.LineString"===t.CLASS_NAME?this.convertToLineString(t):"jsts.geom.LinearRing"===t.CLASS_NAME?this.convertToLinearRing(t):"jsts.geom.Polygon"===t.CLASS_NAME?this.convertToPolygon(t):"jsts.geom.MultiPoint"===t.CLASS_NAME?this.convertToMultiPoint(t):"jsts.geom.MultiLineString"===t.CLASS_NAME?this.convertToMultiLineString(t):"jsts.geom.MultiPolygon"===t.CLASS_NAME?this.convertToMultiPolygon(t):"jsts.geom.GeometryCollection"===t.CLASS_NAME?this.convertToCollection(t):void 0},jsts.io.OpenLayersParser.prototype.convertToPoint=function(t){return new OpenLayers.Geometry.Point(t.x,t.y)},jsts.io.OpenLayersParser.prototype.convertToLineString=function(t){var e,n=[];for(e=0;e<t.points.length;e++){var r=t.points[e];n.push(this.convertToPoint(r))}return new OpenLayers.Geometry.LineString(n)},jsts.io.OpenLayersParser.prototype.convertToLinearRing=function(t){var e,n=[];for(e=0;e<t.points.length;e++){var r=t.points[e];n.push(this.convertToPoint(r))}return new OpenLayers.Geometry.LinearRing(n)},jsts.io.OpenLayersParser.prototype.convertToPolygon=function(t){var e,n=[];for(n.push(this.convertToLinearRing(t.shell)),e=0;e<t.holes.length;e++){var r=t.holes[e];n.push(this.convertToLinearRing(r))}return new OpenLayers.Geometry.Polygon(n)},jsts.io.OpenLayersParser.prototype.convertToMultiPoint=function(t){var e,n=[];for(e=0;e<t.geometries.length;e++){var r=t.geometries[e].coordinate;n.push(new OpenLayers.Geometry.Point(r.x,r.y))}return new OpenLayers.Geometry.MultiPoint(n)},jsts.io.OpenLayersParser.prototype.convertToMultiLineString=function(t){var e,n=[];for(e=0;e<t.geometries.length;e++)n.push(this.convertToLineString(t.geometries[e]));return new OpenLayers.Geometry.MultiLineString(n)},jsts.io.OpenLayersParser.prototype.convertToMultiPolygon=function(t){var e,n=[];for(e=0;e<t.geometries.length;e++)n.push(this.convertToPolygon(t.geometries[e]));return new OpenLayers.Geometry.MultiPolygon(n)},jsts.io.OpenLayersParser.prototype.convertToCollection=function(t){var e,n=[];for(e=0;e<t.geometries.length;e++){var r=t.geometries[e],o=this.write(r);n.push(o)}return new OpenLayers.Geometry.Collection(n)},jsts.index.quadtree.Quadtree=function(){this.root=new jsts.index.quadtree.Root,this.minExtent=1},jsts.index.quadtree.Quadtree.ensureExtent=function(t,e){var n,r,o,i;return n=t.getMinX(),r=t.getMaxX(),o=t.getMinY(),i=t.getMaxY(),n!==r&&o!==i?t:(n===r&&(n-=e/2,r=n+e/2),o===i&&(o-=e/2,i=o+e/2),new jsts.geom.Envelope(n,r,o,i))},jsts.index.quadtree.Quadtree.prototype.depth=function(){return this.root.depth()},jsts.index.quadtree.Quadtree.prototype.size=function(){return this.root.size()},jsts.index.quadtree.Quadtree.prototype.insert=function(t,e){this.collectStats(t);var n=jsts.index.quadtree.Quadtree.ensureExtent(t,this.minExtent);this.root.insert(n,e)},jsts.index.quadtree.Quadtree.prototype.remove=function(t,e){var n=jsts.index.quadtree.Quadtree.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},jsts.index.quadtree.Quadtree.prototype.query=function(){return 1===arguments.length?jsts.index.quadtree.Quadtree.prototype.queryByEnvelope.apply(this,arguments):void jsts.index.quadtree.Quadtree.prototype.queryWithVisitor.apply(this,arguments)},jsts.index.quadtree.Quadtree.prototype.queryByEnvelope=function(t){var e=new jsts.index.ArrayListVisitor;return this.query(t,e),e.getItems()},jsts.index.quadtree.Quadtree.prototype.queryWithVisitor=function(t,e){this.root.visit(t,e)},jsts.index.quadtree.Quadtree.prototype.queryAll=function(){var t=[];return t=this.root.addAllItems(t)},jsts.index.quadtree.Quadtree.prototype.collectStats=function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e);var n=t.getHeight();n<this.minExtent&&n>0&&(this.minExtent=n)},jsts.operation.relate.RelateNodeFactory=function(){},jsts.operation.relate.RelateNodeFactory.prototype=new jsts.geomgraph.NodeFactory,jsts.operation.relate.RelateNodeFactory.prototype.createNode=function(t){return new jsts.operation.relate.RelateNode(t,new jsts.operation.relate.EdgeEndBundleStar)},jsts.index.quadtree.Key=function(t){this.pt=new jsts.geom.Coordinate,this.level=0,this.env=null,this.computeKey(t)},jsts.index.quadtree.Key.computeQuadLevel=function(t){var e,n,r,o;return e=t.getWidth(),n=t.getHeight(),r=e>n?e:n,o=jsts.index.DoubleBits.exponent(r)+1},jsts.index.quadtree.Key.prototype.getPoint=function(){return this.pt},jsts.index.quadtree.Key.prototype.getLevel=function(){return this.level},jsts.index.quadtree.Key.prototype.getEnvelope=function(){return this.env},jsts.index.quadtree.Key.prototype.getCentre=function(){var t,e;return t=(this.env.getMinX()+this.env.getMaxX())/2,e=(this.env.getMinY()+this.env.getMaxY())/2,new jsts.geom.Coordinate(t,e)},jsts.index.quadtree.Key.prototype.computeKey=function(){arguments[0]instanceof jsts.geom.Envelope?this.computeKeyFromEnvelope(arguments[0]):this.computeKeyFromLevel(arguments[0],arguments[1])},jsts.index.quadtree.Key.prototype.computeKeyFromEnvelope=function(t){for(this.level=jsts.index.quadtree.Key.computeQuadLevel(t),this.env=new jsts.geom.Envelope,this.computeKey(this.level,t);!this.env.contains(t);)this.level+=1,this.computeKey(this.level,t)},jsts.index.quadtree.Key.prototype.computeKeyFromLevel=function(t,e){var n=jsts.index.DoubleBits.powerOf2(t);this.pt.x=Math.floor(e.getMinX()/n)*n,this.pt.y=Math.floor(e.getMinY()/n)*n,this.env.init(this.pt.x,this.pt.x+n,this.pt.y,this.pt.y+n)},jsts.geom.CoordinateArrays=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.CoordinateArrays.copyDeep=function(){return 1===arguments.length?jsts.geom.CoordinateArrays.copyDeep1(arguments[0]):void(5===arguments.length&&jsts.geom.CoordinateArrays.copyDeep2(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]))},jsts.geom.CoordinateArrays.copyDeep1=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=new jsts.geom.Coordinate(t[n]);return e},jsts.geom.CoordinateArrays.copyDeep2=function(t,e,n,r,o){for(var i=0;o>i;i++)n[r+i]=new jsts.geom.Coordinate(t[e+i])},jsts.geom.CoordinateArrays.removeRepeatedPoints=function(t){var e;return this.hasRepeatedPoints(t)?(e=new jsts.geom.CoordinateList(t,(!1)),e.toCoordinateArray()):t},jsts.geom.CoordinateArrays.hasRepeatedPoints=function(t){var e;for(e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},jsts.geom.CoordinateArrays.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(jsts.geom.CoordinateArrays.indexOf(r,e)<0)return r}return null},jsts.geom.CoordinateArrays.increasingDirection=function(t){for(var e=0;e<parseInt(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!=r)return r}return 1},jsts.geom.CoordinateArrays.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},jsts.geom.CoordinateArrays.scroll=function(t,e){var n=jsts.geom.CoordinateArrays.indexOf(e,t);if(!(0>n)){var r=t.slice(n).concat(t.slice(0,n));for(n=0;n<r.length;n++)t[n]=r[n]}},jsts.geom.CoordinateArrays.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},jsts.operation.overlay.MinimalEdgeRing=function(t,e){jsts.geomgraph.EdgeRing.call(this,t,e)},jsts.operation.overlay.MinimalEdgeRing.prototype=new jsts.geomgraph.EdgeRing,jsts.operation.overlay.MinimalEdgeRing.constructor=jsts.operation.overlay.MinimalEdgeRing,jsts.operation.overlay.MinimalEdgeRing.prototype.getNext=function(t){return t.getNextMin()},jsts.operation.overlay.MinimalEdgeRing.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},jsts.triangulate.DelaunayTriangulationBuilder=function(){this.siteCoords=null,this.tolerance=0,this.subdiv=null},jsts.triangulate.DelaunayTriangulationBuilder.extractUniqueCoordinates=function(t){if(void 0===t||null===t)return new jsts.geom.CoordinateList([],(!1)).toArray();var e=t.getCoordinates();return jsts.triangulate.DelaunayTriangulationBuilder.unique(e)},jsts.triangulate.DelaunayTriangulationBuilder.unique=function(t){t.sort(function(t,e){return t.compareTo(e)});var e=new jsts.geom.CoordinateList(t,(!1));return e.toArray()},jsts.triangulate.DelaunayTriangulationBuilder.toVertices=function(t){var e,n=new Array(t.length),r=0,o=t.length;for(r;o>r;r++)e=t[r],n[r]=new jsts.triangulate.quadedge.Vertex(e);return n},jsts.triangulate.DelaunayTriangulationBuilder.envelope=function(t){var e=new jsts.geom.Envelope,n=0,r=t.length;for(n;r>n;n++)e.expandToInclude(t[n]);return e},jsts.triangulate.DelaunayTriangulationBuilder.prototype.setSites=function(){var t=arguments[0];t instanceof jsts.geom.Geometry||t instanceof jsts.geom.Coordinate||t instanceof jsts.geom.Point||t instanceof jsts.geom.MultiPoint||t instanceof jsts.geom.LineString||t instanceof jsts.geom.MultiLineString||t instanceof jsts.geom.LinearRing||t instanceof jsts.geom.Polygon||t instanceof jsts.geom.MultiPolygon?this.setSitesFromGeometry(t):this.setSitesFromCollection(t)},jsts.triangulate.DelaunayTriangulationBuilder.prototype.setSitesFromGeometry=function(t){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.extractUniqueCoordinates(t)},jsts.triangulate.DelaunayTriangulationBuilder.prototype.setSitesFromCollection=function(t){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.unique(t)},jsts.triangulate.DelaunayTriangulationBuilder.prototype.setTolerance=function(t){this.tolerance=t},jsts.triangulate.DelaunayTriangulationBuilder.prototype.create=function(){if(null===this.subdiv){var t,e,n;t=jsts.triangulate.DelaunayTriangulationBuilder.envelope(this.siteCoords),e=jsts.triangulate.DelaunayTriangulationBuilder.toVertices(this.siteCoords),this.subdiv=new jsts.triangulate.quadedge.QuadEdgeSubdivision(t,this.tolerance),n=new jsts.triangulate.IncrementalDelaunayTriangulator(this.subdiv),n.insertSites(e)}},jsts.triangulate.DelaunayTriangulationBuilder.prototype.getSubdivision=function(){return this.create(),this.subdiv},jsts.triangulate.DelaunayTriangulationBuilder.prototype.getEdges=function(t){return this.create(),this.subdiv.getEdges(t)},jsts.triangulate.DelaunayTriangulationBuilder.prototype.getTriangles=function(t){return this.create(),this.subdiv.getTriangles(t)},jsts.algorithm.RayCrossingCounter=function(t){this.p=t},jsts.algorithm.RayCrossingCounter.locatePointInRing=function(t,e){for(var n=new jsts.algorithm.RayCrossingCounter(t),r=1;r<e.length;r++){var o=e[r],i=e[r-1];if(n.countSegment(o,i),n.isOnSegment())return n.getLocation()}return n.getLocation()},jsts.algorithm.RayCrossingCounter.prototype.p=null,jsts.algorithm.RayCrossingCounter.prototype.crossingCount=0,jsts.algorithm.RayCrossingCounter.prototype.isPointOnSegment=!1,jsts.algorithm.RayCrossingCounter.prototype.countSegment=function(t,e){if(!(t.x<this.p.x&&e.x<this.p.x)){if(this.p.x==e.x&&this.p.y===e.y)return void(this.isPointOnSegment=!0);if(t.y===this.p.y&&e.y===this.p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),void(this.p.x>=n&&this.p.x<=r&&(this.isPointOnSegment=!0))}if(t.y>this.p.y&&e.y<=this.p.y||e.y>this.p.y&&t.y<=this.p.y){var o=t.x-this.p.x,i=t.y-this.p.y,s=e.x-this.p.x,a=e.y-this.p.y,u=jsts.algorithm.RobustDeterminant.signOfDet2x2(o,i,s,a);if(0===u)return void(this.isPointOnSegment=!0);i>a&&(u=-u),u>0&&this.crossingCount++}}},jsts.algorithm.RayCrossingCounter.prototype.isOnSegment=function(){return jsts.geom.isPointOnSegment},jsts.algorithm.RayCrossingCounter.prototype.getLocation=function(){return this.isPointOnSegment?jsts.geom.Location.BOUNDARY:this.crossingCount%2===1?jsts.geom.Location.INTERIOR:jsts.geom.Location.EXTERIOR},jsts.algorithm.RayCrossingCounter.prototype.isPointInPolygon=function(){return this.getLocation()!==jsts.geom.Location.EXTERIOR},jsts.operation.BoundaryOp=function(t,e){this.geom=t,this.geomFact=t.getFactory(),this.bnRule=e||jsts.algorithm.BoundaryNodeRule.MOD2_BOUNDARY_RULE},jsts.operation.BoundaryOp.prototype.geom=null,jsts.operation.BoundaryOp.prototype.geomFact=null,jsts.operation.BoundaryOp.prototype.bnRule=null,jsts.operation.BoundaryOp.prototype.getBoundary=function(){return this.geom instanceof jsts.geom.LineString?this.boundaryLineString(this.geom):this.geom instanceof jsts.geom.MultiLineString?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()},jsts.operation.BoundaryOp.prototype.getEmptyMultiPoint=function(){return this.geomFact.createMultiPoint(null)},jsts.operation.BoundaryOp.prototype.boundaryMultiLineString=function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1==e.length?this.geomFact.createPoint(e[0]):this.geomFact.createMultiPoint(e)},jsts.operation.BoundaryOp.prototype.endpoints=null,jsts.operation.BoundaryOp.prototype.computeBoundaryCoordinates=function(t){var e,n,r,o=[];for(this.endpoints=[],e=0;e<t.getNumGeometries();e++)n=t.getGeometryN(e),0!=n.getNumPoints()&&(this.addEndpoint(n.getCoordinateN(0)),this.addEndpoint(n.getCoordinateN(n.getNumPoints()-1)));for(e=0;e<this.endpoints.length;e++)r=this.endpoints[e],this.bnRule.isInBoundary(r.count)&&o.push(r.coordinate);return o},jsts.operation.BoundaryOp.prototype.addEndpoint=function(t){var e,n,r=!1;for(e=0;e<this.endpoints.length;e++)if(n=this.endpoints[e],n.coordinate.equals(t)){r=!0;break}r||(n={},n.coordinate=t,n.count=0,this.endpoints.push(n)),n.count++},jsts.operation.BoundaryOp.prototype.boundaryLineString=function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();if(t.isClosed()){var e=this.bnRule.isInBoundary(2);return e?t.getStartPoint():this.geomFact.createMultiPoint(null)}return this.geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},jsts.operation.buffer.OffsetCurveSetBuilder=function(t,e,n){this.inputGeom=t,this.distance=e,this.curveBuilder=n,this.curveList=new javascript.util.ArrayList},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.inputGeom=null,jsts.operation.buffer.OffsetCurveSetBuilder.prototype.distance=null,jsts.operation.buffer.OffsetCurveSetBuilder.prototype.curveBuilder=null,jsts.operation.buffer.OffsetCurveSetBuilder.prototype.curveList=null,jsts.operation.buffer.OffsetCurveSetBuilder.prototype.getCurves=function(){return this.add(this.inputGeom),this.curveList},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addCurve=function(t,e,n){if(!(null==t||t.length<2)){var r=new jsts.noding.NodedSegmentString(t,new jsts.geomgraph.Label(0,jsts.geom.Location.BOUNDARY,e,n));this.curveList.add(r)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.add=function(t){if(!t.isEmpty())if(t instanceof jsts.geom.Polygon)this.addPolygon(t);else if(t instanceof jsts.geom.LineString)this.addLineString(t);else if(t instanceof jsts.geom.Point)this.addPoint(t);else if(t instanceof jsts.geom.MultiPoint)this.addCollection(t);else if(t instanceof jsts.geom.MultiLineString)this.addCollection(t);else if(t instanceof jsts.geom.MultiPolygon)this.addCollection(t);else{if(!(t instanceof jsts.geom.GeometryCollection))throw new jsts.error.IllegalArgumentError;this.addCollection(t)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addPoint=function(t){if(!(this.distance<=0)){var e=t.getCoordinates(),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,jsts.geom.Location.EXTERIOR,jsts.geom.Location.INTERIOR)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addLineString=function(t){if(!(this.distance<=0)||this.curveBuilder.getBufferParameters().isSingleSided()){var e=jsts.geom.CoordinateArrays.removeRepeatedPoints(t.getCoordinates()),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,jsts.geom.Location.EXTERIOR,jsts.geom.Location.INTERIOR)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addPolygon=function(t){var e=this.distance,n=jsts.geomgraph.Position.LEFT;this.distance<0&&(e=-this.distance,n=jsts.geomgraph.Position.RIGHT);var r=t.getExteriorRing(),o=jsts.geom.CoordinateArrays.removeRepeatedPoints(r.getCoordinates());if(!(this.distance<0&&this.isErodedCompletely(r,this.distance)||this.distance<=0&&o.length<3)){this.addPolygonRing(o,e,n,jsts.geom.Location.EXTERIOR,jsts.geom.Location.INTERIOR);for(var i=0;i<t.getNumInteriorRing();i++){var s=t.getInteriorRingN(i),a=jsts.geom.CoordinateArrays.removeRepeatedPoints(s.getCoordinates());this.distance>0&&this.isErodedCompletely(s,-this.distance)||this.addPolygonRing(a,e,jsts.geomgraph.Position.opposite(n),jsts.geom.Location.INTERIOR,jsts.geom.Location.EXTERIOR)}}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addPolygonRing=function(t,e,n,r,o){if(!(0==e&&t.length<jsts.geom.LinearRing.MINIMUM_VALID_SIZE)){var i=r,s=o;t.length>=jsts.geom.LinearRing.MINIMUM_VALID_SIZE&&jsts.algorithm.CGAlgorithms.isCCW(t)&&(i=o,s=r,n=jsts.geomgraph.Position.opposite(n));var a=this.curveBuilder.getRingCurve(t,n,e);this.addCurve(a,i,s)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return 0>e;if(4==n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),o=Math.min(r.getHeight(),r.getWidth());return 0>e&&2*Math.abs(e)>o},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.isTriangleErodedCompletely=function(t,e){var n=new jsts.geom.Triangle(t[0],t[1],t[2]),r=n.inCentre(),o=jsts.algorithm.CGAlgorithms.distancePointLine(r,n.p0,n.p1);return o<Math.abs(e)},jsts.operation.buffer.BufferSubgraph=function(){this.dirEdgeList=new javascript.util.ArrayList,this.nodes=new javascript.util.ArrayList,this.finder=new jsts.operation.buffer.RightmostEdgeFinder},jsts.operation.buffer.BufferSubgraph.prototype.finder=null,jsts.operation.buffer.BufferSubgraph.prototype.dirEdgeList=null,jsts.operation.buffer.BufferSubgraph.prototype.nodes=null,jsts.operation.buffer.BufferSubgraph.prototype.rightMostCoord=null,jsts.operation.buffer.BufferSubgraph.prototype.env=null,jsts.operation.buffer.BufferSubgraph.prototype.getDirectedEdges=function(){return this.dirEdgeList},jsts.operation.buffer.BufferSubgraph.prototype.getNodes=function(){return this.nodes},jsts.operation.buffer.BufferSubgraph.prototype.getEnvelope=function(){if(null===this.env){for(var t=new jsts.geom.Envelope,e=this.dirEdgeList.iterator();e.hasNext();)for(var n=e.next(),r=n.getEdge().getCoordinates(),o=0;o<r.length-1;o++)t.expandToInclude(r[o]);this.env=t}return this.env},jsts.operation.buffer.BufferSubgraph.prototype.getRightmostCoordinate=function(){return this.rightMostCoord},jsts.operation.buffer.BufferSubgraph.prototype.create=function(t){this.addReachable(t),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()},jsts.operation.buffer.BufferSubgraph.prototype.addReachable=function(t){var e=[];for(e.push(t);0!==e.length;){var n=e.pop();this.add(n,e)}},jsts.operation.buffer.BufferSubgraph.prototype.add=function(t,e){t.setVisited(!0),this.nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this.dirEdgeList.add(r);var o=r.getSym(),i=o.getNode();i.isVisited()||e.push(i)}},jsts.operation.buffer.BufferSubgraph.prototype.clearVisitedEdges=function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.setVisited(!1)}},jsts.operation.buffer.BufferSubgraph.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this.finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths(jsts.geomgraph.Position.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},jsts.operation.buffer.BufferSubgraph.prototype.computeDepths=function(t){var e=[],n=[],r=t.getNode();for(n.push(r),e.push(r),t.setVisited(!0);0!==n.length;){var o=n.shift();e.push(o),this.computeNodeDepth(o);for(var i=o.getEdges().iterator();i.hasNext();){var s=i.next(),a=s.getSym();if(!a.isVisited()){var u=a.getNode();-1===e.indexOf(u)&&(n.push(u),e.push(u))}}}},jsts.operation.buffer.BufferSubgraph.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null==e)throw new jsts.error.TopologyError("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();r.setVisited(!0),this.copySymDepths(r)}},jsts.operation.buffer.BufferSubgraph.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(jsts.geomgraph.Position.LEFT,t.getDepth(jsts.geomgraph.Position.RIGHT)),e.setDepth(jsts.geomgraph.Position.RIGHT,t.getDepth(jsts.geomgraph.Position.LEFT))},jsts.operation.buffer.BufferSubgraph.prototype.findResultEdges=function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(jsts.geomgraph.Position.RIGHT)>=1&&e.getDepth(jsts.geomgraph.Position.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},jsts.operation.buffer.BufferSubgraph.prototype.compareTo=function(t){var e=t;return this.rightMostCoord.x<e.rightMostCoord.x?-1:this.rightMostCoord.x>e.rightMostCoord.x?1:0},jsts.simplify.DPTransformer=function(t,e){this.distanceTolerance=t,this.isEnsureValidTopology=e},jsts.simplify.DPTransformer.prototype=new jsts.geom.util.GeometryTransformer,jsts.simplify.DPTransformer.prototype.distanceTolerance=null,jsts.simplify.DPTransformer.prototype.isEnsureValidTopology=null,jsts.simplify.DPTransformer.prototype.transformCoordinates=function(t){var e=t,n=null;return n=0==e.length?[]:jsts.simplify.DouglasPeuckerLineSimplifier.simplify(e,this.distanceTolerance)},jsts.simplify.DPTransformer.prototype.transformPolygon=function(t,e){if(t.isEmpty())return null;var n=jsts.geom.util.GeometryTransformer.prototype.transformPolygon.apply(this,arguments);return e instanceof jsts.geom.MultiPolygon?n:this.createValidArea(n)},jsts.simplify.DPTransformer.prototype.transformLinearRing=function(t,e){var n=e instanceof jsts.geom.Polygon,r=jsts.geom.util.GeometryTransformer.prototype.transformLinearRing.apply(this,arguments);return!n||r instanceof jsts.geom.LinearRing?r:null},jsts.simplify.DPTransformer.prototype.transformMultiPolygon=function(){var t=jsts.geom.util.GeometryTransformer.prototype.transformMultiPolygon.apply(this,arguments);return this.createValidArea(t)},jsts.simplify.DPTransformer.prototype.createValidArea=function(t){return this.isEnsureValidTopology?t.buffer(0):t},jsts.geom.util.GeometryExtracter=function(t,e){this.clz=t,this.comps=e},jsts.geom.util.GeometryExtracter.prototype=new jsts.geom.GeometryFilter,jsts.geom.util.GeometryExtracter.prototype.clz=null,jsts.geom.util.GeometryExtracter.prototype.comps=null,jsts.geom.util.GeometryExtracter.extract=function(t,e,n){return n=n||new javascript.util.ArrayList,t instanceof e?n.add(t):(t instanceof jsts.geom.GeometryCollection||t instanceof jsts.geom.MultiPoint||t instanceof jsts.geom.MultiLineString||t instanceof jsts.geom.MultiPolygon)&&t.apply(new jsts.geom.util.GeometryExtracter(e,n)),n},jsts.geom.util.GeometryExtracter.prototype.filter=function(t){(null===this.clz||t instanceof this.clz)&&this.comps.add(t)},function(){var t=jsts.operation.overlay.OverlayOp,e=jsts.operation.overlay.snap.SnapOverlayOp,n=function(t,e){this.geom=[],this.geom[0]=t,this.geom[1]=e};n.overlayOp=function(t,e,r){
var o=new n(t,e);return o.getResultGeometry(r)},n.intersection=function(e,n){return overlayOp(e,n,t.INTERSECTION)},n.union=function(e,n){return overlayOp(e,n,t.UNION)},n.difference=function(e,n){return overlayOp(e,n,t.DIFFERENCE)},n.symDifference=function(e,n){return overlayOp(e,n,t.SYMDIFFERENCE)},n.prototype.geom=null,n.prototype.getResultGeometry=function(n){var r=null,o=!1,i=null;try{r=t.overlayOp(this.geom[0],this.geom[1],n);var s=!0;s&&(o=!0)}catch(a){i=a}if(!o)try{r=e.overlayOp(this.geom[0],this.geom[1],n)}catch(a){throw i}return r},jsts.operation.overlay.snap.SnapIfNeededOverlayOp=n}(),function(){var t=jsts.geom.util.GeometryExtracter,e=jsts.operation.union.CascadedPolygonUnion,n=jsts.operation.union.PointGeometryUnion,r=jsts.operation.overlay.OverlayOp,o=jsts.operation.overlay.snap.SnapIfNeededOverlayOp,i=javascript.util.ArrayList;jsts.operation.union.UnaryUnionOp=function(t,e){this.polygons=new i,this.lines=new i,this.points=new i,e&&(this.geomFact=e),this.extract(t)},jsts.operation.union.UnaryUnionOp.union=function(t,e){var n=new jsts.operation.union.UnaryUnionOp(t,e);return n.union()},jsts.operation.union.UnaryUnionOp.prototype.polygons=null,jsts.operation.union.UnaryUnionOp.prototype.lines=null,jsts.operation.union.UnaryUnionOp.prototype.points=null,jsts.operation.union.UnaryUnionOp.prototype.geomFact=null,jsts.operation.union.UnaryUnionOp.prototype.extract=function(e){if(e instanceof i)for(var n=e.iterator();n.hasNext();){var r=n.next();this.extract(r)}else null===this.geomFact&&(this.geomFact=e.getFactory()),t.extract(e,jsts.geom.Polygon,this.polygons),t.extract(e,jsts.geom.LineString,this.lines),t.extract(e,jsts.geom.Point,this.points)},jsts.operation.union.UnaryUnionOp.prototype.union=function(){if(null===this.geomFact)return null;var t=null;if(this.points.size()>0){var r=this.geomFact.buildGeometry(this.points);t=this.unionNoOpt(r)}var o=null;if(this.lines.size()>0){var i=this.geomFact.buildGeometry(this.lines);o=this.unionNoOpt(i)}var s=null;this.polygons.size()>0&&(s=e.union(this.polygons));var a=this.unionWithNull(o,s),u=null;return u=null===t?a:null===a?t:n(t,a),null===u?this.geomFact.createGeometryCollection(null):u},jsts.operation.union.UnaryUnionOp.prototype.unionWithNull=function(t,e){return null===t&&null===e?null:null===e?t:null===t?e:t.union(e)},jsts.operation.union.UnaryUnionOp.prototype.unionNoOpt=function(t){var e=this.geomFact.createPoint(null);return o.overlayOp(t,e,r.UNION)}}(),jsts.index.kdtree.KdNode=function(){this.left=null,this.right=null,this.count=1,2===arguments.length?this.initializeFromCoordinate.apply(this,arguments[0],arguments[1]):3===arguments.length&&this.initializeFromXY.apply(this,arguments[0],arguments[1],arguments[2])},jsts.index.kdtree.KdNode.prototype.initializeFromXY=function(t,e,n){this.p=new jsts.geom.Coordinate(t,e),this.data=n},jsts.index.kdtree.KdNode.prototype.initializeFromCoordinate=function(t,e){this.p=t,this.data=e},jsts.index.kdtree.KdNode.prototype.getX=function(){return this.p.x},jsts.index.kdtree.KdNode.prototype.getY=function(){return this.p.y},jsts.index.kdtree.KdNode.prototype.getCoordinate=function(){return this.p},jsts.index.kdtree.KdNode.prototype.getData=function(){return this.data},jsts.index.kdtree.KdNode.prototype.getLeft=function(){return this.left},jsts.index.kdtree.KdNode.prototype.getRight=function(){return this.right},jsts.index.kdtree.KdNode.prototype.increment=function(){this.count+=1},jsts.index.kdtree.KdNode.prototype.getCount=function(){return this.count},jsts.index.kdtree.KdNode.prototype.isRepeated=function(){return count>1},jsts.index.kdtree.KdNode.prototype.setLeft=function(t){this.left=t},jsts.index.kdtree.KdNode.prototype.setRight=function(t){this.right=t},jsts.algorithm.InteriorPointPoint=function(t){this.minDistance=Number.MAX_VALUE,this.interiorPoint=null,this.centroid=t.getCentroid().getCoordinate(),this.add(t)},jsts.algorithm.InteriorPointPoint.prototype.add=function(t){if(t instanceof jsts.geom.Point)this.addPoint(t.getCoordinate());else if(t instanceof jsts.geom.GeometryCollection)for(var e=0;e<t.getNumGeometries();e++)this.add(t.getGeometryN(e))},jsts.algorithm.InteriorPointPoint.prototype.addPoint=function(t){var e=t.distance(this.centroid);e<this.minDistance&&(this.interiorPoint=new jsts.geom.Coordinate(t),this.minDistance=e)},jsts.algorithm.InteriorPointPoint.prototype.getInteriorPoint=function(){return this.interiorPoint},function(){jsts.geom.MultiLineString=function(t,e){this.geometries=t||[],this.factory=e},jsts.geom.MultiLineString.prototype=new jsts.geom.GeometryCollection,jsts.geom.MultiLineString.constructor=jsts.geom.MultiLineString,jsts.geom.MultiLineString.prototype.getBoundary=function(){return new jsts.operation.BoundaryOp(this).getBoundary()},jsts.geom.MultiLineString.prototype.equalsExact=function(t,e){return!!this.isEquivalentClass(t)&&jsts.geom.GeometryCollection.prototype.equalsExact.call(this,t,e)},jsts.geom.MultiLineString.prototype.CLASS_NAME="jsts.geom.MultiLineString"}(),function(){var t=jsts.index.bintree.Interval,e=jsts.index.bintree.Root,n=function(){this.root=new e,this.minExtent=1};n.ensureExtent=function(e,n){var r,o;return r=e.getMin(),o=e.getMax(),r!==o?e:(r===o&&(r-=n/2,o=r+n/2),new t(r,o))},n.prototype.depth=function(){return null!==this.root?this.root.depth():0},n.prototype.size=function(){return null!==this.root?this.root.size():0},n.prototype.nodeSize=function(){return null!==this.root?this.root.nodeSize():0},n.prototype.insert=function(t,e){this.collectStats(t);var r=n.ensureExtent(t,this.minExtent);this.root.insert(r,e)},n.prototype.remove=function(t,e){var r=n.ensureExtent(t,this.minExtent);return this.root.remove(r,e)},n.prototype.iterator=function(){var t=new javascript.util.ArrayList;return this.root.addAllItems(t),t.iterator()},n.prototype.query=function(){if(2!==arguments.length){var e=arguments[0];return!e instanceof t&&(e=new t(e,e)),this.queryInterval(e)}this.queryAndAdd(arguments[0],arguments[1])},n.prototype.queryInterval=function(t){var e=new javascript.util.ArrayList;return this.query(t,e),e},n.prototype.queryAndAdd=function(t,e){this.root.addAllItemsFromOverlapping(t,e)},n.prototype.collectStats=function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e)},jsts.index.bintree.Bintree=n}(),jsts.algorithm.InteriorPointArea=function(t){this.factory,this.interiorPoint=null,this.maxWidth=0,this.factory=t.getFactory(),this.add(t)},jsts.algorithm.InteriorPointArea.avg=function(t,e){return(t+e)/2},jsts.algorithm.InteriorPointArea.prototype.getInteriorPoint=function(){return this.interiorPoint},jsts.algorithm.InteriorPointArea.prototype.add=function(t){if(t instanceof jsts.geom.Polygon)this.addPolygon(t);else if(t instanceof jsts.geom.GeometryCollection)for(var e=0;e<t.getNumGeometries();e++)this.add(t.getGeometryN(e))},jsts.algorithm.InteriorPointArea.prototype.addPolygon=function(t){if(!t.isEmpty()){var e,n=0,r=this.horizontalBisector(t);if(0==r.getLength())n=0,e=r.getCoordinate();else{var o=r.intersection(t),i=this.widestGeometry(o);n=i.getEnvelopeInternal().getWidth(),e=this.centre(i.getEnvelopeInternal())}(null==this.interiorPoint||n>this.maxWidth)&&(this.interiorPoint=e,this.maxWidth=n)}},jsts.algorithm.InteriorPointArea.prototype.widestGeometry=function(t){if(t instanceof jsts.geom.GeometryCollection){var e=t;if(e.isEmpty())return e;for(var n=e.getGeometryN(0),r=1;r<e.getNumGeometries();r++)e.getGeometryN(r).getEnvelopeInternal().getWidth()>n.getEnvelopeInternal().getWidth()&&(n=e.getGeometryN(r));return n}return t instanceof jsts.geom.Geometry?t:void 0},jsts.algorithm.InteriorPointArea.prototype.horizontalBisector=function(t){var e=t.getEnvelopeInternal(),n=jsts.algorithm.SafeBisectorFinder.getBisectorY(t);return this.factory.createLineString([new jsts.geom.Coordinate(e.getMinX(),n),new jsts.geom.Coordinate(e.getMaxX(),n)])},jsts.algorithm.InteriorPointArea.prototype.centre=function(t){return new jsts.geom.Coordinate(jsts.algorithm.InteriorPointArea.avg(t.getMinX(),t.getMaxX()),jsts.algorithm.InteriorPointArea.avg(t.getMinY(),t.getMaxY()))},jsts.algorithm.SafeBisectorFinder=function(t){this.poly,this.centreY,this.hiY=Number.MAX_VALUE,this.loY=-Number.MAX_VALUE,this.poly=t,this.hiY=t.getEnvelopeInternal().getMaxY(),this.loY=t.getEnvelopeInternal().getMinY(),this.centreY=jsts.algorithm.InteriorPointArea.avg(this.loY,this.hiY)},jsts.algorithm.SafeBisectorFinder.getBisectorY=function(t){var e=new jsts.algorithm.SafeBisectorFinder(t);return e.getBisectorY()},jsts.algorithm.SafeBisectorFinder.prototype.getBisectorY=function(){this.process(this.poly.getExteriorRing());for(var t=0;t<this.poly.getNumInteriorRing();t++)this.process(this.poly.getInteriorRingN(t));var e=jsts.algorithm.InteriorPointArea.avg(this.hiY,this.loY);return e},jsts.algorithm.SafeBisectorFinder.prototype.process=function(t){for(var e=t.getCoordinateSequence(),n=0;n<e.length;n++){var r=e[n].y;this.updateInterval(r)}},jsts.algorithm.SafeBisectorFinder.prototype.updateInterval=function(t){t<=this.centreY?t>this.loY&&(this.loY=t):t>this.centreY&&t<this.hiY&&(this.hiY=t)},jsts.operation.buffer.BufferParameters=function(t,e,n,r){t&&this.setQuadrantSegments(t),e&&this.setEndCapStyle(e),n&&this.setJoinStyle(n),r&&this.setMitreLimit(r)},jsts.operation.buffer.BufferParameters.CAP_ROUND=1,jsts.operation.buffer.BufferParameters.CAP_FLAT=2,jsts.operation.buffer.BufferParameters.CAP_SQUARE=3,jsts.operation.buffer.BufferParameters.JOIN_ROUND=1,jsts.operation.buffer.BufferParameters.JOIN_MITRE=2,jsts.operation.buffer.BufferParameters.JOIN_BEVEL=3,jsts.operation.buffer.BufferParameters.DEFAULT_QUADRANT_SEGMENTS=8,jsts.operation.buffer.BufferParameters.DEFAULT_MITRE_LIMIT=5,jsts.operation.buffer.BufferParameters.prototype.quadrantSegments=jsts.operation.buffer.BufferParameters.DEFAULT_QUADRANT_SEGMENTS,jsts.operation.buffer.BufferParameters.prototype.endCapStyle=jsts.operation.buffer.BufferParameters.CAP_ROUND,jsts.operation.buffer.BufferParameters.prototype.joinStyle=jsts.operation.buffer.BufferParameters.JOIN_ROUND,jsts.operation.buffer.BufferParameters.prototype.mitreLimit=jsts.operation.buffer.BufferParameters.DEFAULT_MITRE_LIMIT,jsts.operation.buffer.BufferParameters.prototype._isSingleSided=!1,jsts.operation.buffer.BufferParameters.prototype.getQuadrantSegments=function(){return this.quadrantSegments},jsts.operation.buffer.BufferParameters.prototype.setQuadrantSegments=function(t){this.quadrantSegments=t},jsts.operation.buffer.BufferParameters.prototype.setQuadrantSegments=function(t){this.quadrantSegments=t,0===this.quadrantSegments&&(this.joinStyle=jsts.operation.buffer.BufferParameters.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=jsts.operation.buffer.BufferParameters.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),0>=t&&(this.quadrantSegments=1),this.joinStyle!==jsts.operation.buffer.BufferParameters.JOIN_ROUND&&(this.quadrantSegments=jsts.operation.buffer.BufferParameters.DEFAULT_QUADRANT_SEGMENTS)},jsts.operation.buffer.BufferParameters.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},jsts.operation.buffer.BufferParameters.prototype.getEndCapStyle=function(){return this.endCapStyle},jsts.operation.buffer.BufferParameters.prototype.setEndCapStyle=function(t){this.endCapStyle=t},jsts.operation.buffer.BufferParameters.prototype.getJoinStyle=function(){return this.joinStyle},jsts.operation.buffer.BufferParameters.prototype.setJoinStyle=function(t){this.joinStyle=t},jsts.operation.buffer.BufferParameters.prototype.getMitreLimit=function(){return this.mitreLimit},jsts.operation.buffer.BufferParameters.prototype.setMitreLimit=function(t){this.mitreLimit=t},jsts.operation.buffer.BufferParameters.prototype.setSingleSided=function(t){this._isSingleSided=t},jsts.operation.buffer.BufferParameters.prototype.isSingleSided=function(){return this._isSingleSided},function(){jsts.geom.util.ShortCircuitedGeometryVisitor=function(){},jsts.geom.util.ShortCircuitedGeometryVisitor.prototype.isDone=!1,jsts.geom.util.ShortCircuitedGeometryVisitor.prototype.applyTo=function(t){for(var e=0;e<t.getNumGeometries()&&!this.isDone;e++){var n=t.getGeometryN(e);if(n instanceof jsts.geom.GeometryCollection)this.applyTo(n);else if(this.visit(n),this.isDone())return void(this.isDone=!0)}},jsts.geom.util.ShortCircuitedGeometryVisitor.prototype.visit=function(){},jsts.geom.util.ShortCircuitedGeometryVisitor.prototype.isDone=function(){}}(),function(){var t=function(t){this.rectEnv=t};t.prototype=new jsts.geom.util.ShortCircuitedGeometryVisitor,t.constructor=t,t.prototype.rectEnv=null,t.prototype.intersects=!1,t.prototype.intersects=function(){return this.intersects},t.prototype.visit=function(t){var e=t.getEnvelopeInternal();if(this.rectEnv.intersects(e))return this.rectEnv.contains(e)?void(this.intersects=!0):e.getMinX()>=rectEnv.getMinX()&&e.getMaxX()<=rectEnv.getMaxX()?void(this.intersects=!0):e.getMinY()>=rectEnv.getMinY()&&e.getMaxY()<=rectEnv.getMaxY()?void(this.intersects=!0):void 0},t.prototype.isDone=function(){return 1==this.intersects};var e=function(t){this.rectSeq=t.getExteriorRing().getCoordinateSequence(),this.rectEnv=t.getEnvelopeInternal()};e.prototype=new jsts.geom.util.ShortCircuitedGeometryVisitor,e.constructor=e,e.prototype.rectSeq=null,e.prototype.rectEnv=null,e.prototype.containsPoint=!1,e.prototype.containsPoint=function(){return this.containsPoint},e.prototype.visit=function(t){if(t instanceof jsts.geom.Polygon){var e=t.getEnvelopeInternal();if(this.rectEnv.intersects(e))for(var n=new jsts.geom.Coordinate,r=0;4>r;r++)if(this.rectSeq.getCoordinate(r,n),e.contains(n)&&SimplePointInAreaLocator.containsPointInPolygon(n,t))return void(this.containsPoint=!0)}},e.prototype.isDone=function(){return 1==this.containsPoint};var n=function(t){this.rectEnv=t.getEnvelopeInternal(),this.rectIntersector=new RectangleLineIntersector(rectEnv)};n.prototype=new jsts.geom.util.ShortCircuitedGeometryVisitor,n.constructor=n,n.prototype.rectEnv=null,n.prototype.rectIntersector=null,n.prototype.hasIntersection=!1,n.prototype.p0=null,n.prototype.p1=null,n.prototype.intersects=function(){return this.hasIntersection},n.prototype.visit=function(t){var e=t.getEnvelopeInternal();if(this.rectEnv.intersects(e)){var n=LinearComponentExtracter.getLines(t);this.checkIntersectionWithLineStrings(n)}},n.prototype.checkIntersectionWithLineStrings=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();if(this.checkIntersectionWithSegments(n),this.hasIntersection)return}},n.prototype.checkIntersectionWithSegments=function(t){for(var e=t.getCoordinateSequence(),n=1;n<e.length;n++)if(this.p0=e[n-1],this.p1=e[n],rectIntersector.intersects(p0,p1))return void(this.hasIntersection=!0)},n.prototype.isDone=function(){return 1==this.hasIntersection},jsts.operation.predicate.RectangleIntersects=function(t){this.rectangle=t,this.rectEnv=t.getEnvelopeInternal()},jsts.operation.predicate.RectangleIntersects.intersects=function(t,e){var n=new jsts.operation.predicate.RectangleIntersects(t);return n.intersects(e)},jsts.operation.predicate.RectangleIntersects.prototype.rectangle=null,jsts.operation.predicate.RectangleIntersects.prototype.rectEnv=null,jsts.operation.predicate.RectangleIntersects.prototype.intersects=function(r){if(!this.rectEnv.intersects(r.getEnvelopeInternal()))return!1;var o=new t(this.rectEnv);if(o.applyTo(r),o.intersects())return!0;var i=new e(rectangle);if(i.applyTo(r),i.containsPoint())return!0;var s=new n(rectangle);return s.applyTo(r),!!s.intersects()}}(),jsts.operation.buffer.BufferBuilder=function(t){this.bufParams=t,this.edgeList=new jsts.geomgraph.EdgeList},jsts.operation.buffer.BufferBuilder.depthDelta=function(t){var e=t.getLocation(0,jsts.geomgraph.Position.LEFT),n=t.getLocation(0,jsts.geomgraph.Position.RIGHT);return e===jsts.geom.Location.INTERIOR&&n===jsts.geom.Location.EXTERIOR?1:e===jsts.geom.Location.EXTERIOR&&n===jsts.geom.Location.INTERIOR?-1:0},jsts.operation.buffer.BufferBuilder.prototype.bufParams=null,jsts.operation.buffer.BufferBuilder.prototype.workingPrecisionModel=null,jsts.operation.buffer.BufferBuilder.prototype.workingNoder=null,jsts.operation.buffer.BufferBuilder.prototype.geomFact=null,jsts.operation.buffer.BufferBuilder.prototype.graph=null,jsts.operation.buffer.BufferBuilder.prototype.edgeList=null,jsts.operation.buffer.BufferBuilder.prototype.setWorkingPrecisionModel=function(t){this.workingPrecisionModel=t},jsts.operation.buffer.BufferBuilder.prototype.setNoder=function(t){this.workingNoder=t},jsts.operation.buffer.BufferBuilder.prototype.buffer=function(t,e){var n=this.workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this.geomFact=t.getFactory();var r=new jsts.operation.buffer.OffsetCurveBuilder(n,this.bufParams),o=new jsts.operation.buffer.OffsetCurveSetBuilder(t,e,r),i=o.getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this.graph=new jsts.geomgraph.PlanarGraph(new jsts.operation.overlay.OverlayNodeFactory),this.graph.addEdges(this.edgeList.getEdges());var s=this.createSubgraphs(this.graph),a=new jsts.operation.overlay.PolygonBuilder(this.geomFact);this.buildSubgraphs(s,a);var u=a.getPolygons();if(u.size()<=0)return this.createEmptyResultGeometry();var l=this.geomFact.buildGeometry(u);return l},jsts.operation.buffer.BufferBuilder.prototype.getNoder=function(t){if(null!==this.workingNoder)return this.workingNoder;var e=new jsts.noding.MCIndexNoder,n=new jsts.algorithm.RobustLineIntersector;return n.setPrecisionModel(t),e.setSegmentIntersector(new jsts.noding.IntersectionAdder(n)),e},jsts.operation.buffer.BufferBuilder.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings(),o=r.iterator();o.hasNext();){var i=o.next(),s=i.getData(),a=new jsts.geomgraph.Edge(i.getCoordinates(),new jsts.geomgraph.Label(s));this.insertUniqueEdge(a)}},jsts.operation.buffer.BufferBuilder.prototype.insertUniqueEdge=function(t){var e=this.edgeList.findEqualEdge(t);if(null!=e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new jsts.geomgraph.Label(t.getLabel()),r.flip()),n.merge(r);var o=jsts.operation.buffer.BufferBuilder.depthDelta(r),i=e.getDepthDelta(),s=i+o;e.setDepthDelta(s)}else this.edgeList.add(t),t.setDepthDelta(jsts.operation.buffer.BufferBuilder.depthDelta(t.getLabel()))},jsts.operation.buffer.BufferBuilder.prototype.createSubgraphs=function(t){for(var e=[],n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var o=new jsts.operation.buffer.BufferSubgraph;o.create(r),e.push(o)}}var i=function(t,e){return t.compareTo(e)};return e.sort(i),e.reverse(),e},jsts.operation.buffer.BufferBuilder.prototype.buildSubgraphs=function(t,e){for(var n=[],r=0;r<t.length;r++){var o=t[r],i=o.getRightmostCoordinate(),s=new jsts.operation.buffer.SubgraphDepthLocater(n),a=s.getDepth(i);o.computeDepth(a),o.findResultEdges(),n.push(o),e.add(o.getDirectedEdges(),o.getNodes())}},jsts.operation.buffer.BufferBuilder.convertSegStrings=function(t){for(var e=new jsts.geom.GeometryFactory,n=new javascript.util.ArrayList;t.hasNext();){var r=t.next(),o=e.createLineString(r.getCoordinates());n.add(o)}return e.buildGeometry(n)},jsts.operation.buffer.BufferBuilder.prototype.createEmptyResultGeometry=function(){var t=this.geomFact.createPolygon(null,null);return t},jsts.noding.SegmentPointComparator=function(){},jsts.noding.SegmentPointComparator.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=jsts.noding.SegmentPointComparator.relativeSign(e.x,n.x),o=jsts.noding.SegmentPointComparator.relativeSign(e.y,n.y);switch(t){case 0:return jsts.noding.SegmentPointComparator.compareValue(r,o);case 1:return jsts.noding.SegmentPointComparator.compareValue(o,r);case 2:return jsts.noding.SegmentPointComparator.compareValue(o,-r);case 3:return jsts.noding.SegmentPointComparator.compareValue(-r,o);case 4:return jsts.noding.SegmentPointComparator.compareValue(-r,-o);case 5:return jsts.noding.SegmentPointComparator.compareValue(-o,-r);case 6:return jsts.noding.SegmentPointComparator.compareValue(-o,r);case 7:return jsts.noding.SegmentPointComparator.compareValue(r,-o)}return 0},jsts.noding.SegmentPointComparator.relativeSign=function(t,e){return e>t?-1:t>e?1:0},jsts.noding.SegmentPointComparator.compareValue=function(t,e){return 0>t?-1:t>0?1:0>e?-1:e>0?1:0},jsts.operation.relate.RelateOp=function(){jsts.operation.GeometryGraphOperation.apply(this,arguments),this._relate=new jsts.operation.relate.RelateComputer(this.arg)},jsts.operation.relate.RelateOp.prototype=new jsts.operation.GeometryGraphOperation,jsts.operation.relate.RelateOp.relate=function(t,e,n){var r=new jsts.operation.relate.RelateOp(t,e,n),o=r.getIntersectionMatrix();return o},jsts.operation.relate.RelateOp.prototype._relate=null,jsts.operation.relate.RelateOp.prototype.getIntersectionMatrix=function(){return this._relate.computeIM()},jsts.index.chain.MonotoneChain=function(t,e,n,r){this.pts=t,this.start=e,this.end=n,this.context=r},jsts.index.chain.MonotoneChain.prototype.pts=null,jsts.index.chain.MonotoneChain.prototype.start=null,jsts.index.chain.MonotoneChain.prototype.end=null,jsts.index.chain.MonotoneChain.prototype.env=null,jsts.index.chain.MonotoneChain.prototype.context=null,jsts.index.chain.MonotoneChain.prototype.id=null,jsts.index.chain.MonotoneChain.prototype.setId=function(t){this.id=t},jsts.index.chain.MonotoneChain.prototype.getId=function(){return this.id},jsts.index.chain.MonotoneChain.prototype.getContext=function(){return this.context},jsts.index.chain.MonotoneChain.prototype.getEnvelope=function(){if(null==this.env){var t=this.pts[this.start],e=this.pts[this.end];this.env=new jsts.geom.Envelope(t,e)}return this.env},jsts.index.chain.MonotoneChain.prototype.getStartIndex=function(){return this.start},jsts.index.chain.MonotoneChain.prototype.getEndIndex=function(){return this.end},jsts.index.chain.MonotoneChain.prototype.getLineSegment=function(t,e){e.p0=this.pts[t],e.p1=this.pts[t+1]},jsts.index.chain.MonotoneChain.prototype.getCoordinates=function(){for(var t=[],e=0,n=this.start;n<=this.end;n++)t[e++]=this.pts[n];return t},jsts.index.chain.MonotoneChain.prototype.select=function(t,e){this.computeSelect2(t,this.start,this.end,e)},jsts.index.chain.MonotoneChain.prototype.computeSelect2=function(t,e,n,r){var o=this.pts[e],i=this.pts[n];if(r.tempEnv1.init(o,i),n-e===1)return void r.select(this,e);if(t.intersects(r.tempEnv1)){var s=parseInt((e+n)/2);s>e&&this.computeSelect2(t,e,s,r),n>s&&this.computeSelect2(t,s,n,r)}},jsts.index.chain.MonotoneChain.prototype.computeOverlaps=function(t,e){return 6===arguments.length?this.computeOverlaps2.apply(this,arguments):void this.computeOverlaps2(this.start,this.end,t,t.start,t.end,e)},jsts.index.chain.MonotoneChain.prototype.computeOverlaps2=function(t,e,n,r,o,i){var s=this.pts[t],a=this.pts[e],u=n.pts[r],l=n.pts[o];if(e-t===1&&o-r===1)return void i.overlap(this,t,n,r);if(i.tempEnv1.init(s,a),i.tempEnv2.init(u,l),i.tempEnv1.intersects(i.tempEnv2)){var c=parseInt((t+e)/2),p=parseInt((r+o)/2);c>t&&(p>r&&this.computeOverlaps2(t,c,n,r,p,i),o>p&&this.computeOverlaps2(t,c,n,p,o,i)),e>c&&(p>r&&this.computeOverlaps2(c,e,n,r,p,i),o>p&&this.computeOverlaps2(c,e,n,p,o,i))}},function(){var t=jsts.geom.Location,e=jsts.geom.Dimension;jsts.geom.IntersectionMatrix=function(n){var r=n;void 0===n||null===n?(this.matrix=[[],[],[]],this.setAll(e.FALSE)):"string"==typeof n?this.set(n):r instanceof jsts.geom.IntersectionMatrix&&(this.matrix[t.INTERIOR][t.INTERIOR]=r.matrix[t.INTERIOR][t.INTERIOR],this.matrix[t.INTERIOR][t.BOUNDARY]=r.matrix[t.INTERIOR][t.BOUNDARY],this.matrix[t.INTERIOR][t.EXTERIOR]=r.matrix[t.INTERIOR][t.EXTERIOR],this.matrix[t.BOUNDARY][t.INTERIOR]=r.matrix[t.BOUNDARY][t.INTERIOR],this.matrix[t.BOUNDARY][t.BOUNDARY]=r.matrix[t.BOUNDARY][t.BOUNDARY],this.matrix[t.BOUNDARY][t.EXTERIOR]=r.matrix[t.BOUNDARY][t.EXTERIOR],this.matrix[t.EXTERIOR][t.INTERIOR]=r.matrix[t.EXTERIOR][t.INTERIOR],this.matrix[t.EXTERIOR][t.BOUNDARY]=r.matrix[t.EXTERIOR][t.BOUNDARY],this.matrix[t.EXTERIOR][t.EXTERIOR]=r.matrix[t.EXTERIOR][t.EXTERIOR])},jsts.geom.IntersectionMatrix.prototype.matrix=null,jsts.geom.IntersectionMatrix.prototype.add=function(t){var e,n;for(e=0;3>e;e++)for(n=0;3>n;n++)this.setAtLeast(e,n,t.get(e,n))},jsts.geom.IntersectionMatrix.matches=function(t,n){return"string"==typeof t?jsts.geom.IntersectionMatrix.matches2.call(this,arguments):"*"===n||("T"===n&&(t>=0||t===e.TRUE)||("F"===n&&t===e.FALSE||("0"===n&&t===e.P||("1"===n&&t===e.L||"2"===n&&t===e.A))))},jsts.geom.IntersectionMatrix.matches2=function(t,e){var n=new jsts.geom.IntersectionMatrix(t);return n.matches(e)},jsts.geom.IntersectionMatrix.prototype.set=function(t,e,n){return"string"==typeof t?void this.set2(t):void(this.matrix[t][e]=n)},jsts.geom.IntersectionMatrix.prototype.set2=function(t){for(var n=0;n<t.length();n++){var r=n/3,o=n%3;this.matrix[r][o]=e.toDimensionValue(t.charAt(n))}},jsts.geom.IntersectionMatrix.prototype.setAtLeast=function(t,e,n){return 1===arguments.length?void this.setAtLeast2(arguments[0]):void(this.matrix[t][e]<n&&(this.matrix[t][e]=n))},jsts.geom.IntersectionMatrix.prototype.setAtLeastIfValid=function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)},jsts.geom.IntersectionMatrix.prototype.setAtLeast2=function(t){var e;for(e=0;e<t.length;e++){var n=parseInt(e/3),r=parseInt(e%3);this.setAtLeast(n,r,jsts.geom.Dimension.toDimensionValue(t.charAt(e)))}},jsts.geom.IntersectionMatrix.prototype.setAll=function(t){var e,n;for(e=0;3>e;e++)for(n=0;3>n;n++)this.matrix[e][n]=t},jsts.geom.IntersectionMatrix.prototype.get=function(t,e){return this.matrix[t][e]},jsts.geom.IntersectionMatrix.prototype.isDisjoint=function(){return this.matrix[t.INTERIOR][t.INTERIOR]===e.FALSE&&this.matrix[t.INTERIOR][t.BOUNDARY]===e.FALSE&&this.matrix[t.BOUNDARY][t.INTERIOR]===e.FALSE&&this.matrix[t.BOUNDARY][t.BOUNDARY]===e.FALSE},jsts.geom.IntersectionMatrix.prototype.isIntersects=function(){return!this.isDisjoint()},jsts.geom.IntersectionMatrix.prototype.isTouches=function(n,r){return n>r?this.isTouches(r,n):(n==e.A&&r==e.A||n==e.L&&r==e.L||n==e.L&&r==e.A||n==e.P&&r==e.A||n==e.P&&r==e.L)&&(this.matrix[t.INTERIOR][t.INTERIOR]===e.FALSE&&(jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.BOUNDARY],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[t.BOUNDARY][t.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[t.BOUNDARY][t.BOUNDARY],"T")))},jsts.geom.IntersectionMatrix.prototype.isCrosses=function(n,r){return n==e.P&&r==e.L||n==e.P&&r==e.A||n==e.L&&r==e.A?jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.INTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.EXTERIOR],"T"):n==e.L&&r==e.P||n==e.A&&r==e.P||n==e.A&&r==e.L?jsts.geom.IntersectionMatrix.matches(matrix[t.INTERIOR][t.INTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[t.EXTERIOR][t.INTERIOR],"T"):n===e.L&&r===e.L&&0===this.matrix[t.INTERIOR][t.INTERIOR]},jsts.geom.IntersectionMatrix.prototype.isWithin=function(){return jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.INTERIOR],"T")&&this.matrix[t.INTERIOR][t.EXTERIOR]==e.FALSE&&this.matrix[t.BOUNDARY][t.EXTERIOR]==e.FALSE},jsts.geom.IntersectionMatrix.prototype.isContains=function(){return jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.INTERIOR],"T")&&this.matrix[t.EXTERIOR][t.INTERIOR]==e.FALSE&&this.matrix[t.EXTERIOR][t.BOUNDARY]==e.FALSE},jsts.geom.IntersectionMatrix.prototype.isCovers=function(){var n=jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.BOUNDARY],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[t.BOUNDARY][t.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[t.BOUNDARY][t.BOUNDARY],"T");return n&&this.matrix[t.EXTERIOR][t.INTERIOR]==e.FALSE&&this.matrix[t.EXTERIOR][t.BOUNDARY]==e.FALSE},jsts.geom.IntersectionMatrix.prototype.isCoveredBy=function(){var n=jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.BOUNDARY],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[t.BOUNDARY][t.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[t.BOUNDARY][t.BOUNDARY],"T");return n&&this.matrix[t.INTERIOR][t.EXTERIOR]===e.FALSE&&this.matrix[t.BOUNDARY][t.EXTERIOR]===e.FALSE},jsts.geom.IntersectionMatrix.prototype.isEquals=function(n,r){return n===r&&(jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.INTERIOR],"T")&&this.matrix[t.EXTERIOR][t.INTERIOR]===e.FALSE&&this.matrix[t.INTERIOR][t.EXTERIOR]===e.FALSE&&this.matrix[t.EXTERIOR][t.BOUNDARY]===e.FALSE&&this.matrix[t.BOUNDARY][t.EXTERIOR]===e.FALSE)},jsts.geom.IntersectionMatrix.prototype.isOverlaps=function(n,r){return n==e.P&&r===e.P||n==e.A&&r===e.A?jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.INTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.EXTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[t.EXTERIOR][t.INTERIOR],"T"):n===e.L&&r===e.L&&(1==this.matrix[t.INTERIOR][t.INTERIOR]&&jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.EXTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[t.EXTERIOR][t.INTERIOR],"T"))},jsts.geom.IntersectionMatrix.prototype.matches=function(t){if(9!=t.length)throw new jsts.error.IllegalArgumentException("Should be length 9: "+t);for(var e=0;3>e;e++)for(var n=0;3>n;n++)if(!jsts.geom.IntersectionMatrix.matches(this.matrix[e][n],t.charAt(3*e+n)))return!1;return!0},jsts.geom.IntersectionMatrix.prototype.transpose=function(){var t=matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=t,t=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=t,t=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=t,this},jsts.geom.IntersectionMatrix.prototype.toString=function(){var t,n,r="";for(t=0;3>t;t++)for(n=0;3>n;n++)r+=e.toDimensionSymbol(this.matrix[t][n]);return r}}(),jsts.triangulate.quadedge.LastFoundQuadEdgeLocator=function(t){this.subdiv=t,this.lastEdge=null,this.init()},jsts.triangulate.quadedge.LastFoundQuadEdgeLocator.prototype.init=function(){this.lastEdge=this.findEdge()},jsts.triangulate.quadedge.LastFoundQuadEdgeLocator.prototype.findEdge=function(){var t=this.subdiv.getEdges();return t[0]},jsts.triangulate.quadedge.LastFoundQuadEdgeLocator.prototype.locate=function(t){this.lastEdge.isLive()||this.init();var e=this.subdiv.locateFromEdge(t,this.lastEdge);return this.lastEdge=e,e},jsts.noding.SegmentNodeList=function(t){this.nodeMap=new javascript.util.TreeMap,this.edge=t},jsts.noding.SegmentNodeList.prototype.nodeMap=null,jsts.noding.SegmentNodeList.prototype.iterator=function(){return this.nodeMap.values().iterator()},jsts.noding.SegmentNodeList.prototype.edge=null,jsts.noding.SegmentNodeList.prototype.getEdge=function(){return this.edge},jsts.noding.SegmentNodeList.prototype.add=function(t,e){var n=new jsts.noding.SegmentNode(this.edge,t,e,this.edge.getSegmentOctant(e)),r=this.nodeMap.get(n);return null!==r?(jsts.util.Assert.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this.nodeMap.put(n,n),n)},jsts.noding.SegmentNodeList.prototype.addEndpoints=function(){var t=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(t),t)},jsts.noding.SegmentNodeList.prototype.addCollapsedNodes=function(){var t=[];this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=0;e<t.length;e++){var n=t[e];this.add(this.edge.getCoordinate(n),n)}},jsts.noding.SegmentNodeList.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this.edge.size()-2;e++){var n=this.edge.getCoordinate(e),r=(this.edge.getCoordinate(e+1),this.edge.getCoordinate(e+2));n.equals2D(r)&&t.push(e+1)}},jsts.noding.SegmentNodeList.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=[null],n=this.iterator(),r=n.next();n.hasNext();){var o=n.next(),i=this.findCollapseIndex(r,o,e);
i&&t.push(e[0]),r=o}},jsts.noding.SegmentNodeList.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},jsts.noding.SegmentNodeList.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),o=this.createSplitEdge(n,r);t.add(o),n=r}},jsts.noding.SegmentNodeList.prototype.checkSplitEdgesCorrectness=function(t){var e=edge.getCoordinates(),n=t[0],r=n.getCoordinate(0);if(!r.equals2D(e[0]))throw new Error("bad split edge start point at "+r);var o=t[t.length-1],i=o.getCoordinates(),s=i[i.length-1];if(!s.equals2D(e[e.length-1]))throw new Error("bad split edge end point at "+s)},jsts.noding.SegmentNodeList.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.getCoordinate(e.segmentIndex),o=e.isInterior()||!e.coord.equals2D(r);o||n--;var i=[],s=0;i[s++]=new jsts.geom.Coordinate(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)i[s++]=this.edge.getCoordinate(a);return o&&(i[s]=e.coord),new jsts.noding.NodedSegmentString(i,this.edge.getData())},jsts.io.WKTWriter=function(){this.parser=new jsts.io.WKTParser(this.geometryFactory)},jsts.io.WKTWriter.prototype.write=function(t){var e=this.parser.write(t);return e},jsts.io.WKTWriter.toLineString=function(t,e){if(2!==arguments.length)throw new jsts.error.NotImplementedError;return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"},jsts.io.WKTReader=function(t){this.geometryFactory=t||new jsts.geom.GeometryFactory,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new jsts.io.WKTParser(this.geometryFactory)},jsts.io.WKTReader.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===jsts.geom.PrecisionModel.FIXED&&this.reducePrecision(e),e},jsts.io.WKTReader.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;n>e;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;n>e;e++)this.reducePrecision(t.geometries[e])},jsts.triangulate.quadedge.QuadEdgeSubdivision=function(t,e){this.tolerance=e,this.edgeCoincidenceTolerance=e/jsts.triangulate.quadedge.QuadEdgeSubdivision.EDGE_COINCIDENCE_TOL_FACTOR,this.visitedKey=0,this.quadEdges=[],this.startingEdge,this.tolerance,this.edgeCoincidenceTolerance,this.frameEnv,this.locator=null,this.seg=new jsts.geom.LineSegment,this.triEdges=new Array(3),this.frameVertex=new Array(3),this.createFrame(t),this.startingEdge=this.initSubdiv(),this.locator=new jsts.triangulate.quadedge.LastFoundQuadEdgeLocator(this)},jsts.triangulate.quadedge.QuadEdgeSubdivision.EDGE_COINCIDENCE_TOL_FACTOR=1e3,jsts.triangulate.quadedge.QuadEdgeSubdivision.getTriangleEdges=function(t,e){if(e[0]=t,e[1]=e[0].lNext(),e[2]=e[1].lNext(),e[2].lNext()!=e[0])throw new jsts.IllegalArgumentError("Edges do not form a triangle")},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.createFrame=function(t){var e,n,r;e=t.getWidth(),n=t.getHeight(),r=0,r=e>n?10*e:10*n,this.frameVertex[0]=new jsts.triangulate.quadedge.Vertex((t.getMaxX()+t.getMinX())/2,t.getMaxY()+r),this.frameVertex[1]=new jsts.triangulate.quadedge.Vertex(t.getMinX()-r,t.getMinY()-r),this.frameVertex[2]=new jsts.triangulate.quadedge.Vertex(t.getMaxX()+r,t.getMinY()-r),this.frameEnv=new jsts.geom.Envelope(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate()),this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate())},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.initSubdiv=function(){var t,e,n;return t=this.makeEdge(this.frameVertex[0],this.frameVertex[1]),e=this.makeEdge(this.frameVertex[1],this.frameVertex[2]),jsts.triangulate.quadedge.QuadEdge.splice(t.sym(),e),n=this.makeEdge(this.frameVertex[2],this.frameVertex[0]),jsts.triangulate.quadedge.QuadEdge.splice(e.sym(),n),jsts.triangulate.quadedge.QuadEdge.splice(n.sym(),t),t},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTolerance=function(){return this.tolerance},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getEnvelope=function(){return new jsts.geom.Envelope(this.frameEnv)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getEdges=function(){return arguments.length>0?this.getEdgesByFactory(arguments[0]):this.quadEdges},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.setLocator=function(t){this.locator=t},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.makeEdge=function(t,e){var n=jsts.triangulate.quadedge.QuadEdge.makeEdge(t,e);return this.quadEdges.push(n),n},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.connect=function(t,e){var n=jsts.triangulate.quadedge.QuadEdge.connect(t,e);return this.quadEdges.push(n),n},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.delete_jsts=function(t){jsts.triangulate.quadedge.QuadEdge.splice(t,t.oPrev()),jsts.triangulate.quadedge.QuadEdge.splice(t.sym(),t.sym().oPrev());var e,n,r;t.eSym=t.sym(),n=t.rot,r=t.rot.sym();var o=this.quadEdges.indexOf(t);-1!==o&&this.quadEdges.splice(o,1),o=this.quadEdges.indexOf(e),-1!==o&&this.quadEdges.splice(o,1),o=this.quadEdges.indexOf(n),-1!==o&&this.quadEdges.splice(o,1),o=this.quadEdges.indexOf(r),-1!==o&&this.quadEdges.splice(o,1),t.delete_jsts(),e.delete_jsts(),n.delete_jsts(),r.delete_jsts()},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateFromEdge=function(t,e){var n,r=0,o=this.quadEdges.length;for(n=e;;){if(r++,r>o)throw new jsts.error.LocateFailureError(n.toLineSegment());if(t.equals(n.orig())||t.equals(n.dest()))break;if(t.rightOf(n))n=n.sym();else if(t.rightOf(n.oNext())){if(t.rightOf(n.dPrev()))break;n=n.dPrev()}else n=n.oNext()}return n},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locate=function(){return 1===arguments.length?arguments[0]instanceof jsts.triangulate.quadedge.Vertex?this.locateByVertex(arguments[0]):this.locateByCoordinate(arguments[0]):this.locateByCoordinates(arguments[0],arguments[1])},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateByVertex=function(t){return this.locator.locate(t)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateByCoordinate=function(t){return this.locator.locate(new jsts.triangulate.quadedge.Vertex(t))},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateByCoordinates=function(t,e){var n,r,o,n=this.locator.locate(new jsts.triangulate.quadedge.Vertex(t));if(null===n)return null;r=n,n.dest().getCoordinate().equals2D(t)&&(r=n.sym()),o=r;do{if(o.dest().getCoordinate().equals2D(e))return o;o=o.oNext()}while(o!=r);return null},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.insertSite=function(t){var e,n,r;if(e=this.locate(t),t.equals(e.orig(),this.tolerance)||t.equals(e.dest(),this.tolerance))return e;n=this.makeEdge(e.orig(),t),jsts.triangulate.quadedge.QuadEdge.splice(n,e),r=n;do n=this.connect(e,n.sym()),e=n.oPrev();while(e.lNext()!=r);return r},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isFrameEdge=function(t){return!(!this.isFrameVertex(t.orig())&&!this.isFrameVertex(t.dest()))},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isFrameBorderEdge=function(t){var e,n,r,o;return e=new Array(3),this.getTriangleEdges(t,e),n=new Array(3),this.getTriangleEdges(t.sym(),n),r=t.lNext().dest(),!!this.isFrameVertex(r)||(o=t.sym().lNext().dest(),!!this.isFrameVertex(o))},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isFrameVertex=function(t){return!!t.equals(this.frameVertex[0])||(!!t.equals(this.frameVertex[1])||!!t.equals(this.frameVertex[2]))},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isOnEdge=function(t,e){this.seg.setCoordinates(t.orig().getCoordinate(),t.dest().getCoordinate());var n=this.seg.distance(e);return n<this.edgeCoincidenceTolerance},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isVertexOfEdge=function(t,e){return!(!e.equals(t.orig(),this.tolerance)&&!e.equals(t.dest(),this.tolerance))},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVertices=function(t){var e,n,r,o,i,s=[];for(e=0,n=this.quadEdges.length,e;n>e;e++)r=this.quadEdges[e],o=r.orig(),(t||!this.isFrameVertex(o))&&s.push(o),i=r.dest(),(t||!this.isFrameVertex(i))&&s.push(i);return s},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVertexUniqueEdges=function(t){var e,n,r,o,i,s,a,u;for(e=[],n=[],r=0,o=this.quadEdges.length,r;o>r;r++)i=this.quadEdges[r],s=i.orig(),-1===n.indexOf(s)&&(n.push(s),(t||!this.isFrameVertex(s))&&e.push(i)),a=i.sym(),u=a.orig(),-1===n.indexOf(u)&&(n.push(u),(t||!this.isFrameVertex(u))&&e.push(a));return e},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getPrimaryEdges=function(t){this.visitedKey++;var e,n,r,o,i;for(e=[],n=[],n.push(this.startingEdge),r=[];n.length>0;)o=n.pop(),-1===r.indexOf(o)&&(i=o.getPrimary(),(t||!this.isFrameEdge(i))&&e.push(i),n.push(o.oNext()),n.push(o.sym().oNext()),r.push(o),r.push(o.sym()));return e},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.visitTriangles=function(t,e){this.visitedKey++;var n,r,o,i;for(n=[],n.push(this.startingEdge),r=[];n.length>0;)o=n.pop(),-1===r.indexOf(o)&&(i=this.fetchTriangleToVisit(o,n,e,r),null!==i&&t.visit(i))},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.fetchTriangleToVisit=function(t,e,n,r){var o,i,s,a;o=t,i=0,s=!1;do this.triEdges[i]=o,this.isFrameEdge(o)&&(s=!0),a=o.sym(),-1===r.indexOf(a)&&e.push(a),r.push(o),i++,o=o.lNext();while(o!==t);return s&&!n?null:this.triEdges},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangleEdges=function(t){var e=new jsts.triangulate.quadedge.TriangleEdgesListVisitor;return this.visitTriangles(e,t),e.getTriangleEdges()},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangleVertices=function(t){var e=new TriangleVertexListVisitor;return this.visitTriangles(e,t),e.getTriangleVertices()},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangleCoordinates=function(t){var e=new jsts.triangulate.quadedge.TriangleCoordinatesVisitor;return this.visitTriangles(e,t),e.getTriangles()},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getEdgesByFactory=function(t){var e,n,r,o,i,s;for(e=this.getPrimaryEdges(!1),n=[],r=0,o=e.length,r;o>r;r++)i=e[r],s=[],s[0]=i.orig().getCoordinate(),s[1]=i.dest().getCoordinate(),n[r]=t.createLineString(s);return t.createMultiLineString(n)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangles=function(t){var e,n,r,o,i;for(e=this.getTriangleCoordinates(!1),n=new Array(e.length),o=0,i=e.length,o;i>o;o++)r=e[o],n[o]=t.createPolygon(t.createLinearRing(r,null));return t.createGeometryCollection(n)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVoronoiDiagram=function(t){var e=this.getVoronoiCellPolygons(t);return t.createGeometryCollection(e)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVoronoiCellPolygons=function(t){this.visitTriangles(new jsts.triangulate.quadedge.TriangleCircumcentreVisitor,!0);var e,n,r,o,i;for(e=[],n=this.getVertexUniqueEdges(!1),r=0,o=n.length,r;o>r;r++)i=n[r],e.push(this.getVoronoiCellPolygon(i,t));return e},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVoronoiCellPolygon=function(t,e){var n,r,o,i,s;n=[],startQE=t;do r=t.rot.orig().getCoordinate(),n.push(r),t=t.oPrev();while(t!==startQE);return o=new jsts.geom.CoordinateList([],(!1)),o.add(n,!1),o.closeRing(),o.size()<4&&o.add(o.get(o.size()-1),!0),i=e.createPolygon(e.createLinearRing(o.toArray()),null),s=startQE.orig(),i},jsts.triangulate.quadedge.TriangleCircumcentreVisitor=function(){},jsts.triangulate.quadedge.TriangleCircumcentreVisitor.prototype.visit=function(t){var e,n,r,o,i,s;for(e=t[0].orig().getCoordinate(),n=t[1].orig().getCoordinate(),r=t[2].orig().getCoordinate(),o=jsts.geom.Triangle.circumcentre(e,n,r),i=new jsts.triangulate.quadedge.Vertex(o),s=0;3>s;s++)t[s].rot.setOrig(i)},jsts.triangulate.quadedge.TriangleEdgesListVisitor=function(){this.triList=[]},jsts.triangulate.quadedge.TriangleEdgesListVisitor.prototype.visit=function(t){var e=t.concat();this.triList.push(e)},jsts.triangulate.quadedge.TriangleEdgesListVisitor.prototype.getTriangleEdges=function(){return this.triList},jsts.triangulate.quadedge.TriangleVertexListVisitor=function(){this.triList=[]},jsts.triangulate.quadedge.TriangleVertexListVisitor.prototype.visit=function(){var t=[];t.push(trieEdges[0].orig()),t.push(trieEdges[1].orig()),t.push(trieEdges[2].orig()),this.triList.push(t)},jsts.triangulate.quadedge.TriangleVertexListVisitor.prototype.getTriangleVertices=function(){return this.triList},jsts.triangulate.quadedge.TriangleCoordinatesVisitor=function(){this.coordList=new jsts.geom.CoordinateList([],(!1)),this.triCoords=[]},jsts.triangulate.quadedge.TriangleCoordinatesVisitor.prototype.visit=function(t){this.coordList=new jsts.geom.CoordinateList([],(!1));var e,n,r=0;for(r;3>r;r++)e=t[r].orig(),this.coordList.add(e.getCoordinate());if(this.coordList.size()>0){if(this.coordList.closeRing(),n=this.coordList.toArray(),4!==n.length)return;this.triCoords.push(n)}},jsts.triangulate.quadedge.TriangleCoordinatesVisitor.prototype.getTriangles=function(){return this.triCoords},jsts.operation.relate.EdgeEndBundle=function(){this.edgeEnds=[];var t=arguments[0]instanceof jsts.geomgraph.EdgeEnd?arguments[0]:arguments[1],e=t.getEdge(),n=t.getCoordinate(),r=t.getDirectedCoordinate(),o=new jsts.geomgraph.Label(t.getLabel());jsts.geomgraph.EdgeEnd.call(this,e,n,r,o),this.insert(t)},jsts.operation.relate.EdgeEndBundle.prototype=new jsts.geomgraph.EdgeEnd,jsts.operation.relate.EdgeEndBundle.prototype.edgeEnds=null,jsts.operation.relate.EdgeEndBundle.prototype.getLabel=function(){return this.label},jsts.operation.relate.EdgeEndBundle.prototype.getEdgeEnds=function(){return this.edgeEnds},jsts.operation.relate.EdgeEndBundle.prototype.insert=function(t){this.edgeEnds.push(t)},jsts.operation.relate.EdgeEndBundle.prototype.computeLabel=function(t){for(var e=!1,n=0;n<this.edgeEnds.length;n++){var r=this.edgeEnds[n];r.getLabel().isArea()&&(e=!0)}this.label=e?new jsts.geomgraph.Label(jsts.geom.Location.NONE,jsts.geom.Location.NONE,jsts.geom.Location.NONE):new jsts.geomgraph.Label(jsts.geom.Location.NONE);for(var n=0;2>n;n++)this.computeLabelOn(n,t),e&&this.computeLabelSides(n)},jsts.operation.relate.EdgeEndBundle.prototype.computeLabelOn=function(t,e){for(var n=0,r=!1,o=0;o<this.edgeEnds.length;o++){var i=this.edgeEnds[o],s=i.getLabel().getLocation(t);s==jsts.geom.Location.BOUNDARY&&n++,s==jsts.geom.Location.INTERIOR&&(r=!0)}var s=jsts.geom.Location.NONE;r&&(s=jsts.geom.Location.INTERIOR),n>0&&(s=jsts.geomgraph.GeometryGraph.determineBoundary(e,n)),this.label.setLocation(t,s)},jsts.operation.relate.EdgeEndBundle.prototype.computeLabelSides=function(t){this.computeLabelSide(t,jsts.geomgraph.Position.LEFT),this.computeLabelSide(t,jsts.geomgraph.Position.RIGHT)},jsts.operation.relate.EdgeEndBundle.prototype.computeLabelSide=function(t,e){for(var n=0;n<this.edgeEnds.length;n++){var r=this.edgeEnds[n];if(r.getLabel().isArea()){var o=r.getLabel().getLocation(t,e);if(o===jsts.geom.Location.INTERIOR)return void this.label.setLocation(t,e,jsts.geom.Location.INTERIOR);o===jsts.geom.Location.EXTERIOR&&this.label.setLocation(t,e,jsts.geom.Location.EXTERIOR)}}},jsts.operation.relate.EdgeEndBundle.prototype.updateIM=function(t){jsts.geomgraph.Edge.updateIM(this.label,t)},jsts.index.kdtree.KdTree=function(t){var e=0;void 0!==t&&(e=t),this.root=null,this.last=null,this.numberOfNodes=0,this.tolerance=e},jsts.index.kdtree.KdTree.prototype.insert=function(){return 1===arguments.length?this.insertCoordinate.apply(this,arguments[0]):this.insertWithData.apply(this,arguments[0],arguments[1])},jsts.index.kdtree.KdTree.prototype.insertCoordinate=function(t){return this.insertWithData(t,null)},jsts.index.kdtree.KdTree.prototype.insertWithData=function(t,e){if(null===this.root)return this.root=new jsts.index.kdtree.KdNode(t,e),this.root;for(var n=this.root,r=this.root,o=!0,i=!0;n!==last;){if(i=o?t.x<n.getX():t.y<n.getY(),r=n,n=i?n.getLeft():n.getRight(),null!==n){var s=t.distance(n.getCoordinate())<=this.tolerance;if(s)return n.increment(),n}o=!o}this.numberOfNodes=numberOfNodes+1;var a=new jsts.index.kdtree.KdNode(t,e);return a.setLeft(this.last),a.setRight(this.last),i?r.setLeft(a):r.setRight(a),a},jsts.index.kdtree.KdTree.prototype.queryNode=function(t,e,n,r,o){if(t!==e){var i,s,a;r?(i=n.getMinX(),s=n.getMaxX(),a=t.getX()):(i=n.getMinY(),s=n.getMaxY(),a=t.getY());var u=a>i,l=s>=a;u&&this.queryNode(t.getLeft(),e,n,!r,o),n.contains(t.getCoordinate())&&o.add(t),l&&this.queryNode(t.getRight(),e,n,!r,o)}},jsts.index.kdtree.KdTree.prototype.query=function(){return 1===arguments.length?this.queryByEnvelope.apply(this,arguments[0]):this.queryWithArray.apply(this,arguments[0],arguments[1])},jsts.index.kdtree.KdTree.prototype.queryByEnvelope=function(t){var e=[];return this.queryNode(this.root,this.last,t,!0,e),e},jsts.index.kdtree.KdTree.prototype.queryWithArray=function(t,e){this.queryNode(this.root,this.last,t,!0,e)},jsts.geom.Triangle=function(t,e,n){this.p0=t,this.p1=e,this.p2=n},jsts.geom.Triangle.isAcute=function(t,e,n){return!!(jsts.algorithm.Angle.isAcute(t,e,n)&&jsts.algorithm.Angle.isAcute(e,n,t)&&jsts.algorithm.Angle.isAcute(n,t,e))},jsts.geom.Triangle.perpendicularBisector=function(t,e){var n,r,o,i;return n=e.x-t.x,r=e.y-t.y,o=new jsts.algorithm.HCoordinate(t.x+n/2,t.y+r/2,1),i=new jsts.algorithm.HCoordinate(t.x-r+n/2,t.y+n+r/2,1),new jsts.algorithm.HCoordinate(o,i)},jsts.geom.Triangle.circumcentre=function(t,e,n){var r,o,i,s,a,u,l,c,p,h,d;return r=n.x,o=n.y,i=t.x-r,s=t.y-o,a=e.x-r,u=e.y-o,l=2*jsts.geom.Triangle.det(i,s,a,u),c=jsts.geom.Triangle.det(s,i*i+s*s,u,a*a+u*u),p=jsts.geom.Triangle.det(i,i*i+s*s,a,a*a+u*u),h=r-c/l,d=o+p/l,new jsts.geom.Coordinate(h,d)},jsts.geom.Triangle.det=function(t,e,n,r){return t*r-e*n},jsts.geom.Triangle.inCentre=function(t,e,n){var r,o,i,s,a,u;return r=e.distance(n),o=t.distance(n),i=t.distance(e),s=r+o+i,a=(r*t.x+o*e.x+i*n.x)/s,u=(r*t.y+o*e.y+i*n.y)/s,new jsts.geom.Coordinate(a,u)},jsts.geom.Triangle.centroid=function(t,e,n){var r,o;return r=(t.x+e.x+n.x)/3,o=(t.y+e.y+n.y)/3,new jsts.geom.Coordinate(r,o)},jsts.geom.Triangle.longestSideLength=function(t,e,n){var r,o,i,s;return r=t.distance(e),o=e.distance(n),i=n.distance(t),s=r,o>s&&(s=o),i>s&&(s=i),s},jsts.geom.Triangle.angleBisector=function(t,e,n){var r,o,i,s,a,u;return r=e.distance(t),o=e.distance(n),i=r/(r+o),s=n.x-t.x,a=n.y-t.y,u=new jsts.geom.Coordinate(t.x+i*s,t.y+i*a)},jsts.geom.Triangle.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},jsts.geom.Triangle.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},jsts.geom.Triangle.prototype.inCentre=function(){return jsts.geom.Triangle.inCentre(this.p0,this.p1,this.p2)},jsts.noding.OrientedCoordinateArray=function(t){this.pts=t,this._orientation=jsts.noding.OrientedCoordinateArray.orientation(t)},jsts.noding.OrientedCoordinateArray.prototype.pts=null,jsts.noding.OrientedCoordinateArray.prototype._orientation=void 0,jsts.noding.OrientedCoordinateArray.orientation=function(t){return 1===jsts.geom.CoordinateArrays.increasingDirection(t)},jsts.noding.OrientedCoordinateArray.prototype.compareTo=function(t){var e=t,n=jsts.noding.OrientedCoordinateArray.compareOriented(this.pts,this._orientation,e.pts,e._orientation);return n},jsts.noding.OrientedCoordinateArray.compareOriented=function(t,e,n,r){for(var o=e?1:-1,i=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,u=e?0:t.length-1,l=r?0:n.length-1;;){var c=t[u].compareTo(n[l]);if(0!==c)return c;u+=o,l+=i;var p=u===s,h=l===a;if(p&&!h)return-1;if(!p&&h)return 1;if(p&&h)return 0}},jsts.algorithm.CentralEndpointIntersector=function(t,e,n,r){this.pts=[t,e,n,r],this.compute()},jsts.algorithm.CentralEndpointIntersector.getIntersection=function(t,e,n,r){var o=new jsts.algorithm.CentralEndpointIntersector(t,e,n,r);return o.getIntersection()},jsts.algorithm.CentralEndpointIntersector.prototype.pts=null,jsts.algorithm.CentralEndpointIntersector.prototype.intPt=null,jsts.algorithm.CentralEndpointIntersector.prototype.compute=function(){var t=jsts.algorithm.CentralEndpointIntersector.average(this.pts);this.intPt=this.findNearestPoint(t,this.pts)},jsts.algorithm.CentralEndpointIntersector.prototype.getIntersection=function(){return this.intPt},jsts.algorithm.CentralEndpointIntersector.average=function(t){var e,n=new jsts.geom.Coordinate,r=t.length;for(e=0;r>e;e++)n.x+=t[e].x,n.y+=t[e].y;return r>0&&(n.x/=r,n.y/=r),n},jsts.algorithm.CentralEndpointIntersector.prototype.findNearestPoint=function(t,e){var n,r,o=Number.MAX_VALUE,i=null;for(n=0;n<e.length;n++)r=t.distance(e[n]),o>r&&(o=r,i=e[n]);return i},jsts.operation.buffer.BufferOp=function(t,e){this.argGeom=t,this.bufParams=e?e:new jsts.operation.buffer.BufferParameters},jsts.operation.buffer.BufferOp.MAX_PRECISION_DIGITS=12,jsts.operation.buffer.BufferOp.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),o=Math.max(r.getHeight(),r.getWidth()),i=e>0?e:0,s=o+2*i,a=Math.log(s)/Math.log(10)+1,u=a-n,l=Math.pow(10,-u);return l},jsts.operation.buffer.BufferOp.bufferOp=function(t,e){if(arguments.length>2)return jsts.operation.buffer.BufferOp.bufferOp2.apply(this,arguments);var n=new jsts.operation.buffer.BufferOp(t),r=n.getResultGeometry(e);return r},jsts.operation.buffer.BufferOp.bufferOp2=function(t,e,n){if(arguments.length>3)return jsts.operation.buffer.BufferOp.bufferOp3.apply(this,arguments);var r=new jsts.operation.buffer.BufferOp(t,n),o=r.getResultGeometry(e);return o},jsts.operation.buffer.BufferOp.bufferOp3=function(t,e,n){if(arguments.length>4)return jsts.operation.buffer.BufferOp.bufferOp4.apply(this,arguments);var r=new jsts.operation.buffer.BufferOp(t);r.setQuadrantSegments(n);var o=r.getResultGeometry(e);return o},jsts.operation.buffer.BufferOp.bufferOp4=function(t,e,n,r){var o=new jsts.operation.buffer.BufferOp(t);o.setQuadrantSegments(n),o.setEndCapStyle(r);var i=o.getResultGeometry(e);return i},jsts.operation.buffer.BufferOp.prototype.argGeom=null,jsts.operation.buffer.BufferOp.prototype.distance=null,jsts.operation.buffer.BufferOp.prototype.bufParams=null,jsts.operation.buffer.BufferOp.prototype.resultGeometry=null,jsts.operation.buffer.BufferOp.prototype.setEndCapStyle=function(t){this.bufParams.setEndCapStyle(t)},jsts.operation.buffer.BufferOp.prototype.setQuadrantSegments=function(t){this.bufParams.setQuadrantSegments(t)},jsts.operation.buffer.BufferOp.prototype.getResultGeometry=function(t){return this.distance=t,this.computeGeometry(),this.resultGeometry},jsts.operation.buffer.BufferOp.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null===this.resultGeometry){var t=this.argGeom.getPrecisionModel();t.getType()===jsts.geom.PrecisionModel.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()}},jsts.operation.buffer.BufferOp.prototype.bufferReducedPrecision=function(){var t,e=null;for(t=jsts.operation.buffer.BufferOp.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision2(t)}catch(n){e=n}if(null!==this.resultGeometry)return}throw e},jsts.operation.buffer.BufferOp.prototype.bufferOriginalPrecision=function(){try{var t=new jsts.operation.buffer.BufferBuilder(this.bufParams);this.resultGeometry=t.buffer(this.argGeom,this.distance)}catch(e){}},jsts.operation.buffer.BufferOp.prototype.bufferReducedPrecision2=function(t){var e=jsts.operation.buffer.BufferOp.precisionScaleFactor(this.argGeom,this.distance,t),n=new jsts.geom.PrecisionModel(e);this.bufferFixedPrecision(n)},jsts.operation.buffer.BufferOp.prototype.bufferFixedPrecision=function(t){var e=new jsts.noding.ScaledNoder(new jsts.noding.snapround.MCIndexSnapRounder(new jsts.geom.PrecisionModel(1)),t.getScale()),n=new jsts.operation.buffer.BufferBuilder(this.bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this.resultGeometry=n.buffer(this.argGeom,this.distance)},function(){var t=jsts.geom.Location,e=jsts.geomgraph.Position,n=jsts.util.Assert;jsts.geomgraph.GeometryGraph=function(t,e,n){jsts.geomgraph.PlanarGraph.call(this),this.lineEdgeMap=new javascript.util.HashMap,this.ptLocator=new jsts.algorithm.PointLocator,this.argIndex=t,this.parentGeom=e,this.boundaryNodeRule=n||jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE,null!==e&&this.add(e)},jsts.geomgraph.GeometryGraph.prototype=new jsts.geomgraph.PlanarGraph,jsts.geomgraph.GeometryGraph.constructor=jsts.geomgraph.GeometryGraph,jsts.geomgraph.GeometryGraph.prototype.createEdgeSetIntersector=function(){return new jsts.geomgraph.index.SimpleMCSweepLineIntersector},jsts.geomgraph.GeometryGraph.determineBoundary=function(e,n){return e.isInBoundary(n)?t.BOUNDARY:t.INTERIOR},jsts.geomgraph.GeometryGraph.prototype.parentGeom=null,jsts.geomgraph.GeometryGraph.prototype.lineEdgeMap=null,jsts.geomgraph.GeometryGraph.prototype.boundaryNodeRule=null,jsts.geomgraph.GeometryGraph.prototype.useBoundaryDeterminationRule=!0,jsts.geomgraph.GeometryGraph.prototype.argIndex=null,jsts.geomgraph.GeometryGraph.prototype.boundaryNodes=null,jsts.geomgraph.GeometryGraph.prototype.hasTooFewPoints=!1,jsts.geomgraph.GeometryGraph.prototype.invalidPoint=null,jsts.geomgraph.GeometryGraph.prototype.areaPtLocator=null,jsts.geomgraph.GeometryGraph.prototype.ptLocator=null,jsts.geomgraph.GeometryGraph.prototype.getGeometry=function(){return this.parentGeom},jsts.geomgraph.GeometryGraph.prototype.getBoundaryNodes=function(){return null===this.boundaryNodes&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes},jsts.geomgraph.GeometryGraph.prototype.getBoundaryNodeRule=function(){return this.boundaryNodeRule},jsts.geomgraph.GeometryGraph.prototype.findEdge=function(t){return this.lineEdgeMap.get(t)},jsts.geomgraph.GeometryGraph.prototype.computeSplitEdges=function(t){for(var e=this.edges.iterator();e.hasNext();){var n=e.next();n.eiList.addSplitEdges(t)}},jsts.geomgraph.GeometryGraph.prototype.add=function(t){if(!t.isEmpty())if(t instanceof jsts.geom.MultiPolygon&&(this.useBoundaryDeterminationRule=!1),t instanceof jsts.geom.Polygon)this.addPolygon(t);else if(t instanceof jsts.geom.LineString)this.addLineString(t);else if(t instanceof jsts.geom.Point)this.addPoint(t);else if(t instanceof jsts.geom.MultiPoint)this.addCollection(t);else if(t instanceof jsts.geom.MultiLineString)this.addCollection(t);else if(t instanceof jsts.geom.MultiPolygon)this.addCollection(t);else{if(!(t instanceof jsts.geom.GeometryCollection))throw new jsts.error.IllegalArgumentError("Geometry type not supported.");this.addCollection(t)}},jsts.geomgraph.GeometryGraph.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},jsts.geomgraph.GeometryGraph.prototype.addEdge=function(e){this.insertEdge(e);var n=e.getCoordinates();this.insertPoint(this.argIndex,n[0],t.BOUNDARY),this.insertPoint(this.argIndex,n[n.length-1],t.BOUNDARY)},jsts.geomgraph.GeometryGraph.prototype.addPoint=function(e){var n=e.getCoordinate();this.insertPoint(this.argIndex,n,t.INTERIOR)},jsts.geomgraph.GeometryGraph.prototype.addLineString=function(e){var r=jsts.geom.CoordinateArrays.removeRepeatedPoints(e.getCoordinates());if(r.length<2)return this.hasTooFewPoints=!0,void(this.invalidPoint=coords[0]);var o=new jsts.geomgraph.Edge(r,new jsts.geomgraph.Label(this.argIndex,t.INTERIOR));this.lineEdgeMap.put(e,o),this.insertEdge(o),n.isTrue(r.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,r[0]),this.insertBoundaryPoint(this.argIndex,r[r.length-1])},jsts.geomgraph.GeometryGraph.prototype.addPolygonRing=function(e,n,r){if(!e.isEmpty()){var o=jsts.geom.CoordinateArrays.removeRepeatedPoints(e.getCoordinates());if(o.length<4)return this.hasTooFewPoints=!0,void(this.invalidPoint=o[0]);var i=n,s=r;jsts.algorithm.CGAlgorithms.isCCW(o)&&(i=r,s=n);var a=new jsts.geomgraph.Edge(o,new jsts.geomgraph.Label(this.argIndex,t.BOUNDARY,i,s));this.lineEdgeMap.put(e,a),this.insertEdge(a),this.insertPoint(this.argIndex,o[0],t.BOUNDARY)}},jsts.geomgraph.GeometryGraph.prototype.addPolygon=function(e){this.addPolygonRing(e.getExteriorRing(),t.EXTERIOR,t.INTERIOR);for(var n=0;n<e.getNumInteriorRing();n++){var r=e.getInteriorRingN(n);this.addPolygonRing(r,t.INTERIOR,t.EXTERIOR)}},jsts.geomgraph.GeometryGraph.prototype.computeEdgeIntersections=function(t,e,n){var r=new jsts.geomgraph.index.SegmentIntersector(e,n,(!0));r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes());var o=this.createEdgeSetIntersector();return o.computeIntersections(this.edges,t.edges,r),r},jsts.geomgraph.GeometryGraph.prototype.computeSelfNodes=function(t,e){var n=new jsts.geomgraph.index.SegmentIntersector(t,(!0),(!1)),r=this.createEdgeSetIntersector();return!e&&(this.parentGeom instanceof jsts.geom.LinearRing||this.parentGeom instanceof jsts.geom.Polygon||this.parentGeom instanceof jsts.geom.MultiPolygon)?r.computeIntersections(this.edges,n,!1):r.computeIntersections(this.edges,n,!0),this.addSelfIntersectionNodes(this.argIndex),n},jsts.geomgraph.GeometryGraph.prototype.insertPoint=function(t,e,n){var r=this.nodes.addNode(e),o=r.getLabel();null==o?r.label=new jsts.geomgraph.Label(t,n):o.setLocation(t,n)},jsts.geomgraph.GeometryGraph.prototype.insertBoundaryPoint=function(n,r){var o=this.nodes.addNode(r),i=o.getLabel(),s=1,a=t.NONE;null!==i&&(a=i.getLocation(n,e.ON)),a===t.BOUNDARY&&s++;var u=jsts.geomgraph.GeometryGraph.determineBoundary(this.boundaryNodeRule,s);i.setLocation(n,u)},jsts.geomgraph.GeometryGraph.prototype.addSelfIntersectionNodes=function(t){for(var e=this.edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),o=n.eiList.iterator();o.hasNext();){var i=o.next();this.addSelfIntersectionNode(t,i.coord,r)}},jsts.geomgraph.GeometryGraph.prototype.addSelfIntersectionNode=function(e,n,r){this.isBoundaryNode(e,n)||(r===t.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(e,n):this.insertPoint(e,n,r))},jsts.geomgraph.GeometryGraph.prototype.getInvalidPoint=function(){return this.invalidPoint}}(),jsts.operation.buffer.OffsetSegmentString=function(){this.ptList=[]},jsts.operation.buffer.OffsetSegmentString.prototype.ptList=null,jsts.operation.buffer.OffsetSegmentString.prototype.precisionModel=null,jsts.operation.buffer.OffsetSegmentString.prototype.minimimVertexDistance=0,jsts.operation.buffer.OffsetSegmentString.prototype.setPrecisionModel=function(t){this.precisionModel=t},jsts.operation.buffer.OffsetSegmentString.prototype.setMinimumVertexDistance=function(t){this.minimimVertexDistance=t},jsts.operation.buffer.OffsetSegmentString.prototype.addPt=function(t){var e=new jsts.geom.Coordinate(t);this.precisionModel.makePrecise(e),this.isRedundant(e)||this.ptList.push(e)},jsts.operation.buffer.OffsetSegmentString.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var n=t.length-1;n>=0;n--)this.addPt(t[n])},jsts.operation.buffer.OffsetSegmentString.prototype.isRedundant=function(t){if(this.ptList.length<1)return!1;var e=this.ptList[this.ptList.length-1],n=t.distance(e);return n<this.minimimVertexDistance},jsts.operation.buffer.OffsetSegmentString.prototype.closeRing=function(){if(!(this.ptList.length<1)){var t=new jsts.geom.Coordinate(this.ptList[0]),e=this.ptList[this.ptList.length-1],n=null;this.ptList.length>=2&&(n=this.ptList[this.ptList.length-2]),t.equals(e)||this.ptList.push(t)}},jsts.operation.buffer.OffsetSegmentString.prototype.reverse=function(){},jsts.operation.buffer.OffsetSegmentString.prototype.getCoordinates=function(){return this.ptList},jsts.algorithm.distance.PointPairDistance=function(){this.pt=[new jsts.geom.Coordinate,new jsts.geom.Coordinate]},jsts.algorithm.distance.PointPairDistance.prototype.pt=null,jsts.algorithm.distance.PointPairDistance.prototype.distance=NaN,jsts.algorithm.distance.PointPairDistance.prototype.isNull=!0,jsts.algorithm.distance.PointPairDistance.prototype.initialize=function(t,e,n){
return void 0===t?void(this.isNull=!0):(this.pt[0].setCoordinate(t),this.pt[1].setCoordinate(e),this.distance=void 0!==n?n:t.distance(e),void(this.isNull=!1))},jsts.algorithm.distance.PointPairDistance.prototype.getDistance=function(){return this.distance},jsts.algorithm.distance.PointPairDistance.prototype.getCoordinates=function(){return this.pt},jsts.algorithm.distance.PointPairDistance.prototype.getCoordinate=function(t){return this.pt[t]},jsts.algorithm.distance.PointPairDistance.prototype.setMaximum=function(t){return 2===arguments.length?void this.setMaximum2.apply(this,arguments):void this.setMaximum(t.pt[0],t.pt[1])},jsts.algorithm.distance.PointPairDistance.prototype.setMaximum2=function(t,e){if(this.isNull)return void this.initialize(t,e);var n=t.distance(e);n>this.distance&&this.initialize(t,e,n)},jsts.algorithm.distance.PointPairDistance.prototype.setMinimum=function(t){return 2===arguments.length?void this.setMinimum2.apply(this,arguments):void this.setMinimum(t.pt[0],t.pt[1])},jsts.algorithm.distance.PointPairDistance.prototype.setMinimum2=function(t,e){if(this.isNull)return void this.initialize(t,e);var n=t.distance(e);n<this.distance&&this.initialize(t,e,n)},function(){var t=jsts.algorithm.distance.PointPairDistance,e=jsts.algorithm.distance.DistanceToPoint,n=function(n){this.maxPtDist=new t,this.minPtDist=new t,this.euclideanDist=new e,this.geom=n};n.prototype=new jsts.geom.CoordinateFilter,n.prototype.maxPtDist=new t,n.prototype.minPtDist=new t,n.prototype.euclideanDist=new e,n.prototype.geom,n.prototype.filter=function(t){this.minPtDist.initialize(),e.computeDistance(this.geom,t,this.minPtDist),this.maxPtDist.setMaximum(this.minPtDist)},n.prototype.getMaxPointDistance=function(){return this.maxPtDist};var r=function(e,n){this.maxPtDist=new t,this.minPtDist=new t,this.geom=e,this.numSubSegs=Math.round(1/n)};r.prototype=new jsts.geom.CoordinateSequenceFilter,r.prototype.maxPtDist=new t,r.prototype.minPtDist=new t,r.prototype.geom,r.prototype.numSubSegs=0,r.prototype.filter=function(t,n){if(0!=n)for(var r=t[n-1],o=t[n],i=(o.x-r.x)/this.numSubSegs,s=(o.y-r.y)/this.numSubSegs,a=0;a<this.numSubSegs;a++){var u=r.x+a*i,l=r.y+a*s,c=new jsts.geom.Coordinate(u,l);this.minPtDist.initialize(),e.computeDistance(this.geom,c,this.minPtDist),this.maxPtDist.setMaximum(this.minPtDist)}},r.prototype.isGeometryChanged=function(){return!1},r.prototype.isDone=function(){return!1},r.prototype.getMaxPointDistance=function(){return this.maxPtDist},jsts.algorithm.distance.DiscreteHausdorffDistance=function(t,e){this.g0=t,this.g1=e,this.ptDist=new jsts.algorithm.distance.PointPairDistance},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.g0=null,jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.g1=null,jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.ptDist=null,jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.densifyFrac=0,jsts.algorithm.distance.DiscreteHausdorffDistance.distance=function(t,e,n){var r=new jsts.algorithm.distance.DiscreteHausdorffDistance(t,e);return void 0!==n&&r.setDensifyFraction(n),r.distance()},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.setDensifyFraction=function(t){if(t>1||0>=t)throw new jsts.error.IllegalArgumentError("Fraction is not in range (0.0 - 1.0]");this.densifyFrac=t},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.distance=function(){return this.compute(this.g0,this.g1),ptDist.getDistance()},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.orientedDistance=function(){return this.computeOrientedDistance(this.g0,this.g1,this.ptDist),this.ptDist.getDistance()},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.getCoordinates=function(){return ptDist.getCoordinates()},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this.ptDist),this.computeOrientedDistance(e,t,this.ptDist)},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.computeOrientedDistance=function(t,e,o){var i=new n(e);if(t.apply(i),o.setMaximum(i.getMaxPointDistance()),this.densifyFrac>0){var s=new r(e,this.densifyFrac);t.apply(s),o.setMaximum(s.getMaxPointDistance())}}}(),jsts.algorithm.MinimumBoundingCircle=function(t){this.input=null,this.extremalPts=null,this.centre=null,this.radius=0,this.input=t},jsts.algorithm.MinimumBoundingCircle.prototype.getCircle=function(){if(this.compute(),null===this.centre)return this.input.getFactory().createPolygon(null,null);var t=this.input.getFactory().createPoint(this.centre);return 0===this.radius?t:t.buffer(this.radius)},jsts.algorithm.MinimumBoundingCircle.prototype.getExtremalPoints=function(){return this.compute(),this.extremalPts},jsts.algorithm.MinimumBoundingCircle.prototype.getCentre=function(){return this.compute(),this.centre},jsts.algorithm.MinimumBoundingCircle.prototype.getRadius=function(){return this.compute(),this.radius},jsts.algorithm.MinimumBoundingCircle.prototype.computeCentre=function(){switch(this.extremalPts.length){case 0:this.centre=null;break;case 1:this.centre=this.extremalPts[0];break;case 2:this.centre=new jsts.geom.Coordinate((this.extremalPts[0].x+this.extremalPts[1].x)/2,(this.extremalPts[0].y+this.extremalPts[1].y)/2);break;case 3:this.centre=jsts.geom.Triangle.circumcentre(this.extremalPts[0],this.extremalPts[1],this.extremalPts[2])}},jsts.algorithm.MinimumBoundingCircle.prototype.compute=function(){null===this.extremalPts&&(this.computeCirclePoints(),this.computeCentre(),null!==this.centre&&(this.radius=this.centre.distance(this.extremalPts[0])))},jsts.algorithm.MinimumBoundingCircle.prototype.computeCirclePoints=function(){if(this.input.isEmpty())return void(this.extremalPts=[]);var t;if(1===this.input.getNumPoints())return t=this.input.getCoordinates(),void(this.extremalPts=[new jsts.geom.Coordinate(t[0])]);var e=this.input.convexHull(),n=e.getCoordinates();if(t=n,n[0].equals2D(n[n.length-1])&&(t=[],jsts.geom.CoordinateArrays.copyDeep(n,0,t,0,n.length-1)),t.length<=2)return void(this.extremalPts=jsts.geom.CoordinateArrays.copyDeep(t));for(var r=jsts.algorithm.MinimumBoundingCircle.lowestPoint(t),o=jsts.algorithm.MinimumBoundingCircle.pointWitMinAngleWithX(t,r),i=0;i<t.length;i++){var s=jsts.algorithm.MinimumBoundingCircle.pointWithMinAngleWithSegment(t,r,o);if(jsts.algorithm.Angle.isObtuse(r,s,o))return void(this.extremalPts=[new jsts.geom.Coordinate(r),new jsts.geom.Coordinate(o)]);if(jsts.algorithm.Angle.isObtuse(s,r,o))r=s;else{if(!jsts.algorithm.Angle.isObtuse(s,o,r))return void(this.extremalPts=[new jsts.geom.Coordinate(r),new jsts.geom.Coordinate(o),new jsts.geom.Coordinate(s)]);o=s}}throw new Error("Logic failure in Minimum Bounding Circle algorithm!")},jsts.algorithm.MinimumBoundingCircle.lowestPoint=function(t){for(var e=t[0],n=1;n<t.length;n++)t[n].y<e.y&&(e=t[n]);return e},jsts.algorithm.MinimumBoundingCircle.pointWitMinAngleWithX=function(t,e){for(var n=Number.MAX_VALUE,r=null,o=0;o<t.length;o++){var i=t[o];if(i!==e){var s=i.x-e.x,a=i.y-e.y;0>a&&(a=-a);var u=Math.sqrt(s*s+a*a),l=a/u;n>l&&(n=l,r=i)}}return r},jsts.algorithm.MinimumBoundingCircle.pointWithMinAngleWithSegment=function(t,e,n){for(var r=Number.MAX_VALUE,o=null,i=0;i<t.length;i++){var s=t[i];if(s!==e&&s!==n){var a=jsts.algorithm.Angle.angleBetween(e,s,n);r>a&&(r=a,o=s)}}return o},jsts.noding.ScaledNoder=function(t,e,n,r){this.offsetX=n?n:0,this.offsetY=r?r:0,this.noder=t,this.scaleFactor=e,this.isScaled=!this.isIntegerPrecision()},jsts.noding.ScaledNoder.prototype=new jsts.noding.Noder,jsts.noding.ScaledNoder.constructor=jsts.noding.ScaledNoder,jsts.noding.ScaledNoder.prototype.noder=null,jsts.noding.ScaledNoder.prototype.scaleFactor=void 0,jsts.noding.ScaledNoder.prototype.offsetX=void 0,jsts.noding.ScaledNoder.prototype.offsetY=void 0,jsts.noding.ScaledNoder.prototype.isScaled=!1,jsts.noding.ScaledNoder.prototype.isIntegerPrecision=function(){return 1===this.scaleFactor},jsts.noding.ScaledNoder.prototype.getNodedSubstrings=function(){var t=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(t),t},jsts.noding.ScaledNoder.prototype.computeNodes=function(t){var e=t;this.isScaled&&(e=this.scale(t)),this.noder.computeNodes(e)},jsts.noding.ScaledNoder.prototype.scale=function(t){if(t instanceof Array)return this.scale2(t);for(var e=new javascript.util.ArrayList,n=t.iterator();n.hasNext();){var r=n.next();e.add(new jsts.noding.NodedSegmentString(this.scale(r.getCoordinates()),r.getData()))}return e},jsts.noding.ScaledNoder.prototype.scale2=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=new jsts.geom.Coordinate(Math.round((t[n].x-this.offsetX)*this.scaleFactor),Math.round((t[n].y-this.offsetY)*this.scaleFactor));var r=jsts.geom.CoordinateArrays.removeRepeatedPoints(e);return r},jsts.noding.ScaledNoder.prototype.rescale=function(t){if(t instanceof Array)return void this.rescale2(t);for(var e=t.iterator();e.hasNext();){var n=e.next();this.rescale(n.getCoordinates())}},jsts.noding.ScaledNoder.prototype.rescale2=function(t){for(var e=0;e<t.length;e++)t[e].x=t[e].x/this.scaleFactor+this.offsetX,t[e].y=t[e].y/this.scaleFactor+this.offsetY},function(){javascript.util.ArrayList,jsts.geomgraph.index.SegmentIntersector=function(t,e,n){this.li=t,this.includeProper=e,this.recordIsolated=n},jsts.geomgraph.index.SegmentIntersector.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},jsts.geomgraph.index.SegmentIntersector.prototype._hasIntersection=!1,jsts.geomgraph.index.SegmentIntersector.prototype.hasProper=!1,jsts.geomgraph.index.SegmentIntersector.prototype.hasProperInterior=!1,jsts.geomgraph.index.SegmentIntersector.prototype.properIntersectionPoint=null,jsts.geomgraph.index.SegmentIntersector.prototype.li=null,jsts.geomgraph.index.SegmentIntersector.prototype.includeProper=null,jsts.geomgraph.index.SegmentIntersector.prototype.recordIsolated=null,jsts.geomgraph.index.SegmentIntersector.prototype.isSelfIntersection=null,jsts.geomgraph.index.SegmentIntersector.prototype.numIntersections=0,jsts.geomgraph.index.SegmentIntersector.prototype.numTests=0,jsts.geomgraph.index.SegmentIntersector.prototype.bdyNodes=null,jsts.geomgraph.index.SegmentIntersector.prototype.setBoundaryNodes=function(t,e){this.bdyNodes=[],this.bdyNodes[0]=t,this.bdyNodes[1]=e},jsts.geomgraph.index.SegmentIntersector.prototype.getProperIntersectionPoint=function(){return this.properIntersectionPoint},jsts.geomgraph.index.SegmentIntersector.prototype.hasIntersection=function(){return this._hasIntersection},jsts.geomgraph.index.SegmentIntersector.prototype.hasProperIntersection=function(){return this.hasProper},jsts.geomgraph.index.SegmentIntersector.prototype.hasProperInteriorIntersection=function(){return this.hasProperInterior},jsts.geomgraph.index.SegmentIntersector.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this.li.getIntersectionNum()){if(jsts.geomgraph.index.SegmentIntersector.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var o=t.getNumPoints()-1;if(0===e&&r===o||0===r&&e===o)return!0}}return!1},jsts.geomgraph.index.SegmentIntersector.prototype.addIntersections=function(t,e,n,r){if(t!==n||e!==r){this.numTests++;var o=t.getCoordinates()[e],i=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this.li.computeIntersection(o,i,s,a),this.li.hasIntersection()&&(this.recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,(this.includeProper||!this.li.isProper())&&(t.addIntersections(this.li,e,0),n.addIntersections(this.li,r,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).clone(),this.hasProper=!0,this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))}},jsts.geomgraph.index.SegmentIntersector.prototype.isBoundaryPoint=function(t,e){if(null===e)return!1;if(e instanceof Array)return!!this.isBoundaryPoint(t,e[0])||!!this.isBoundaryPoint(t,e[1]);for(var n=e.iterator();n.hasNext();){var r=n.next(),o=r.getCoordinate();if(t.isIntersection(o))return!0}return!1}}()},{}],19:[function(){(function(t){(function(){function e(t,e){var n=t.split("."),r=T;n[0]in r||!r.execScript||r.execScript("var "+n[0]);for(var o;n.length&&(o=n.shift());)n.length||void 0===e?r=r[o]?r[o]:r[o]={}:r[o]=e}function n(t,e){function n(){}n.prototype=e.prototype,t.q=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.p=function(t,n){var r=Array.prototype.slice.call(arguments,2);return e.prototype[n].apply(t,r)}}function r(t){this.message=t||""}function o(t){this.message=t||""}function i(){}function s(){}function a(){}function u(){}function l(t){this.message=t||""}function c(t){this.message=t||""}function p(t){this.a=[],t instanceof s&&this.e(t)}function h(t){this.j=t}function d(){}function f(){this.i={}}function g(){}function m(t){this.a=[],t instanceof s&&this.e(t)}function y(t){this.k=t}function v(){}function x(){}function b(){this.a=[]}function j(t){return null==t?null:t.parent}function _(t,e){null!==t&&(t.color=e)}function E(t){return null==t?null:t.left}function w(t){return null==t?null:t.right}function S(){this.d=null,this.n=0}function I(t,e){if(null!=e){var n=e.right;e.right=n.left,null!=n.left&&(n.left.parent=e),n.parent=e.parent,null==e.parent?t.d=n:e.parent.left==e?e.parent.left=n:e.parent.right=n,n.left=e,e.parent=n}}function M(t,e){if(null!=e){var n=e.left;e.left=n.right,null!=n.right&&(n.right.parent=e),n.parent=e.parent,null==e.parent?t.d=n:e.parent.right==e?e.parent.right=n:e.parent.left=n,n.right=e,e.parent=n}}function C(t){if(null===t)return null;if(null!==t.right)for(var e=t.right;null!==e.left;)e=e.left;else for(e=t.parent;null!==e&&t===e.right;)t=e,e=e.parent;return e}function L(t){this.a=[],t instanceof s&&this.e(t)}function P(t){this.l=t}var T=this;n(r,Error),e("javascript.util.EmptyStackException",r),r.prototype.name="EmptyStackException",n(o,Error),e("javascript.util.IndexOutOfBoundsException",o),o.prototype.name="IndexOutOfBoundsException",e("javascript.util.Iterator",i),i.prototype.hasNext=i.prototype.c,i.prototype.next=i.prototype.next,i.prototype.remove=i.prototype.remove,e("javascript.util.Collection",s),n(a,s),e("javascript.util.List",a),e("javascript.util.Map",u),n(l,Error),e("javascript.util.NoSuchElementException",l),l.prototype.name="NoSuchElementException",n(c,Error),c.prototype.name="OperationNotSupported",n(p,a),e("javascript.util.ArrayList",p),p.prototype.a=null,p.prototype.add=function(t){return this.a.push(t),!0},p.prototype.add=p.prototype.add,p.prototype.e=function(t){for(t=t.f();t.c();)this.add(t.next());return!0},p.prototype.addAll=p.prototype.e,p.prototype.set=function(t,e){var n=this.a[t];return this.a[t]=e,n},p.prototype.set=p.prototype.set,p.prototype.f=function(){return new h(this)},p.prototype.iterator=p.prototype.f,p.prototype.get=function(t){if(0>t||t>=this.size())throw new o;return this.a[t]},p.prototype.get=p.prototype.get,p.prototype.g=function(){return 0===this.a.length},p.prototype.isEmpty=p.prototype.g,p.prototype.size=function(){return this.a.length},p.prototype.size=p.prototype.size,p.prototype.h=function(){for(var t=[],e=0,n=this.a.length;n>e;e++)t.push(this.a[e]);return t},p.prototype.toArray=p.prototype.h,p.prototype.remove=function(t){for(var e=!1,n=0,r=this.a.length;r>n;n++)if(this.a[n]===t){this.a.splice(n,1),e=!0;break}return e},p.prototype.remove=p.prototype.remove,e("$jscomp.scope.Iterator_",h),h.prototype.j=null,h.prototype.b=0,h.prototype.next=function(){if(this.b===this.j.size())throw new l;return this.j.get(this.b++)},h.prototype.next=h.prototype.next,h.prototype.c=function(){return this.b<this.j.size()},h.prototype.hasNext=h.prototype.c,h.prototype.remove=function(){throw new c},h.prototype.remove=h.prototype.remove,e("javascript.util.Arrays",d),d.sort=function(){var t,e,n,r=arguments[0];if(1===arguments.length)r.sort();else if(2===arguments.length)e=arguments[1],n=function(t,n){return e.compare(t,n)},r.sort(n);else if(3===arguments.length)for(t=r.slice(arguments[1],arguments[2]),t.sort(),n=r.slice(0,arguments[1]).concat(t,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<n.length;t++)r.push(n[t]);else if(4===arguments.length)for(t=r.slice(arguments[1],arguments[2]),e=arguments[3],n=function(t,n){return e.compare(t,n)},t.sort(n),n=r.slice(0,arguments[1]).concat(t,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<n.length;t++)r.push(n[t])},d.asList=function(t){for(var e=new p,n=0,r=t.length;r>n;n++)e.add(t[n]);return e},n(f,u),e("javascript.util.HashMap",f),f.prototype.i=null,f.prototype.get=function(t){return this.i[t]||null},f.prototype.get=f.prototype.get,f.prototype.put=function(t,e){return this.i[t]=e},f.prototype.put=f.prototype.put,f.prototype.m=function(){var t,e=new p;for(t in this.i)this.i.hasOwnProperty(t)&&e.add(this.i[t]);return e},f.prototype.values=f.prototype.m,f.prototype.size=function(){return this.m().size()},f.prototype.size=f.prototype.size,n(g,s),e("javascript.util.Set",g),n(m,g),e("javascript.util.HashSet",m),m.prototype.a=null,m.prototype.contains=function(t){for(var e=0,n=this.a.length;n>e;e++)if(this.a[e]===t)return!0;return!1},m.prototype.contains=m.prototype.contains,m.prototype.add=function(t){return!this.contains(t)&&(this.a.push(t),!0)},m.prototype.add=m.prototype.add,m.prototype.e=function(t){for(t=t.f();t.c();)this.add(t.next());return!0},m.prototype.addAll=m.prototype.e,m.prototype.remove=function(){throw new c},m.prototype.remove=m.prototype.remove,m.prototype.size=function(){return this.a.length},m.prototype.g=function(){return 0===this.a.length},m.prototype.isEmpty=m.prototype.g,m.prototype.h=function(){for(var t=[],e=0,n=this.a.length;n>e;e++)t.push(this.a[e]);return t},m.prototype.toArray=m.prototype.h,m.prototype.f=function(){return new y(this)},m.prototype.iterator=m.prototype.f,e("$jscomp.scope.Iterator_$1",y),y.prototype.k=null,y.prototype.b=0,y.prototype.next=function(){if(this.b===this.k.size())throw new l;return this.k.a[this.b++]},y.prototype.next=y.prototype.next,y.prototype.c=function(){return this.b<this.k.size()},y.prototype.hasNext=y.prototype.c,y.prototype.remove=function(){throw new c},y.prototype.remove=y.prototype.remove,n(v,u),e("javascript.util.SortedMap",v),n(x,g),e("javascript.util.SortedSet",x),n(b,a),e("javascript.util.Stack",b),b.prototype.a=null,b.prototype.push=function(t){return this.a.push(t),t},b.prototype.push=b.prototype.push,b.prototype.pop=function(){if(0===this.a.length)throw new r;return this.a.pop()},b.prototype.pop=b.prototype.pop,b.prototype.o=function(){if(0===this.a.length)throw new r;return this.a[this.a.length-1]},b.prototype.peek=b.prototype.o,b.prototype.empty=function(){return 0===this.a.length},b.prototype.empty=b.prototype.empty,b.prototype.g=function(){return this.empty()},b.prototype.isEmpty=b.prototype.g,b.prototype.search=function(t){return this.a.indexOf(t)},b.prototype.search=b.prototype.search,b.prototype.size=function(){return this.a.length},b.prototype.size=b.prototype.size,b.prototype.h=function(){for(var t=[],e=0,n=this.a.length;n>e;e++)t.push(this.a[e]);return t},b.prototype.toArray=b.prototype.h,n(S,v),e("javascript.util.TreeMap",S),S.prototype.get=function(t){for(var e=this.d;null!==e;){var n=t.compareTo(e.key);if(0>n)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},S.prototype.get=S.prototype.get,S.prototype.put=function(t,e){if(null===this.d)return this.d={key:t,value:e,left:null,right:null,parent:null,color:0},this.n=1,null;var n,r,o=this.d;do if(n=o,r=t.compareTo(o.key),0>r)o=o.left;else{if(!(r>0))return n=o.value,o.value=e,n;o=o.right}while(null!==o);for(o={key:t,left:null,right:null,value:e,parent:n,color:0},0>r?n.left=o:n.right=o,o.color=1;null!=o&&o!=this.d&&1==o.parent.color;)j(o)==E(j(j(o)))?(n=w(j(j(o))),1==(null==n?0:n.color)?(_(j(o),0),_(n,0),_(j(j(o)),1),o=j(j(o))):(o==w(j(o))&&(o=j(o),I(this,o)),_(j(o),0),_(j(j(o)),1),M(this,j(j(o))))):(n=E(j(j(o))),1==(null==n?0:n.color)?(_(j(o),0),_(n,0),_(j(j(o)),1),o=j(j(o))):(o==E(j(o))&&(o=j(o),M(this,o)),_(j(o),0),_(j(j(o)),1),I(this,j(j(o)))));return this.d.color=0,this.n++,null},S.prototype.put=S.prototype.put,S.prototype.m=function(){var t,e=new p;if(t=this.d,null!=t)for(;null!=t.left;)t=t.left;if(null!==t)for(e.add(t.value);null!==(t=C(t));)e.add(t.value);return e},S.prototype.values=S.prototype.m,S.prototype.size=function(){return this.n},S.prototype.size=S.prototype.size,n(L,x),e("javascript.util.TreeSet",L),L.prototype.a=null,L.prototype.contains=function(t){for(var e=0,n=this.a.length;n>e;e++)if(0===this.a[e].compareTo(t))return!0;return!1},L.prototype.contains=L.prototype.contains,L.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.a.length;n>e;e++)if(1===this.a[e].compareTo(t))return this.a.splice(e,0,t),!0;return this.a.push(t),!0},L.prototype.add=L.prototype.add,L.prototype.e=function(t){for(t=t.f();t.c();)this.add(t.next());return!0},L.prototype.addAll=L.prototype.e,L.prototype.remove=function(){throw new c},L.prototype.remove=L.prototype.remove,L.prototype.size=function(){return this.a.length},L.prototype.size=L.prototype.size,L.prototype.g=function(){return 0===this.a.length},L.prototype.isEmpty=L.prototype.g,L.prototype.h=function(){for(var t=[],e=0,n=this.a.length;n>e;e++)t.push(this.a[e]);return t},L.prototype.toArray=L.prototype.h,L.prototype.f=function(){return new P(this)},L.prototype.iterator=L.prototype.f,e("$jscomp.scope.Iterator_$2",P),P.prototype.l=null,P.prototype.b=0,P.prototype.next=function(){if(this.b===this.l.size())throw new l;return this.l.a[this.b++]},P.prototype.next=P.prototype.next,P.prototype.c=function(){return this.b<this.l.size()},P.prototype.hasNext=P.prototype.c,P.prototype.remove=function(){throw new c},P.prototype.remove=P.prototype.remove,"undefined"!=typeof t&&(t.javascript={},t.javascript.util={},t.javascript.util.ArrayList=p,t.javascript.util.Arrays=d,t.javascript.util.Collection=s,t.javascript.util.EmptyStackException=r,t.javascript.util.HashMap=f,t.javascript.util.HashSet=m,t.javascript.util.IndexOutOfBoundsException=o,t.javascript.util.Iterator=i,t.javascript.util.List=a,t.javascript.util.Map=u,t.javascript.util.NoSuchElementException=l,t.javascript.util.OperationNotSupported=c,t.javascript.util.Set=g,t.javascript.util.SortedMap=v,t.javascript.util.SortedSet=x,t.javascript.util.Stack=b,t.javascript.util.TreeMap=S,t.javascript.util.TreeSet=L)}).call(this)}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(t){t("./dist/javascript.util-node.min.js")},{"./dist/javascript.util-node.min.js":19}],21:[function(t,e){var n=t("turf-extent"),r=t("turf-point");e.exports=function(t){var e=n(t),o=(e[0]+e[2])/2,i=(e[1]+e[3])/2;return r([o,i])}},{"turf-extent":70,"turf-point":102}],22:[function(t,e){var n=t("turf-meta").coordEach,r=t("turf-point");e.exports=function(t){var e=0,o=0,i=0;return n(t,function(t){e+=t[0],o+=t[1],i++},!0),r([e/i,o/i])}},{"turf-meta":23,"turf-point":102}],23:[function(t,e){function n(t,e,n){var r,o,i,s,a,u,c,p,h,d=0,f="FeatureCollection"===t.type,g="Feature"===t.type,m=f?t.features.length:1;for(r=0;m>r;r++)for(p=f?t.features[r].geometry:g?t.geometry:t,h="GeometryCollection"===p.type,u=h?p.geometries.length:1,s=0;u>s;s++)if(a=h?p.geometries[s]:p,c=a.coordinates,d=!n||"Polygon"!==a.type&&"MultiPolygon"!==a.type?0:1,"Point"===a.type)e(c);else if("LineString"===a.type||"MultiPoint"===a.type)for(o=0;o<c.length;o++)e(c[o]);else if("Polygon"===a.type||"MultiLineString"===a.type)for(o=0;o<c.length;o++)for(i=0;i<c[o].length-d;i++)e(c[o][i]);else{if("MultiPolygon"!==a.type)throw new Error("Unknown Geometry Type");for(o=0;o<c.length;o++)for(i=0;i<c[o].length;i++)for(l=0;l<c[o][i].length-d;l++)e(c[o][i][l])}}function r(t,e,r,o){return n(t,function(t){r=e(r,t)},o),r}function o(t,e){var n;switch(t.type){case"FeatureCollection":for(features=t.features,n=0;n<t.features.length;n++)e(t.features[n].properties);break;case"Feature":e(t.properties)}}function i(t,e,n){return o(t,function(t){n=e(n,t)}),n}e.exports.coordEach=n,e.exports.coordReduce=r,e.exports.propEach=o,e.exports.propReduce=i},{}],24:[function(t,e){function n(t){return t.map(function(t){return t.coordinates})}e.exports=function(t){var e=t.features[0].geometry.type,r=t.features.map(function(t){return t.geometry});switch(e){case"Point":return{type:"Feature",properties:{},geometry:{type:"MultiPoint",coordinates:n(r)}};case"LineString":return{type:"Feature",properties:{},geometry:{type:"MultiLineString",coordinates:n(r)}};case"Polygon":return{type:"Feature",properties:{},geometry:{type:"MultiPolygon",coordinates:n(r)}};default:return t}}},{}],25:[function(t,e){var n={};n.tin=t("turf-tin"),n.merge=t("turf-merge"),n.distance=t("turf-distance"),n.point=t("turf-point"),e.exports=function(t,e,r){function o(t){var o=n.point(t.geometry.coordinates[0][0]),i=n.point(t.geometry.coordinates[0][1]),s=n.point(t.geometry.coordinates[0][2]),a=n.distance(o,i,r),u=n.distance(i,s,r),l=n.distance(o,s,r);return e>=a&&e>=u&&e>=l}if("number"!=typeof e)throw new Error("maxEdge parameter is required");if("string"!=typeof r)throw new Error("units parameter is required");var i=n.tin(t),s=i.features.filter(o);return i.features=s,n.merge(i)}},{"turf-distance":60,"turf-merge":93,"turf-point":102,"turf-tin":118}],26:[function(t,e){var n=t("turf-meta").coordEach,r=t("convex-hull"),o=t("turf-polygon");e.exports=function(t){var e=[];n(t,function(t){e.push(t)});for(var i=r(e),s=[],a=0;a<i.length;a++)s.push(e[i[a][0]]);return s.push(e[i[i.length-1][1]]),o([s])}},{"convex-hull":27,"turf-meta":55,"turf-polygon":103}],27:[function(t,e){function n(t){var e=t.length;if(0===e)return[];if(1===e)return[[0]];var n=t[0].length;return 0===n?[]:1===n?r(t):2===n?o(t):i(t,n)}var r=t("./lib/ch1d"),o=t("./lib/ch2d"),i=t("./lib/chnd");e.exports=n},{"./lib/ch1d":28,"./lib/ch2d":29,"./lib/chnd":30}],28:[function(t,e){function n(t){for(var e=0,n=0,r=1;r<t.length;++r)t[r][0]<t[e][0]&&(e=r),t[r][0]>t[n][0]&&(n=r);return n>e?[[e],[n]]:e>n?[[n],[e]]:[[e]]}e.exports=n},{}],29:[function(t,e){function n(t){var e=r(t),n=e.length;if(2>=n)return[];for(var o=new Array(n),i=e[n-1],s=0;n>s;++s){var a=e[s];o[s]=[i,a],i=a}return o}e.exports=n;var r=t("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":48}],30:[function(t,e){function n(t,e){for(var n=t.length,r=new Array(n),o=0;o<e.length;++o)r[o]=t[e[o]];for(var i=e.length,o=0;n>o;++o)e.indexOf(o)<0&&(r[i++]=t[o]);return r}function r(t,e){for(var n=t.length,r=e.length,o=0;n>o;++o)for(var i=t[o],s=0;s<i.length;++s){var a=i[s];if(r>a)i[s]=e[a];else{a-=r;for(var u=0;r>u;++u)a>=e[u]&&(a+=1);i[s]=a}}return t}function o(t,e){try{return i(t,!0)}catch(o){var a=s(t);if(a.length<=e)return[];var u=n(t,a),l=i(u,!0);return r(l,a)}}e.exports=o;var i=t("incremental-convex-hull"),s=t("affine-hull")},{"affine-hull":31,"incremental-convex-hull":38}],31:[function(t,e){function n(t,e){for(var n=new Array(e+1),r=0;r<t.length;++r)n[r]=t[r];for(var r=0;r<=t.length;++r){for(var i=t.length;e>=i;++i){for(var s=new Array(e),a=0;e>a;++a)s[a]=Math.pow(i+1-r,a);n[i]=s}var u=o.apply(void 0,n);if(u)return!0}return!1}function r(t){var e=t.length;if(0===e)return[];if(1===e)return[0];for(var r=t[0].length,o=[t[0]],i=[0],s=1;e>s;++s)if(o.push(t[s]),n(o,r)){if(i.push(s),i.length===r+1)return i}else o.pop();return i}e.exports=r;var o=t("robust-orientation")},{"robust-orientation":37}],32:[function(t,e){function n(t,e,n){var r=t+e,o=r-t,i=r-o,s=e-o,a=t-i;return n?(n[0]=a+s,n[1]=r,n):[a+s,r]}e.exports=n},{}],33:[function(t,e){function n(t,e){var n=t.length;if(1===n){var i=r(t[0],e);return i[0]?i:[i[1]]}var s=new Array(2*n),a=[.1,.1],u=[.1,.1],l=0;r(t[0],e,a),a[0]&&(s[l++]=a[0]);for(var c=1;n>c;++c){r(t[c],e,u);var p=a[1];o(p,u[0],a),a[0]&&(s[l++]=a[0]);var h=u[1],d=a[1],f=h+d,g=f-h,m=d-g;a[1]=f,m&&(s[l++]=m)}return a[1]&&(s[l++]=a[1]),0===l&&(s[l++]=0),s.length=l,s}var r=t("two-product"),o=t("two-sum");e.exports=n},{"two-product":36,"two-sum":32}],34:[function(t,e){function n(t,e){var n=t+e,r=n-t,o=n-r,i=e-r,s=t-o,a=s+i;return a?[a,n]:[n]}function r(t,e){var r=0|t.length,o=0|e.length;if(1===r&&1===o)return n(t[0],-e[0]);var i,s,a=r+o,u=new Array(a),l=0,c=0,p=0,h=Math.abs,d=t[c],f=h(d),g=-e[p],m=h(g);m>f?(s=d,c+=1,r>c&&(d=t[c],f=h(d))):(s=g,p+=1,o>p&&(g=-e[p],m=h(g))),r>c&&m>f||p>=o?(i=d,c+=1,r>c&&(d=t[c],f=h(d))):(i=g,p+=1,o>p&&(g=-e[p],m=h(g)));for(var y,v,x,b,j,_=i+s,E=_-i,w=s-E,S=w,I=_;r>c&&o>p;)m>f?(i=d,c+=1,r>c&&(d=t[c],f=h(d))):(i=g,p+=1,o>p&&(g=-e[p],m=h(g))),s=S,_=i+s,E=_-i,w=s-E,w&&(u[l++]=w),y=I+_,v=y-I,x=y-v,b=_-v,j=I-x,S=j+b,I=y;for(;r>c;)i=d,s=S,_=i+s,E=_-i,w=s-E,w&&(u[l++]=w),y=I+_,v=y-I,x=y-v,b=_-v,j=I-x,S=j+b,I=y,c+=1,r>c&&(d=t[c]);for(;o>p;)i=g,s=S,_=i+s,E=_-i,w=s-E,w&&(u[l++]=w),y=I+_,v=y-I,x=y-v,b=_-v,j=I-x,S=j+b,I=y,p+=1,o>p&&(g=-e[p]);return S&&(u[l++]=S),I&&(u[l++]=I),l||(u[l++]=0),u.length=l,u}e.exports=r},{}],35:[function(t,e){function n(t,e){var n=t+e,r=n-t,o=n-r,i=e-r,s=t-o,a=s+i;return a?[a,n]:[n]}function r(t,e){var r=0|t.length,o=0|e.length;if(1===r&&1===o)return n(t[0],e[0]);var i,s,a=r+o,u=new Array(a),l=0,c=0,p=0,h=Math.abs,d=t[c],f=h(d),g=e[p],m=h(g);m>f?(s=d,c+=1,r>c&&(d=t[c],f=h(d))):(s=g,p+=1,o>p&&(g=e[p],m=h(g))),r>c&&m>f||p>=o?(i=d,c+=1,r>c&&(d=t[c],f=h(d))):(i=g,p+=1,o>p&&(g=e[p],m=h(g)));for(var y,v,x,b,j,_=i+s,E=_-i,w=s-E,S=w,I=_;r>c&&o>p;)m>f?(i=d,c+=1,r>c&&(d=t[c],f=h(d))):(i=g,p+=1,o>p&&(g=e[p],m=h(g))),s=S,_=i+s,E=_-i,w=s-E,w&&(u[l++]=w),y=I+_,v=y-I,x=y-v,b=_-v,j=I-x,S=j+b,I=y;for(;r>c;)i=d,s=S,_=i+s,E=_-i,w=s-E,w&&(u[l++]=w),y=I+_,v=y-I,x=y-v,b=_-v,j=I-x,S=j+b,I=y,c+=1,r>c&&(d=t[c]);for(;o>p;)i=g,s=S,_=i+s,E=_-i,w=s-E,w&&(u[l++]=w),y=I+_,v=y-I,x=y-v,b=_-v,j=I-x,S=j+b,I=y,p+=1,o>p&&(g=e[p]);return S&&(u[l++]=S),I&&(u[l++]=I),l||(u[l++]=0),u.length=l,u}e.exports=r},{}],36:[function(t,e){function n(t,e,n){var o=t*e,i=r*t,s=i-t,a=i-s,u=t-a,l=r*e,c=l-e,p=l-c,h=e-p,d=o-a*p,f=d-u*p,g=f-a*h,m=u*h-g;return n?(n[0]=m,n[1]=o,n):[m,o]}e.exports=n;var r=+(Math.pow(2,27)+1)},{}],37:[function(t,e){function n(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var o=n[r-1]=new Array(t.length-1),i=0,s=0;i<t.length;++i)i!==e&&(o[s++]=t[r][i]);return n}function r(t){for(var e=new Array(t),n=0;t>n;++n){e[n]=new Array(t);for(var r=0;t>r;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}function o(t){return 1&t?"-":""}function i(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",i(t.slice(0,e)),",",i(t.slice(e)),")"].join("")}function s(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],r=0;r<t.length;++r)e.push(["scale(",i(s(n(t,r))),",",o(r),t[0][r],")"].join(""));return e}function a(t){for(var e=[],o=[],a=r(t),u=[],l=0;t>l;++l)0===(1&l)?e.push.apply(e,s(n(a,l))):o.push.apply(o,s(n(a,l))),u.push("m"+l);var f=i(e),g=i(o),m="orientation"+t+"Exact",y=["function ",m,"(",u.join(),"){var p=",f,",n=",g,",d=sub(p,n);return d[d.length-1];};return ",m].join(""),v=new Function("sum","prod","scale","sub",y);return v(p,c,h,d)}function u(t){var e=b[t.length];return e||(e=b[t.length]=a(t.length)),e.apply(void 0,t)}function l(){for(;b.length<=f;)b.push(a(b.length));for(var t=[],n=["slow"],r=0;f>=r;++r)t.push("a"+r),n.push("o"+r);for(var o=["function getOrientation(",t.join(),"){switch(arguments.length){case 0:case 1:return 0;"],r=2;f>=r;++r)o.push("case ",r,":return o",r,"(",t.slice(0,r).join(),");");o.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(o.join(""));var i=Function.apply(void 0,n);e.exports=i.apply(void 0,[u].concat(b));for(var r=0;f>=r;++r)e.exports[r]=b[r]}var c=t("two-product"),p=t("robust-sum"),h=t("robust-scale"),d=t("robust-subtract"),f=5,g=1.1102230246251565e-16,m=(3+16*g)*g,y=(7+56*g)*g,v=a(3),x=a(4),b=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,o=(t[1]-n[1])*(e[0]-n[0]),i=(t[0]-n[0])*(e[1]-n[1]),s=o-i;if(o>0){if(0>=i)return s;r=o+i}else{if(!(0>o))return s;
if(i>=0)return s;r=-(o+i)}var a=m*r;return s>=a||-a>=s?s:v(t,e,n)},function(t,e,n,r){var o=t[0]-r[0],i=e[0]-r[0],s=n[0]-r[0],a=t[1]-r[1],u=e[1]-r[1],l=n[1]-r[1],c=t[2]-r[2],p=e[2]-r[2],h=n[2]-r[2],d=i*l,f=s*u,g=s*a,m=o*l,v=o*u,b=i*a,j=c*(d-f)+p*(g-m)+h*(v-b),_=(Math.abs(d)+Math.abs(f))*Math.abs(c)+(Math.abs(g)+Math.abs(m))*Math.abs(p)+(Math.abs(v)+Math.abs(b))*Math.abs(h),E=y*_;return j>E||-j>E?j:x(t,e,n,r)}];l()},{"robust-scale":33,"robust-subtract":34,"robust-sum":35,"two-product":36}],38:[function(t,e){function n(t,e,n){this.vertices=t,this.adjacent=e,this.boundary=n,this.lastVisited=-1}function r(t,e,n){this.vertices=t,this.cell=e,this.index=n}function o(t,e){return l(t.vertices,e.vertices)}function i(t){for(var e=["function orient(){var tuple=this.tuple;return test("],n=0;t>=n;++n)n>0&&e.push(","),e.push("tuple[",n,"]");e.push(")}return orient");var r=new Function("test",e.join("")),o=u[t+1];return o||(o=u),r(o)}function s(t,e,n){this.dimension=t,this.vertices=e,this.simplices=n,this.interior=n.filter(function(t){return!t.boundary}),this.tuple=new Array(t+1);for(var r=0;t>=r;++r)this.tuple[r]=this.vertices[r];var o=c[t];o||(o=c[t]=i(t)),this.orient=o}function a(t,e){var r=t.length;if(0===r)throw new Error("Must have at least d+1 points");var o=t[0].length;if(o>=r)throw new Error("Must input at least d+1 points");var i=t.slice(0,o+1),a=u.apply(void 0,i);if(0===a)throw new Error("Input not in general position");for(var l=new Array(o+1),c=0;o>=c;++c)l[c]=c;0>a&&(l[0]=1,l[1]=0);for(var p=new n(l,new Array(o+1),(!1)),h=p.adjacent,d=new Array(o+2),c=0;o>=c;++c){for(var f=l.slice(),g=0;o>=g;++g)g===c&&(f[g]=-1);var m=f[0];f[0]=f[1],f[1]=m;var y=new n(f,new Array(o+1),(!0));h[c]=y,d[c]=y}d[o+1]=p;for(var c=0;o>=c;++c)for(var f=h[c].vertices,v=h[c].adjacent,g=0;o>=g;++g){var x=f[g];if(0>x)v[g]=p;else for(var b=0;o>=b;++b)h[b].vertices.indexOf(x)<0&&(v[g]=h[b])}for(var j=new s(o,i,d),_=!!e,c=o+1;r>c;++c)j.insert(t[c],_);return j.boundary()}e.exports=a;var u=t("robust-orientation"),l=t("simplicial-complex").compareCells;n.prototype.flip=function(){var t=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=t;var e=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=e};var c=[],p=s.prototype;p.handleBoundaryDegeneracy=function(t,e){var n=this.dimension,r=this.vertices.length-1,o=this.tuple,i=this.vertices,s=[t];for(t.lastVisited=-r;s.length>0;){t=s.pop();for(var a=(t.vertices,t.adjacent),u=0;n>=u;++u){var l=a[u];if(l.boundary&&!(l.lastVisited<=-r)){for(var c=l.vertices,p=0;n>=p;++p){var h=c[p];o[p]=0>h?e:i[h]}var d=this.orient();if(d>0)return l;l.lastVisited=-r,0===d&&s.push(l)}}}return null},p.walk=function(t,e){var n=this.vertices.length-1,r=this.dimension,o=this.vertices,i=this.tuple,s=e?this.interior.length*Math.random()|0:this.interior.length-1,a=this.interior[s];t:for(;!a.boundary;){for(var u=a.vertices,l=a.adjacent,c=0;r>=c;++c)i[c]=o[u[c]];a.lastVisited=n;for(var c=0;r>=c;++c){var p=l[c];if(!(p.lastVisited>=n)){var h=i[c];i[c]=t;var d=this.orient();if(i[c]=h,0>d){a=p;continue t}p.lastVisited=p.boundary?-n:n}}return}return a},p.addPeaks=function(t,e){var i=this.vertices.length-1,s=this.dimension,a=this.vertices,u=this.tuple,l=this.interior,c=this.simplices,p=[e];e.lastVisited=i,e.vertices[e.vertices.indexOf(-1)]=i,e.boundary=!1,l.push(e);for(var h=[];p.length>0;){var e=p.pop(),d=e.vertices,f=e.adjacent,g=d.indexOf(i);if(!(0>g))for(var m=0;s>=m;++m)if(m!==g){var y=f[m];if(y.boundary&&!(y.lastVisited>=i)){var v=y.vertices;if(y.lastVisited!==-i){for(var x=0,b=0;s>=b;++b)v[b]<0?(x=b,u[b]=t):u[b]=a[v[b]];var j=this.orient();if(j>0){v[x]=i,y.boundary=!1,l.push(y),p.push(y),y.lastVisited=i;continue}y.lastVisited=-i}var _=y.adjacent,E=d.slice(),w=f.slice(),S=new n(E,w,(!0));c.push(S);var I=_.indexOf(e);if(!(0>I)){_[I]=S,w[g]=y,E[m]=-1,w[m]=e,f[m]=S,S.flip();for(var b=0;s>=b;++b){var M=E[b];if(!(0>M||M===i)){for(var C=new Array(s-1),L=0,P=0;s>=P;++P){var T=E[P];0>T||P===b||(C[L++]=T)}h.push(new r(C,S,b))}}}}}}h.sort(o);for(var m=0;m+1<h.length;m+=2){var N=h[m],R=h[m+1],A=N.index,D=R.index;0>A||0>D||(N.cell.adjacent[N.index]=R.cell,R.cell.adjacent[R.index]=N.cell)}},p.insert=function(t,e){var n=this.vertices;n.push(t);var r=this.walk(t,e);if(r){for(var o=this.dimension,i=this.tuple,s=0;o>=s;++s){var a=r.vertices[s];i[s]=0>a?t:n[a]}var u=this.orient(i);0>u||(0!==u||(r=this.handleBoundaryDegeneracy(r,t)))&&this.addPeaks(t,r)}},p.boundary=function(){for(var t=this.dimension,e=[],n=this.simplices,r=n.length,o=0;r>o;++o){var i=n[o];if(i.boundary){for(var s=new Array(t),a=i.vertices,u=0,l=0,c=0;t>=c;++c)a[c]>=0?s[u++]=a[c]:l=1&c;if(l===(1&t)){var p=s[0];s[0]=s[1],s[1]=p}e.push(s)}}return e}},{"robust-orientation":44,"simplicial-complex":47}],39:[function(t,e,n){arguments[4][32][0].apply(n,arguments)},{dup:32}],40:[function(t,e,n){arguments[4][33][0].apply(n,arguments)},{dup:33,"two-product":43,"two-sum":39}],41:[function(t,e,n){arguments[4][34][0].apply(n,arguments)},{dup:34}],42:[function(t,e,n){arguments[4][35][0].apply(n,arguments)},{dup:35}],43:[function(t,e,n){arguments[4][36][0].apply(n,arguments)},{dup:36}],44:[function(t,e,n){arguments[4][37][0].apply(n,arguments)},{dup:37,"robust-scale":40,"robust-subtract":41,"robust-sum":42,"two-product":43}],45:[function(t,e,n){"use restrict";function r(t){var e=32;return t&=-t,t&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}var o=32;n.INT_BITS=o,n.INT_MAX=2147483647,n.INT_MIN=-1<<o-1,n.sign=function(t){return(t>0)-(0>t)},n.abs=function(t){var e=t>>o-1;return(t^e)-e},n.min=function(t,e){return e^(t^e)&-(e>t)},n.max=function(t,e){return t^(t^e)&-(e>t)},n.isPow2=function(t){return!(t&t-1||!t)},n.log2=function(t){var e,n;return e=(t>65535)<<4,t>>>=e,n=(t>255)<<3,t>>>=n,e|=n,n=(t>15)<<2,t>>>=n,e|=n,n=(t>3)<<1,t>>>=n,e|=n,e|t>>1},n.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},n.popCount=function(t){return t-=t>>>1&1431655765,t=(858993459&t)+(t>>>2&858993459),16843009*(t+(t>>>4)&252645135)>>>24},n.countTrailingZeros=r,n.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1},n.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t-(t>>>1)},n.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,t&=15,27030>>>t&1};var i=new Array(256);!function(t){for(var e=0;256>e;++e){var n=e,r=e,o=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--o;t[e]=r<<o&255}}(i),n.reverse=function(t){return i[255&t]<<24|i[t>>>8&255]<<16|i[t>>>16&255]<<8|i[t>>>24&255]},n.interleave2=function(t,e){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},n.deinterleave2=function(t,e){return t=t>>>e&1431655765,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),t=65535&(t|t>>>16),t<<16>>16},n.interleave3=function(t,e,n){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t|=e<<1,n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),t|n<<2},n.deinterleave3=function(t,e){return t=t>>>e&1227133513,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),t=1023&(t|t>>>16),t<<22>>22},n.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>r(t)+1}},{}],46:[function(t,e){"use restrict";function n(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;t>e;++e)this.roots[e]=e,this.ranks[e]=0}e.exports=n;var r=n.prototype;Object.defineProperty(r,"length",{get:function(){return this.roots.length}}),r.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},r.find=function(t){for(var e=this.roots;e[t]!==t;){var n=e[t];e[t]=e[n],t=n}return t},r.link=function(t,e){var n=this.find(t),r=this.find(e);if(n!==r){var o=this.ranks,i=this.roots,s=o[n],a=o[r];a>s?i[n]=r:s>a?i[r]=n:(i[r]=n,++o[n])}}},{}],47:[function(t,e,n){"use restrict";function r(t){for(var e=0,n=Math.max,r=0,o=t.length;o>r;++r)e=n(e,t[r].length);return e-1}function o(t){for(var e=-1,n=Math.max,r=0,o=t.length;o>r;++r)for(var i=t[r],s=0,a=i.length;a>s;++s)e=n(e,i[s]);return e+1}function i(t){for(var e=new Array(t.length),n=0,r=t.length;r>n;++n)e[n]=t[n].slice(0);return e}function s(t,e){var n=t.length,r=t.length-e.length,o=Math.min;if(r)return r;switch(n){case 0:return 0;case 1:return t[0]-e[0];case 2:var i=t[0]+t[1]-e[0]-e[1];return i?i:o(t[0],t[1])-o(e[0],e[1]);case 3:var s=t[0]+t[1],a=e[0]+e[1];if(i=s+t[2]-(a+e[2]))return i;var u=o(t[0],t[1]),l=o(e[0],e[1]),i=o(u,t[2])-o(l,e[2]);return i?i:o(u+t[2],s)-o(l+e[2],a);default:var c=t.slice(0);c.sort();var p=e.slice(0);p.sort();for(var h=0;n>h;++h)if(r=c[h]-p[h])return r;return 0}}function a(t,e){return s(t[0],e[0])}function u(t,e){if(e){for(var n=t.length,r=new Array(n),o=0;n>o;++o)r[o]=[t[o],e[o]];r.sort(a);for(var o=0;n>o;++o)t[o]=r[o][0],e[o]=r[o][1];return t}return t.sort(s),t}function l(t){if(0===t.length)return[];for(var e=1,n=t.length,r=1;n>r;++r){var o=t[r];if(s(o,t[r-1])){if(r===e){e++;continue}t[e++]=o}}return t.length=e,t}function c(t,e){for(var n=0,r=t.length-1,o=-1;r>=n;){var i=n+r>>1,a=s(t[i],e);0>=a?(0===a&&(o=i),n=i+1):a>0&&(r=i-1)}return o}function p(t,e){for(var n=new Array(t.length),r=0,o=n.length;o>r;++r)n[r]=[];for(var i=[],r=0,a=e.length;a>r;++r)for(var u=e[r],l=u.length,p=1,h=1<<l;h>p;++p){i.length=x.popCount(p);for(var d=0,f=0;l>f;++f)p&1<<f&&(i[d++]=u[f]);var g=c(t,i);if(!(0>g))for(;n[g++].push(r),!(g>=t.length||0!==s(t[g],i)););}return n}function h(t,e){if(!e)return p(l(f(t,0)),t,0);for(var n=new Array(e),r=0;e>r;++r)n[r]=[];for(var r=0,o=t.length;o>r;++r)for(var i=t[r],s=0,a=i.length;a>s;++s)n[i[s]].push(r);return n}function d(t){for(var e=[],n=0,r=t.length;r>n;++n)for(var o=t[n],i=0|o.length,s=1,a=1<<i;a>s;++s){for(var l=[],c=0;i>c;++c)s>>>c&1&&l.push(o[c]);e.push(l)}return u(e)}function f(t,e){if(0>e)return[];for(var n=[],r=(1<<e+1)-1,o=0;o<t.length;++o)for(var i=t[o],s=r;s<1<<i.length;s=x.nextCombination(s)){for(var a=new Array(e+1),l=0,c=0;c<i.length;++c)s&1<<c&&(a[l++]=i[c]);n.push(a)}return u(n)}function g(t){for(var e=[],n=0,r=t.length;r>n;++n)for(var o=t[n],i=0,s=o.length;s>i;++i){for(var a=new Array(o.length-1),l=0,c=0;s>l;++l)l!==i&&(a[c++]=o[l]);e.push(a)}return u(e)}function m(t,e){for(var n=new b(e),r=0;r<t.length;++r)for(var o=t[r],i=0;i<o.length;++i)for(var s=i+1;s<o.length;++s)n.link(o[i],o[s]);for(var a=[],u=n.ranks,r=0;r<u.length;++r)u[r]=-1;for(var r=0;r<t.length;++r){var l=n.find(t[r][0]);u[l]<0?(u[l]=a.length,a.push([t[r].slice(0)])):a[u[l]].push(t[r].slice(0))}return a}function y(t){for(var e=l(u(f(t,0))),n=new b(e.length),r=0;r<t.length;++r)for(var o=t[r],i=0;i<o.length;++i)for(var s=c(e,[o[i]]),a=i+1;a<o.length;++a)n.link(s,c(e,[o[a]]));for(var p=[],h=n.ranks,r=0;r<h.length;++r)h[r]=-1;for(var r=0;r<t.length;++r){var d=n.find(c(e,[t[r][0]]));h[d]<0?(h[d]=p.length,p.push([t[r].slice(0)])):p[h[d]].push(t[r].slice(0))}return p}function v(t,e){return e?m(t,e):y(t)}var x=t("bit-twiddle"),b=t("union-find");n.dimension=r,n.countVertices=o,n.cloneCells=i,n.compareCells=s,n.normalize=u,n.unique=l,n.findCell=c,n.incidence=p,n.dual=h,n.explode=d,n.skeleton=f,n.boundary=g,n.connectedComponents=v},{"bit-twiddle":45,"union-find":46}],48:[function(t,e){function n(t){var e=t.length;if(3>e){for(var n=new Array(e),o=0;e>o;++o)n[o]=o;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}for(var i=new Array(e),o=0;e>o;++o)i[o]=o;i.sort(function(e,n){var r=t[e][0]-t[n][0];return r?r:t[e][1]-t[n][1]});for(var s=[i[0],i[1]],a=[i[0],i[1]],o=2;e>o;++o){for(var u=i[o],l=t[u],c=s.length;c>1&&r(t[s[c-2]],t[s[c-1]],l)<=0;)c-=1,s.pop();for(s.push(u),c=a.length;c>1&&r(t[a[c-2]],t[a[c-1]],l)>=0;)c-=1,a.pop();a.push(u)}for(var n=new Array(a.length+s.length-2),p=0,o=0,h=s.length;h>o;++o)n[p++]=s[o];for(var d=a.length-2;d>0;--d)n[p++]=a[d];return n}e.exports=n;var r=t("robust-orientation")[3]},{"robust-orientation":54}],49:[function(t,e,n){arguments[4][32][0].apply(n,arguments)},{dup:32}],50:[function(t,e,n){arguments[4][33][0].apply(n,arguments)},{dup:33,"two-product":53,"two-sum":49}],51:[function(t,e,n){arguments[4][34][0].apply(n,arguments)},{dup:34}],52:[function(t,e,n){arguments[4][35][0].apply(n,arguments)},{dup:35}],53:[function(t,e,n){arguments[4][36][0].apply(n,arguments)},{dup:36}],54:[function(t,e,n){arguments[4][37][0].apply(n,arguments)},{dup:37,"robust-scale":50,"robust-subtract":51,"robust-sum":52,"two-product":53}],55:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{dup:23}],56:[function(t,e){var n=t("turf-inside");e.exports=function(t,e,r){for(var o=0;o<t.features.length;o++){var i=t.features[o];i.properties||(i.properties={});for(var s=0,a=0;a<e.features.length;a++){var u=e.features[a];n(u,i)&&s++}i.properties[r]=s}return t}},{"turf-inside":76}],57:[function(t,e){function n(t){return t*Math.PI/180}function r(t){return 180*t/Math.PI}var o=t("turf-point");e.exports=function(t,e,i,s){var a=t.geometry.coordinates,u=n(a[0]),l=n(a[1]),c=n(i),p=0;switch(s){case"miles":p=3960;break;case"kilometers":p=6373;break;case"degrees":p=57.2957795;break;case"radians":p=1}var h=Math.asin(Math.sin(l)*Math.cos(e/p)+Math.cos(l)*Math.sin(e/p)*Math.cos(c)),d=u+Math.atan2(Math.sin(c)*Math.sin(e/p)*Math.cos(l),Math.cos(e/p)-Math.sin(l)*Math.sin(h));return o([r(d),r(h)])}},{"turf-point":102}],58:[function(t,e){var n=t("simple-statistics"),r=t("turf-inside");e.exports=function(t,e,o,i){return t.features.forEach(function(t){t.properties||(t.properties={});var s=[];e.features.forEach(function(e){r(e,t)&&s.push(e.properties[o])}),t.properties[i]=n.standard_deviation(s)}),t}},{"simple-statistics":59,"turf-inside":76}],59:[function(t,e){!function(){function t(){var t={},e=[];return t.data=function(n){return arguments.length?(e=n.slice(),t):e},t.mb=function(){var t,n,r=e.length;if(1===r)t=0,n=e[0][1];else{for(var o,i,s,a=0,u=0,l=0,c=0,p=0;r>p;p++)o=e[p],i=o[0],s=o[1],a+=i,u+=s,l+=i*i,c+=i*s;t=(r*c-a*u)/(r*l-a*a),n=u/r-t*a/r}return{m:t,b:n}},t.m=function(){return t.mb().m},t.b=function(){return t.mb().b},t.line=function(){var e=t.mb(),n=e.m,r=e.b;return function(t){return r+n*t}},t}function n(t,e){if(t.length<2)return 1;for(var n,r=0,o=0;o<t.length;o++)r+=t[o][1];n=r/t.length;for(var i=0,s=0;s<t.length;s++)i+=Math.pow(n-t[s][1],2);for(var a=0,u=0;u<t.length;u++)a+=Math.pow(t[u][1]-e(t[u][0]),2);return 1-a/i}function r(){var t={},e=0,n={};return t.train=function(t,r){n[r]||(n[r]={});for(var o in t){var i=t[o];void 0===n[r][o]&&(n[r][o]={}),void 0===n[r][o][i]&&(n[r][o][i]=0),n[r][o][t[o]]++}e++},t.score=function(t){var r,o={};for(var i in t){var s=t[i];for(r in n)void 0===o[r]&&(o[r]={}),o[r][i+"_"+s]=n[r][i]?(n[r][i][s]||0)/e:0}var a={};for(r in o)for(var u in o[r])void 0===a[r]&&(a[r]=0),a[r]+=o[r][u];return a},t}function o(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e}function i(t){return 0===t.length?null:o(t)/t.length}function s(t){if(0===t.length)return null;for(var e=1,n=0;n<t.length;n++){if(t[n]<=0)return null;e*=t[n]}return Math.pow(e,1/t.length)}function a(t){if(0===t.length)return null;for(var e=0,n=0;n<t.length;n++){if(t[n]<=0)return null;e+=1/t[n]}return t.length/e}function u(t){for(var e,n=0;n<t.length;n++)(t[n]<e||void 0===e)&&(e=t[n]);return e}function l(t){for(var e,n=0;n<t.length;n++)(t[n]>e||void 0===e)&&(e=t[n]);return e}function c(t){if(0===t.length)return null;for(var e=i(t),n=[],r=0;r<t.length;r++)n.push(Math.pow(t[r]-e,2));return i(n)}function p(t){return 0===t.length?null:Math.sqrt(c(t))}function h(t,e){for(var n=i(t),r=0,o=0;o<t.length;o++)r+=Math.pow(t[o]-n,e);return r}function d(t){if(t.length<=1)return null;var e=h(t,2);return e/(t.length-1)}function f(t){return t.length<=1?null:Math.sqrt(d(t))}function g(t,e){if(t.length<=1||t.length!=e.length)return null;for(var n=i(t),r=i(e),o=0,s=0;s<t.length;s++)o+=(t[s]-n)*(e[s]-r);return o/(t.length-1)}function m(t,e){var n=g(t,e),r=f(t),o=f(e);return null===n||null===r||null===o?null:n/r/o}function y(t){if(0===t.length)return null;var e=t.slice().sort(function(t,e){return t-e});if(e.length%2===1)return e[(e.length-1)/2];var n=e[e.length/2-1],r=e[e.length/2];return(n+r)/2}function v(t){if(0===t.length)return null;if(1===t.length)return t[0];for(var e,n=t.slice().sort(function(t,e){return t-e}),r=n[0],o=0,i=1,s=1;s<n.length+1;s++)n[s]!==r?(i>o&&(o=i,e=r),i=1,r=n[s]):i++;return e}function x(t,e){var n=i(t),r=p(t),o=Math.sqrt(t.length);return(n-e)/(r/o)}function b(t,e,n){var r=t.length,o=e.length;if(!r||!o)return null;n||(n=0);var s=i(t),a=i(e),u=((r-1)*d(t)+(o-1)*d(e))/(r+o-2);return(s-a-n)/Math.sqrt(u*(1/r+1/o))}function j(t,e){var n=[];if(0>=e)return null;for(var r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}function _(t,e){e=e||Math.random;for(var n,r,o=t.length;o>0;)r=Math.floor(e()*o--),n=t[o],t[o]=t[r],t[r]=n;return t}function E(t,e){return t=t.slice(),_(t.slice(),e)}function w(t,e,n){var r=E(t,n);return r.slice(0,e)}function S(t,e){if(0===t.length)return null;var n=t.slice().sort(function(t,e){return t-e});if(e.length){for(var r=[],o=0;o<e.length;o++)r[o]=I(n,e[o]);return r}return I(n,e)}function I(t,e){var n=t.length*e;return 0>e||e>1?null:1===e?t[t.length-1]:0===e?t[0]:n%1!==0?t[Math.ceil(n)-1]:t.length%2===0?(t[n-1]+t[n])/2:t[n]}function M(t){return 0===t.length?null:S(t,.75)-S(t,.25)}function C(t){if(!t||0===t.length)return null;for(var e=y(t),n=[],r=0;r<t.length;r++)n.push(Math.abs(t[r]-e));return y(n)}function L(t,e){var n,r,o=[],i=[],s=0;for(n=0;n<t.length+1;n++){var a=[],u=[];for(r=0;e+1>r;r++)a.push(0),u.push(0);o.push(a),i.push(u)}for(n=1;e+1>n;n++)for(o[1][n]=1,i[1][n]=0,r=2;r<t.length+1;r++)i[r][n]=1/0;for(var l=2;l<t.length+1;l++){for(var c=0,p=0,h=0,d=0,f=1;l+1>f;f++){var g=l-f+1,m=t[g-1];if(h++,c+=m,p+=m*m,s=p-c*c/h,d=g-1,0!==d)for(r=2;e+1>r;r++)i[l][r]>=s+i[d][r-1]&&(o[l][r]=g,i[l][r]=s+i[d][r-1])}o[l][1]=1,i[l][1]=s}return{lower_class_limits:o,variance_combinations:i}}function P(t,e,n){var r=t.length-1,o=[],i=n;for(o[n]=t[t.length-1],o[0]=t[0];i>1;)o[i-1]=t[e[r][i]-2],r=e[r][i]-1,i--;return o}function T(t,e){if(e>t.length)return null;t=t.slice().sort(function(t,e){return t-e});var n=L(t,e),r=n.lower_class_limits;return P(t,r,e)}function N(t){if(t.length<3)return null;var e=t.length,n=Math.pow(f(t),3),r=h(t,3);return e*r/((e-1)*(e-2)*n)}function R(t){var e=Math.abs(t),n=Math.floor(10*e),r=10*(Math.floor(100*e)/10-Math.floor(100*e/10)),o=Math.min(10*n+r,q.length-1);return t>=0?q[o]:+(1-q[o]).toFixed(4)}function A(t,e,n){return(t-e)/n}function D(t){if(0>t)return null;for(var e=1,n=2;t>=n;n++)e*=n;return e}function O(t){return 0>t||t>1?null:F(1,t)}function F(t,e){function n(t,e,n){return D(e)/(D(t)*D(e-t))*Math.pow(n,t)*Math.pow(1-n,e-t)}if(0>e||e>1||0>=t||t%1!==0)return null;var r=0,o=0,i={};do i[r]=n(r,t,e),o+=i[r],r++;while(1-U>o);return i}function k(t){function e(t,e){return Math.pow(Math.E,-e)*Math.pow(e,t)/D(t)}if(0>=t)return null;var n=0,r=0,o={};do o[n]=e(n,t),r+=o[n],n++;while(1-U>r);return o}function B(t,e,n){for(var r,o,s=i(t),a=0,u=1,l=e(s),c=[],p=[],h=0;h<t.length;h++)void 0===c[t[h]]&&(c[t[h]]=0),c[t[h]]++;for(h=0;h<c.length;h++)void 0===c[h]&&(c[h]=0);for(o in l)o in c&&(p[o]=l[o]*t.length);for(o=p.length-1;o>=0;o--)p[o]<3&&(p[o-1]+=p[o],p.pop(),c[o-1]+=c[o],c.pop());for(o=0;o<c.length;o++)a+=Math.pow(c[o]-p[o],2)/p[o];return r=c.length-u-1,V[r][n]<a}function z(t){function e(t){return function(){var e=Array.prototype.slice.apply(arguments);return e.unshift(this),G[t].apply(G,e)}}var n=!(!Object.defineProperty||!Object.defineProperties);if(!n)throw new Error("without defineProperty, simple-statistics cannot be mixed in");var r,o=["median","standard_deviation","sum","sample_skewness","mean","min","max","quantile","geometric_mean","harmonic_mean"];r=t?t.slice():Array.prototype;for(var i=0;i<o.length;i++)Object.defineProperty(r,o[i],{value:e(o[i]),configurable:!0,enumerable:!1,writable:!0});return r}var G={};"undefined"!=typeof e?e.exports=G:this.ss=G;var q=[.5,.504,.508,.512,.516,.5199,.5239,.5279,.5319,.5359,.5398,.5438,.5478,.5517,.5557,.5596,.5636,.5675,.5714,.5753,.5793,.5832,.5871,.591,.5948,.5987,.6026,.6064,.6103,.6141,.6179,.6217,.6255,.6293,.6331,.6368,.6406,.6443,.648,.6517,.6554,.6591,.6628,.6664,.67,.6736,.6772,.6808,.6844,.6879,.6915,.695,.6985,.7019,.7054,.7088,.7123,.7157,.719,.7224,.7257,.7291,.7324,.7357,.7389,.7422,.7454,.7486,.7517,.7549,.758,.7611,.7642,.7673,.7704,.7734,.7764,.7794,.7823,.7852,.7881,.791,.7939,.7967,.7995,.8023,.8051,.8078,.8106,.8133,.8159,.8186,.8212,.8238,.8264,.8289,.8315,.834,.8365,.8389,.8413,.8438,.8461,.8485,.8508,.8531,.8554,.8577,.8599,.8621,.8643,.8665,.8686,.8708,.8729,.8749,.877,.879,.881,.883,.8849,.8869,.8888,.8907,.8925,.8944,.8962,.898,.8997,.9015,.9032,.9049,.9066,.9082,.9099,.9115,.9131,.9147,.9162,.9177,.9192,.9207,.9222,.9236,.9251,.9265,.9279,.9292,.9306,.9319,.9332,.9345,.9357,.937,.9382,.9394,.9406,.9418,.9429,.9441,.9452,.9463,.9474,.9484,.9495,.9505,.9515,.9525,.9535,.9545,.9554,.9564,.9573,.9582,.9591,.9599,.9608,.9616,.9625,.9633,.9641,.9649,.9656,.9664,.9671,.9678,.9686,.9693,.9699,.9706,.9713,.9719,.9726,.9732,.9738,.9744,.975,.9756,.9761,.9767,.9772,.9778,.9783,.9788,.9793,.9798,.9803,.9808,.9812,.9817,.9821,.9826,.983,.9834,.9838,.9842,.9846,.985,.9854,.9857,.9861,.9864,.9868,.9871,.9875,.9878,.9881,.9884,.9887,.989,.9893,.9896,.9898,.9901,.9904,.9906,.9909,.9911,.9913,.9916,.9918,.992,.9922,.9925,.9927,.9929,.9931,.9932,.9934,.9936,.9938,.994,.9941,.9943,.9945,.9946,.9948,.9949,.9951,.9952,.9953,.9955,.9956,.9957,.9959,.996,.9961,.9962,.9963,.9964,.9965,.9966,.9967,.9968,.9969,.997,.9971,.9972,.9973,.9974,.9974,.9975,.9976,.9977,.9977,.9978,.9979,.9979,.998,.9981,.9981,.9982,.9982,.9983,.9984,.9984,.9985,.9985,.9986,.9986,.9987,.9987,.9987,.9988,.9988,.9989,.9989,.9989,.999,.999],U=1e-4,V={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}};G.linear_regression=t,G.standard_deviation=p,G.r_squared=n,G.median=y,G.mean=i,G.mode=v,G.min=u,G.max=l,G.sum=o,G.quantile=S,G.quantile_sorted=I,G.iqr=M,G.mad=C,G.chunk=j,G.shuffle=E,G.shuffle_in_place=_,G.sample=w,G.sample_covariance=g,G.sample_correlation=m,G.sample_variance=d,G.sample_standard_deviation=f,G.sample_skewness=N,G.geometric_mean=s,G.harmonic_mean=a,G.variance=c,G.t_test=x,G.t_test_two_sample=b,G.jenksMatrices=L,G.jenksBreaks=P,G.jenks=T,G.bayesian=r,G.epsilon=U,G.factorial=D,G.bernoulli_distribution=O,G.binomial_distribution=F,G.poisson_distribution=k,G.chi_squared_goodness_of_fit=B,G.z_score=A,G.cumulative_std_normal_probability=R,G.standard_normal_table=q,G.average=i,G.interquartile_range=M,G.mixin=z,G.median_absolute_deviation=C}(this)},{}],60:[function(t,e){function n(t){return t*Math.PI/180}var r=t("turf-invariant");e.exports=function(t,e,o){r.featureOf(t,"Point","distance"),r.featureOf(e,"Point","distance");var i,s=t.geometry.coordinates,a=e.geometry.coordinates,u=n(a[1]-s[1]),l=n(a[0]-s[0]),c=n(s[1]),p=n(a[1]),h=Math.sin(u/2)*Math.sin(u/2)+Math.sin(l/2)*Math.sin(l/2)*Math.cos(c)*Math.cos(p),d=2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h));switch(o){case"miles":i=3960;break;case"kilometers":i=6373;break;case"degrees":i=57.2957795;break;case"radians":i=1;break;case void 0:i=6373;break;default:throw new Error('unknown option given to "units"')}var f=i*d;return f}},{"turf-invariant":61}],61:[function(t,e){function n(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function r(t,e,n){if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function o(t,e,n){if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0;r<t.features.length;r++){var o=t.features[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}}e.exports.geojsonType=n,e.exports.collectionOf=o,e.exports.featureOf=r},{}],62:[function(t,e){var n=t("turf-extent"),r=t("turf-bbox-polygon");e.exports=function(t){var e=n(t),o=r(e);return o}},{"turf-bbox-polygon":12,"turf-extent":70}],63:[function(t,e){var n=t("jsts");e.exports=function(t,e){var r=JSON.parse(JSON.stringify(t)),o=JSON.parse(JSON.stringify(e));"Feature"!==r.type&&(r={type:"Feature",properties:{},geometry:r}),"Feature"!==o.type&&(o={type:"Feature",properties:{},geometry:o});var i=new n.io.GeoJSONReader,s=i.read(JSON.stringify(r.geometry)),a=i.read(JSON.stringify(o.geometry)),u=s.difference(a),l=new n.io.GeoJSONParser;return u=l.write(u),r.geometry=u,"GeometryCollection"===r.geometry.type&&0===r.geometry.geometries.length?void 0:{type:"Feature",properties:r.properties,geometry:u}}},{jsts:64}],64:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{"./lib/jsts":65,dup:17,"javascript.util":67}],65:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],66:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],67:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{"./dist/javascript.util-node.min.js":66,dup:20}],68:[function(t,e){var n=t("turf-featurecollection"),r=t("turf-meta").coordEach,o=t("turf-point");e.exports=function(t){var e=[];return r(t,function(t){e.push(o(t))}),n(e)}},{"turf-featurecollection":72,"turf-meta":69,"turf-point":102}],69:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{dup:23}],70:[function(t,e){var n=t("turf-meta").coordEach;e.exports=function(t){var e=[1/0,1/0,-1/0,-1/0];return n(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}},{"turf-meta":71}],71:[function(t,e,n){arguments[4][23][0].apply(n,arguments)},{dup:23}],72:[function(t,e){e.exports=function(t){return{type:"FeatureCollection",features:t}}},{}],73:[function(t,e){var n=t("turf-featurecollection");e.exports=function(t,e,r){for(var o=n([]),i=0;i<t.features.length;i++)t.features[i].properties[e]===r&&o.features.push(t.features[i]);return o}},{"turf-featurecollection":72}],74:[function(t,e){function n(t){var e=JSON.parse(JSON.stringify(t));switch(e.type){case"FeatureCollection":for(var n=0;n<e.features.length;n++)r(e.features[n].geometry);return e;case"Feature":return r(e.geometry),e;default:return r(e),e}}function r(t){var e=t.coordinates;switch(t.type){case"Point":o(e);break;case"LineString":case"MultiPoint":i(e);break;case"Polygon":case"MultiLineString":s(e);break;case"MultiPolygon":a(e);break;case"GeometryCollection":t.geometries.forEach(r)}}function o(t){t.reverse()}function i(t){for(var e=0;e<t.length;e++)t[e].reverse()}function s(t){for(var e=0;e<t.length;e++)for(var n=0;n<t[e].length;n++)t[e][n].reverse()}function a(t){for(var e=0;e<t.length;e++)for(var n=0;n<t[e].length;n++)for(var r=0;r<t[e][n].length;r++)t[e][n][r].reverse()}e.exports=n},{}],75:[function(t,e){function n(t,e){for(var n=[],r=0;6>r;r++){var i=t[0]+e*a[r],s=t[1]+e*u[r];n.push([i,s])}return n.push(n[0]),o([n])}for(var r=t("turf-point"),o=t("turf-polygon"),i=t("turf-distance"),s=t("turf-featurecollection"),a=[],u=[],l=0;6>l;l++){var c=2*Math.PI/6*l;a.push(Math.cos(c)),u.push(Math.sin(c))}e.exports=function(t,e,o){var a=e/i(r([t[0],t[1]]),r([t[2],t[1]]),o),u=a*(t[2]-t[0]),l=e/i(r([t[0],t[1]]),r([t[0],t[3]]),o),c=(l*(t[3]-t[1]),u/2),p=2*c,h=Math.sqrt(3)/2*p,d=t[2]-t[0],f=t[3]-t[1],g=.75*p,m=h,y=d/(p-c/2),v=Math.ceil(y);Math.round(y)===v&&v++;var x=(v*g-c/2-d)/2-c/2,b=Math.ceil(f/h),j=(f-b*h)/2,_=b*h-f>h/2;
_&&(j-=h/4);for(var E=s([]),w=0;v>w;w++)for(var S=0;b>=S;S++){var I=w%2===1;if(!(0===S&&I||0===S&&_)){var M=w*g+t[0]-x,C=S*m+t[1]+j;I&&(C-=h/2),E.features.push(n([M,C],c))}}return E}},{"turf-distance":60,"turf-featurecollection":72,"turf-point":102,"turf-polygon":103}],76:[function(t,e){function n(t,e){for(var n=!1,r=0,o=e.length-1;r<e.length;o=r++){var i=e[r][0],s=e[r][1],a=e[o][0],u=e[o][1],l=s>t[1]!=u>t[1]&&t[0]<(a-i)*(t[1]-s)/(u-s)+i;l&&(n=!n)}return n}e.exports=function(t,e){var r=e.geometry.coordinates,o=[t.geometry.coordinates[0],t.geometry.coordinates[1]];"Polygon"===e.geometry.type&&(r=[r]);for(var i=!1,s=0;s<r.length&&!i;){if(n(o,r[s][0])){for(var a=!1,u=1;u<r[s].length&&!a;)n(o,r[s][u])&&(a=!0),u++;a||(i=!0)}s++}return i}},{}],77:[function(t,e){var n=t("jsts");t("turf-featurecollection"),e.exports=function(t,e){var r;r="Feature"===t.type?t.geometry:t,geom2="Feature"===e.type?e.geometry:e;var o=new n.io.GeoJSONReader,i=o.read(JSON.stringify(r)),s=o.read(JSON.stringify(geom2)),a=i.intersection(s),u=new n.io.GeoJSONParser;return a=u.write(a),"GeometryCollection"===a.type&&0===a.geometries.length?void 0:{type:"Feature",properties:{},geometry:a}}},{jsts:78,"turf-featurecollection":72}],78:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{"./lib/jsts":79,dup:17,"javascript.util":81}],79:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],80:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],81:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{"./dist/javascript.util-node.min.js":80,dup:20}],82:[function(t,e){function n(t,e){var n=t.x-e.x,r=t.y-e.y;return s>n*n+r*r}function r(t){for(var e=t.head;e;){var n=e.next;e.next=e.prev,e.prev=n,e=n}var n=t.head;t.head=t.tail,t.tail=n}function o(t){this.level=t,this.s=null,this.count=0}function i(t){if(t)this.drawContour=t;else{var e=this;e.contours={},this.drawContour=function(t,n,r,i,s,a){var u=e.contours[a];u||(u=e.contours[a]=new o(s)),u.addSegment({x:t,y:n},{x:r,y:i})},this.contourList=function(){var t=[],n=e.contours;for(var r in n)for(var o=n[r].s,i=n[r].level;o;){var s=o.head,a=[];for(a.level=i,a.k=r;s&&s.p;)a.push(s.p),s=s.next;t.push(a),o=o.next}return t.sort(function(t,e){return t.k-e.k}),t}}this.h=new Array(5),this.sh=new Array(5),this.xh=new Array(5),this.yh=new Array(5)}e.exports=i;var s=1e-10;o.prototype.remove_seq=function(t){t.prev?t.prev.next=t.next:this.s=t.next,t.next&&(t.next.prev=t.prev),--this.count},o.prototype.addSegment=function(t,e){for(var o=this.s,i=null,s=null,a=!1,u=!1;o&&(null==i&&(n(t,o.head.p)?(i=o,a=!0):n(t,o.tail.p)&&(i=o)),null==s&&(n(e,o.head.p)?(s=o,u=!0):n(e,o.tail.p)&&(s=o)),null==s||null==i);)o=o.next;var l=(null!=i?1:0)|(null!=s?2:0);switch(l){case 0:var c={p:t,prev:null},p={p:e,next:null};c.next=p,p.prev=c,i={head:c,tail:p,next:this.s,prev:null,closed:!1},this.s&&(this.s.prev=i),this.s=i,++this.count;break;case 1:var h={p:e};a?(h.next=i.head,h.prev=null,i.head.prev=h,i.head=h):(h.next=null,h.prev=i.tail,i.tail.next=h,i.tail=h);break;case 2:var h={p:t};u?(h.next=s.head,h.prev=null,s.head.prev=h,s.head=h):(h.next=null,h.prev=s.tail,s.tail.next=h,s.tail=h);break;case 3:if(i===s){var h={p:i.tail.p,next:i.head,prev:null};i.head.prev=h,i.head=h,i.closed=!0;break}switch((a?1:0)|(u?2:0)){case 0:r(i);case 1:s.tail.next=i.head,i.head.prev=s.tail,s.tail=i.tail,this.remove_seq(i);break;case 3:r(i);case 2:i.tail.next=s.head,s.head.prev=i.tail,i.tail=s.tail,this.remove_seq(s)}}},i.prototype.contour=function(t,e,n,r,o,i,a,u,l){var c=this.h,p=this.sh,h=this.xh,d=this.yh,f=this.drawContour;this.contours={};for(var g,m,y,v,x,b,j=function(t,e){return(c[e]*h[t]-c[t]*h[e])/(c[e]-c[t])},_=function(t,e){return(c[e]*d[t]-c[t]*d[e])/(c[e]-c[t])},E=0,w=0,S=0,I=0,M=[0,1,1,0],C=[0,0,1,1],L=[[[0,0,8],[0,2,5],[7,6,9]],[[0,3,4],[1,3,1],[4,3,0]],[[9,6,7],[5,2,0],[8,0,0]]],P=o-1;P>=r;P--)for(var T=e;n-1>=T;T++){var N,R;if(N=Math.min(t[T][P],t[T][P+1]),R=Math.min(t[T+1][P],t[T+1][P+1]),x=Math.min(N,R),N=Math.max(t[T][P],t[T][P+1]),R=Math.max(t[T+1][P],t[T+1][P+1]),b=Math.max(N,R),b>=l[0]&&x<=l[u-1])for(var A=0;u>A;A++)if(l[A]>=x&&l[A]<=b){for(var D=4;D>=0;D--)D>0?(c[D]=t[T+M[D-1]][P+C[D-1]]-l[A],h[D]=i[T+M[D-1]],d[D]=a[P+C[D-1]]):(c[0]=.25*(c[1]+c[2]+c[3]+c[4]),h[0]=.5*(i[T]+i[T+1]),d[0]=.5*(a[P]+a[P+1])),p[D]=c[D]>s?1:c[D]<-s?-1:0;for(D=1;4>=D;D++)if(g=D,m=0,y=4!=D?D+1:1,v=L[p[g]+1][p[m]+1][p[y]+1],0!=v){switch(v){case 1:E=h[g],S=d[g],w=h[m],I=d[m];break;case 2:E=h[m],S=d[m],w=h[y],I=d[y];break;case 3:E=h[y],S=d[y],w=h[g],I=d[g];break;case 4:E=h[g],S=d[g],w=j(m,y),I=_(m,y);break;case 5:E=h[m],S=d[m],w=j(y,g),I=_(y,g);break;case 6:E=h[y],S=d[y],w=j(g,m),I=_(g,m);break;case 7:E=j(g,m),S=_(g,m),w=j(m,y),I=_(m,y);break;case 8:E=j(m,y),S=_(m,y),w=j(y,g),I=_(y,g);break;case 9:E=j(y,g),S=_(y,g),w=j(g,m),I=_(g,m)}f(E,S,w,I,l[A],A)}}}}},{}],83:[function(t,e){var n=t("turf-tin"),r=t("turf-inside"),o=t("turf-grid"),i=t("turf-extent"),s=t("turf-planepoint"),a=t("turf-featurecollection"),u=t("turf-linestring"),l=t("turf-square"),c=t("./conrec");e.exports=function(t,e,p,h){for(var d=n(t,e),f=i(t),g=l(f),m=o(g,p),y=[],v=0;v<m.features.length;v++)for(var x=m.features[v],b=0;b<d.features.length;b++){var j=d.features[b];r(x,j)&&(x.properties={},x.properties[e]=s(x,j))}for(var _=Math.sqrt(m.features.length),E=0;_>E;E++){var w=m.features.slice(E*_,(E+1)*_),S=[];w.forEach(function(t){S.push(t.properties?t.properties[e]:0)}),y.push(S)}for(var I=(g[2]-g[0])/_,M=[],C=[],E=0;_>E;E++)M.push(E*I+g[0]),C.push(E*I+g[1]);var L=new c;L.contour(y,0,p,0,p,M,C,h.length,h);var P=L.contourList(),T=a([]);return P.forEach(function(t){if(t.length>2){var n=[];t.forEach(function(t){n.push([t.x,t.y])});var r=u(n);r.properties={},r.properties[e]=t.level,T.features.push(r)}}),T}},{"./conrec":82,"turf-extent":70,"turf-featurecollection":72,"turf-grid":84,"turf-inside":76,"turf-linestring":90,"turf-planepoint":98,"turf-square":115,"turf-tin":118}],84:[function(t,e){var n=t("turf-point");e.exports=function(t,e){for(var r=t[0],o=t[1],i=t[2],s=(t[3],(i-r)/e),a={type:"FeatureCollection",features:[]},u=0;e>=u;u++)for(var l=0;e>=l;l++)a.features.push(n([u*s+r,l*s+o]));return a}},{"turf-point":102}],85:[function(t,e){var n=t("simple-statistics");e.exports=function(t,e,r){var o=[],i=[];return t.features.forEach(function(t){void 0!==t.properties[e]&&o.push(t.properties[e])}),i=n.jenks(o,r)}},{"simple-statistics":86}],86:[function(t,e,n){arguments[4][59][0].apply(n,arguments)},{dup:59}],87:[function(t,e){function n(t,e,n,r,o,i,s,a){var u,l,c,p,h,d={x:null,y:null,onLine1:!1,onLine2:!1};return u=(a-i)*(n-t)-(s-o)*(r-e),0==u?null!=d.x&&null!=d.y&&d:(l=e-i,c=t-o,p=(s-o)*l-(a-i)*c,h=(n-t)*l-(r-e)*c,l=p/u,c=h/u,d.x=t+l*(n-t),d.y=e+l*(r-e),l>0&&1>l&&(d.onLine1=!0),c>0&&1>c&&(d.onLine2=!0),!(!d.onLine1||!d.onLine2)&&[d.x,d.y])}var r=(t("turf-polygon"),t("turf-point")),o=t("turf-featurecollection");e.exports=function(t){var e,i={intersections:o([]),fixed:null};return e="Feature"===t.type?t.geometry:t,e.coordinates.forEach(function(t){e.coordinates.forEach(function(e){for(var o=0;o<t.length-1;o++)for(var s=0;s<e.length-1;s++){var a=n(t[o][0],t[o][1],t[o+1][0],t[o+1][1],e[s][0],e[s][1],e[s+1][0],e[s+1][1]);a&&i.intersections.features.push(r([a[0],a[1]]))}})}),i}},{"turf-featurecollection":72,"turf-point":102,"turf-polygon":103}],88:[function(t,e){var n=t("turf-distance"),r=t("turf-point");e.exports=function(t,e){var o;if("Feature"===t.type)o=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");o=t.geometry.coordinates}for(var i=0,s=0;s<o.length-1;s++)i+=n(r(o[s]),r(o[s+1]),e);return i}},{"turf-distance":60,"turf-point":102}],89:[function(t,e){function n(t,e){for(var n="miles",s=i([1/0,1/0],{dist:1/0}),l=0;l<e.length-1;l++){var c=i(e[l]),p=i(e[l+1]);c.properties.dist=o(t,c,n),p.properties.dist=o(t,p,n);var h=a(c,p),d=u(t,1e3,h+90,n),f=r(t.geometry.coordinates[0],t.geometry.coordinates[1],d.geometry.coordinates[0],d.geometry.coordinates[1],c.geometry.coordinates[0],c.geometry.coordinates[1],p.geometry.coordinates[0],p.geometry.coordinates[1]);f||(d=u(t,1e3,h-90,n),f=r(t.geometry.coordinates[0],t.geometry.coordinates[1],d.geometry.coordinates[0],d.geometry.coordinates[1],c.geometry.coordinates[0],c.geometry.coordinates[1],p.geometry.coordinates[0],p.geometry.coordinates[1])),d.properties.dist=1/0;var g;if(f){var g=i(f);g.properties.dist=o(t,g,n)}c.properties.dist<s.properties.dist&&(s=c,s.properties.index=l),p.properties.dist<s.properties.dist&&(s=p,s.properties.index=l),g&&g.properties.dist<s.properties.dist&&(s=g,s.properties.index=l)}return s}function r(t,e,n,r,o,i,s,a){var u,l,c,p,h,d={x:null,y:null,onLine1:!1,onLine2:!1};return u=(a-i)*(n-t)-(s-o)*(r-e),0==u?null!=d.x&&null!=d.y&&d:(l=e-i,c=t-o,p=(s-o)*l-(a-i)*c,h=(n-t)*l-(r-e)*c,l=p/u,c=h/u,d.x=t+l*(n-t),d.y=e+l*(r-e),l>0&&1>l&&(d.onLine1=!0),c>0&&1>c&&(d.onLine2=!0),!(!d.onLine1||!d.onLine2)&&[d.x,d.y])}var o=t("turf-distance"),i=t("turf-point"),s=t("turf-linestring"),a=t("turf-bearing"),u=t("turf-destination");e.exports=function(t,e,r){var o;if("Feature"===r.type)o=r.geometry.coordinates;else{if("LineString"!==r.type)throw new Error("input must be a LineString Feature or Geometry");o=r.geometry.coordinates}var i,a=n(t,o),u=n(e,o);i=a.properties.index<=u.properties.index?[a,u]:[u,a];for(var l=s([i[0].geometry.coordinates],{}),c=i[0].properties.index+1;c<i[1].properties.index+1;c++)l.geometry.coordinates.push(o[c]);return l.geometry.coordinates.push(i[1].geometry.coordinates),l}},{"turf-bearing":13,"turf-destination":57,"turf-distance":60,"turf-linestring":90,"turf-point":102}],90:[function(t,e){e.exports=function(t,e){if(!t)throw new Error("No coordinates passed");return{type:"Feature",geometry:{type:"LineString",coordinates:t},properties:e||{}}}},{}],91:[function(t,e){function n(t){for(var e,n=0;n<t.length;n++)(t[n]>e||void 0===e)&&(e=t[n]);return e}var r=t("turf-inside");e.exports=function(t,e,o,i){return t.features.forEach(function(t){t.properties||(t.properties={});var s=[];e.features.forEach(function(e){r(e,t)&&s.push(e.properties[o])}),t.properties[i]=n(s)}),t}},{"turf-inside":76}],92:[function(t,e){function n(t){if(0===t.length)return null;var e=t.slice().sort(function(t,e){return t-e});if(e.length%2===1)return e[(e.length-1)/2];var n=e[e.length/2-1],r=e[e.length/2];return(n+r)/2}var r=t("turf-inside");e.exports=function(t,e,o,i){return t.features.forEach(function(t){t.properties||(t.properties={});var s=[];e.features.forEach(function(e){r(e,t)&&s.push(e.properties[o])}),t.properties[i]=n(s)}),t}},{"turf-inside":76}],93:[function(t,e){var n=t("clone"),r=t("turf-union");e.exports=function(t){for(var e=n(t.features[0]),o=t.features,i=0,s=o.length;s>i;i++){var a=o[i];a.geometry&&(e=r(e,a))}return e}},{clone:94,"turf-union":120}],94:[function(t,e){(function(t){function n(t){return Object.prototype.toString.call(t)}function r(e,n,r,i){function s(e,r){if(null===e)return null;if(0==r)return e;var p,h;if("object"!=("undefined"==typeof e?"undefined":u(e)))return e;if(o.isArray(e))p=[];else if(o.isRegExp(e))p=new RegExp(e.source,o.getRegExpFlags(e)),e.lastIndex&&(p.lastIndex=e.lastIndex);else if(o.isDate(e))p=new Date(e.getTime());else{if(c&&t.isBuffer(e))return p=new t(e.length),e.copy(p),p;"undefined"==typeof i?(h=Object.getPrototypeOf(e),p=Object.create(h)):(p=Object.create(i),h=i)}if(n){var d=a.indexOf(e);if(-1!=d)return l[d];a.push(e),l.push(p)}for(var f in e){var g;h&&(g=Object.getOwnPropertyDescriptor(h,f)),g&&null==g.set||(p[f]=s(e[f],r-1))}return p}var a=[],l=[],c="undefined"!=typeof t;return"undefined"==typeof n&&(n=!0),"undefined"==typeof r&&(r=1/0),s(e,r)}var o={isArray:function(t){return Array.isArray(t)||"object"==("undefined"==typeof t?"undefined":u(t))&&"[object Array]"===n(t)},isDate:function(t){return"object"==("undefined"==typeof t?"undefined":u(t))&&"[object Date]"===n(t)},isRegExp:function(t){return"object"==("undefined"==typeof t?"undefined":u(t))&&"[object RegExp]"===n(t)},getRegExpFlags:function(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}};"object"==("undefined"==typeof e?"undefined":u(e))&&(e.exports=r),r.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e}}).call(this,t("buffer").Buffer)},{buffer:2}],95:[function(t,e){var n=t("turf-point");e.exports=function(t,e){if(null===t||null===e)throw new Error("Less than two points passed.");var r=t.geometry.coordinates[0],o=e.geometry.coordinates[0],i=t.geometry.coordinates[1],s=e.geometry.coordinates[1],a=r+o,u=a/2,l=i+s,c=l/2;return n([u,c])}},{"turf-point":102}],96:[function(t,e){function n(t){for(var e,n=0;n<t.length;n++)(t[n]<e||void 0===e)&&(e=t[n]);return e}var r=t("turf-inside");e.exports=function(t,e,o,i){return t.features.forEach(function(t){t.properties||(t.properties={});var s=[];e.features.forEach(function(e){r(e,t)&&s.push(e.properties[o])}),t.properties[i]=n(s)}),t}},{"turf-inside":76}],97:[function(t,e){var n=t("turf-distance");e.exports=function(t,e){var r;return e.features.forEach(function(e){if(r){var o=n(t,e,"miles");o<r.properties.distance&&(r=e,r.properties.distance=o)}else{r=e;var o=n(t,e,"miles");r.properties.distance=o}}),delete r.properties.distance,r}},{"turf-distance":60}],98:[function(t,e){e.exports=function(t,e){var n=t.geometry.coordinates[0],r=t.geometry.coordinates[1],o=e.geometry.coordinates[0][0][0],i=e.geometry.coordinates[0][0][1],s=e.properties.a,a=e.geometry.coordinates[0][1][0],u=e.geometry.coordinates[0][1][1],l=e.properties.b,c=e.geometry.coordinates[0][2][0],p=e.geometry.coordinates[0][2][1],h=e.properties.c,d=(h*(n-o)*(r-u)+s*(n-a)*(r-p)+l*(n-c)*(r-i)-l*(n-o)*(r-p)-h*(n-a)*(r-i)-s*(n-c)*(r-u))/((n-o)*(r-u)+(n-a)*(r-p)+(n-c)*(r-i)-(n-o)*(r-p)-(n-a)*(r-i)-(n-c)*(r-u));return d}},{}],99:[function(t,e){var n=t("turf-point"),r=t("turf-featurecollection"),o=t("turf-distance");e.exports=function(t,e,i){for(var s=r([]),a=e/o(n([t[0],t[1]]),n([t[2],t[1]]),i),u=a*(t[2]-t[0]),l=e/o(n([t[0],t[1]]),n([t[0],t[3]]),i),c=l*(t[3]-t[1]),p=t[0];p<=t[2];){for(var h=t[1];h<=t[3];)s.features.push(n([p,h])),h+=c;p+=u}return s}},{"turf-distance":60,"turf-featurecollection":72,"turf-point":102}],100:[function(t,e){function n(t,e){for(var n="miles",u=i([1/0,1/0],{dist:1/0}),l=0;l<e.length-1;l++){var c=i(e[l]),p=i(e[l+1]);c.properties.dist=o(t,c,n),p.properties.dist=o(t,p,n);var h=s(c,p),d=a(t,1e3,h+90,n),f=r(t.geometry.coordinates[0],t.geometry.coordinates[1],d.geometry.coordinates[0],d.geometry.coordinates[1],c.geometry.coordinates[0],c.geometry.coordinates[1],p.geometry.coordinates[0],p.geometry.coordinates[1]);f||(d=a(t,1e3,h-90,n),f=r(t.geometry.coordinates[0],t.geometry.coordinates[1],d.geometry.coordinates[0],d.geometry.coordinates[1],c.geometry.coordinates[0],c.geometry.coordinates[1],p.geometry.coordinates[0],p.geometry.coordinates[1])),d.properties.dist=1/0;var g;if(f){var g=i(f);g.properties.dist=o(t,g,n)}c.properties.dist<u.properties.dist&&(u=c,u.properties.index=l),p.properties.dist<u.properties.dist&&(u=p,u.properties.index=l),g&&g.properties.dist<u.properties.dist&&(u=g,u.properties.index=l)}return u}function r(t,e,n,r,o,i,s,a){var u,l,c,p,h,d={x:null,y:null,onLine1:!1,onLine2:!1};return u=(a-i)*(n-t)-(s-o)*(r-e),0==u?null!=d.x&&null!=d.y&&d:(l=e-i,c=t-o,p=(s-o)*l-(a-i)*c,h=(n-t)*l-(r-e)*c,l=p/u,c=h/u,d.x=t+l*(n-t),d.y=e+l*(r-e),l>0&&1>l&&(d.onLine1=!0),c>0&&1>c&&(d.onLine2=!0),!(!d.onLine1||!d.onLine2)&&[d.x,d.y])}var o=t("turf-distance"),i=t("turf-point"),s=(t("turf-linestring"),t("turf-bearing")),a=t("turf-destination");e.exports=function(t,e){var r;if("Feature"===t.type)r=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");r=t.geometry.coordinates}return n(e,r)}},{"turf-bearing":13,"turf-destination":57,"turf-distance":60,"turf-linestring":90,"turf-point":102}],101:[function(t,e){function n(t,e,n,r,o,i){var s=Math.sqrt((o-n)*(o-n)+(i-r)*(i-r)),a=Math.sqrt((t-n)*(t-n)+(e-r)*(e-r)),u=Math.sqrt((o-t)*(o-t)+(i-e)*(i-e));return s===a+u||void 0}var r=t("turf-featurecollection"),o=t("turf-center"),i=t("turf-distance"),s=t("turf-inside"),a=t("turf-explode");e.exports=function(t){"FeatureCollection"!=t.type&&("Feature"!=t.type&&(t={type:"Feature",geometry:t,properties:{}}),t=r([t]));for(var e=o(t),u=!1,l=0;!u&&l<t.features.length;){var c=t.features[l].geometry;if("Point"===c.type)e.geometry.coordinates[0]===c.coordinates[0]&&e.geometry.coordinates[1]===c.coordinates[1]&&(u=!0);else if("MultiPoint"===c.type)for(var p=!1,h=0;!p&&h<c.coordinates.length;)e.geometry.coordinates[0]===c.coordinates[h][0]&&e.geometry.coordinates[1]===c.coordinates[h][1]&&(u=!0,p=!0),h++;else if("LineString"===c.type)for(var d=!1,h=0;!d&&h<c.coordinates.length-1;){var f=e.geometry.coordinates[0],g=e.geometry.coordinates[1],m=c.coordinates[h][0],y=c.coordinates[h][1],v=c.coordinates[h+1][0],x=c.coordinates[h+1][1];n(f,g,m,y,v,x)&&(d=!0,u=!0),h++}else if("MultiLineString"===c.type)for(var b=!1,j=0;!b&&j<c.coordinates.length;){for(var d=!1,h=0,_=c.coordinates[j];!d&&h<_.length-1;){var f=e.geometry.coordinates[0],g=e.geometry.coordinates[1],m=_[h][0],y=_[h][1],v=_[h+1][0],x=_[h+1][1];n(f,g,m,y,v,x)&&(d=!0,u=!0),h++}j++}else if("Polygon"===c.type||"MultiPolygon"===c.type){var E={type:"Feature",geometry:c,properties:{}};s(e,E)&&(u=!0)}l++}if(u)return e;for(var w=r([]),l=0;l<t.features.length;l++)w.features=w.features.concat(a(t.features[l]).features);for(var S,I=1/0,l=0;l<w.features.length;l++){var M=i(e,w.features[l],"miles");I>M&&(I=M,S=w.features[l])}return S}},{"turf-center":21,"turf-distance":60,"turf-explode":68,"turf-featurecollection":72,"turf-inside":76}],102:[function(t,e){var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};e.exports=function(t,e){if(!n(t))throw new Error("Coordinates must be an array");if(t.length<2)throw new Error("Coordinates must be at least 2 numbers long");return{type:"Feature",geometry:{type:"Point",coordinates:t},properties:e||{}}}},{}],103:[function(t,e){e.exports=function(t,e){if(null===t)throw new Error("No coordinates passed");for(var n=0;n<t.length;n++)for(var r=t[n],o=0;o<r[r.length-1].length;o++){if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(r[r.length-1][o]!==r[0][o])throw new Error("First and last Position are not equivalent.")}var i={type:"Feature",geometry:{type:"Polygon",coordinates:t},properties:e};return i.properties||(i.properties={}),i}},{}],104:[function(t,e){var n=t("simple-statistics");e.exports=function(t,e,r){var o=[],i=[];return t.features.forEach(function(t){o.push(t.properties[e])}),r.forEach(function(t){i.push(n.quantile(o,.01*t))}),i}},{"simple-statistics":105}],105:[function(t,e,n){arguments[4][59][0].apply(n,arguments)},{dup:59}],106:[function(t,e){var n=t("geojson-random");e.exports=function(t,e,r){switch(r=r||{},e=e||1,t){case"point":case"points":case void 0:return n.point(e,r.bbox);case"polygon":case"polygons":return n.polygon(e,r.num_vertices,r.max_radial_length,r.bbox);default:throw new Error("Unknown type given: valid options are points and polygons")}}},{"geojson-random":107}],107:[function(t,e){function n(t){return t?l(t):[s(),a()]}function r(t){return function(e){return[e[0]+t[0],e[1]+t[1]]}}function o(){return Math.random()-.5}function s(){return 360*o()}function a(){return 180*o()}function u(t){return{type:"Point",coordinates:t||[s(),a()]}}function l(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}function c(t){return{type:"Polygon",coordinates:t}}function p(t){return{type:"Feature",geometry:t,properties:{}}}function h(t){return{type:"FeatureCollection",features:t}}e.exports=function(){throw new Error("call .point() or .polygon() instead")},e.exports.position=n,e.exports.point=function(t,e){var r=[];for(i=0;i<t;i++)r.push(p(e?u(n(e)):u()));return h(r)},e.exports.polygon=function(t,e,o,s){function a(t,e,n){n[e]=e>0?t+n[e-1]:t}function u(t){t=2*t*Math.PI/f[f.length-1];var e=Math.random();d.push([e*o*Math.sin(t),e*o*Math.cos(t)])}"number"!=typeof e&&(e=10),"number"!=typeof o&&(o=10);var l=[];for(i=0;i<t;i++){var d=[],f=Array.apply(null,new Array(e+1)).map(Math.random);f.forEach(a),f.forEach(u),d[d.length-1]=d[0],d=d.map(r(n(s))),l.push(p(c([d])))}return h(l)}},{}],108:[function(t,e){var n=t("turf-featurecollection");t("./index.js"),e.exports=function(t,e,r,o){var i=n([]);return t.features.forEach(function(t){for(var n=0;n<o.length;n++)t.properties[e]>=o[n][0]&&t.properties[e]<=o[n][1]&&(t.properties[r]=o[n][2]);i.features.push(t)}),i}},{"./index.js":108,"turf-featurecollection":72}],109:[function(t,e){var n=t("turf-featurecollection");e.exports=function(t,e,r){for(var o=n([]),i=0;i<t.features.length;i++)t.features[i].properties[e]!=r&&o.features.push(t.features[i]);return o}},{"turf-featurecollection":72}],110:[function(t,e){function n(t,e){for(var n,r,o=t.slice(0),i=t.length,s=i-e;i-- >s;)r=Math.floor((i+1)*Math.random()),n=o[r],o[r]=o[i],o[i]=n;return o.slice(s)}var r=t("turf-featurecollection");e.exports=function(t,e){var o=r(n(t.features,e));return o}},{"turf-featurecollection":72}],111:[function(t,e){function n(t,e){return{type:"Feature",geometry:t,properties:e}}var r=t("simplify-js");e.exports=function(t,e,o){if("LineString"===t.geometry.type){var i={type:"LineString",coordinates:[]},s=t.geometry.coordinates.map(function(t){return{x:t[0],y:t[1]}});return i.coordinates=r(s,e,o).map(function(t){return[t.x,t.y]}),n(i,t.properties)}if("Polygon"===t.geometry.type){var a={type:"Polygon",coordinates:[]};return t.geometry.coordinates.forEach(function(t){var n=t.map(function(t){return{x:t[0],y:t[1]}}),i=r(n,e,o).map(function(t){return[t.x,t.y]});a.coordinates.push(i)}),n(a,t.properties)}}},{"simplify-js":112}],112:[function(e,n){!function(){function e(t,e){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function r(t,e,n){var r=e.x,o=e.y,i=n.x-r,s=n.y-o;if(0!==i||0!==s){var a=((t.x-r)*i+(t.y-o)*s)/(i*i+s*s);a>1?(r=n.x,o=n.y):a>0&&(r+=i*a,o+=s*a)}return i=t.x-r,s=t.y-o,i*i+s*s}function o(t,n){for(var r,o=t[0],i=[o],s=1,a=t.length;a>s;s++)r=t[s],e(r,o)>n&&(i.push(r),o=r);return o!==r&&i.push(r),i}function i(t,e){var n,o,i,s,a=t.length,u="undefined"!=typeof Uint8Array?Uint8Array:Array,l=new u(a),c=0,p=a-1,h=[],d=[];for(l[c]=l[p]=1;p;){for(o=0,n=c+1;p>n;n++)i=r(t[n],t[c],t[p]),i>o&&(s=n,o=i);o>e&&(l[s]=1,h.push(c,s,s,p)),p=h.pop(),c=h.pop()}for(n=0;a>n;n++)l[n]&&d.push(t[n]);return d}function s(t,e,n){var r=void 0!==e?e*e:1;return t=n?t:o(t,r),t=i(t,r)}"function"==typeof t&&t.amd?t(function(){return s}):"undefined"!=typeof n?n.exports=s:"undefined"!=typeof self?self.simplify=s:window.simplify=s}()},{}],113:[function(t,e){e.exports=function(t,e){var n=t[2]-t[0],r=t[3]-t[1],o=n*e,i=r*e,s=o-n,a=i-r,u=t[0]-s/2,l=t[1]-a/2,c=s/2+t[2],p=a/2+t[3],h=[u,l,c,p];return h}},{}],114:[function(t,e){var n=t("turf-featurecollection"),r=t("turf-point"),o=t("turf-polygon"),i=t("turf-distance");e.exports=function(t,e,s){for(var a=n([]),u=e/i(r([t[0],t[1]]),r([t[2],t[1]]),s),l=u*(t[2]-t[0]),c=e/i(r([t[0],t[1]]),r([t[0],t[3]]),s),p=c*(t[3]-t[1]),h=t[0];h<=t[2];){for(var d=t[1];d<=t[3];){var f=o([[[h,d],[h,d+p],[h+l,d+p],[h+l,d],[h,d]]]);a.features.push(f),d+=p}h+=l}return a}},{"turf-distance":60,"turf-featurecollection":72,"turf-point":102,"turf-polygon":103}],115:[function(t,e){var n=t("turf-midpoint"),r=t("turf-point"),o=t("turf-distance");e.exports=function(t){var e=[0,0,0,0],i=r([t[0],t[1]]),s=r([t[0],t[3]]),a=(r([t[2],t[3]]),r([t[2],t[1]])),u=o(i,a,"miles"),l=o(i,s,"miles");if(u>=l){e[0]=t[0],e[2]=t[2];var c=n(i,s);return e[1]=c.geometry.coordinates[1]-(t[2]-t[0])/2,e[3]=c.geometry.coordinates[1]+(t[2]-t[0])/2,e}e[1]=t[1],e[3]=t[3];var p=n(i,a);return e[0]=p.geometry.coordinates[0]-(t[3]-t[1])/2,e[2]=p.geometry.coordinates[0]+(t[3]-t[1])/2,e}},{"turf-distance":60,"turf-midpoint":95,"turf-point":102}],116:[function(t,e){function n(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e}var r=t("turf-inside");e.exports=function(t,e,o,i){return t.features.forEach(function(t){t.properties||(t.properties={});var s=[];e.features.forEach(function(e){r(e,t)&&s.push(e.properties[o])}),t.properties[i]=n(s)}),t}},{"turf-inside":76}],117:[function(t,e){var n=t("turf-inside");e.exports=function(t,e,r,o){return t=JSON.parse(JSON.stringify(t)),e=JSON.parse(JSON.stringify(e)),t.features.forEach(function(t){t.properties||(t.properties={}),e.features.forEach(function(e){if(void 0===t.properties[o]){var i=n(t,e);i&&(t.properties[o]=e.properties[r])}})}),t}},{"turf-inside":76}],118:[function(t,e){function n(t,e,n){this.a=t,this.b=e,this.c=n;var r,o,i,s,a=e.x-t.x,u=e.y-t.y,l=n.x-t.x,c=n.y-t.y,p=a*(t.x+e.x)+u*(t.y+e.y),h=l*(t.x+n.x)+c*(t.y+n.y),d=2*(a*(n.y-e.y)-u*(n.x-e.x));Math.abs(d)<1e-6?(r=Math.min(t.x,e.x,n.x),o=Math.min(t.y,e.y,n.y),i=.5*(Math.max(t.x,e.x,n.x)-r),s=.5*(Math.max(t.y,e.y,n.y)-o),this.x=r+i,this.y=o+s,this.r=i*i+s*s):(this.x=(c*p-u*h)/d,this.y=(a*h-l*p)/d,i=this.x-t.x,s=this.y-t.y,this.r=i*i+s*s)}function r(t,e){return e.x-t.x}function o(t){var e,n,r,o,i,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],r=s;r;)if(i=t[--r],o=t[--r],e===o&&n===i||e===i&&n===o){t.splice(s,2),t.splice(r,2),s-=2;continue t}}function i(t){if(t.length<3)return[];t.sort(r);for(var e=t.length-1,i=t[e].x,s=t[0].x,a=t[e].y,u=a;e--;)t[e].y<a&&(a=t[e].y),t[e].y>u&&(u=t[e].y);var l,c,p,h=s-i,d=u-a,f=h>d?h:d,g=.5*(s+i),m=.5*(u+a),y=[new n({x:g-20*f,y:m-f,__sentinel:!0},{x:g,y:m+20*f,__sentinel:!0},{x:g+20*f,y:m-f,__sentinel:!0})],v=[],x=[];for(e=t.length;e--;){for(x.length=0,l=y.length;l--;)h=t[e].x-y[l].x,h>0&&h*h>y[l].r?(v.push(y[l]),y.splice(l,1)):(d=t[e].y-y[l].y,h*h+d*d>y[l].r||(x.push(y[l].a,y[l].b,y[l].b,y[l].c,y[l].c,y[l].a),y.splice(l,1)));for(o(x),l=x.length;l;)p=x[--l],c=x[--l],y.push(new n(c,p,t[e]))}for(Array.prototype.push.apply(v,y),e=v.length;e--;)(v[e].a.__sentinel||v[e].b.__sentinel||v[e].c.__sentinel)&&v.splice(e,1);return v}var s=t("turf-polygon"),a=t("turf-featurecollection");e.exports=function(t,e){return a(i(t.features.map(function(t){var n={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e&&(n.z=t.properties[e]),n})).map(function(t){return s([[[t.a.x,t.a.y],[t.b.x,t.b.y],[t.c.x,t.c.y],[t.a.x,t.a.y]]],{a:t.a.z,b:t.b.z,c:t.c.z})}))}},{"turf-featurecollection":72,"turf-polygon":103}],119:[function(t,e){var n=t("turf-featurecollection"),r=t("turf-point"),o=t("turf-polygon"),i=t("turf-distance");e.exports=function(t,e,s){for(var a=n([]),u=e/i(r([t[0],t[1]]),r([t[2],t[1]]),s),l=u*(t[2]-t[0]),c=e/i(r([t[0],t[1]]),r([t[0],t[3]]),s),p=c*(t[3]-t[1]),h=0,d=t[0];d<=t[2];){for(var f=0,g=t[1];g<=t[3];){if(h%2===0&&f%2===0){var m=o([[[d,g],[d,g+p],[d+l,g],[d,g]]]);a.features.push(m);var y=o([[[d,g+p],[d+l,g+p],[d+l,g],[d,g+p]]]);a.features.push(y)}else if(h%2===0&&f%2===1){var m=o([[[d,g],[d+l,g+p],[d+l,g],[d,g]]]);a.features.push(m);var y=o([[[d,g],[d,g+p],[d+l,g+p],[d,g]]]);a.features.push(y)}else if(f%2===0&&h%2===1){var m=o([[[d,g],[d,g+p],[d+l,g+p],[d,g]]]);a.features.push(m);var y=o([[[d,g],[d+l,g+p],[d+l,g],[d,g]]]);a.features.push(y)}else if(f%2===1&&h%2===1){var m=o([[[d,g],[d,g+p],[d+l,g],[d,g]]]);a.features.push(m);var y=o([[[d,g+p],[d+l,g+p],[d+l,g],[d,g+p]]]);a.features.push(y)}g+=p,f++}h++,d+=l}return a}},{"turf-distance":60,"turf-featurecollection":72,"turf-point":102,"turf-polygon":103}],120:[function(t,e){var n=t("jsts");e.exports=function(t,e){var r=new n.io.GeoJSONReader,o=r.read(JSON.stringify(t.geometry)),i=r.read(JSON.stringify(e.geometry)),s=o.union(i),a=new n.io.GeoJSONParser;return s=a.write(s),{type:"Feature",geometry:s,properties:t.properties}}},{jsts:121}],121:[function(t,e,n){arguments[4][17][0].apply(n,arguments)},{"./lib/jsts":122,dup:17,"javascript.util":124}],122:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],123:[function(t,e,n){arguments[4][19][0].apply(n,arguments)},{dup:19}],124:[function(t,e,n){arguments[4][20][0].apply(n,arguments)},{"./dist/javascript.util-node.min.js":123,dup:20}],125:[function(t,e){var n=t("simple-statistics"),r=t("turf-inside");e.exports=function(t,e,o,i){return t.features.forEach(function(t){t.properties||(t.properties={});var s=[];e.features.forEach(function(e){r(e,t)&&s.push(e.properties[o])}),t.properties[i]=n.variance(s)}),t}},{"simple-statistics":126,"turf-inside":76}],126:[function(t,e,n){arguments[4][59][0].apply(n,arguments)},{dup:59}],127:[function(t,e){var n=t("turf-inside"),r=t("turf-featurecollection");e.exports=function(t,e){for(var o=r([]),i=0;i<e.features.length;i++)for(var s=0;s<t.features.length;s++){var a=n(t.features[s],e.features[i]);a&&o.features.push(t.features[s])}return o}},{"turf-featurecollection":72,"turf-inside":76}]},{},[1])(1)})}).call(e,function(){return this}())},function(t,e,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===s||e===p?62:e===a||e===h?63:e<u?-1:e<u+10?e-u+26+26:e<c+26?e-c:e<l+26?e-l+26:void 0}function n(t){function n(t){l[p++]=t}var r,o,s,a,u,l;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=t.length;u="="===t.charAt(c-2)?2:"="===t.charAt(c-1)?1:0,l=new i(3*t.length/4-u),s=u>0?t.length-4:t.length;var p=0;for(r=0,o=0;r<s;r+=4,o+=3)a=e(t.charAt(r))<<18|e(t.charAt(r+1))<<12|e(t.charAt(r+2))<<6|e(t.charAt(r+3)),n((16711680&a)>>16),n((65280&a)>>8),n(255&a);return 2===u?(a=e(t.charAt(r))<<2|e(t.charAt(r+1))>>4,n(255&a)):1===u&&(a=e(t.charAt(r))<<10|e(t.charAt(r+1))<<4|e(t.charAt(r+2))>>2,n(a>>8&255),n(255&a)),l}function o(t){function e(t){return r.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var o,i,s,a=t.length%3,u="";for(o=0,s=t.length-a;o<s;o+=3)i=(t[o]<<16)+(t[o+1]<<8)+t[o+2],u+=n(i);switch(a){case 1:i=t[t.length-1],u+=e(i>>2),u+=e(i<<4&63),u+="==";break;case 2:i=(t[t.length-2]<<8)+t[t.length-1],u+=e(i>>10),u+=e(i>>4&63),u+=e(i<<2&63),u+="="}return u}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),u="0".charCodeAt(0),l="a".charCodeAt(0),c="A".charCodeAt(0),p="-".charCodeAt(0),h="_".charCodeAt(0);t.toByteArray=n,t.fromByteArray=o}(e)},function(t,e){},104,104,function(t,e,n){t.exports=n.p+"84287d09b8053c6fa598893b8910786a.svg"},function(t,e){e.read=function(t,e,n,r,o){var i,s,a=8*o-r-1,u=(1<<a)-1,l=u>>1,c=-7,p=n?o-1:0,h=n?-1:1,d=t[e+p];for(p+=h,i=d&(1<<-c)-1,d>>=-c,c+=a;c>0;i=256*i+t[e+p],p+=h,c-=8);for(s=i&(1<<-c)-1,i>>=-c,c+=r;c>0;s=256*s+t[e+p],p+=h,c-=8);if(0===i)i=1-l;else{if(i===u)return s?NaN:(d?-1:1)*(1/0);s+=Math.pow(2,r),i-=l}return(d?-1:1)*s*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var s,a,u,l=8*i-o-1,c=(1<<l)-1,p=c>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,f=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+p>=1?h/u:h*Math.pow(2,1-p),e*u>=2&&(s++,u/=2),s+p>=c?(a=0,s=c):s+p>=1?(a=(e*u-1)*Math.pow(2,o),s+=p):(a=e*Math.pow(2,p-1)*Math.pow(2,o),s=0));o>=8;t[n+d]=255&a,d+=f,a/=256,o-=8);for(s=s<<o|a,l+=o;l>0;t[n+d]=255&s,d+=f,s/=256,l-=8);t[n+d-f]|=128*g}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){"use strict";var r=n(5),o=n(51),i={focusDOMComponent:function(){o(r.getNodeFromInstance(this))}};t.exports=i},function(t,e,n){"use strict";function r(){var t=window.opera;return"object"==typeof t&&"function"==typeof t.version&&parseInt(t.version(),10)<=12}function o(t){return(t.ctrlKey||t.altKey||t.metaKey)&&!(t.ctrlKey&&t.altKey)}function i(t){switch(t){case C.topCompositionStart:return L.compositionStart;case C.topCompositionEnd:return L.compositionEnd;case C.topCompositionUpdate:return L.compositionUpdate}}function s(t,e){return t===C.topKeyDown&&e.keyCode===j}function a(t,e){switch(t){case C.topKeyUp:return b.indexOf(e.keyCode)!==-1;case C.topKeyDown:return e.keyCode!==j;case C.topKeyPress:case C.topMouseDown:case C.topBlur:return!0;default:
return!1}}function u(t){var e=t.detail;return"object"==typeof e&&"data"in e?e.data:null}function l(t,e,n,r){var o,l;if(_?o=i(t):T?a(t,n)&&(o=L.compositionEnd):s(t,n)&&(o=L.compositionStart),!o)return null;S&&(T||o!==L.compositionStart?o===L.compositionEnd&&T&&(l=T.getData()):T=m.getPooled(r));var c=y.getPooled(o,e,n,r);if(l)c.data=l;else{var p=u(n);null!==p&&(c.data=p)}return f.accumulateTwoPhaseDispatches(c),c}function c(t,e){switch(t){case C.topCompositionEnd:return u(e);case C.topKeyPress:var n=e.which;return n!==I?null:(P=!0,M);case C.topTextInput:var r=e.data;return r===M&&P?null:r;default:return null}}function p(t,e){if(T){if(t===C.topCompositionEnd||a(t,e)){var n=T.getData();return m.release(T),T=null,n}return null}switch(t){case C.topPaste:return null;case C.topKeyPress:return e.which&&!o(e)?String.fromCharCode(e.which):null;case C.topCompositionEnd:return S?null:e.data;default:return null}}function h(t,e,n,r){var o;if(o=w?c(t,n):p(t,n),!o)return null;var i=v.getPooled(L.beforeInput,e,n,r);return i.data=o,f.accumulateTwoPhaseDispatches(i),i}var d=n(11),f=n(20),g=n(6),m=n(117),y=n(154),v=n(157),x=n(13),b=[9,13,27,32],j=229,_=g.canUseDOM&&"CompositionEvent"in window,E=null;g.canUseDOM&&"documentMode"in document&&(E=document.documentMode);var w=g.canUseDOM&&"TextEvent"in window&&!E&&!r(),S=g.canUseDOM&&(!_||E&&E>8&&E<=11),I=32,M=String.fromCharCode(I),C=d.topLevelTypes,L={beforeInput:{phasedRegistrationNames:{bubbled:x({onBeforeInput:null}),captured:x({onBeforeInputCapture:null})},dependencies:[C.topCompositionEnd,C.topKeyPress,C.topTextInput,C.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:x({onCompositionEnd:null}),captured:x({onCompositionEndCapture:null})},dependencies:[C.topBlur,C.topCompositionEnd,C.topKeyDown,C.topKeyPress,C.topKeyUp,C.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:x({onCompositionStart:null}),captured:x({onCompositionStartCapture:null})},dependencies:[C.topBlur,C.topCompositionStart,C.topKeyDown,C.topKeyPress,C.topKeyUp,C.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:x({onCompositionUpdate:null}),captured:x({onCompositionUpdateCapture:null})},dependencies:[C.topBlur,C.topCompositionUpdate,C.topKeyDown,C.topKeyPress,C.topKeyUp,C.topMouseDown]}},P=!1,T=null,N={eventTypes:L,extractEvents:function(t,e,n,r){return[l(t,e,n,r),h(t,e,n,r)]}};t.exports=N},function(t,e,n){"use strict";var r=n(55),o=n(6),i=(n(7),n(86),n(164)),s=n(93),a=n(97),u=(n(3),a(function(t){return s(t)})),l=!1,c="cssFloat";if(o.canUseDOM){var p=document.createElement("div").style;try{p.font=""}catch(h){l=!0}void 0===document.documentElement.style.cssFloat&&(c="styleFloat")}var d={createMarkupForStyles:function(t,e){var n="";for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];null!=o&&(n+=u(r)+":",n+=i(r,o,e)+";")}return n||null},setValueForStyles:function(t,e,n){var o=t.style;for(var s in e)if(e.hasOwnProperty(s)){var a=i(s,e[s],n);if("float"!==s&&"cssFloat"!==s||(s=c),a)o[s]=a;else{var u=l&&r.shorthandPropertyExpansions[s];if(u)for(var p in u)o[p]="";else o[s]=""}}}};t.exports=d},function(t,e,n){"use strict";function r(t){var e=t.nodeName&&t.nodeName.toLowerCase();return"select"===e||"input"===e&&"file"===t.type}function o(t){var e=w.getPooled(P.change,N,t,S(t));b.accumulateTwoPhaseDispatches(e),E.batchedUpdates(i,e)}function i(t){x.enqueueEvents(t),x.processEventQueue(!1)}function s(t,e){T=t,N=e,T.attachEvent("onchange",o)}function a(){T&&(T.detachEvent("onchange",o),T=null,N=null)}function u(t,e){if(t===L.topChange)return e}function l(t,e,n){t===L.topFocus?(a(),s(e,n)):t===L.topBlur&&a()}function c(t,e){T=t,N=e,R=t.value,A=Object.getOwnPropertyDescriptor(t.constructor.prototype,"value"),Object.defineProperty(T,"value",F),T.attachEvent?T.attachEvent("onpropertychange",h):T.addEventListener("propertychange",h,!1)}function p(){T&&(delete T.value,T.detachEvent?T.detachEvent("onpropertychange",h):T.removeEventListener("propertychange",h,!1),T=null,N=null,R=null,A=null)}function h(t){if("value"===t.propertyName){var e=t.srcElement.value;e!==R&&(R=e,o(t))}}function d(t,e){if(t===L.topInput)return e}function f(t,e,n){t===L.topFocus?(p(),c(e,n)):t===L.topBlur&&p()}function g(t,e){if((t===L.topSelectionChange||t===L.topKeyUp||t===L.topKeyDown)&&T&&T.value!==R)return R=T.value,N}function m(t){return t.nodeName&&"input"===t.nodeName.toLowerCase()&&("checkbox"===t.type||"radio"===t.type)}function y(t,e){if(t===L.topClick)return e}var v=n(11),x=n(19),b=n(20),j=n(6),_=n(5),E=n(10),w=n(12),S=n(45),I=n(46),M=n(82),C=n(13),L=v.topLevelTypes,P={change:{phasedRegistrationNames:{bubbled:C({onChange:null}),captured:C({onChangeCapture:null})},dependencies:[L.topBlur,L.topChange,L.topClick,L.topFocus,L.topInput,L.topKeyDown,L.topKeyUp,L.topSelectionChange]}},T=null,N=null,R=null,A=null,D=!1;j.canUseDOM&&(D=I("change")&&(!("documentMode"in document)||document.documentMode>8));var O=!1;j.canUseDOM&&(O=I("input")&&(!("documentMode"in document)||document.documentMode>11));var F={get:function(){return A.get.call(this)},set:function(t){R=""+t,A.set.call(this,t)}},k={eventTypes:P,extractEvents:function(t,e,n,o){var i,s,a=e?_.getNodeFromInstance(e):window;if(r(a)?D?i=u:s=l:M(a)?O?i=d:(i=g,s=f):m(a)&&(i=y),i){var c=i(t,e);if(c){var p=w.getPooled(P.change,c,n,o);return p.type="change",b.accumulateTwoPhaseDispatches(p),p}}s&&s(t,a,e)}};t.exports=k},function(t,e,n){"use strict";var r=n(2),o=n(16),i=n(6),s=n(89),a=n(8),u=(n(1),{dangerouslyReplaceNodeWithMarkup:function(t,e){if(i.canUseDOM?void 0:r("56"),e?void 0:r("57"),"HTML"===t.nodeName?r("58"):void 0,"string"==typeof e){var n=s(e,a)[0];t.parentNode.replaceChild(n,t)}else o.replaceChildWithTree(t,e)}});t.exports=u},function(t,e,n){"use strict";var r=n(13),o=[r({ResponderEventPlugin:null}),r({SimpleEventPlugin:null}),r({TapEventPlugin:null}),r({EnterLeaveEventPlugin:null}),r({ChangeEventPlugin:null}),r({SelectEventPlugin:null}),r({BeforeInputEventPlugin:null})];t.exports=o},function(t,e,n){"use strict";var r=n(11),o=n(20),i=n(5),s=n(28),a=n(13),u=r.topLevelTypes,l={mouseEnter:{registrationName:a({onMouseEnter:null}),dependencies:[u.topMouseOut,u.topMouseOver]},mouseLeave:{registrationName:a({onMouseLeave:null}),dependencies:[u.topMouseOut,u.topMouseOver]}},c={eventTypes:l,extractEvents:function(t,e,n,r){if(t===u.topMouseOver&&(n.relatedTarget||n.fromElement))return null;if(t!==u.topMouseOut&&t!==u.topMouseOver)return null;var a;if(r.window===r)a=r;else{var c=r.ownerDocument;a=c?c.defaultView||c.parentWindow:window}var p,h;if(t===u.topMouseOut){p=e;var d=n.relatedTarget||n.toElement;h=d?i.getClosestInstanceFromNode(d):null}else p=null,h=e;if(p===h)return null;var f=null==p?a:i.getNodeFromInstance(p),g=null==h?a:i.getNodeFromInstance(h),m=s.getPooled(l.mouseLeave,p,n,r);m.type="mouseleave",m.target=f,m.relatedTarget=g;var y=s.getPooled(l.mouseEnter,h,n,r);return y.type="mouseenter",y.target=g,y.relatedTarget=f,o.accumulateEnterLeaveDispatches(m,y,p,h),[m,y]}};t.exports=c},function(t,e,n){"use strict";function r(t){this._root=t,this._startText=this.getText(),this._fallbackText=null}var o=n(4),i=n(14),s=n(80);o(r.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[s()]},getData:function(){if(this._fallbackText)return this._fallbackText;var t,e,n=this._startText,r=n.length,o=this.getText(),i=o.length;for(t=0;t<r&&n[t]===o[t];t++);var s=r-t;for(e=1;e<=s&&n[r-e]===o[i-e];e++);var a=e>1?1-e:void 0;return this._fallbackText=o.slice(t,a),this._fallbackText}}),i.addPoolingTo(r),t.exports=r},function(t,e,n){"use strict";var r=n(17),o=r.injection.MUST_USE_PROPERTY,i=r.injection.HAS_BOOLEAN_VALUE,s=r.injection.HAS_NUMERIC_VALUE,a=r.injection.HAS_POSITIVE_NUMERIC_VALUE,u=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE,l={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+r.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:i,allowTransparency:0,alt:0,async:i,autoComplete:0,autoPlay:i,capture:i,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:o|i,cite:0,classID:0,className:0,cols:a,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:i,coords:0,crossOrigin:0,data:0,dateTime:0,default:i,defer:i,dir:0,disabled:i,download:u,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:i,formTarget:0,frameBorder:0,headers:0,height:0,hidden:i,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:i,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:o|i,muted:o|i,name:0,nonce:0,noValidate:i,open:i,optimum:0,pattern:0,placeholder:0,poster:0,preload:0,profile:0,radioGroup:0,readOnly:i,rel:0,required:i,reversed:i,role:0,rows:a,rowSpan:s,sandbox:0,scope:0,scoped:i,scrolling:0,seamless:i,selected:o|i,shape:0,size:a,sizes:0,span:a,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:s,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,typeof:0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:i,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{}};t.exports=l},function(t,e,n){"use strict";var r=n(4),o=n(58),i=n(60),s=n(59),a=n(127),u=n(9),l=n(72),c=n(73),p=n(170),h=(n(3),u.createElement),d=u.createFactory,f=u.cloneElement,g=r,m={Children:{map:o.map,forEach:o.forEach,count:o.count,toArray:o.toArray,only:p},Component:i,createElement:h,cloneElement:f,isValidElement:u.isValidElement,PropTypes:l,createClass:s.createClass,createFactory:d,createMixin:function(t){return t},DOM:a,version:c,__spread:g};t.exports=m},function(t,e,n){"use strict";function r(t,e,n,r){var o=void 0===t[n];null!=e&&o&&(t[n]=i(e,!0))}var o=n(18),i=n(81),s=(n(35),n(47)),a=n(48),u=(n(3),{instantiateChildren:function(t,e,n,o){if(null==t)return null;var i={};return a(t,r,i),i},updateChildren:function(t,e,n,r,a){if(e||t){var u,l;for(u in e)if(e.hasOwnProperty(u)){l=t&&t[u];var c=l&&l._currentElement,p=e[u];if(null!=l&&s(c,p))o.receiveComponent(l,p,r,a),e[u]=l;else{l&&(n[u]=o.getHostNode(l),o.unmountComponent(l,!1));var h=i(p,!0);e[u]=h}}for(u in t)!t.hasOwnProperty(u)||e&&e.hasOwnProperty(u)||(l=t[u],n[u]=o.getHostNode(l),o.unmountComponent(l,!1))}},unmountChildren:function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];o.unmountComponent(r,e)}}});t.exports=u},function(t,e,n){"use strict";function r(t){}function o(t,e){}function i(t){return t.prototype&&t.prototype.isReactComponent}var s=n(2),a=n(4),u=n(37),l=n(15),c=n(9),p=n(38),h=n(21),d=(n(7),n(70)),f=(n(40),n(18)),g=n(163),m=n(24),y=(n(1),n(47));n(3);r.prototype.render=function(){var t=h.get(this)._currentElement.type,e=t(this.props,this.context,this.updater);return o(t,e),e};var v=1,x={construct:function(t){this._currentElement=t,this._rootNodeID=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(t,e,n,a){this._context=a,this._mountOrder=v++,this._hostParent=e,this._hostContainerInfo=n;var u,l=this._currentElement.props,p=this._processContext(a),d=this._currentElement.type,f=t.getUpdateQueue(),g=this._constructComponent(l,p,f);i(d)||null!=g&&null!=g.render||(u=g,o(d,u),null===g||g===!1||c.isValidElement(g)?void 0:s("105",d.displayName||d.name||"Component"),g=new r(d));g.props=l,g.context=p,g.refs=m,g.updater=f,this._instance=g,h.set(g,this);var y=g.state;void 0===y&&(g.state=y=null),"object"!=typeof y||Array.isArray(y)?s("106",this.getName()||"ReactCompositeComponent"):void 0,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var x;return x=g.unstable_handleError?this.performInitialMountWithErrorHandling(u,e,n,t,a):this.performInitialMount(u,e,n,t,a),g.componentDidMount&&t.getReactMountReady().enqueue(g.componentDidMount,g),x},_constructComponent:function(t,e,n){return this._constructComponentWithoutOwner(t,e,n)},_constructComponentWithoutOwner:function(t,e,n){var r,o=this._currentElement.type;return r=i(o)?new o(t,e,n):o(t,e,n)},performInitialMountWithErrorHandling:function(t,e,n,r,o){var i,s=r.checkpoint();try{i=this.performInitialMount(t,e,n,r,o)}catch(a){r.rollback(s),this._instance.unstable_handleError(a),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),s=r.checkpoint(),this._renderedComponent.unmountComponent(!0),r.rollback(s),i=this.performInitialMount(t,e,n,r,o)}return i},performInitialMount:function(t,e,n,r,o){var i=this._instance;i.componentWillMount&&(i.componentWillMount(),this._pendingStateQueue&&(i.state=this._processPendingState(i.props,i.context))),void 0===t&&(t=this._renderValidatedComponent());var s=d.getType(t);this._renderedNodeType=s;var a=this._instantiateReactComponent(t,s!==d.EMPTY);this._renderedComponent=a;var u=f.mountComponent(a,r,e,n,this._processChildContext(o));return u},getHostNode:function(){return f.getHostNode(this._renderedComponent)},unmountComponent:function(t){if(this._renderedComponent){var e=this._instance;if(e.componentWillUnmount&&!e._calledComponentWillUnmount)if(e._calledComponentWillUnmount=!0,t){var n=this.getName()+".componentWillUnmount()";p.invokeGuardedCallback(n,e.componentWillUnmount.bind(e))}else e.componentWillUnmount();this._renderedComponent&&(f.unmountComponent(this._renderedComponent,t),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,this._topLevelWrapper=null,h.remove(e)}},_maskContext:function(t){var e=this._currentElement.type,n=e.contextTypes;if(!n)return m;var r={};for(var o in n)r[o]=t[o];return r},_processContext:function(t){var e=this._maskContext(t);return e},_processChildContext:function(t){var e=this._currentElement.type,n=this._instance,r=n.getChildContext&&n.getChildContext();if(r){"object"!=typeof e.childContextTypes?s("107",this.getName()||"ReactCompositeComponent"):void 0;for(var o in r)o in e.childContextTypes?void 0:s("108",this.getName()||"ReactCompositeComponent",o);return a({},t,r)}return t},_checkContextTypes:function(t,e,n){g(t,e,n,this.getName(),null,this._debugID)},receiveComponent:function(t,e,n){var r=this._currentElement,o=this._context;this._pendingElement=null,this.updateComponent(e,r,t,o,n)},performUpdateIfNecessary:function(t){null!=this._pendingElement?f.receiveComponent(this,this._pendingElement,t,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(t,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(t,e,n,r,o){var i=this._instance;null==i?s("136",this.getName()||"ReactCompositeComponent"):void 0;var a,u,l=!1;this._context===o?a=i.context:(a=this._processContext(o),l=!0),u=n.props,e!==n&&(l=!0),l&&i.componentWillReceiveProps&&i.componentWillReceiveProps(u,a);var c=this._processPendingState(u,a),p=!0;!this._pendingForceUpdate&&i.shouldComponentUpdate&&(p=i.shouldComponentUpdate(u,c,a)),this._updateBatchNumber=null,p?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,u,c,a,t,o)):(this._currentElement=n,this._context=o,i.props=u,i.state=c,i.context=a)},_processPendingState:function(t,e){var n=this._instance,r=this._pendingStateQueue,o=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;if(o&&1===r.length)return r[0];for(var i=a({},o?r[0]:n.state),s=o?1:0;s<r.length;s++){var u=r[s];a(i,"function"==typeof u?u.call(n,i,t,e):u)}return i},_performComponentUpdate:function(t,e,n,r,o,i){var s,a,u,l=this._instance,c=Boolean(l.componentDidUpdate);c&&(s=l.props,a=l.state,u=l.context),l.componentWillUpdate&&l.componentWillUpdate(e,n,r),this._currentElement=t,this._context=i,l.props=e,l.state=n,l.context=r,this._updateRenderedComponent(o,i),c&&o.getReactMountReady().enqueue(l.componentDidUpdate.bind(l,s,a,u),l)},_updateRenderedComponent:function(t,e){var n=this._renderedComponent,r=n._currentElement,o=this._renderValidatedComponent();if(y(r,o))f.receiveComponent(n,o,t,this._processChildContext(e));else{var i=f.getHostNode(n);f.unmountComponent(n,!1);var s=d.getType(o);this._renderedNodeType=s;var a=this._instantiateReactComponent(o,s!==d.EMPTY);this._renderedComponent=a;var u=f.mountComponent(a,t,this._hostParent,this._hostContainerInfo,this._processChildContext(e));this._replaceNodeWithMarkup(i,u,n)}},_replaceNodeWithMarkup:function(t,e,n){u.replaceNodeWithMarkup(t,e,n)},_renderValidatedComponentWithoutOwnerOrContext:function(){var t=this._instance,e=t.render();return e},_renderValidatedComponent:function(){var t;l.current=this;try{t=this._renderValidatedComponentWithoutOwnerOrContext()}finally{l.current=null}return null===t||t===!1||c.isValidElement(t)?void 0:s("109",this.getName()||"ReactCompositeComponent"),t},attachRef:function(t,e){var n=this.getPublicInstance();null==n?s("110"):void 0;var r=e.getPublicInstance(),o=n.refs===m?n.refs={}:n.refs;o[t]=r},detachRef:function(t){var e=this.getPublicInstance().refs;delete e[t]},getName:function(){var t=this._currentElement.type,e=this._instance&&this._instance.constructor;return t.displayName||e&&e.displayName||t.name||e&&e.name||null},getPublicInstance:function(){var t=this._instance;return t instanceof r?null:t},_instantiateReactComponent:null},b={Mixin:x};t.exports=b},function(t,e,n){"use strict";var r=n(5),o=n(138),i=n(68),s=n(18),a=n(10),u=n(73),l=n(165),c=n(78),p=n(172);n(3);o.inject();var h={findDOMNode:l,render:i.render,unmountComponentAtNode:i.unmountComponentAtNode,version:u,unstable_batchedUpdates:a.batchedUpdates,unstable_renderSubtreeIntoContainer:p};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:r.getClosestInstanceFromNode,getNodeFromInstance:function(t){return t._renderedComponent&&(t=c(t)),t?r.getNodeFromInstance(t):null}},Mount:i,Reconciler:s});t.exports=h},function(t,e,n){"use strict";var r=n(26),o={getHostProps:r.getHostProps};t.exports=o},function(t,e,n){"use strict";function r(t){if(t){var e=t._currentElement._owner||null;if(e){var n=e.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}function o(t,e){e&&(J[t._tag]&&(null!=e.children||null!=e.dangerouslySetInnerHTML?g("137",t._tag,t._currentElement._owner?" Check the render method of "+t._currentElement._owner.getName()+".":""):void 0),null!=e.dangerouslySetInnerHTML&&(null!=e.children?g("60"):void 0,"object"==typeof e.dangerouslySetInnerHTML&&H in e.dangerouslySetInnerHTML?void 0:g("61")),null!=e.style&&"object"!=typeof e.style?g("62",r(t)):void 0)}function i(t,e,n,r){if(!(r instanceof O)){var o=t._hostContainerInfo,i=o._node&&o._node.nodeType===W,a=i?o._node:o._ownerDocument;q(e,a),r.getReactMountReady().enqueue(s,{inst:t,registrationName:e,listener:n})}}function s(){var t=this;w.putListener(t.inst,t.registrationName,t.listener)}function a(){var t=this;T.postMountWrapper(t)}function u(){var t=this;A.postMountWrapper(t)}function l(){var t=this;N.postMountWrapper(t)}function c(){var t=this;t._rootNodeID?void 0:g("63");var e=G(t);switch(e?void 0:g("64"),t._tag){case"iframe":case"object":t._wrapperState.listeners=[I.trapBubbledEvent(E.topLevelTypes.topLoad,"load",e)];break;case"video":case"audio":t._wrapperState.listeners=[];for(var n in Z)Z.hasOwnProperty(n)&&t._wrapperState.listeners.push(I.trapBubbledEvent(E.topLevelTypes[n],Z[n],e));break;case"source":t._wrapperState.listeners=[I.trapBubbledEvent(E.topLevelTypes.topError,"error",e)];break;case"img":t._wrapperState.listeners=[I.trapBubbledEvent(E.topLevelTypes.topError,"error",e),I.trapBubbledEvent(E.topLevelTypes.topLoad,"load",e)];break;case"form":t._wrapperState.listeners=[I.trapBubbledEvent(E.topLevelTypes.topReset,"reset",e),I.trapBubbledEvent(E.topLevelTypes.topSubmit,"submit",e)];break;case"input":case"select":case"textarea":t._wrapperState.listeners=[I.trapBubbledEvent(E.topLevelTypes.topInvalid,"invalid",e)]}}function p(){R.postUpdateWrapper(this)}function h(t){et.call(tt,t)||($.test(t)?void 0:g("65",t),tt[t]=!0)}function d(t,e){return t.indexOf("-")>=0||null!=e.is}function f(t){var e=t.type;h(e),this._currentElement=t,this._tag=e.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=null,this._domID=null,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}var g=n(2),m=n(4),y=n(110),v=n(112),x=n(16),b=n(32),j=n(17),_=n(57),E=n(11),w=n(19),S=n(33),I=n(27),M=n(61),C=n(123),L=n(62),P=n(5),T=n(130),N=n(132),R=n(63),A=n(135),D=(n(7),n(143)),O=n(147),F=(n(8),n(29)),k=(n(1),n(46),n(13)),B=(n(53),n(49),n(3),L),z=w.deleteListener,G=P.getNodeFromInstance,q=I.listenTo,U=S.registrationNameModules,V={string:!0,number:!0},Y=k({style:null}),H=k({__html:null}),X={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},W=11,Z={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},Q={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},K={listing:!0,pre:!0,textarea:!0},J=m({menuitem:!0},Q),$=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,tt={},et={}.hasOwnProperty,nt=1;f.displayName="ReactDOMComponent",f.Mixin={mountComponent:function(t,e,n,r){this._rootNodeID=nt++,this._domID=n._idCounter++,this._hostParent=e,this._hostContainerInfo=n;var i=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},t.getReactMountReady().enqueue(c,this);break;case"button":i=C.getHostProps(this,i,e);break;case"input":T.mountWrapper(this,i,e),i=T.getHostProps(this,i),t.getReactMountReady().enqueue(c,this);break;case"option":N.mountWrapper(this,i,e),i=N.getHostProps(this,i);break;case"select":R.mountWrapper(this,i,e),i=R.getHostProps(this,i),t.getReactMountReady().enqueue(c,this);break;case"textarea":A.mountWrapper(this,i,e),i=A.getHostProps(this,i),t.getReactMountReady().enqueue(c,this)}o(this,i);var s,p;null!=e?(s=e._namespaceURI,p=e._tag):n._tag&&(s=n._namespaceURI,p=n._tag),(null==s||s===b.svg&&"foreignobject"===p)&&(s=b.html),s===b.html&&("svg"===this._tag?s=b.svg:"math"===this._tag&&(s=b.mathml)),this._namespaceURI=s;var h;if(t.useCreateElement){var d,f=n._ownerDocument;if(s===b.html)if("script"===this._tag){var g=f.createElement("div"),m=this._currentElement.type;g.innerHTML="<"+m+"></"+m+">",d=g.removeChild(g.firstChild)}else d=i.is?f.createElement(this._currentElement.type,i.is):f.createElement(this._currentElement.type);else d=f.createElementNS(s,this._currentElement.type);P.precacheNode(this,d),this._flags|=B.hasCachedChildNodes,this._hostParent||_.setAttributeForRoot(d),this._updateDOMProperties(null,i,t);var v=x(d);this._createInitialChildren(t,i,r,v),h=v}else{var j=this._createOpenTagMarkupAndPutListeners(t,i),E=this._createContentMarkup(t,i,r);h=!E&&Q[this._tag]?j+"/>":j+">"+E+"</"+this._currentElement.type+">"}switch(this._tag){case"input":t.getReactMountReady().enqueue(a,this),i.autoFocus&&t.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"textarea":t.getReactMountReady().enqueue(u,this),i.autoFocus&&t.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"select":i.autoFocus&&t.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"button":i.autoFocus&&t.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"option":t.getReactMountReady().enqueue(l,this)}return h},_createOpenTagMarkupAndPutListeners:function(t,e){var n="<"+this._currentElement.type;for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];if(null!=o)if(U.hasOwnProperty(r))o&&i(this,r,o,t);else{r===Y&&(o&&(o=this._previousStyleCopy=m({},e.style)),o=v.createMarkupForStyles(o,this));var s=null;null!=this._tag&&d(this._tag,e)?X.hasOwnProperty(r)||(s=_.createMarkupForCustomAttribute(r,o)):s=_.createMarkupForProperty(r,o),s&&(n+=" "+s)}}return t.renderToStaticMarkup?n:(this._hostParent||(n+=" "+_.createMarkupForRoot()),n+=" "+_.createMarkupForID(this._domID))},_createContentMarkup:function(t,e,n){var r="",o=e.dangerouslySetInnerHTML;if(null!=o)null!=o.__html&&(r=o.__html);else{var i=V[typeof e.children]?e.children:null,s=null!=i?null:e.children;if(null!=i)r=F(i);else if(null!=s){var a=this.mountChildren(s,t,n);r=a.join("")}}return K[this._tag]&&"\n"===r.charAt(0)?"\n"+r:r},_createInitialChildren:function(t,e,n,r){var o=e.dangerouslySetInnerHTML;if(null!=o)null!=o.__html&&x.queueHTML(r,o.__html);else{var i=V[typeof e.children]?e.children:null,s=null!=i?null:e.children;if(null!=i)x.queueText(r,i);else if(null!=s)for(var a=this.mountChildren(s,t,n),u=0;u<a.length;u++)x.queueChild(r,a[u])}},receiveComponent:function(t,e,n){var r=this._currentElement;this._currentElement=t,this.updateComponent(e,r,t,n)},updateComponent:function(t,e,n,r){var i=e.props,s=this._currentElement.props;switch(this._tag){case"button":i=C.getHostProps(this,i),s=C.getHostProps(this,s);break;case"input":T.updateWrapper(this),i=T.getHostProps(this,i),s=T.getHostProps(this,s);break;case"option":i=N.getHostProps(this,i),s=N.getHostProps(this,s);break;case"select":i=R.getHostProps(this,i),s=R.getHostProps(this,s);break;case"textarea":A.updateWrapper(this),i=A.getHostProps(this,i),s=A.getHostProps(this,s)}o(this,s),this._updateDOMProperties(i,s,t),this._updateDOMChildren(i,s,t,r),"select"===this._tag&&t.getReactMountReady().enqueue(p,this)},_updateDOMProperties:function(t,e,n){var r,o,s;for(r in t)if(!e.hasOwnProperty(r)&&t.hasOwnProperty(r)&&null!=t[r])if(r===Y){var a=this._previousStyleCopy;for(o in a)a.hasOwnProperty(o)&&(s=s||{},s[o]="");this._previousStyleCopy=null}else U.hasOwnProperty(r)?t[r]&&z(this,r):d(this._tag,t)?X.hasOwnProperty(r)||_.deleteValueForAttribute(G(this),r):(j.properties[r]||j.isCustomAttribute(r))&&_.deleteValueForProperty(G(this),r);for(r in e){var u=e[r],l=r===Y?this._previousStyleCopy:null!=t?t[r]:void 0;if(e.hasOwnProperty(r)&&u!==l&&(null!=u||null!=l))if(r===Y)if(u?u=this._previousStyleCopy=m({},u):this._previousStyleCopy=null,l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(s=s||{},s[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(s=s||{},s[o]=u[o])}else s=u;else if(U.hasOwnProperty(r))u?i(this,r,u,n):l&&z(this,r);else if(d(this._tag,e))X.hasOwnProperty(r)||_.setValueForAttribute(G(this),r,u);else if(j.properties[r]||j.isCustomAttribute(r)){var c=G(this);null!=u?_.setValueForProperty(c,r,u):_.deleteValueForProperty(c,r)}}s&&v.setValueForStyles(G(this),s,this)},_updateDOMChildren:function(t,e,n,r){var o=V[typeof t.children]?t.children:null,i=V[typeof e.children]?e.children:null,s=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,a=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,u=null!=o?null:t.children,l=null!=i?null:e.children,c=null!=o||null!=s,p=null!=i||null!=a;null!=u&&null==l?this.updateChildren(null,n,r):c&&!p&&this.updateTextContent(""),null!=i?o!==i&&this.updateTextContent(""+i):null!=a?s!==a&&this.updateMarkup(""+a):null!=l&&this.updateChildren(l,n,r)},getHostNode:function(){return G(this)},unmountComponent:function(t){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var e=this._wrapperState.listeners;if(e)for(var n=0;n<e.length;n++)e[n].remove();break;case"html":case"head":case"body":g("66",this._tag)}this.unmountChildren(t),P.uncacheNode(this),w.deleteAllListeners(this),M.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null,this._domID=null,this._wrapperState=null},getPublicInstance:function(){return G(this)}},m(f.prototype,f.Mixin,D.Mixin),t.exports=f},function(t,e,n){"use strict";function r(t,e){var n={_topLevelWrapper:t,_idCounter:1,_ownerDocument:e?e.nodeType===o?e:e.ownerDocument:null,_node:e,_tag:e?e.nodeName.toLowerCase():null,_namespaceURI:e?e.namespaceURI:null};return n}var o=(n(49),9);t.exports=r},function(t,e,n){"use strict";var r=n(4),o=n(16),i=n(5),s=function(t){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=null};r(s.prototype,{mountComponent:function(t,e,n,r){var s=n._idCounter++;this._domID=s,this._hostParent=e,this._hostContainerInfo=n;var a=" react-empty: "+this._domID+" ";if(t.useCreateElement){var u=n._ownerDocument,l=u.createComment(a);return i.precacheNode(this,l),o(l)}return t.renderToStaticMarkup?"":"<!--"+a+"-->"},receiveComponent:function(){},getHostNode:function(){return i.getNodeFromInstance(this)},unmountComponent:function(){i.uncacheNode(this)}}),t.exports=s},function(t,e,n){"use strict";function r(t){return o.createFactory(t)}var o=n(9),i=n(96),s=i({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hgroup:"hgroup",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul",var:"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",image:"image",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},r);t.exports=s},function(t,e){"use strict";var n={useCreateElement:!0};t.exports=n},function(t,e,n){"use strict";var r=n(31),o=n(5),i={dangerouslyProcessChildrenUpdates:function(t,e){var n=o.getNodeFromInstance(t);r.processUpdates(n,e)}};t.exports=i;
},function(t,e,n){"use strict";function r(){this._rootNodeID&&h.updateWrapper(this)}function o(t){var e=this._currentElement.props,n=l.executeOnChange(e,t);p.asap(r,this);var o=e.name;if("radio"===e.type&&null!=o){for(var s=c.getNodeFromInstance(this),a=s;a.parentNode;)a=a.parentNode;for(var u=a.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),h=0;h<u.length;h++){var d=u[h];if(d!==s&&d.form===s.form){var f=c.getInstanceFromNode(d);f?void 0:i("90"),p.asap(r,f)}}}return n}var i=n(2),s=n(4),a=n(26),u=n(57),l=n(36),c=n(5),p=n(10),h=(n(1),n(3),{getHostProps:function(t,e){var n=l.getValue(e),r=l.getChecked(e),o=s({type:void 0},a.getHostProps(t,e),{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:t._wrapperState.initialValue,checked:null!=r?r:t._wrapperState.initialChecked,onChange:t._wrapperState.onChange});return o},mountWrapper:function(t,e){var n=e.defaultValue;t._wrapperState={initialChecked:null!=e.checked?e.checked:e.defaultChecked,initialValue:null!=e.value?e.value:n,listeners:null,onChange:o.bind(t)}},updateWrapper:function(t){var e=t._currentElement.props,n=e.checked;null!=n&&u.setValueForProperty(c.getNodeFromInstance(t),"checked",n||!1);var r=c.getNodeFromInstance(t),o=l.getValue(e);if(null!=o){var i=""+o;i!==r.value&&(r.value=i)}else null==e.value&&null!=e.defaultValue&&(r.defaultValue=""+e.defaultValue),null==e.checked&&null!=e.defaultChecked&&(r.defaultChecked=!!e.defaultChecked)},postMountWrapper:function(t){var e=t._currentElement.props,n=c.getNodeFromInstance(t);"submit"!==e.type&&"reset"!==e.type&&(n.value=n.value);var r=n.name;""!==r&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==r&&(n.name=r)}});t.exports=h},function(t,e,n){"use strict";var r=null;t.exports={debugTool:r}},function(t,e,n){"use strict";function r(t){var e="";return i.forEach(t,function(t){null!=t&&("string"==typeof t||"number"==typeof t?e+=t:u||(u=!0))}),e}var o=n(4),i=n(58),s=n(5),a=n(63),u=(n(3),!1),l={mountWrapper:function(t,e,n){var o=null;if(null!=n){var i=n;"optgroup"===i._tag&&(i=i._hostParent),null!=i&&"select"===i._tag&&(o=a.getSelectValueContext(i))}var s=null;if(null!=o){var u;if(u=null!=e.value?e.value+"":r(e.children),s=!1,Array.isArray(o)){for(var l=0;l<o.length;l++)if(""+o[l]===u){s=!0;break}}else s=""+o===u}t._wrapperState={selected:s}},postMountWrapper:function(t){var e=t._currentElement.props;if(null!=e.value){var n=s.getNodeFromInstance(t);n.setAttribute("value",e.value)}},getHostProps:function(t,e){var n=o({selected:void 0,children:void 0},e);null!=t._wrapperState.selected&&(n.selected=t._wrapperState.selected);var i=r(e.children);return i&&(n.children=i),n}};t.exports=l},function(t,e,n){"use strict";function r(t,e,n,r){return t===n&&e===r}function o(t){var e=document.selection,n=e.createRange(),r=n.text.length,o=n.duplicate();o.moveToElementText(t),o.setEndPoint("EndToStart",n);var i=o.text.length,s=i+r;return{start:i,end:s}}function i(t){var e=window.getSelection&&window.getSelection();if(!e||0===e.rangeCount)return null;var n=e.anchorNode,o=e.anchorOffset,i=e.focusNode,s=e.focusOffset,a=e.getRangeAt(0);try{a.startContainer.nodeType,a.endContainer.nodeType}catch(u){return null}var l=r(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),c=l?0:a.toString().length,p=a.cloneRange();p.selectNodeContents(t),p.setEnd(a.startContainer,a.startOffset);var h=r(p.startContainer,p.startOffset,p.endContainer,p.endOffset),d=h?0:p.toString().length,f=d+c,g=document.createRange();g.setStart(n,o),g.setEnd(i,s);var m=g.collapsed;return{start:m?f:d,end:m?d:f}}function s(t,e){var n,r,o=document.selection.createRange().duplicate();void 0===e.end?(n=e.start,r=n):e.start>e.end?(n=e.end,r=e.start):(n=e.start,r=e.end),o.moveToElementText(t),o.moveStart("character",n),o.setEndPoint("EndToStart",o),o.moveEnd("character",r-n),o.select()}function a(t,e){if(window.getSelection){var n=window.getSelection(),r=t[c()].length,o=Math.min(e.start,r),i=void 0===e.end?o:Math.min(e.end,r);if(!n.extend&&o>i){var s=i;i=o,o=s}var a=l(t,o),u=l(t,i);if(a&&u){var p=document.createRange();p.setStart(a.node,a.offset),n.removeAllRanges(),o>i?(n.addRange(p),n.extend(u.node,u.offset)):(p.setEnd(u.node,u.offset),n.addRange(p))}}}var u=n(6),l=n(168),c=n(80),p=u.canUseDOM&&"selection"in document&&!("getSelection"in window),h={getOffsets:p?o:i,setOffsets:p?s:a};t.exports=h},function(t,e,n){"use strict";var r=n(2),o=n(4),i=n(31),s=n(16),a=n(5),u=(n(7),n(29)),l=(n(1),n(49),function(t){this._currentElement=t,this._stringText=""+t,this._hostNode=null,this._hostParent=null,this._domID=null,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});o(l.prototype,{mountComponent:function(t,e,n,r){var o=n._idCounter++,i=" react-text: "+o+" ",l=" /react-text ";if(this._domID=o,this._hostParent=e,t.useCreateElement){var c=n._ownerDocument,p=c.createComment(i),h=c.createComment(l),d=s(c.createDocumentFragment());return s.queueChild(d,s(p)),this._stringText&&s.queueChild(d,s(c.createTextNode(this._stringText))),s.queueChild(d,s(h)),a.precacheNode(this,p),this._closingComment=h,d}var f=u(this._stringText);return t.renderToStaticMarkup?f:"<!--"+i+"-->"+f+"<!--"+l+"-->"},receiveComponent:function(t,e){if(t!==this._currentElement){this._currentElement=t;var n=""+t;if(n!==this._stringText){this._stringText=n;var r=this.getHostNode();i.replaceDelimitedText(r[0],r[1],n)}}},getHostNode:function(){var t=this._commentNodes;if(t)return t;if(!this._closingComment)for(var e=a.getNodeFromInstance(this),n=e.nextSibling;;){if(null==n?r("67",this._domID):void 0,8===n.nodeType&&" /react-text "===n.nodeValue){this._closingComment=n;break}n=n.nextSibling}return t=[this._hostNode,this._closingComment],this._commentNodes=t,t},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,a.uncacheNode(this)}}),t.exports=l},function(t,e,n){"use strict";function r(){this._rootNodeID&&p.updateWrapper(this)}function o(t){var e=this._currentElement.props,n=u.executeOnChange(e,t);return c.asap(r,this),n}var i=n(2),s=n(4),a=n(26),u=n(36),l=n(5),c=n(10),p=(n(1),n(3),{getHostProps:function(t,e){null!=e.dangerouslySetInnerHTML?i("91"):void 0;var n=s({},a.getHostProps(t,e),{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue,onChange:t._wrapperState.onChange});return n},mountWrapper:function(t,e){var n=u.getValue(e),r=n;if(null==n){var s=e.defaultValue,a=e.children;null!=a&&(null!=s?i("92"):void 0,Array.isArray(a)&&(a.length<=1?void 0:i("93"),a=a[0]),s=""+a),null==s&&(s=""),r=s}t._wrapperState={initialValue:""+r,listeners:null,onChange:o.bind(t)}},updateWrapper:function(t){var e=t._currentElement.props,n=l.getNodeFromInstance(t),r=u.getValue(e);if(null!=r){var o=""+r;o!==n.value&&(n.value=o),null==e.defaultValue&&(n.defaultValue=o)}null!=e.defaultValue&&(n.defaultValue=e.defaultValue)},postMountWrapper:function(t){var e=l.getNodeFromInstance(t);e.value=e.textContent}});t.exports=p},function(t,e,n){"use strict";function r(t,e){"_hostNode"in t?void 0:u("33"),"_hostNode"in e?void 0:u("33");for(var n=0,r=t;r;r=r._hostParent)n++;for(var o=0,i=e;i;i=i._hostParent)o++;for(;n-o>0;)t=t._hostParent,n--;for(;o-n>0;)e=e._hostParent,o--;for(var s=n;s--;){if(t===e)return t;t=t._hostParent,e=e._hostParent}return null}function o(t,e){"_hostNode"in t?void 0:u("35"),"_hostNode"in e?void 0:u("35");for(;e;){if(e===t)return!0;e=e._hostParent}return!1}function i(t){return"_hostNode"in t?void 0:u("36"),t._hostParent}function s(t,e,n){for(var r=[];t;)r.push(t),t=t._hostParent;var o;for(o=r.length;o-- >0;)e(r[o],!1,n);for(o=0;o<r.length;o++)e(r[o],!0,n)}function a(t,e,n,o,i){for(var s=t&&e?r(t,e):null,a=[];t&&t!==s;)a.push(t),t=t._hostParent;for(var u=[];e&&e!==s;)u.push(e),e=e._hostParent;var l;for(l=0;l<a.length;l++)n(a[l],!0,o);for(l=u.length;l-- >0;)n(u[l],!1,i)}var u=n(2);n(1);t.exports={isAncestor:o,getLowestCommonAncestor:r,getParentInstance:i,traverseTwoPhase:s,traverseEnterLeave:a}},function(t,e,n){"use strict";function r(){this.reinitializeTransaction()}var o=n(4),i=n(10),s=n(23),a=n(8),u={initialize:a,close:function(){h.isBatchingUpdates=!1}},l={initialize:a,close:i.flushBatchedUpdates.bind(i)},c=[l,u];o(r.prototype,s.Mixin,{getTransactionWrappers:function(){return c}});var p=new r,h={isBatchingUpdates:!1,batchedUpdates:function(t,e,n,r,o,i){var s=h.isBatchingUpdates;h.isBatchingUpdates=!0,s?t(e,n,r,o,i):p.perform(t,null,e,n,r,o,i)}};t.exports=h},function(t,e,n){"use strict";function r(){_||(_=!0,y.EventEmitter.injectReactEventListener(m),y.EventPluginHub.injectEventPluginOrder(s),y.EventPluginUtils.injectComponentTree(p),y.EventPluginUtils.injectTreeTraversal(d),y.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:j,EnterLeaveEventPlugin:a,ChangeEventPlugin:i,SelectEventPlugin:b,BeforeInputEventPlugin:o}),y.HostComponent.injectGenericComponentClass(c),y.HostComponent.injectTextComponentClass(f),y.DOMProperty.injectDOMPropertyConfig(u),y.DOMProperty.injectDOMPropertyConfig(x),y.EmptyComponent.injectEmptyComponentFactory(function(t){return new h(t)}),y.Updates.injectReconcileTransaction(v),y.Updates.injectBatchingStrategy(g),y.Component.injectEnvironment(l))}var o=n(111),i=n(113),s=n(115),a=n(116),u=n(118),l=n(61),c=n(124),p=n(5),h=n(126),d=n(136),f=n(134),g=n(137),m=n(140),y=n(141),v=n(145),x=n(149),b=n(150),j=n(151),_=!1;t.exports={inject:r}},function(t,e,n){"use strict";function r(t){o.enqueueEvents(t),o.processEventQueue(!1)}var o=n(19),i={handleTopLevel:function(t,e,n,i){var s=o.extractEvents(t,e,n,i);r(s)}};t.exports=i},function(t,e,n){"use strict";function r(t){for(;t._hostParent;)t=t._hostParent;var e=p.getNodeFromInstance(t),n=e.parentNode;return p.getClosestInstanceFromNode(n)}function o(t,e){this.topLevelType=t,this.nativeEvent=e,this.ancestors=[]}function i(t){var e=d(t.nativeEvent),n=p.getClosestInstanceFromNode(e),o=n;do t.ancestors.push(o),o=o&&r(o);while(o);for(var i=0;i<t.ancestors.length;i++)n=t.ancestors[i],g._handleTopLevel(t.topLevelType,n,t.nativeEvent,d(t.nativeEvent))}function s(t){var e=f(window);t(e)}var a=n(4),u=n(50),l=n(6),c=n(14),p=n(5),h=n(10),d=n(45),f=n(91);a(o.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),c.addPoolingTo(o,c.twoArgumentPooler);var g={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:l.canUseDOM?window:null,setHandleTopLevel:function(t){g._handleTopLevel=t},setEnabled:function(t){g._enabled=!!t},isEnabled:function(){return g._enabled},trapBubbledEvent:function(t,e,n){var r=n;return r?u.listen(r,e,g.dispatchEvent.bind(null,t)):null},trapCapturedEvent:function(t,e,n){var r=n;return r?u.capture(r,e,g.dispatchEvent.bind(null,t)):null},monitorScrollValue:function(t){var e=s.bind(null,t);u.listen(window,"scroll",e)},dispatchEvent:function(t,e){if(g._enabled){var n=o.getPooled(t,e);try{h.batchedUpdates(i,n)}finally{o.release(n)}}}};t.exports=g},function(t,e,n){"use strict";var r=n(17),o=n(19),i=n(34),s=n(37),a=n(59),u=n(64),l=n(27),c=n(66),p=n(10),h={Component:s.injection,Class:a.injection,DOMProperty:r.injection,EmptyComponent:u.injection,EventPluginHub:o.injection,EventPluginUtils:i.injection,EventEmitter:l.injection,HostComponent:c.injection,Updates:p.injection};t.exports=h},function(t,e,n){"use strict";var r=n(162),o=/\/?>/,i=/^<\!\-\-/,s={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(t){var e=r(t);return i.test(t)?t:t.replace(o," "+s.CHECKSUM_ATTR_NAME+'="'+e+'"$&')},canReuseMarkup:function(t,e){var n=e.getAttribute(s.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var o=r(t);return o===n}};t.exports=s},function(t,e,n){"use strict";function r(t,e,n){return{type:h.INSERT_MARKUP,content:t,fromIndex:null,fromNode:null,toIndex:n,afterNode:e}}function o(t,e,n){return{type:h.MOVE_EXISTING,content:null,fromIndex:t._mountIndex,fromNode:d.getHostNode(t),toIndex:n,afterNode:e}}function i(t,e){return{type:h.REMOVE_NODE,content:null,fromIndex:t._mountIndex,fromNode:e,toIndex:null,afterNode:null}}function s(t){return{type:h.SET_MARKUP,content:t,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function a(t){return{type:h.TEXT_CONTENT,content:t,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function u(t,e){return e&&(t=t||[],t.push(e)),t}function l(t,e){p.processChildrenUpdates(t,e)}var c=n(2),p=n(37),h=(n(21),n(7),n(69)),d=(n(15),n(18)),f=n(120),g=(n(8),n(166)),m=(n(1),{Mixin:{_reconcilerInstantiateChildren:function(t,e,n){return f.instantiateChildren(t,e,n)},_reconcilerUpdateChildren:function(t,e,n,r,o){var i;return i=g(e),f.updateChildren(t,i,n,r,o),i},mountChildren:function(t,e,n){var r=this._reconcilerInstantiateChildren(t,e,n);this._renderedChildren=r;var o=[],i=0;for(var s in r)if(r.hasOwnProperty(s)){var a=r[s],u=d.mountComponent(a,e,this,this._hostContainerInfo,n);a._mountIndex=i++,o.push(u)}return o},updateTextContent:function(t){var e=this._renderedChildren;f.unmountChildren(e,!1);for(var n in e)e.hasOwnProperty(n)&&c("118");var r=[a(t)];l(this,r)},updateMarkup:function(t){var e=this._renderedChildren;f.unmountChildren(e,!1);for(var n in e)e.hasOwnProperty(n)&&c("118");var r=[s(t)];l(this,r)},updateChildren:function(t,e,n){this._updateChildren(t,e,n)},_updateChildren:function(t,e,n){var r=this._renderedChildren,o={},i=this._reconcilerUpdateChildren(r,t,o,e,n);if(i||r){var s,a=null,c=0,p=0,h=null;for(s in i)if(i.hasOwnProperty(s)){var f=r&&r[s],g=i[s];f===g?(a=u(a,this.moveChild(f,h,p,c)),c=Math.max(f._mountIndex,c),f._mountIndex=p):(f&&(c=Math.max(f._mountIndex,c)),a=u(a,this._mountChildAtIndex(g,h,p,e,n))),p++,h=d.getHostNode(g)}for(s in o)o.hasOwnProperty(s)&&(a=u(a,this._unmountChild(r[s],o[s])));a&&l(this,a),this._renderedChildren=i}},unmountChildren:function(t){var e=this._renderedChildren;f.unmountChildren(e,t),this._renderedChildren=null},moveChild:function(t,e,n,r){if(t._mountIndex<r)return o(t,e,n)},createChild:function(t,e,n){return r(n,e,t._mountIndex)},removeChild:function(t,e){return i(t,e)},_mountChildAtIndex:function(t,e,n,r,o){var i=d.mountComponent(t,r,this,this._hostContainerInfo,o);return t._mountIndex=n,this.createChild(t,e,i)},_unmountChild:function(t,e){var n=this.removeChild(t,e);return t._mountIndex=null,n}}});t.exports=m},function(t,e,n){"use strict";var r=n(2),o=(n(1),{isValidOwner:function(t){return!(!t||"function"!=typeof t.attachRef||"function"!=typeof t.detachRef)},addComponentAsRefTo:function(t,e,n){o.isValidOwner(n)?void 0:r("119"),n.attachRef(e,t)},removeComponentAsRefFrom:function(t,e,n){o.isValidOwner(n)?void 0:r("120");var i=n.getPublicInstance();i&&i.refs[e]===t.getPublicInstance()&&n.detachRef(e)}});t.exports=o},function(t,e,n){"use strict";function r(t){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=i.getPooled(null),this.useCreateElement=t}var o=n(4),i=n(56),s=n(14),a=n(27),u=n(67),l=(n(7),n(23)),c=n(41),p={initialize:u.getSelectionInformation,close:u.restoreSelection},h={initialize:function(){var t=a.isEnabled();return a.setEnabled(!1),t},close:function(t){a.setEnabled(t)}},d={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},f=[p,h,d],g={getTransactionWrappers:function(){return f},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return c},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(t){this.reactMountReady.rollback(t)},destructor:function(){i.release(this.reactMountReady),this.reactMountReady=null}};o(r.prototype,l.Mixin,g),s.addPoolingTo(r),t.exports=r},function(t,e,n){"use strict";function r(t,e,n){"function"==typeof t?t(e.getPublicInstance()):i.addComponentAsRefTo(e,t,n)}function o(t,e,n){"function"==typeof t?t(null):i.removeComponentAsRefFrom(e,t,n)}var i=n(144),s={};s.attachRefs=function(t,e){if(null!==e&&e!==!1){var n=e.ref;null!=n&&r(n,t,e._owner)}},s.shouldUpdateRefs=function(t,e){var n=null===t||t===!1,r=null===e||e===!1;return n||r||e._owner!==t._owner||e.ref!==t.ref},s.detachRefs=function(t,e){if(null!==e&&e!==!1){var n=e.ref;null!=n&&o(n,t,e._owner)}},t.exports=s},function(t,e,n){"use strict";function r(t){this.reinitializeTransaction(),this.renderToStaticMarkup=t,this.useCreateElement=!1,this.updateQueue=new a(this)}var o=n(4),i=n(14),s=n(23),a=(n(7),n(148)),u=[],l={enqueue:function(){}},c={getTransactionWrappers:function(){return u},getReactMountReady:function(){return l},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};o(r.prototype,s.Mixin,c),i.addPoolingTo(r),t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){}var i=n(41),s=(n(23),n(3),function(){function t(e){r(this,t),this.transaction=e}return t.prototype.isMounted=function(t){return!1},t.prototype.enqueueCallback=function(t,e,n){this.transaction.isInTransaction()&&i.enqueueCallback(t,e,n)},t.prototype.enqueueForceUpdate=function(t){this.transaction.isInTransaction()?i.enqueueForceUpdate(t):o(t,"forceUpdate")},t.prototype.enqueueReplaceState=function(t,e){this.transaction.isInTransaction()?i.enqueueReplaceState(t,e):o(t,"replaceState")},t.prototype.enqueueSetState=function(t,e){this.transaction.isInTransaction()?i.enqueueSetState(t,e):o(t,"setState")},t}());t.exports=s},function(t,e){"use strict";var n={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},r={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering",in:0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},o={Properties:{},DOMAttributeNamespaces:{xlinkActuate:n.xlink,xlinkArcrole:n.xlink,xlinkHref:n.xlink,xlinkRole:n.xlink,xlinkShow:n.xlink,xlinkTitle:n.xlink,xlinkType:n.xlink,xmlBase:n.xml,xmlLang:n.xml,xmlSpace:n.xml},DOMAttributeNames:{}};Object.keys(r).forEach(function(t){o.Properties[t]=0,r[t]&&(o.DOMAttributeNames[t]=r[t])}),t.exports=o},function(t,e,n){"use strict";function r(t){if("selectionStart"in t&&l.hasSelectionCapabilities(t))return{start:t.selectionStart,end:t.selectionEnd};if(window.getSelection){var e=window.getSelection();return{anchorNode:e.anchorNode,anchorOffset:e.anchorOffset,focusNode:e.focusNode,focusOffset:e.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function o(t,e){if(j||null==v||v!==p())return null;var n=r(v);if(!b||!f(b,n)){b=n;var o=c.getPooled(y.select,x,t,e);return o.type="select",o.target=v,s.accumulateTwoPhaseDispatches(o),o}return null}var i=n(11),s=n(20),a=n(6),u=n(5),l=n(67),c=n(12),p=n(52),h=n(82),d=n(13),f=n(53),g=i.topLevelTypes,m=a.canUseDOM&&"documentMode"in document&&document.documentMode<=11,y={select:{phasedRegistrationNames:{bubbled:d({onSelect:null}),captured:d({onSelectCapture:null})},dependencies:[g.topBlur,g.topContextMenu,g.topFocus,g.topKeyDown,g.topMouseDown,g.topMouseUp,g.topSelectionChange]}},v=null,x=null,b=null,j=!1,_=!1,E=d({onSelect:null}),w={eventTypes:y,extractEvents:function(t,e,n,r){if(!_)return null;var i=e?u.getNodeFromInstance(e):window;switch(t){case g.topFocus:(h(i)||"true"===i.contentEditable)&&(v=i,x=e,b=null);break;case g.topBlur:v=null,x=null,b=null;break;case g.topMouseDown:j=!0;break;case g.topContextMenu:case g.topMouseUp:return j=!1,o(n,r);case g.topSelectionChange:if(m)break;case g.topKeyDown:case g.topKeyUp:return o(n,r)}return null},didPutListener:function(t,e,n){e===E&&(_=!0)}};t.exports=w},function(t,e,n){"use strict";var r=n(2),o=n(11),i=n(50),s=n(20),a=n(5),u=n(152),l=n(153),c=n(12),p=n(156),h=n(158),d=n(28),f=n(155),g=n(159),m=n(160),y=n(22),v=n(161),x=n(8),b=n(43),j=(n(1),n(13)),_=o.topLevelTypes,E={abort:{phasedRegistrationNames:{bubbled:j({onAbort:!0}),captured:j({onAbortCapture:!0})}},animationEnd:{phasedRegistrationNames:{bubbled:j({onAnimationEnd:!0}),captured:j({onAnimationEndCapture:!0})}},animationIteration:{phasedRegistrationNames:{bubbled:j({onAnimationIteration:!0}),captured:j({onAnimationIterationCapture:!0})}},animationStart:{phasedRegistrationNames:{bubbled:j({onAnimationStart:!0}),captured:j({onAnimationStartCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:j({onBlur:!0}),captured:j({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:j({onCanPlay:!0}),captured:j({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:j({onCanPlayThrough:!0}),captured:j({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:j({onClick:!0}),captured:j({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:j({onContextMenu:!0}),captured:j({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:j({onCopy:!0}),captured:j({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:j({onCut:!0}),captured:j({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:j({onDoubleClick:!0}),captured:j({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:j({onDrag:!0}),captured:j({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:j({onDragEnd:!0}),captured:j({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:j({onDragEnter:!0}),captured:j({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:j({onDragExit:!0}),captured:j({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:j({onDragLeave:!0}),captured:j({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:j({onDragOver:!0}),captured:j({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:j({onDragStart:!0}),captured:j({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:j({onDrop:!0}),captured:j({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:j({onDurationChange:!0}),captured:j({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:j({onEmptied:!0}),captured:j({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:j({onEncrypted:!0}),captured:j({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:j({onEnded:!0}),captured:j({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:j({onError:!0}),captured:j({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:j({onFocus:!0}),captured:j({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:j({onInput:!0}),captured:j({onInputCapture:!0})}},invalid:{phasedRegistrationNames:{bubbled:j({onInvalid:!0}),captured:j({onInvalidCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:j({onKeyDown:!0}),captured:j({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:j({onKeyPress:!0}),captured:j({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:j({onKeyUp:!0}),captured:j({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:j({onLoad:!0}),captured:j({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:j({onLoadedData:!0}),captured:j({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:j({onLoadedMetadata:!0}),captured:j({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:j({onLoadStart:!0}),captured:j({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:j({onMouseDown:!0}),captured:j({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:j({onMouseMove:!0}),captured:j({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:j({onMouseOut:!0}),captured:j({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:j({onMouseOver:!0}),captured:j({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:j({onMouseUp:!0}),captured:j({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:j({onPaste:!0}),captured:j({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:j({onPause:!0}),captured:j({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:j({onPlay:!0}),captured:j({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:j({onPlaying:!0}),captured:j({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:j({onProgress:!0}),captured:j({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:j({onRateChange:!0}),captured:j({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:j({onReset:!0}),captured:j({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:j({onScroll:!0}),captured:j({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:j({onSeeked:!0}),captured:j({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:j({onSeeking:!0}),captured:j({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:j({onStalled:!0}),captured:j({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:j({onSubmit:!0}),captured:j({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:j({onSuspend:!0}),captured:j({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:j({onTimeUpdate:!0}),captured:j({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:j({onTouchCancel:!0}),captured:j({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:j({onTouchEnd:!0}),captured:j({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:j({onTouchMove:!0}),captured:j({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:j({onTouchStart:!0}),captured:j({onTouchStartCapture:!0})}},transitionEnd:{phasedRegistrationNames:{bubbled:j({onTransitionEnd:!0}),captured:j({onTransitionEndCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:j({onVolumeChange:!0}),captured:j({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:j({onWaiting:!0}),captured:j({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:j({onWheel:!0}),captured:j({onWheelCapture:!0})}}},w={topAbort:E.abort,topAnimationEnd:E.animationEnd,topAnimationIteration:E.animationIteration,topAnimationStart:E.animationStart,topBlur:E.blur,topCanPlay:E.canPlay,topCanPlayThrough:E.canPlayThrough,topClick:E.click,topContextMenu:E.contextMenu,topCopy:E.copy,topCut:E.cut,topDoubleClick:E.doubleClick,topDrag:E.drag,topDragEnd:E.dragEnd,topDragEnter:E.dragEnter,topDragExit:E.dragExit,topDragLeave:E.dragLeave,topDragOver:E.dragOver,topDragStart:E.dragStart,topDrop:E.drop,topDurationChange:E.durationChange,topEmptied:E.emptied,topEncrypted:E.encrypted,topEnded:E.ended,topError:E.error,topFocus:E.focus,topInput:E.input,topInvalid:E.invalid,topKeyDown:E.keyDown,topKeyPress:E.keyPress,topKeyUp:E.keyUp,topLoad:E.load,topLoadedData:E.loadedData,topLoadedMetadata:E.loadedMetadata,topLoadStart:E.loadStart,topMouseDown:E.mouseDown,topMouseMove:E.mouseMove,topMouseOut:E.mouseOut,topMouseOver:E.mouseOver,topMouseUp:E.mouseUp,topPaste:E.paste,topPause:E.pause,topPlay:E.play,topPlaying:E.playing,topProgress:E.progress,topRateChange:E.rateChange,topReset:E.reset,topScroll:E.scroll,topSeeked:E.seeked,topSeeking:E.seeking,topStalled:E.stalled,topSubmit:E.submit,topSuspend:E.suspend,topTimeUpdate:E.timeUpdate,topTouchCancel:E.touchCancel,topTouchEnd:E.touchEnd,topTouchMove:E.touchMove,topTouchStart:E.touchStart,topTransitionEnd:E.transitionEnd,topVolumeChange:E.volumeChange,
topWaiting:E.waiting,topWheel:E.wheel};for(var S in w)w[S].dependencies=[S];var I=j({onClick:null}),M={},C={eventTypes:E,extractEvents:function(t,e,n,o){var i=w[t];if(!i)return null;var a;switch(t){case _.topAbort:case _.topCanPlay:case _.topCanPlayThrough:case _.topDurationChange:case _.topEmptied:case _.topEncrypted:case _.topEnded:case _.topError:case _.topInput:case _.topInvalid:case _.topLoad:case _.topLoadedData:case _.topLoadedMetadata:case _.topLoadStart:case _.topPause:case _.topPlay:case _.topPlaying:case _.topProgress:case _.topRateChange:case _.topReset:case _.topSeeked:case _.topSeeking:case _.topStalled:case _.topSubmit:case _.topSuspend:case _.topTimeUpdate:case _.topVolumeChange:case _.topWaiting:a=c;break;case _.topKeyPress:if(0===b(n))return null;case _.topKeyDown:case _.topKeyUp:a=h;break;case _.topBlur:case _.topFocus:a=p;break;case _.topClick:if(2===n.button)return null;case _.topContextMenu:case _.topDoubleClick:case _.topMouseDown:case _.topMouseMove:case _.topMouseOut:case _.topMouseOver:case _.topMouseUp:a=d;break;case _.topDrag:case _.topDragEnd:case _.topDragEnter:case _.topDragExit:case _.topDragLeave:case _.topDragOver:case _.topDragStart:case _.topDrop:a=f;break;case _.topTouchCancel:case _.topTouchEnd:case _.topTouchMove:case _.topTouchStart:a=g;break;case _.topAnimationEnd:case _.topAnimationIteration:case _.topAnimationStart:a=u;break;case _.topTransitionEnd:a=m;break;case _.topScroll:a=y;break;case _.topWheel:a=v;break;case _.topCopy:case _.topCut:case _.topPaste:a=l}a?void 0:r("86",t);var x=a.getPooled(i,e,n,o);return s.accumulateTwoPhaseDispatches(x),x},didPutListener:function(t,e,n){if(e===I){var r=t._rootNodeID,o=a.getNodeFromInstance(t);M[r]||(M[r]=i.listen(o,"click",x))}},willDeleteListener:function(t,e){if(e===I){var n=t._rootNodeID;M[n].remove(),delete M[n]}}};t.exports=C},function(t,e,n){"use strict";function r(t,e,n,r){return o.call(this,t,e,n,r)}var o=n(12),i={animationName:null,elapsedTime:null,pseudoElement:null};o.augmentClass(r,i),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return o.call(this,t,e,n,r)}var o=n(12),i={clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}};o.augmentClass(r,i),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return o.call(this,t,e,n,r)}var o=n(12),i={data:null};o.augmentClass(r,i),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return o.call(this,t,e,n,r)}var o=n(28),i={dataTransfer:null};o.augmentClass(r,i),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return o.call(this,t,e,n,r)}var o=n(22),i={relatedTarget:null};o.augmentClass(r,i),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return o.call(this,t,e,n,r)}var o=n(12),i={data:null};o.augmentClass(r,i),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return o.call(this,t,e,n,r)}var o=n(22),i=n(43),s=n(167),a=n(44),u={key:s,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:a,charCode:function(t){return"keypress"===t.type?i(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?i(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}};o.augmentClass(r,u),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return o.call(this,t,e,n,r)}var o=n(22),i=n(44),s={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:i};o.augmentClass(r,s),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return o.call(this,t,e,n,r)}var o=n(12),i={propertyName:null,elapsedTime:null,pseudoElement:null};o.augmentClass(r,i),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return o.call(this,t,e,n,r)}var o=n(28),i={deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null};o.augmentClass(r,i),t.exports=r},function(t,e){"use strict";function n(t){for(var e=1,n=0,o=0,i=t.length,s=i&-4;o<s;){for(var a=Math.min(o+4096,s);o<a;o+=4)n+=(e+=t.charCodeAt(o))+(e+=t.charCodeAt(o+1))+(e+=t.charCodeAt(o+2))+(e+=t.charCodeAt(o+3));e%=r,n%=r}for(;o<i;o++)n+=e+=t.charCodeAt(o);return e%=r,n%=r,e|n<<16}var r=65521;t.exports=n},function(t,e,n){"use strict";function r(t,e,n,r,a,u){for(var l in t)if(t.hasOwnProperty(l)){var c;try{"function"!=typeof t[l]?o("84",r||"React class",i[n],l):void 0,c=t[l](e,l,r,n)}catch(p){c=p}if(c instanceof Error&&!(c.message in s)){s[c.message]=!0}}}var o=n(2),i=n(39),s=(n(1),n(3),{});t.exports=r},function(t,e,n){"use strict";function r(t,e,n){var r=null==e||"boolean"==typeof e||""===e;if(r)return"";var o=isNaN(e);if(o||0===e||i.hasOwnProperty(t)&&i[t])return""+e;if("string"==typeof e){e=e.trim()}return e+"px"}var o=n(55),i=(n(3),o.isUnitlessNumber);t.exports=r},function(t,e,n){"use strict";function r(t){if(null==t)return null;if(1===t.nodeType)return t;var e=s.get(t);return e?(e=a(e),e?i.getNodeFromInstance(e):null):void("function"==typeof t.render?o("44"):o("45",Object.keys(t)))}var o=n(2),i=(n(15),n(5)),s=n(21),a=n(78);n(1),n(3);t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){if(t&&"object"==typeof t){var o=t,i=void 0===o[n];i&&null!=e&&(o[n]=e)}}function o(t,e){if(null==t)return t;var n={};return i(t,r,n),n}var i=(n(35),n(48));n(3);t.exports=o},function(t,e,n){"use strict";function r(t){if(t.key){var e=i[t.key]||t.key;if("Unidentified"!==e)return e}if("keypress"===t.type){var n=o(t);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===t.type||"keyup"===t.type?s[t.keyCode]||"Unidentified":""}var o=n(43),i={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},s={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=r},function(t,e){"use strict";function n(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function r(t){for(;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}}function o(t,e){for(var o=n(t),i=0,s=0;o;){if(3===o.nodeType){if(s=i+o.textContent.length,i<=e&&s>=e)return{node:o,offset:e-i};i=s}o=n(r(o))}}t.exports=o},function(t,e,n){"use strict";function r(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n["ms"+t]="MS"+e,n["O"+t]="o"+e.toLowerCase(),n}function o(t){if(a[t])return a[t];if(!s[t])return t;var e=s[t];for(var n in e)if(e.hasOwnProperty(n)&&n in u)return a[t]=e[n];return""}var i=n(6),s={animationend:r("Animation","AnimationEnd"),animationiteration:r("Animation","AnimationIteration"),animationstart:r("Animation","AnimationStart"),transitionend:r("Transition","TransitionEnd")},a={},u={};i.canUseDOM&&(u=document.createElement("div").style,"AnimationEvent"in window||(delete s.animationend.animation,delete s.animationiteration.animation,delete s.animationstart.animation),"TransitionEvent"in window||delete s.transitionend.transition),t.exports=o},function(t,e,n){"use strict";function r(t){return i.isValidElement(t)?void 0:o("23"),t}var o=n(2),i=n(9);n(1);t.exports=r},function(t,e,n){"use strict";function r(t){return'"'+o(t)+'"'}var o=n(29);t.exports=r},function(t,e,n){"use strict";var r=n(68);t.exports=r.renderSubtreeIntoContainer}]));
//# sourceMappingURL=main.639669dcddf1483625f2.js.map